{"version":3,"file":"jsoneditor-react.min.js","sources":["../node_modules/jsoneditor/dist/jsoneditor-minimalist.js","../src/Editor.jsx"],"sourcesContent":["/*!\n * jsoneditor.js\n *\n * @brief\n * JSONEditor is a web-based tool to view, edit, format, and validate JSON.\n * It has various modes such as a tree editor, a code editor, and a plain text\n * editor.\n *\n * Supported browsers: Chrome, Firefox, Safari, Opera, Internet Explorer 8+\n *\n * @license\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n * use this file except in compliance with the License. You may obtain a copy\n * of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n *\n * Copyright (c) 2011-2019 Jos de Jong, http://jsoneditoronline.org\n *\n * @author  Jos de Jong, <wjosdejong@gmail.com>\n * @version 6.2.0\n * @date    2019-07-28\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"JSONEditor\"] = factory();\n\telse\n\t\troot[\"JSONEditor\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 16);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(10);\nvar naturalSort = __webpack_require__(11);\nvar jsonlint = __webpack_require__(23);\nvar jsonMap = __webpack_require__(24);\nvar translate = __webpack_require__(1).translate;\n\nvar MAX_ITEMS_FIELDS_COLLECTION = 10000;\n\n/**\n * Parse JSON using the parser built-in in the browser.\n * On exception, the jsonString is validated and a detailed error is thrown.\n * @param {String} jsonString\n * @return {JSON} json\n */\nexports.parse = function parse(jsonString) {\n  try {\n    return JSON.parse(jsonString);\n  }\n  catch (err) {\n    // try to throw a more detailed error message using validate\n    exports.validate(jsonString);\n\n    // rethrow the original error\n    throw err;\n  }\n};\n\n/**\n * Repair a JSON-like string containing. For example changes JavaScript\n * notation into JSON notation.\n * This function for example changes a string like \"{a: 2, 'b': {c: 'd'}\"\n * into '{\"a\": 2, \"b\": {\"c\": \"d\"}'\n * @param {string} jsString\n * @returns {string} json\n */\nexports.repair = function (jsString) {\n  // TODO: refactor this function, it's too large and complicated now\n\n  // escape all single and double quotes inside strings\n  var chars = [];\n  var i = 0;\n\n  //If JSON starts with a function (characters/digits/\"_-\"), remove this function.\n  //This is useful for \"stripping\" JSONP objects to become JSON\n  //For example: /* some comment */ function_12321321 ( [{\"a\":\"b\"}] ); => [{\"a\":\"b\"}]\n  var match = jsString.match(/^\\s*(\\/\\*(.|[\\r\\n])*?\\*\\/)?\\s*[\\da-zA-Z_$]+\\s*\\(([\\s\\S]*)\\)\\s*;?\\s*$/);\n  if (match) {\n    jsString = match[3];\n  }\n\n  var controlChars = {\n    '\\b': '\\\\b',\n    '\\f': '\\\\f',\n    '\\n': '\\\\n',\n    '\\r': '\\\\r',\n    '\\t': '\\\\t'\n  };\n\n  var quote = '\\'';\n  var quoteDbl = '\"';\n  var quoteLeft = '\\u2018';\n  var quoteRight = '\\u2019';\n  var quoteDblLeft = '\\u201C';\n  var quoteDblRight = '\\u201D';\n  var graveAccent = '\\u0060';\n  var acuteAccent = '\\u00B4';\n\n  // helper functions to get the current/prev/next character\n  function curr () { return jsString.charAt(i);     }\n  function next()  { return jsString.charAt(i + 1); }\n  function prev()  { return jsString.charAt(i - 1); }\n\n  function isWhiteSpace(c) {\n    return c === ' ' || c === '\\n' || c === '\\r' || c === '\\t';\n  }\n\n  // get the last parsed non-whitespace character\n  function lastNonWhitespace () {\n    var p = chars.length - 1;\n\n    while (p >= 0) {\n      var pp = chars[p];\n      if (!isWhiteSpace(pp)) {\n        return pp;\n      }\n      p--;\n    }\n\n    return '';\n  }\n\n  // get at the first next non-white space character\n  function nextNonWhiteSpace() {\n    var iNext = i + 1;\n    while (iNext < jsString.length && isWhiteSpace(jsString[iNext])) {\n      iNext++;\n    }\n\n    return jsString[iNext];\n  }\n\n  // skip a block comment '/* ... */'\n  function skipBlockComment () {\n    i += 2;\n    while (i < jsString.length && (curr() !== '*' || next() !== '/')) {\n      i++;\n    }\n    i += 2;\n  }\n\n  // skip a comment '// ...'\n  function skipComment () {\n    i += 2;\n    while (i < jsString.length && (curr() !== '\\n')) {\n      i++;\n    }\n  }\n\n  /**\n   * parse single or double quoted string. Returns the parsed string\n   * @param {string} endQuote\n   * @return {string}\n   */\n  function parseString(endQuote) {\n    var string = '';\n\n    string += '\"';\n    i++;\n    var c = curr();\n    while (i < jsString.length && c !== endQuote) {\n      if (c === '\"' && prev() !== '\\\\') {\n        // unescaped double quote, escape it\n        string += '\\\\\"';\n      }\n      else if (controlChars.hasOwnProperty(c)) {\n        // replace unescaped control characters with escaped ones\n        string += controlChars[c]\n      }\n      else if (c === '\\\\') {\n        // remove the escape character when followed by a single quote ', not needed\n        i++;\n        c = curr();\n        if (c !== '\\'') {\n          string += '\\\\';\n        }\n        string += c;\n      }\n      else {\n        // regular character\n        string += c;\n      }\n\n      i++;\n      c = curr();\n    }\n    if (c === endQuote) {\n      string += '\"';\n      i++;\n    }\n\n    return string;\n  }\n\n  // parse an unquoted key\n  function parseKey() {\n    var specialValues = ['null', 'true', 'false'];\n    var key = '';\n    var c = curr();\n\n    var regexp = /[a-zA-Z_$\\d]/; // letter, number, underscore, dollar character\n    while (regexp.test(c)) {\n      key += c;\n      i++;\n      c = curr();\n    }\n\n    if (specialValues.indexOf(key) === -1) {\n      return '\"' + key + '\"';\n    }\n    else {\n      return key;\n    }\n  }\n\n  function parseMongoDataType () {\n    var c = curr();\n    var value;\n    var dataType = '';\n    while (/[a-zA-Z_$]/.test(c)) {\n      dataType += c\n      i++;\n      c = curr();\n    }\n\n    if (dataType.length > 0 && c === '(') {\n      // This is an MongoDB data type like {\"_id\": ObjectId(\"123\")}\n      i++;\n      c = curr();\n      if (c === '\"') {\n        // a data type containing a string, like ISODate(\"2012-12-19T06:01:17.171Z\")\n        value = parseString(c);\n        c = curr();\n      }\n      else {\n        // a data type containing a value, like 'NumberLong(2)'\n        value = '';\n        while(c !== ')' && c !== '') {\n          value += c;\n          i++;\n          c = curr();\n        }\n      }\n\n      if (c === ')') {\n        // skip the closing bracket at the end\n        i++;\n\n        // return the value (strip the data type object)\n        return value;\n      }\n      else {\n        // huh? that's unexpected. don't touch it\n        return dataType + '(' + value + c;\n      }\n    }\n    else {\n      // hm, no Mongo data type after all\n      return dataType;\n    }\n  }\n\n  function isSpecialWhiteSpace (c) {\n    return (\n        c === '\\u00A0' ||\n        (c >= '\\u2000' && c <= '\\u200A') ||\n        c === '\\u202F' ||\n        c === '\\u205F' ||\n        c === '\\u3000')\n  }\n\n  while(i < jsString.length) {\n    var c = curr();\n\n    if (c === '/' && next() === '*') {\n      skipBlockComment();\n    }\n    else if (c === '/' && next() === '/') {\n      skipComment();\n    }\n    else if (isSpecialWhiteSpace(c)) {\n      // special white spaces (like non breaking space)\n      chars.push(' ');\n      i++\n    }\n    else if (c === quote) {\n      chars.push(parseString(c));\n    }\n    else if (c === quoteDbl) {\n      chars.push(parseString(quoteDbl));\n    }\n    else if (c === graveAccent) {\n      chars.push(parseString(acuteAccent));\n    }\n    else if (c === quoteLeft) {\n      chars.push(parseString(quoteRight));\n    }\n    else if (c === quoteDblLeft) {\n      chars.push(parseString(quoteDblRight));\n    }\n    else if (c === ',' && [']', '}'].indexOf(nextNonWhiteSpace()) !== -1) {\n      // skip trailing commas\n      i++;\n    }\n    else if (/[a-zA-Z_$]/.test(c) && ['{', ','].indexOf(lastNonWhitespace()) !== -1) {\n      // an unquoted object key (like a in '{a:2}')\n      chars.push(parseKey());\n    }\n    else {\n      if (/[a-zA-Z_$]/.test(c)) {\n        chars.push(parseMongoDataType());\n      }\n      else {\n        chars.push(c);\n        i++;\n      }\n    }\n  }\n\n  return chars.join('');\n};\n\n/**\n * Escape unicode characters.\n * For example input '\\u2661' (length 1) will output '\\\\u2661' (length 5).\n * @param {string} text\n * @return {string}\n */\nexports.escapeUnicodeChars = function (text) {\n  // see https://www.wikiwand.com/en/UTF-16\n  // note: we leave surrogate pairs as two individual chars,\n  // as JSON doesn't interpret them as a single unicode char.\n  return text.replace(/[\\u007F-\\uFFFF]/g, function(c) {\n    return '\\\\u'+('0000' + c.charCodeAt(0).toString(16)).slice(-4);\n  })\n};\n\n/**\n * Validate a string containing a JSON object\n * This method uses JSONLint to validate the String. If JSONLint is not\n * available, the built-in JSON parser of the browser is used.\n * @param {String} jsonString   String with an (invalid) JSON object\n * @throws Error\n */\nexports.validate = function validate(jsonString) {\n  if (typeof(jsonlint) != 'undefined') {\n    jsonlint.parse(jsonString);\n  }\n  else {\n    JSON.parse(jsonString);\n  }\n};\n\n/**\n * Extend object a with the properties of object b\n * @param {Object} a\n * @param {Object} b\n * @return {Object} a\n */\nexports.extend = function extend(a, b) {\n  for (var prop in b) {\n    if (b.hasOwnProperty(prop)) {\n      a[prop] = b[prop];\n    }\n  }\n  return a;\n};\n\n/**\n * Remove all properties from object a\n * @param {Object} a\n * @return {Object} a\n */\nexports.clear = function clear (a) {\n  for (var prop in a) {\n    if (a.hasOwnProperty(prop)) {\n      delete a[prop];\n    }\n  }\n  return a;\n};\n\n/**\n * Get the type of an object\n * @param {*} object\n * @return {String} type\n */\nexports.type = function type (object) {\n  if (object === null) {\n    return 'null';\n  }\n  if (object === undefined) {\n    return 'undefined';\n  }\n  if ((object instanceof Number) || (typeof object === 'number')) {\n    return 'number';\n  }\n  if ((object instanceof String) || (typeof object === 'string')) {\n    return 'string';\n  }\n  if ((object instanceof Boolean) || (typeof object === 'boolean')) {\n    return 'boolean';\n  }\n  if ((object instanceof RegExp) || (typeof object === 'regexp')) {\n    return 'regexp';\n  }\n  if (exports.isArray(object)) {\n    return 'array';\n  }\n\n  return 'object';\n};\n\n/**\n * Test whether a text contains a url (matches when a string starts\n * with 'http://*' or 'https://*' and has no whitespace characters)\n * @param {String} text\n */\nvar isUrlRegex = /^https?:\\/\\/\\S+$/;\nexports.isUrl = function isUrl (text) {\n  return (typeof text == 'string' || text instanceof String) &&\n      isUrlRegex.test(text);\n};\n\n/**\n * Tes whether given object is an Array\n * @param {*} obj\n * @returns {boolean} returns true when obj is an array\n */\nexports.isArray = function (obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n};\n\n/**\n * Retrieve the absolute left value of a DOM element\n * @param {Element} elem    A dom element, for example a div\n * @return {Number} left    The absolute left position of this element\n *                          in the browser page.\n */\nexports.getAbsoluteLeft = function getAbsoluteLeft(elem) {\n  var rect = elem.getBoundingClientRect();\n  return rect.left + window.pageXOffset || document.scrollLeft || 0;\n};\n\n/**\n * Retrieve the absolute top value of a DOM element\n * @param {Element} elem    A dom element, for example a div\n * @return {Number} top     The absolute top position of this element\n *                          in the browser page.\n */\nexports.getAbsoluteTop = function getAbsoluteTop(elem) {\n  var rect = elem.getBoundingClientRect();\n  return rect.top + window.pageYOffset || document.scrollTop || 0;\n};\n\n/**\n * add a className to the given elements style\n * @param {Element} elem\n * @param {String} className\n */\nexports.addClassName = function addClassName(elem, className) {\n  var classes = elem.className.split(' ');\n  if (classes.indexOf(className) == -1) {\n    classes.push(className); // add the class to the array\n    elem.className = classes.join(' ');\n  }\n};\n\n/**\n * remove all classes from the given elements style\n * @param {Element} elem \n */\nexports.removeAllClassNames = function removeAllClassNames(elem) {\n    elem.className = \"\";\n};\n\n/**\n * add a className to the given elements style\n * @param {Element} elem\n * @param {String} className\n */\nexports.removeClassName = function removeClassName(elem, className) {\n  var classes = elem.className.split(' ');\n  var index = classes.indexOf(className);\n  if (index != -1) {\n    classes.splice(index, 1); // remove the class from the array\n    elem.className = classes.join(' ');\n  }\n};\n\n/**\n * Strip the formatting from the contents of a div\n * the formatting from the div itself is not stripped, only from its childs.\n * @param {Element} divElement\n */\nexports.stripFormatting = function stripFormatting(divElement) {\n  var childs = divElement.childNodes;\n  for (var i = 0, iMax = childs.length; i < iMax; i++) {\n    var child = childs[i];\n\n    // remove the style\n    if (child.style) {\n      // TODO: test if child.attributes does contain style\n      child.removeAttribute('style');\n    }\n\n    // remove all attributes\n    var attributes = child.attributes;\n    if (attributes) {\n      for (var j = attributes.length - 1; j >= 0; j--) {\n        var attribute = attributes[j];\n        if (attribute.specified === true) {\n          child.removeAttribute(attribute.name);\n        }\n      }\n    }\n\n    // recursively strip childs\n    exports.stripFormatting(child);\n  }\n};\n\n/**\n * Set focus to the end of an editable div\n * code from Nico Burns\n * http://stackoverflow.com/users/140293/nico-burns\n * http://stackoverflow.com/questions/1125292/how-to-move-cursor-to-end-of-contenteditable-entity\n * @param {Element} contentEditableElement   A content editable div\n */\nexports.setEndOfContentEditable = function setEndOfContentEditable(contentEditableElement) {\n  var range, selection;\n  if(document.createRange) {\n    range = document.createRange();//Create a range (a range is a like the selection but invisible)\n    range.selectNodeContents(contentEditableElement);//Select the entire contents of the element with the range\n    range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start\n    selection = window.getSelection();//get the selection object (allows you to change selection)\n    selection.removeAllRanges();//remove any selections already made\n    selection.addRange(range);//make the range you have just created the visible selection\n  }\n};\n\n/**\n * Select all text of a content editable div.\n * http://stackoverflow.com/a/3806004/1262753\n * @param {Element} contentEditableElement   A content editable div\n */\nexports.selectContentEditable = function selectContentEditable(contentEditableElement) {\n  if (!contentEditableElement || contentEditableElement.nodeName != 'DIV') {\n    return;\n  }\n\n  var sel, range;\n  if (window.getSelection && document.createRange) {\n    range = document.createRange();\n    range.selectNodeContents(contentEditableElement);\n    sel = window.getSelection();\n    sel.removeAllRanges();\n    sel.addRange(range);\n  }\n};\n\n/**\n * Get text selection\n * http://stackoverflow.com/questions/4687808/contenteditable-selected-text-save-and-restore\n * @return {Range | TextRange | null} range\n */\nexports.getSelection = function getSelection() {\n  if (window.getSelection) {\n    var sel = window.getSelection();\n    if (sel.getRangeAt && sel.rangeCount) {\n      return sel.getRangeAt(0);\n    }\n  }\n  return null;\n};\n\n/**\n * Set text selection\n * http://stackoverflow.com/questions/4687808/contenteditable-selected-text-save-and-restore\n * @param {Range | TextRange | null} range\n */\nexports.setSelection = function setSelection(range) {\n  if (range) {\n    if (window.getSelection) {\n      var sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n  }\n};\n\n/**\n * Get selected text range\n * @return {Object} params  object containing parameters:\n *                              {Number}  startOffset\n *                              {Number}  endOffset\n *                              {Element} container  HTML element holding the\n *                                                   selected text element\n *                          Returns null if no text selection is found\n */\nexports.getSelectionOffset = function getSelectionOffset() {\n  var range = exports.getSelection();\n\n  if (range && 'startOffset' in range && 'endOffset' in range &&\n      range.startContainer && (range.startContainer == range.endContainer)) {\n    return {\n      startOffset: range.startOffset,\n      endOffset: range.endOffset,\n      container: range.startContainer.parentNode\n    };\n  }\n\n  return null;\n};\n\n/**\n * Set selected text range in given element\n * @param {Object} params   An object containing:\n *                              {Element} container\n *                              {Number} startOffset\n *                              {Number} endOffset\n */\nexports.setSelectionOffset = function setSelectionOffset(params) {\n  if (document.createRange && window.getSelection) {\n    var selection = window.getSelection();\n    if(selection) {\n      var range = document.createRange();\n\n      if (!params.container.firstChild) {\n        params.container.appendChild(document.createTextNode(''));\n      }\n\n      // TODO: do not suppose that the first child of the container is a textnode,\n      //       but recursively find the textnodes\n      range.setStart(params.container.firstChild, params.startOffset);\n      range.setEnd(params.container.firstChild, params.endOffset);\n\n      exports.setSelection(range);\n    }\n  }\n};\n\n/**\n * Get the inner text of an HTML element (for example a div element)\n * @param {Element} element\n * @param {Object} [buffer]\n * @return {String} innerText\n */\nexports.getInnerText = function getInnerText(element, buffer) {\n  var first = (buffer == undefined);\n  if (first) {\n    buffer = {\n      'text': '',\n      'flush': function () {\n        var text = this.text;\n        this.text = '';\n        return text;\n      },\n      'set': function (text) {\n        this.text = text;\n      }\n    };\n  }\n\n  // text node\n  if (element.nodeValue) {\n    return buffer.flush() + element.nodeValue;\n  }\n\n  // divs or other HTML elements\n  if (element.hasChildNodes()) {\n    var childNodes = element.childNodes;\n    var innerText = '';\n\n    for (var i = 0, iMax = childNodes.length; i < iMax; i++) {\n      var child = childNodes[i];\n\n      if (child.nodeName == 'DIV' || child.nodeName == 'P') {\n        var prevChild = childNodes[i - 1];\n        var prevName = prevChild ? prevChild.nodeName : undefined;\n        if (prevName && prevName != 'DIV' && prevName != 'P' && prevName != 'BR') {\n          innerText += '\\n';\n          buffer.flush();\n        }\n        innerText += exports.getInnerText(child, buffer);\n        buffer.set('\\n');\n      }\n      else if (child.nodeName == 'BR') {\n        innerText += buffer.flush();\n        buffer.set('\\n');\n      }\n      else {\n        innerText += exports.getInnerText(child, buffer);\n      }\n    }\n\n    return innerText;\n  }\n  else {\n    if (element.nodeName == 'P' && exports.getInternetExplorerVersion() != -1) {\n      // On Internet Explorer, a <p> with hasChildNodes()==false is\n      // rendered with a new line. Note that a <p> with\n      // hasChildNodes()==true is rendered without a new line\n      // Other browsers always ensure there is a <br> inside the <p>,\n      // and if not, the <p> does not render a new line\n      return buffer.flush();\n    }\n  }\n\n  // br or unknown\n  return '';\n};\n\n/**\n * Test whether an element has the provided parent node somewhere up the node tree.\n * @param {Element} elem\n * @param {Element} parent\n * @return {boolean}\n */\nexports.hasParentNode = function (elem, parent) {\n  var e = elem ? elem.parentNode : undefined;\n\n  while (e) {\n    if (e === parent) {\n      return true;\n    }\n    e = e.parentNode;\n  }\n\n  return false;\n}\n\n/**\n * Returns the version of Internet Explorer or a -1\n * (indicating the use of another browser).\n * Source: http://msdn.microsoft.com/en-us/library/ms537509(v=vs.85).aspx\n * @return {Number} Internet Explorer version, or -1 in case of an other browser\n */\nexports.getInternetExplorerVersion = function getInternetExplorerVersion() {\n  if (_ieVersion == -1) {\n    var rv = -1; // Return value assumes failure.\n    if (typeof navigator !== 'undefined' && navigator.appName == 'Microsoft Internet Explorer') {\n      var ua = navigator.userAgent;\n      var re  = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\n      if (re.exec(ua) != null) {\n        rv = parseFloat( RegExp.$1 );\n      }\n    }\n\n    _ieVersion = rv;\n  }\n\n  return _ieVersion;\n};\n\n/**\n * Test whether the current browser is Firefox\n * @returns {boolean} isFirefox\n */\nexports.isFirefox = function isFirefox () {\n  return (typeof navigator !== 'undefined' && navigator.userAgent.indexOf(\"Firefox\") !== -1);\n};\n\n/**\n * cached internet explorer version\n * @type {Number}\n * @private\n */\nvar _ieVersion = -1;\n\n/**\n * Add and event listener. Works for all browsers\n * @param {Element}     element    An html element\n * @param {string}      action     The action, for example \"click\",\n *                                 without the prefix \"on\"\n * @param {function}    listener   The callback function to be executed\n * @param {boolean}     [useCapture] false by default\n * @return {function}   the created event listener\n */\nexports.addEventListener = function addEventListener(element, action, listener, useCapture) {\n  if (element.addEventListener) {\n    if (useCapture === undefined)\n      useCapture = false;\n\n    if (action === \"mousewheel\" && exports.isFirefox()) {\n      action = \"DOMMouseScroll\";  // For Firefox\n    }\n\n    element.addEventListener(action, listener, useCapture);\n    return listener;\n  } else if (element.attachEvent) {\n    // Old IE browsers\n    var f = function () {\n      return listener.call(element, window.event);\n    };\n    element.attachEvent(\"on\" + action, f);\n    return f;\n  }\n};\n\n/**\n * Remove an event listener from an element\n * @param {Element}  element   An html dom element\n * @param {string}   action    The name of the event, for example \"mousedown\"\n * @param {function} listener  The listener function\n * @param {boolean}  [useCapture]   false by default\n */\nexports.removeEventListener = function removeEventListener(element, action, listener, useCapture) {\n  if (element.removeEventListener) {\n    if (useCapture === undefined)\n      useCapture = false;\n\n    if (action === \"mousewheel\" && exports.isFirefox()) {\n      action = \"DOMMouseScroll\";  // For Firefox\n    }\n\n    element.removeEventListener(action, listener, useCapture);\n  } else if (element.detachEvent) {\n    // Old IE browsers\n    element.detachEvent(\"on\" + action, listener);\n  }\n};\n\n/**\n * Test if an element is a child of a parent element.\n * @param {Element} elem\n * @param {Element} parent\n * @return {boolean} returns true if elem is a child of the parent\n */\nexports.isChildOf = function (elem, parent) {\n  var e = elem.parentNode;\n  while (e) {\n    if (e === parent) {\n      return true;\n    }\n    e = e.parentNode;\n  }\n\n  return false;\n};\n\n/**\n * Parse a JSON path like '.items[3].name' into an array\n * @param {string} jsonPath\n * @return {Array}\n */\nexports.parsePath = function parsePath(jsonPath) {\n  var path = [];\n  var i = 0;\n\n  function parseProperty () {\n    var prop = ''\n    while (jsonPath[i] !== undefined && /[\\w$]/.test(jsonPath[i])) {\n      prop += jsonPath[i];\n      i++;\n    }\n\n    if (prop === '') {\n      throw new Error('Invalid JSON path: property name expected at index ' + i);\n    }\n\n    return prop;\n  }\n\n  function parseIndex (end) {\n    var name = ''\n    while (jsonPath[i] !== undefined && jsonPath[i] !== end) {\n      name += jsonPath[i];\n      i++;\n    }\n\n    if (jsonPath[i] !== end) {\n      throw new Error('Invalid JSON path: unexpected end, character ' + end + ' expected')\n    }\n\n    return name;\n  }\n\n  while (jsonPath[i] !== undefined) {\n    if (jsonPath[i] === '.') {\n      i++;\n      path.push(parseProperty());\n    }\n    else if (jsonPath[i] === '[') {\n      i++;\n\n      if (jsonPath[i] === '\\'' || jsonPath[i] === '\"') {\n        var end = jsonPath[i]\n        i++;\n\n        path.push(parseIndex(end));\n\n        if (jsonPath[i] !== end) {\n          throw new Error('Invalid JSON path: closing quote \\' expected at index ' + i)\n        }\n        i++;\n      }\n      else {\n        var index = parseIndex(']').trim()\n        if (index.length === 0) {\n          throw new Error('Invalid JSON path: array value expected at index ' + i)\n        }\n        // Coerce numeric indices to numbers, but ignore star\n        index = index === '*' ? index : JSON.parse(index);\n        path.push(index);\n      }\n\n      if (jsonPath[i] !== ']') {\n        throw new Error('Invalid JSON path: closing bracket ] expected at index ' + i)\n      }\n      i++;\n    }\n    else {\n      throw new Error('Invalid JSON path: unexpected character \"' + jsonPath[i] + '\" at index ' + i);\n    }\n  }\n\n  return path;\n};\n\n/**\n * Stringify an array with a path in a JSON path like '.items[3].name'\n * @param {Array.<string | number>} path\n * @returns {string}\n */\nexports.stringifyPath = function stringifyPath(path) {\n  return path\n      .map(function (p) {\n        if (typeof p === 'number'){\n          return ('[' + p + ']');\n        } else if(typeof p === 'string' && p.match(/^[A-Za-z0-9_$]+$/)) {\n          return '.' + p;\n        } else {\n          return '[\"' + p + '\"]';\n        }\n      })\n      .join('');\n};\n\n/**\n * Improve the error message of a JSON schema error\n * @param {Object} error\n * @return {Object} The error\n */\nexports.improveSchemaError = function (error) {\n  if (error.keyword === 'enum' && Array.isArray(error.schema)) {\n    var enums = error.schema;\n    if (enums) {\n      enums = enums.map(function (value) {\n        return JSON.stringify(value);\n      });\n\n      if (enums.length > 5) {\n        var more = ['(' + (enums.length - 5) + ' more...)'];\n        enums = enums.slice(0, 5);\n        enums.push(more);\n      }\n      error.message = 'should be equal to one of: ' + enums.join(', ');\n    }\n  }\n\n  if (error.keyword === 'additionalProperties') {\n    error.message = 'should NOT have additional property: ' + error.params.additionalProperty;\n  }\n\n  return error;\n};\n\n/**\n * Test whether something is a Promise\n * @param {*} object\n * @returns {boolean} Returns true when object is a promise, false otherwise\n */\nexports.isPromise = function (object) {\n  return object && typeof object.then === 'function' && typeof object.catch === 'function';\n};\n\n/**\n * Test whether a custom validation error has the correct structure\n * @param {*} validationError The error to be checked.\n * @returns {boolean} Returns true if the structure is ok, false otherwise\n */\nexports.isValidValidationError = function (validationError) {\n  return typeof validationError === 'object' &&\n      Array.isArray(validationError.path) &&\n      typeof validationError.message === 'string';\n};\n\n/**\n * Test whether the child rect fits completely inside the parent rect.\n * @param {ClientRect} parent\n * @param {ClientRect} child\n * @param {number} margin\n */\nexports.insideRect = function (parent, child, margin) {\n  var _margin = margin !== undefined ? margin : 0;\n  return child.left   - _margin >= parent.left\n      && child.right  + _margin <= parent.right\n      && child.top    - _margin >= parent.top\n      && child.bottom + _margin <= parent.bottom;\n};\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds.\n *\n * Source: https://davidwalsh.name/javascript-debounce-function\n *\n * @param {function} func\n * @param {number} wait                 Number in milliseconds\n * @param {boolean} [immediate=false]   If `immediate` is passed, trigger the\n *                                      function on the leading edge, instead\n *                                      of the trailing.\n * @return {function} Return the debounced function\n */\nexports.debounce = function debounce(func, wait, immediate) {\n  var timeout;\n  return function() {\n    var context = this, args = arguments;\n    var later = function() {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n};\n\n/**\n * Determines the difference between two texts.\n * Can only detect one removed or inserted block of characters.\n * @param {string} oldText\n * @param {string} newText\n * @return {{start: number, end: number}} Returns the start and end\n *                                        of the changed part in newText.\n */\nexports.textDiff = function textDiff(oldText, newText) {\n  var len = newText.length;\n  var start = 0;\n  var oldEnd = oldText.length;\n  var newEnd = newText.length;\n\n  while (newText.charAt(start) === oldText.charAt(start)\n  && start < len) {\n    start++;\n  }\n\n  while (newText.charAt(newEnd - 1) === oldText.charAt(oldEnd - 1)\n  && newEnd > start && oldEnd > 0) {\n    newEnd--;\n    oldEnd--;\n  }\n\n  return {start: start, end: newEnd};\n};\n\n\n/**\n * Return an object with the selection range or cursor position (if both have the same value)\n * Support also old browsers (IE8-)\n * Source: http://ourcodeworld.com/articles/read/282/how-to-get-the-current-cursor-position-and-selection-within-a-text-input-or-textarea-in-javascript\n * @param {DOMElement} el A dom element of a textarea or input text.\n * @return {Object} reference Object with 2 properties (start and end) with the identifier of the location of the cursor and selected text.\n **/\nexports.getInputSelection = function(el) {\n  var startIndex = 0, endIndex = 0, normalizedValue, range, textInputRange, len, endRange;\n\n  if (typeof el.selectionStart == \"number\" && typeof el.selectionEnd == \"number\") {\n      startIndex = el.selectionStart;\n      endIndex = el.selectionEnd;\n  } else {\n      range = document.selection.createRange();\n\n      if (range && range.parentElement() == el) {\n          len = el.value.length;\n          normalizedValue = el.value.replace(/\\r\\n/g, \"\\n\");\n\n          // Create a working TextRange that lives only in the input\n          textInputRange = el.createTextRange();\n          textInputRange.moveToBookmark(range.getBookmark());\n\n          // Check if the startIndex and endIndex of the selection are at the very end\n          // of the input, since moveStart/moveEnd doesn't return what we want\n          // in those cases\n          endRange = el.createTextRange();\n          endRange.collapse(false);\n\n          if (textInputRange.compareEndPoints(\"StartToEnd\", endRange) > -1) {\n              startIndex = endIndex = len;\n          } else {\n              startIndex = -textInputRange.moveStart(\"character\", -len);\n              startIndex += normalizedValue.slice(0, startIndex).split(\"\\n\").length - 1;\n\n              if (textInputRange.compareEndPoints(\"EndToEnd\", endRange) > -1) {\n                  endIndex = len;\n              } else {\n                  endIndex = -textInputRange.moveEnd(\"character\", -len);\n                  endIndex += normalizedValue.slice(0, endIndex).split(\"\\n\").length - 1;\n              }\n          }\n      }\n  }\n\n  return {\n      startIndex: startIndex,\n      endIndex: endIndex,\n      start: _positionForIndex(startIndex),\n      end: _positionForIndex(endIndex)\n  };\n\n  /**\n   * Returns textarea row and column position for certain index\n   * @param {Number} index text index\n   * @returns {{row: Number, col: Number}}\n   */\n  function _positionForIndex(index) {\n    var textTillIndex = el.value.substring(0,index);\n    var row = (textTillIndex.match(/\\n/g) || []).length + 1;\n    var col = textTillIndex.length - textTillIndex.lastIndexOf(\"\\n\");\n\n    return {\n      row: row,\n      column: col\n    }\n  }\n}\n\n/**\n * Returns the index for certaion position in text element\n * @param {DOMElement} el A dom element of a textarea or input text.\n * @param {Number} row row value, > 0, if exceeds rows number - last row will be returned\n * @param {Number} column column value, > 0, if exceeds column length - end of column will be returned\n * @returns {Number} index of position in text, -1 if not found\n */\nexports.getIndexForPosition = function(el, row, column) {\n  var text = el.value || '';\n  if (row > 0 && column > 0) {\n    var rows = text.split('\\n', row);\n    row = Math.min(rows.length, row);\n    column = Math.min(rows[row - 1].length, column - 1);\n    var columnCount = (row == 1 ? column : column + 1); // count new line on multiple rows\n    return rows.slice(0, row - 1).join('\\n').length + columnCount;\n  }\n  return -1;\n}\n\n/**\n * Returns location of json paths in certain json string\n * @param {String} text json string\n * @param {Array<String>} paths array of json paths\n * @returns {Array<{path: String, line: Number, row: Number}>}\n */\nexports.getPositionForPath = function(text, paths) {\n  var me = this;\n  var result = [];\n  var jsmap;\n  if (!paths || !paths.length) {\n    return result;\n  }\n  \n  try {\n    jsmap = jsonMap.parse(text);    \n  } catch (err) {\n    return result;\n  }\n\n  paths.forEach(function (path) {\n    var pathArr = me.parsePath(path);\n    var pointerName = pathArr.length ? \"/\" + pathArr.join(\"/\") : \"\";\n    var pointer = jsmap.pointers[pointerName];\n    if (pointer) {\n      result.push({\n        path: path,\n        line: pointer.key ? pointer.key.line : (pointer.value ? pointer.value.line : 0),\n        column: pointer.key ? pointer.key.column : (pointer.value ? pointer.value.column : 0)\n      });\n    }\n  });\n\n  return result;\n  \n}\n\n/**\n * Get the applied color given a color name or code\n * Source: https://stackoverflow.com/questions/6386090/validating-css-color-names/33184805\n * @param {string} color\n * @returns {string | null} returns the color if the input is a valid\n *                   color, and returns null otherwise. Example output:\n *                   'rgba(255,0,0,0.7)' or 'rgb(255,0,0)'\n */\nexports.getColorCSS = function (color) {\n  var ele = document.createElement('div');\n  ele.style.color = color;\n  return ele.style.color.split(/\\s+/).join('').toLowerCase() || null;\n}\n\n/**\n * Test if a string contains a valid color name or code.\n * @param {string} color\n * @returns {boolean} returns true if a valid color, false otherwise\n */\nexports.isValidColor = function (color) {\n  return !!exports.getColorCSS(color);\n}\n\n/**\n * Make a tooltip for a field based on the field's schema.\n * @param {object} schema JSON schema\n * @param {string} [locale] Locale code (for example, zh-CN)\n * @returns {string} Field tooltip, may be empty string if all relevant schema properties are missing\n */\nexports.makeFieldTooltip = function (schema, locale) {\n  if (!schema) {\n    return '';\n  }\n  \n  var tooltip = '';\n  if (schema.title) {\n    tooltip += schema.title;\n  }\n  \n  if (schema.description) {\n    if (tooltip.length > 0) {\n      tooltip += '\\n';\n    }\n    tooltip += schema.description;\n  }\n\n  if (schema.default) {\n    if (tooltip.length > 0) {\n      tooltip += '\\n\\n';\n    }\n    tooltip += translate('default', undefined, locale) + '\\n';\n    tooltip += JSON.stringify(schema.default, null, 2);\n  }\n\n  if (Array.isArray(schema.examples) && schema.examples.length > 0) {\n    if (tooltip.length > 0) {\n      tooltip += '\\n\\n';\n    }\n    tooltip += translate('examples', undefined, locale) + '\\n';\n    schema.examples.forEach(function (example, index) {\n      tooltip += JSON.stringify(example, null, 2);\n      if (index !== schema.examples.length - 1) {\n        tooltip += '\\n';\n      }\n    });\n  }\n\n  return tooltip;\n}\n\n/**\n * Get a nested property from an object.\n * Returns undefined when the property does not exist.\n * @param {Object} object\n * @param {string[]} path\n * @return {*}\n */\nexports.get = function (object, path) {\n  var value = object\n\n  for (var i = 0; i < path.length && value !== undefined && value !== null; i++) {\n    value = value[path[i]]\n  }\n\n  return value;\n}\n\n/**\n * Find a unique name. Suffix the name with ' (copy)', '(copy 2)', etc\n * until a unique name is found\n * @param {string} name\n * @param {Array} existingPropNames    Array with existing prop names\n */\nexports.findUniqueName = function(name, existingPropNames) {\n  var strippedName = name.replace(/ \\(copy( \\d+)?\\)$/, '')\n  var validName = strippedName\n  var i = 1\n\n  while (existingPropNames.indexOf(validName) !== -1) {\n    var copy = 'copy' + (i > 1 ? (' ' + i) : '')\n    validName = strippedName + ' (' + copy + ')'\n    i++\n  }\n\n  return validName\n}\n\n/**\n * Get the child paths of an array\n * @param {JSON} json\n * @param {boolean} [includeObjects=false] If true, object and array paths are returned as well\n * @return {string[]}\n */\nexports.getChildPaths = function (json, includeObjects) {\n  var pathsMap = {};\n\n  function getObjectChildPaths (json, pathsMap, rootPath, includeObjects) {\n    var isValue = !Array.isArray(json) && !exports.isObject(json)\n\n    if (isValue || includeObjects) {\n      pathsMap[rootPath || ''] = true;\n    }\n\n    if (exports.isObject(json)) {\n      Object.keys(json).forEach(function (field) {\n        getObjectChildPaths(json[field], pathsMap, rootPath + '.' + field, includeObjects);\n      });\n    }\n  }\n\n  if (Array.isArray(json)) {\n    var max = Math.min(json.length, MAX_ITEMS_FIELDS_COLLECTION);\n    for (var i = 0; i < max; i++) {\n      var item = json[i];\n      getObjectChildPaths(item, pathsMap, '', includeObjects);\n    }\n  }\n  else {\n    pathsMap[''] = true;\n  }\n\n  return Object.keys(pathsMap).sort();\n}\n\n/**\n * Sort object keys using natural sort\n * @param {Array} array\n * @param {String} [path] JSON pointer\n * @param {'asc' | 'desc'} [direction]\n */\nexports.sort = function (array, path, direction) {\n  var parsedPath = path && path !== '.' ? exports.parsePath(path) : []\n  var sign = direction === 'desc' ? -1: 1\n\n  var sortedArray = array.slice()\n  sortedArray.sort(function (a, b) {\n    var aValue = exports.get(a, parsedPath);\n    var bValue = exports.get(b, parsedPath);\n\n    return sign * (aValue > bValue ? 1 : aValue < bValue ? -1 : 0);\n  })\n\n  return sortedArray;\n}\n\n/**\n * Sort object keys using natural sort\n * @param {Object} object\n * @param {'asc' | 'desc'} [direction]\n */\nexports.sortObjectKeys = function (object, direction) {\n  var sign = (direction === 'desc') ? -1 : 1;\n  var sortedFields = Object.keys(object).sort(function (a, b) {\n    return sign * naturalSort(a, b);\n  });\n\n  var sortedObject = {};\n  sortedFields.forEach(function (field) {\n    sortedObject[field] = object[field];\n  });\n\n  return sortedObject;\n}\n\n/**\n * Cast contents of a string to the correct type.\n * This can be a string, a number, a boolean, etc\n * @param {String} str\n * @return {*} castedStr\n * @private\n */\nexports.parseString = function(str) {\n  var lower = str.toLowerCase();\n  var num = Number(str);          // will nicely fail with '123ab'\n  var numFloat = parseFloat(str); // will nicely fail with '  '\n\n  if (str === '') {\n    return '';\n  }\n  else if (lower === 'null') {\n    return null;\n  }\n  else if (lower === 'true') {\n    return true;\n  }\n  else if (lower === 'false') {\n    return false;\n  }\n  else if (!isNaN(num) && !isNaN(numFloat)) {\n    return num;\n  }\n  else {\n    return str;\n  }\n};\n\n/**\n * Return a human readable document size\n * For example formatSize(7570718) outputs '7.2 MiB'\n * @param {number} size\n * @return {string} Returns a human readable size\n */\nexports.formatSize = function (size) {\n  if (size < 900) {\n    return size.toFixed() + ' B';\n  }\n\n  var KiB = size / 1024;\n  if (KiB < 900) {\n    return KiB.toFixed(1) + ' KiB';\n  }\n\n  var MiB = KiB / 1024;\n  if (MiB < 900) {\n    return MiB.toFixed(1) + ' MiB';\n  }\n\n  var GiB = MiB / 1024;\n  if (GiB < 900) {\n    return GiB.toFixed(1) + ' GiB';\n  }\n\n  var TiB = GiB / 1024;\n  return TiB.toFixed(1) + ' TiB';\n}\n\n/**\n * Limit text to a maximum number of characters\n * @param {string} text\n * @param {number} maxCharacterCount\n * @return {string} Returns the limited text,\n *                  ending with '...' if the max was exceeded\n */\nexports.limitCharacters = function (text, maxCharacterCount) {\n  if (text.length <= maxCharacterCount) {\n    return text;\n  }\n\n  return text.slice(0, maxCharacterCount) + '...';\n}\n\n/**\n * Test whether a value is an Object\n * @param {*} value\n * @return {boolean}\n */\nexports.isObject = function (value) {\n  return typeof value === 'object' && value !== null && !Array.isArray(value)\n}\n\n/**\n * Helper function to test whether an array contains an item\n * @param {Array} array\n * @param {*} item\n * @return {boolean} Returns true if `item` is in `array`, returns false otherwise.\n */\nexports.contains = function (array, item) {\n  return array.indexOf(item) !== -1;\n}\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(10);\n\nvar _locales = ['en', 'pt-BR', 'zh-CN', 'tr'];\nvar _defs = {\n  en: {\n    array: 'Array',\n    auto: 'Auto',\n    appendText: 'Append',\n    appendTitle: 'Append a new field with type \\'auto\\' after this field (Ctrl+Shift+Ins)',\n    appendSubmenuTitle: 'Select the type of the field to be appended',\n    appendTitleAuto: 'Append a new field with type \\'auto\\' (Ctrl+Shift+Ins)',\n    ascending: 'Ascending',\n    ascendingTitle: 'Sort the childs of this ${type} in ascending order',\n    actionsMenu: 'Click to open the actions menu (Ctrl+M)',\n    collapseAll: 'Collapse all fields',\n    descending: 'Descending',\n    descendingTitle: 'Sort the childs of this ${type} in descending order',\n    drag: 'Drag to move this field (Alt+Shift+Arrows)',\n    duplicateKey: 'duplicate key',\n    duplicateText: 'Duplicate',\n    duplicateTitle: 'Duplicate selected fields (Ctrl+D)',\n    duplicateField: 'Duplicate this field (Ctrl+D)',\n    duplicateFieldError: 'Duplicate field name',\n    cannotParseFieldError: 'Cannot parse field into JSON',\n    cannotParseValueError: 'Cannot parse value into JSON',\n    empty: 'empty',\n    expandAll: 'Expand all fields',\n    expandTitle: 'Click to expand/collapse this field (Ctrl+E). \\n' +\n      'Ctrl+Click to expand/collapse including all childs.',\n    insert: 'Insert',\n    insertTitle: 'Insert a new field with type \\'auto\\' before this field (Ctrl+Ins)',\n    insertSub: 'Select the type of the field to be inserted',\n    object: 'Object',\n    ok: 'Ok',\n    redo: 'Redo (Ctrl+Shift+Z)',\n    removeText: 'Remove',\n    removeTitle: 'Remove selected fields (Ctrl+Del)',\n    removeField: 'Remove this field (Ctrl+Del)',\n    selectNode: 'Select a node...',\n    showAll: 'show all',\n    showMore: 'show more',\n    showMoreStatus: 'displaying ${visibleChilds} of ${totalChilds} items.',\n    sort: 'Sort',\n    sortTitle: 'Sort the childs of this ${type}',\n    sortTitleShort: 'Sort contents',\n    sortFieldLabel: 'Field:',\n    sortDirectionLabel: 'Direction:',\n    sortFieldTitle: 'Select the nested field by which to sort the array or object',\n    sortAscending: 'Ascending',\n    sortAscendingTitle: 'Sort the selected field in ascending order',\n    sortDescending: 'Descending',\n    sortDescendingTitle: 'Sort the selected field in descending order',\n    string: 'String',\n    transform: 'Transform',\n    transformTitle: 'Filter, sort, or transform the childs of this ${type}',\n    transformTitleShort: 'Filter, sort, or transform contents',\n    extract: 'Extract',\n    extractTitle: 'Extract this ${type}',\n    transformQueryTitle: 'Enter a JMESPath query',\n    transformWizardLabel: 'Wizard',\n    transformWizardFilter: 'Filter',\n    transformWizardSortBy: 'Sort by',\n    transformWizardSelectFields: 'Select fields',\n    transformQueryLabel: 'Query',\n    transformPreviewLabel: 'Preview',\n    type: 'Type',\n    typeTitle: 'Change the type of this field',\n    openUrl: 'Ctrl+Click or Ctrl+Enter to open url in new window',\n    undo: 'Undo last action (Ctrl+Z)',\n    validationCannotMove: 'Cannot move a field into a child of itself',\n    autoType: 'Field type \"auto\". ' +\n      'The field type is automatically determined from the value ' +\n      'and can be a string, number, boolean, or null.',\n    objectType: 'Field type \"object\". ' +\n      'An object contains an unordered set of key/value pairs.',\n    arrayType: 'Field type \"array\". ' +\n      'An array contains an ordered collection of values.',\n    stringType: 'Field type \"string\". ' +\n      'Field type is not determined from the value, ' +\n      'but always returned as string.',\n    modeCodeText: 'Code',\n    modeCodeTitle: 'Switch to code highlighter',\n    modeFormText: 'Form',\n    modeFormTitle: 'Switch to form editor',\n    modeTextText: 'Text',\n    modeTextTitle: 'Switch to plain text editor',\n    modeTreeText: 'Tree',\n    modeTreeTitle: 'Switch to tree editor',\n    modeViewText: 'View',\n    modeViewTitle: 'Switch to tree view',\n    modePreviewText: 'Preview',\n    modePreviewTitle: 'Switch to preview mode',\n    examples: 'Examples',\n    default: 'Default',\n  },\n  'zh-CN': {\n    array: '',\n    auto: '',\n    appendText: '',\n    appendTitle: 'auto (Ctrl+Shift+Ins)',\n    appendSubmenuTitle: '',\n    appendTitleAuto: 'auto (Ctrl+Shift+Ins)',\n    ascending: '',\n    ascendingTitle: '${type}',\n    actionsMenu: '(Ctrl+M)',\n    collapseAll: '',\n    descending: '',\n    descendingTitle: '${type}',\n    drag: '(Alt+Shift+Arrows)',\n    duplicateKey: '',\n    duplicateText: '',\n    duplicateTitle: '(Ctrl+D)',\n    duplicateField: '(Ctrl+D)',\n    duplicateFieldError: '',\n    cannotParseFieldError: 'JSON',\n    cannotParseValueError: 'JSON',\n    empty: '',\n    expandAll: '',\n    expandTitle: ' / (Ctrl+E). \\n' +\n      'Ctrl+Click / .',\n    insert: '',\n    insertTitle: 'auto (Ctrl+Ins)',\n    insertSub: '',\n    object: '',\n    ok: 'Ok',\n    redo: ' (Ctrl+Shift+Z)',\n    removeText: '',\n    removeTitle: ' (Ctrl+Del)',\n    removeField: ' (Ctrl+Del)',\n    selectNode: '...',\n    showAll: '',\n    showMore: '',\n    showMoreStatus: '${totalChilds}${visibleChilds}.',\n    sort: '',\n    sortTitle: '${type}',\n    sortTitleShort: '',\n    sortFieldLabel: '',\n    sortDirectionLabel: '',\n    sortFieldTitle: '',\n    sortAscending: '',\n    sortAscendingTitle: '',\n    sortDescending: '',\n    sortDescendingTitle: '',\n    string: '',\n    transform: '',\n    transformTitle: '${type}',\n    transformTitleShort: '',\n    transformQueryTitle: 'JMESPath',\n    transformWizardLabel: '',\n    transformWizardFilter: '',\n    transformWizardSortBy: '',\n    transformWizardSelectFields: '',\n    transformQueryLabel: '',\n    transformPreviewLabel: '',\n    type: '',\n    typeTitle: '',\n    openUrl: 'Ctrl+Click  Ctrl+Enter ',\n    undo: ' (Ctrl+Z)',\n    validationCannotMove: '',\n    autoType: ' \"auto\". ' +\n      ' ' +\n      ' stringnumberboolean null.',\n    objectType: ' \"object\". ' +\n      '/.',\n    arrayType: ' \"array\". ' +\n      '.',\n    stringType: ' \"string\". ' +\n      '' +\n      '.',\n    modeCodeText: '',\n    modeCodeTitle: '',\n    modeFormText: '',\n    modeFormTitle: '',\n    modeTextText: '',\n    modeTextTitle: '',\n    modeTreeText: '',\n    modeTreeTitle: '',\n    modeViewText: '',\n    modeViewTitle: '',\n    examples: '',\n    default: '',\n  },\n  'pt-BR': {\n    array: 'Lista',\n    auto: 'Automatico',\n    appendText: 'Adicionar',\n    appendTitle: 'Adicionar novo campo com tipo \\'auto\\' depois deste campo (Ctrl+Shift+Ins)',\n    appendSubmenuTitle: 'Selecione o tipo do campo a ser adicionado',\n    appendTitleAuto: 'Adicionar novo campo com tipo \\'auto\\' (Ctrl+Shift+Ins)',\n    ascending: 'Ascendente',\n    ascendingTitle: 'Organizar filhor do tipo ${type} em crescente',\n    actionsMenu: 'Clique para abrir o menu de aes (Ctrl+M)',\n    collapseAll: 'Fechar todos campos',\n    descending: 'Descendente',\n    descendingTitle: 'Organizar o filhos do tipo ${type} em decrescente',\n    duplicateKey: 'chave duplicada',\n    drag: 'Arraste para mover este campo (Alt+Shift+Arrows)',\n    duplicateText: 'Duplicar',\n    duplicateTitle: 'Duplicar campos selecionados (Ctrl+D)',\n    duplicateField: 'Duplicar este campo (Ctrl+D)',\n    duplicateFieldError: 'Nome do campo duplicado',\n    cannotParseFieldError: 'No  possvel analisar o campo no JSON',\n    cannotParseValueError: 'No  possvel analisar o valor em JSON',\n    empty: 'vazio',\n    expandAll: 'Expandir todos campos',\n    expandTitle: 'Clique para expandir/encolher este campo (Ctrl+E). \\n' +\n      'Ctrl+Click para expandir/encolher incluindo todos os filhos.',\n    insert: 'Inserir',\n    insertTitle: 'Inserir um novo campo do tipo \\'auto\\' antes deste campo (Ctrl+Ins)',\n    insertSub: 'Selecionar o tipo de campo a ser inserido',\n    object: 'Objeto',\n    ok: 'Ok',\n    redo: 'Refazer (Ctrl+Shift+Z)',\n    removeText: 'Remover',\n    removeTitle: 'Remover campos selecionados (Ctrl+Del)',\n    removeField: 'Remover este campo (Ctrl+Del)',\n    // TODO: correctly translate\n    selectNode: 'Select a node...',\n    // TODO: correctly translate\n    showAll: 'mostre tudo',\n    // TODO: correctly translate\n    showMore: 'mostre mais',\n    // TODO: correctly translate\n    showMoreStatus: 'exibindo ${visibleChilds} de ${totalChilds} itens.',\n    sort: 'Organizar',\n    sortTitle: 'Organizar os filhos deste ${type}',\n    // TODO: correctly translate\n    sortTitleShort: 'Organizar os filhos',\n    // TODO: correctly translate\n    sortFieldLabel: 'Field:',\n    // TODO: correctly translate\n    sortDirectionLabel: 'Direction:',\n    // TODO: correctly translate\n    sortFieldTitle: 'Select the nested field by which to sort the array or object',\n    // TODO: correctly translate\n    sortAscending: 'Ascending',\n    // TODO: correctly translate\n    sortAscendingTitle: 'Sort the selected field in ascending order',\n    // TODO: correctly translate\n    sortDescending: 'Descending',\n    // TODO: correctly translate\n    sortDescendingTitle: 'Sort the selected field in descending order',\n    string: 'Texto',\n    // TODO: correctly translate\n    transform: 'Transform',\n    // TODO: correctly translate\n    transformTitle: 'Filter, sort, or transform the childs of this ${type}',\n    // TODO: correctly translate\n    transformTitleShort: 'Filter, sort, or transform contents',\n    // TODO: correctly translate\n    transformQueryTitle: 'Enter a JMESPath query',\n    // TODO: correctly translate\n    transformWizardLabel: 'Wizard',\n    // TODO: correctly translate\n    transformWizardFilter: 'Filter',\n    // TODO: correctly translate\n    transformWizardSortBy: 'Sort by',\n    // TODO: correctly translate\n    transformWizardSelectFields: 'Select fields',\n    // TODO: correctly translate\n    transformQueryLabel: 'Query',\n    // TODO: correctly translate\n    transformPreviewLabel: 'Preview',\n    type: 'Tipo',\n    typeTitle: 'Mudar o tipo deste campo',\n    openUrl: 'Ctrl+Click ou Ctrl+Enter para abrir link em nova janela',\n    undo: 'Desfazer ltimo ao (Ctrl+Z)',\n    validationCannotMove: 'No pode mover um campo como filho dele mesmo',\n    autoType: 'Campo do tipo \"auto\". ' +\n      'O tipo do campo  determinao automaticamente a partir do seu valor ' +\n      'e pode ser texto, nmero, verdade/falso ou nulo.',\n    objectType: 'Campo do tipo \"objeto\". ' +\n      'Um objeto contm uma lista de pares com chave e valor.',\n    arrayType: 'Campo do tipo \"lista\". ' +\n      'Uma lista contem uma coleo de valores ordenados.',\n    stringType: 'Campo do tipo \"string\". ' +\n      'Campo do tipo nao  determinado atravs do seu valor, ' +\n      'mas sempre retornara um texto.',\n    examples: 'Exemplos',\n    default: 'Revelia',\n  },\n  tr: {\n    array: 'Dizin',\n    auto: 'Otomatik',\n    appendText: 'Ekle',\n    appendTitle: 'Bu alann altna \\'otomatik\\' tipinde yeni bir alan ekle (Ctrl+Shift+Ins)',\n    appendSubmenuTitle: 'Eklenecek alann tipini se',\n    appendTitleAuto: '\\'Otomatik\\' tipinde yeni bir alan ekle (Ctrl+Shift+Ins)',\n    ascending: 'Artan',\n    ascendingTitle: '${type}\\'n alt tiplerini artan dzende srala',\n    actionsMenu: 'Aksiyon mensn amak iin tklayn (Ctrl+M)',\n    collapseAll: 'Tm alanlar kapat',\n    descending: 'Azalan',\n    descendingTitle: '${type}\\'n alt tiplerini azalan dzende srala',\n    drag: 'Bu alan tamak iin srkleyin (Alt+Shift+Arrows)',\n    duplicateKey: 'Var olan anahtar',\n    duplicateText: 'Aaya kopyala',\n    duplicateTitle: 'Seili alanlardan bir daha olutur (Ctrl+D)',\n    duplicateField: 'Bu alandan bir daha olutur (Ctrl+D)',\n    duplicateFieldError: 'Duplicate field name',\n    cannotParseFieldError: 'Alan JSON\\'a ayrtrlamyor',\n    cannotParseValueError: 'JSON\\'a deer ayrtrlamyor',\n    empty: 'bo',\n    expandAll: 'Tm alanlar a',\n    expandTitle: 'Bu alan amak/kapatmak iin tkla (Ctrl+E). \\n' +\n      'Alt alanlarda dahil tm alanlar amak iin Ctrl+Click ',\n    insert: 'Ekle',\n    insertTitle: 'Bu alann stne \\'otomatik\\' tipinde yeni bir alan ekle (Ctrl+Ins)',\n    insertSub: 'Araya eklenecek alann tipini se',\n    object: 'Nesne',\n    ok: 'Tamam',\n    redo: 'Yeniden yap (Ctrl+Shift+Z)',\n    removeText: 'Kaldr',\n    removeTitle: 'Seilen alanlar kaldr (Ctrl+Del)',\n    removeField: 'Bu alan kaldr (Ctrl+Del)',\n    selectNode: 'Bir nesne se...',\n    showAll: 'tmn gster',\n    showMore: 'daha fazla gster',\n    showMoreStatus: '${totalChilds} alann ${visibleChilds} alt alanlar gsteriliyor',\n    sort: 'Srala',\n    sortTitle: '${type}\\'n alt alanlarn srala',\n    sortTitleShort: 'erikleri srala',\n    sortFieldLabel: 'Alan:',\n    sortDirectionLabel: 'Yn:',\n    sortFieldTitle: 'Diziyi veya nesneyi sralamak iin i ie gemi alan sein',\n    sortAscending: 'Artan',\n    sortAscendingTitle: 'Seili alan artan dzende srala',\n    sortDescending: 'Azalan',\n    sortDescendingTitle: 'Seili alan azalan dzende srala',\n    string: 'Karakter Dizisi',\n    transform: 'Dntr',\n    transformTitle: '${type}\\'n alt alanlarn filtrele, srala veya dntr',\n    transformTitleShort: 'erikleri filterele, srala veya dntr',\n    transformQueryTitle: 'JMESPath sorgusu gir',\n    transformWizardLabel: 'Sihirbaz',\n    transformWizardFilter: 'Filtre',\n    transformWizardSortBy: 'Srala',\n    transformWizardSelectFields: 'Alanlar se',\n    transformQueryLabel: 'Sorgu',\n    transformPreviewLabel: 'nizleme',\n    type: 'Tip',\n    typeTitle: 'Bu alann tipini deitir',\n    openUrl: 'URL\\'i yeni bir pencerede amak iin Ctrl+Click veya Ctrl+Enter',\n    undo: 'Son deiiklii geri al (Ctrl+Z)',\n    validationCannotMove: 'Alt alan olarak tanamyor',\n    autoType: 'Alan tipi \"otomatik\". ' +\n      'Alan tr otomatik olarak deerden belirlenir' +\n      've bir dize, say, boolean veya null olabilir.',\n    objectType: 'Alan tipi \"nesne\". ' +\n      'Bir nesne, sralanmam bir anahtar / deer ifti kmesi ierir.',\n    arrayType: 'Alan tipi \"dizi\". ' +\n      'Bir dizi, dzenli deerler koleksiyonu ierir.',\n    stringType: 'Alan tipi \"karakter dizisi\". ' +\n      'Alan tr deerden belirlenmez,' +\n      'ancak her zaman karakter dizisi olarak dndrlr.',\n    modeCodeText: 'Kod',\n    modeCodeTitle: 'Kod vurgulaycya ge',\n    modeFormText: 'Form',\n    modeFormTitle: 'Form dzenleyiciye ge',\n    modeTextText: 'Metin',\n    modeTextTitle: 'Dz metin dzenleyiciye ge',\n    modeTreeText: 'Aa',\n    modeTreeTitle: 'Aa dzenleyiciye ge',\n    modeViewText: 'Grnm',\n    modeViewTitle: 'Aa grnmne ge',\n    examples: 'rnekler',\n    default: 'Varsaylan',\n  }\n};\n\nvar _defaultLang = 'en';\nvar _lang;\nvar userLang = typeof navigator !== 'undefined' ?\n  navigator.language || navigator.userLanguage :\n  undefined;\n_lang = _locales.find(function (l) {\n  return l === userLang;\n});\nif (!_lang) {\n  _lang = _defaultLang;\n}\n\nmodule.exports = {\n  // supported locales\n  _locales: _locales,\n  _defs: _defs,\n  _lang: _lang,\n  setLanguage: function (lang) {\n    if (!lang) {\n      return;\n    }\n    var langFound = _locales.find(function (l) {\n      return l === lang;\n    });\n    if (langFound) {\n      _lang = langFound;\n    } else {\n      console.error('Language not found');\n    }\n  },\n  setLanguages: function (languages) {\n    if (!languages) {\n      return;\n    }\n    for (var key in languages) {\n      var langFound = _locales.find(function (l) {\n        return l === key;\n      });\n      if (!langFound) {\n        _locales.push(key);\n      }\n      _defs[key] = Object.assign({}, _defs[_defaultLang], _defs[key], languages[key]);\n    }\n  },\n  translate: function (key, data, lang) {\n    if (!lang) {\n      lang = _lang;\n    }\n    var text = _defs[lang][key];\n    if (data) {\n      for (key in data) {\n        text = text.replace('${' + key + '}', data[key]);\n      }\n    }\n    return text || key;\n  }\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\nexports.DEFAULT_MODAL_ANCHOR = document.body;\nexports.SIZE_LARGE = 10 * 1024 * 1024; // 10 MB\n\nexports.MAX_PREVIEW_CHARACTERS = 20000;\n\nexports.PREVIEW_HISTORY_LIMIT = 2 * 1024 * 1024 * 1024; // 2 GB\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar createAbsoluteAnchor = __webpack_require__(12).createAbsoluteAnchor;\nvar util = __webpack_require__(0);\nvar translate = __webpack_require__(1).translate;\n\n/**\n * A context menu\n * @param {Object[]} items    Array containing the menu structure\n *                            TODO: describe structure\n * @param {Object} [options]  Object with options. Available options:\n *                            {function} close    Callback called when the\n *                                                context menu is being closed.\n * @constructor\n */\nfunction ContextMenu (items, options) {\n  this.dom = {};\n\n  var me = this;\n  var dom = this.dom;\n  this.anchor = undefined;\n  this.items = items;\n  this.eventListeners = {};\n  this.selection = undefined; // holds the selection before the menu was opened\n  this.onClose = options ? options.close : undefined;\n\n  // create root element\n  var root = document.createElement('div');\n  root.className = 'jsoneditor-contextmenu-root';\n  dom.root = root;\n\n  // create a container element\n  var menu = document.createElement('div');\n  menu.className = 'jsoneditor-contextmenu';\n  dom.menu = menu;\n  root.appendChild(menu);\n\n  // create a list to hold the menu items\n  var list = document.createElement('ul');\n  list.className = 'jsoneditor-menu';\n  menu.appendChild(list);\n  dom.list = list;\n  dom.items = []; // list with all buttons\n\n  // create a (non-visible) button to set the focus to the menu\n  var focusButton = document.createElement('button');\n  focusButton.type = 'button';\n  dom.focusButton = focusButton;\n  var li = document.createElement('li');\n  li.style.overflow = 'hidden';\n  li.style.height = '0';\n  li.appendChild(focusButton);\n  list.appendChild(li);\n\n  function createMenuItems (list, domItems, items) {\n    items.forEach(function (item) {\n      if (item.type == 'separator') {\n        // create a separator\n        var separator = document.createElement('div');\n        separator.className = 'jsoneditor-separator';\n        li = document.createElement('li');\n        li.appendChild(separator);\n        list.appendChild(li);\n      }\n      else {\n        var domItem = {};\n\n        // create a menu item\n        var li = document.createElement('li');\n        list.appendChild(li);\n\n        // create a button in the menu item\n        var button = document.createElement('button');\n        button.type = 'button';\n        button.className = item.className;\n        domItem.button = button;\n        if (item.title) {\n          button.title = item.title;\n        }\n        if (item.click) {\n          button.onclick = function (event) {\n            event.preventDefault();\n            me.hide();\n            item.click();\n          };\n        }\n        li.appendChild(button);\n\n        // create the contents of the button\n        if (item.submenu) {\n          // add the icon to the button\n          var divIcon = document.createElement('div');\n          divIcon.className = 'jsoneditor-icon';\n          button.appendChild(divIcon);\n          var divText = document.createElement('div');\n          divText.className = 'jsoneditor-text' +\n              (item.click ? '' : ' jsoneditor-right-margin');\n          divText.appendChild(document.createTextNode(item.text));\n          button.appendChild(divText);\n\n          var buttonSubmenu;\n          if (item.click) {\n            // submenu and a button with a click handler\n            button.className += ' jsoneditor-default';\n\n            var buttonExpand = document.createElement('button');\n            buttonExpand.type = 'button';\n            domItem.buttonExpand = buttonExpand;\n            buttonExpand.className = 'jsoneditor-expand';\n            buttonExpand.innerHTML = '<div class=\"jsoneditor-expand\"></div>';\n            li.appendChild(buttonExpand);\n            if (item.submenuTitle) {\n              buttonExpand.title = item.submenuTitle;\n            }\n\n            buttonSubmenu = buttonExpand;\n          }\n          else {\n            // submenu and a button without a click handler\n            var divExpand = document.createElement('div');\n            divExpand.className = 'jsoneditor-expand';\n            button.appendChild(divExpand);\n\n            buttonSubmenu = button;\n          }\n\n          // attach a handler to expand/collapse the submenu\n          buttonSubmenu.onclick = function (event) {\n            event.preventDefault();\n            me._onExpandItem(domItem);\n            buttonSubmenu.focus();\n          };\n\n          // create the submenu\n          var domSubItems = [];\n          domItem.subItems = domSubItems;\n          var ul = document.createElement('ul');\n          domItem.ul = ul;\n          ul.className = 'jsoneditor-menu';\n          ul.style.height = '0';\n          li.appendChild(ul);\n          createMenuItems(ul, domSubItems, item.submenu);\n        }\n        else {\n          // no submenu, just a button with clickhandler\n          button.innerHTML = '<div class=\"jsoneditor-icon\"></div>' +\n              '<div class=\"jsoneditor-text\">' + translate(item.text) + '</div>';\n        }\n\n        domItems.push(domItem);\n      }\n    });\n  }\n  createMenuItems(list, this.dom.items, items);\n\n  // TODO: when the editor is small, show the submenu on the right instead of inline?\n\n  // calculate the max height of the menu with one submenu expanded\n  this.maxHeight = 0; // height in pixels\n  items.forEach(function (item) {\n    var height = (items.length + (item.submenu ? item.submenu.length : 0)) * 24;\n    me.maxHeight = Math.max(me.maxHeight, height);\n  });\n}\n\n/**\n * Get the currently visible buttons\n * @return {Array.<HTMLElement>} buttons\n * @private\n */\nContextMenu.prototype._getVisibleButtons = function () {\n  var buttons = [];\n  var me = this;\n  this.dom.items.forEach(function (item) {\n    buttons.push(item.button);\n    if (item.buttonExpand) {\n      buttons.push(item.buttonExpand);\n    }\n    if (item.subItems && item == me.expandedItem) {\n      item.subItems.forEach(function (subItem) {\n        buttons.push(subItem.button);\n        if (subItem.buttonExpand) {\n          buttons.push(subItem.buttonExpand);\n        }\n        // TODO: change to fully recursive method\n      });\n    }\n  });\n\n  return buttons;\n};\n\n// currently displayed context menu, a singleton. We may only have one visible context menu\nContextMenu.visibleMenu = undefined;\n\n/**\n * Attach the menu to an anchor\n * @param {HTMLElement} anchor    Anchor where the menu will be attached as sibling.\n * @param {HTMLElement} frame     The root of the JSONEditor window\n * @param {Boolean=} ignoreParent ignore anchor parent in regard to the calculation of the position, needed when the parent position is absolute\n */\nContextMenu.prototype.show = function (anchor, frame, ignoreParent) {\n  this.hide();\n\n  // determine whether to display the menu below or above the anchor\n  var showBelow = true;\n  var parent = anchor.parentNode;\n  var anchorRect = anchor.getBoundingClientRect();\n  var parentRect = parent.getBoundingClientRect();\n  var frameRect = frame.getBoundingClientRect();\n\n  var me = this;\n  this.dom.absoluteAnchor = createAbsoluteAnchor(anchor, frame, function () {\n    me.hide()\n  });\n\n  if (anchorRect.bottom + this.maxHeight < frameRect.bottom) {\n    // fits below -> show below\n  }\n  else if (anchorRect.top - this.maxHeight > frameRect.top) {\n    // fits above -> show above\n    showBelow = false;\n  }\n  else {\n    // doesn't fit above nor below -> show below\n  }\n\n  var topGap = ignoreParent ? 0 : (anchorRect.top - parentRect.top);\n\n  // position the menu\n  if (showBelow) {\n    // display the menu below the anchor\n    var anchorHeight = anchor.offsetHeight;\n    this.dom.menu.style.left = '0';\n    this.dom.menu.style.top = topGap + anchorHeight + 'px';\n    this.dom.menu.style.bottom = '';\n  }\n  else {\n    // display the menu above the anchor\n    this.dom.menu.style.left = '0';\n    this.dom.menu.style.top = '';\n    this.dom.menu.style.bottom = '0px';\n  }\n\n  // attach the menu to the temporary, absolute anchor\n  // parent.insertBefore(this.dom.root, anchor);\n  this.dom.absoluteAnchor.appendChild(this.dom.root);\n\n  // move focus to the first button in the context menu\n  this.selection = util.getSelection();\n  this.anchor = anchor;\n  setTimeout(function () {\n    me.dom.focusButton.focus();\n  }, 0);\n\n  if (ContextMenu.visibleMenu) {\n    ContextMenu.visibleMenu.hide();\n  }\n  ContextMenu.visibleMenu = this;\n};\n\n/**\n * Hide the context menu if visible\n */\nContextMenu.prototype.hide = function () {\n  // remove temporary absolutely positioned anchor\n  if (this.dom.absoluteAnchor) {\n    this.dom.absoluteAnchor.destroy();\n    delete this.dom.absoluteAnchor;\n  }\n\n  // remove the menu from the DOM\n  if (this.dom.root.parentNode) {\n    this.dom.root.parentNode.removeChild(this.dom.root);\n    if (this.onClose) {\n      this.onClose();\n    }\n  }\n\n  if (ContextMenu.visibleMenu == this) {\n    ContextMenu.visibleMenu = undefined;\n  }\n};\n\n/**\n * Expand a submenu\n * Any currently expanded submenu will be hided.\n * @param {Object} domItem\n * @private\n */\nContextMenu.prototype._onExpandItem = function (domItem) {\n  var me = this;\n  var alreadyVisible = (domItem == this.expandedItem);\n\n  // hide the currently visible submenu\n  var expandedItem = this.expandedItem;\n  if (expandedItem) {\n    //var ul = expandedItem.ul;\n    expandedItem.ul.style.height = '0';\n    expandedItem.ul.style.padding = '';\n    setTimeout(function () {\n      if (me.expandedItem != expandedItem) {\n        expandedItem.ul.style.display = '';\n        util.removeClassName(expandedItem.ul.parentNode, 'jsoneditor-selected');\n      }\n    }, 300); // timeout duration must match the css transition duration\n    this.expandedItem = undefined;\n  }\n\n  if (!alreadyVisible) {\n    var ul = domItem.ul;\n    ul.style.display = 'block';\n    var height = ul.clientHeight; // force a reflow in Firefox\n    setTimeout(function () {\n      if (me.expandedItem == domItem) {\n        var childsHeight = 0;\n        for (var i = 0; i < ul.childNodes.length; i++) {\n          childsHeight += ul.childNodes[i].clientHeight;\n        }\n        ul.style.height = childsHeight + 'px';\n        ul.style.padding = '5px 10px';\n      }\n    }, 0);\n    util.addClassName(ul.parentNode, 'jsoneditor-selected');\n    this.expandedItem = domItem;\n  }\n};\n\n/**\n * Handle onkeydown event\n * @param {Event} event\n * @private\n */\nContextMenu.prototype._onKeyDown = function (event) {\n  var target = event.target;\n  var keynum = event.which;\n  var handled = false;\n  var buttons, targetIndex, prevButton, nextButton;\n\n  if (keynum == 27) { // ESC\n    // hide the menu on ESC key\n\n    // restore previous selection and focus\n    if (this.selection) {\n      util.setSelection(this.selection);\n    }\n    if (this.anchor) {\n      this.anchor.focus();\n    }\n\n    this.hide();\n\n    handled = true;\n  }\n  else if (keynum == 9) { // Tab\n    if (!event.shiftKey) { // Tab\n      buttons = this._getVisibleButtons();\n      targetIndex = buttons.indexOf(target);\n      if (targetIndex == buttons.length - 1) {\n        // move to first button\n        buttons[0].focus();\n        handled = true;\n      }\n    }\n    else { // Shift+Tab\n      buttons = this._getVisibleButtons();\n      targetIndex = buttons.indexOf(target);\n      if (targetIndex == 0) {\n        // move to last button\n        buttons[buttons.length - 1].focus();\n        handled = true;\n      }\n    }\n  }\n  else if (keynum == 37) { // Arrow Left\n    if (target.className == 'jsoneditor-expand') {\n      buttons = this._getVisibleButtons();\n      targetIndex = buttons.indexOf(target);\n      prevButton = buttons[targetIndex - 1];\n      if (prevButton) {\n        prevButton.focus();\n      }\n    }\n    handled = true;\n  }\n  else if (keynum == 38) { // Arrow Up\n    buttons = this._getVisibleButtons();\n    targetIndex = buttons.indexOf(target);\n    prevButton = buttons[targetIndex - 1];\n    if (prevButton && prevButton.className == 'jsoneditor-expand') {\n      // skip expand button\n      prevButton = buttons[targetIndex - 2];\n    }\n    if (!prevButton) {\n      // move to last button\n      prevButton = buttons[buttons.length - 1];\n    }\n    if (prevButton) {\n      prevButton.focus();\n    }\n    handled = true;\n  }\n  else if (keynum == 39) { // Arrow Right\n    buttons = this._getVisibleButtons();\n    targetIndex = buttons.indexOf(target);\n    nextButton = buttons[targetIndex + 1];\n    if (nextButton && nextButton.className == 'jsoneditor-expand') {\n      nextButton.focus();\n    }\n    handled = true;\n  }\n  else if (keynum == 40) { // Arrow Down\n    buttons = this._getVisibleButtons();\n    targetIndex = buttons.indexOf(target);\n    nextButton = buttons[targetIndex + 1];\n    if (nextButton && nextButton.className == 'jsoneditor-expand') {\n      // skip expand button\n      nextButton = buttons[targetIndex + 2];\n    }\n    if (!nextButton) {\n      // move to first button\n      nextButton = buttons[0];\n    }\n    if (nextButton) {\n      nextButton.focus();\n      handled = true;\n    }\n    handled = true;\n  }\n  // TODO: arrow left and right\n\n  if (handled) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n};\n\nmodule.exports = ContextMenu;\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n(function(exports) {\n  \"use strict\";\n\n  function isArray(obj) {\n    if (obj !== null) {\n      return Object.prototype.toString.call(obj) === \"[object Array]\";\n    } else {\n      return false;\n    }\n  }\n\n  function isObject(obj) {\n    if (obj !== null) {\n      return Object.prototype.toString.call(obj) === \"[object Object]\";\n    } else {\n      return false;\n    }\n  }\n\n  function strictDeepEqual(first, second) {\n    // Check the scalar case first.\n    if (first === second) {\n      return true;\n    }\n\n    // Check if they are the same type.\n    var firstType = Object.prototype.toString.call(first);\n    if (firstType !== Object.prototype.toString.call(second)) {\n      return false;\n    }\n    // We know that first and second have the same type so we can just check the\n    // first type from now on.\n    if (isArray(first) === true) {\n      // Short circuit if they're not the same length;\n      if (first.length !== second.length) {\n        return false;\n      }\n      for (var i = 0; i < first.length; i++) {\n        if (strictDeepEqual(first[i], second[i]) === false) {\n          return false;\n        }\n      }\n      return true;\n    }\n    if (isObject(first) === true) {\n      // An object is equal if it has the same key/value pairs.\n      var keysSeen = {};\n      for (var key in first) {\n        if (hasOwnProperty.call(first, key)) {\n          if (strictDeepEqual(first[key], second[key]) === false) {\n            return false;\n          }\n          keysSeen[key] = true;\n        }\n      }\n      // Now check that there aren't any keys in second that weren't\n      // in first.\n      for (var key2 in second) {\n        if (hasOwnProperty.call(second, key2)) {\n          if (keysSeen[key2] !== true) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n\n  function isFalse(obj) {\n    // From the spec:\n    // A false value corresponds to the following values:\n    // Empty list\n    // Empty object\n    // Empty string\n    // False boolean\n    // null value\n\n    // First check the scalar values.\n    if (obj === \"\" || obj === false || obj === null) {\n        return true;\n    } else if (isArray(obj) && obj.length === 0) {\n        // Check for an empty array.\n        return true;\n    } else if (isObject(obj)) {\n        // Check for an empty object.\n        for (var key in obj) {\n            // If there are any keys, then\n            // the object is not empty so the object\n            // is not false.\n            if (obj.hasOwnProperty(key)) {\n              return false;\n            }\n        }\n        return true;\n    } else {\n        return false;\n    }\n  }\n\n  function objValues(obj) {\n    var keys = Object.keys(obj);\n    var values = [];\n    for (var i = 0; i < keys.length; i++) {\n      values.push(obj[keys[i]]);\n    }\n    return values;\n  }\n\n  function merge(a, b) {\n      var merged = {};\n      for (var key in a) {\n          merged[key] = a[key];\n      }\n      for (var key2 in b) {\n          merged[key2] = b[key2];\n      }\n      return merged;\n  }\n\n  var trimLeft;\n  if (typeof String.prototype.trimLeft === \"function\") {\n    trimLeft = function(str) {\n      return str.trimLeft();\n    };\n  } else {\n    trimLeft = function(str) {\n      return str.match(/^\\s*(.*)/)[1];\n    };\n  }\n\n  // Type constants used to define functions.\n  var TYPE_NUMBER = 0;\n  var TYPE_ANY = 1;\n  var TYPE_STRING = 2;\n  var TYPE_ARRAY = 3;\n  var TYPE_OBJECT = 4;\n  var TYPE_BOOLEAN = 5;\n  var TYPE_EXPREF = 6;\n  var TYPE_NULL = 7;\n  var TYPE_ARRAY_NUMBER = 8;\n  var TYPE_ARRAY_STRING = 9;\n\n  var TOK_EOF = \"EOF\";\n  var TOK_UNQUOTEDIDENTIFIER = \"UnquotedIdentifier\";\n  var TOK_QUOTEDIDENTIFIER = \"QuotedIdentifier\";\n  var TOK_RBRACKET = \"Rbracket\";\n  var TOK_RPAREN = \"Rparen\";\n  var TOK_COMMA = \"Comma\";\n  var TOK_COLON = \"Colon\";\n  var TOK_RBRACE = \"Rbrace\";\n  var TOK_NUMBER = \"Number\";\n  var TOK_CURRENT = \"Current\";\n  var TOK_EXPREF = \"Expref\";\n  var TOK_PIPE = \"Pipe\";\n  var TOK_OR = \"Or\";\n  var TOK_AND = \"And\";\n  var TOK_EQ = \"EQ\";\n  var TOK_GT = \"GT\";\n  var TOK_LT = \"LT\";\n  var TOK_GTE = \"GTE\";\n  var TOK_LTE = \"LTE\";\n  var TOK_NE = \"NE\";\n  var TOK_FLATTEN = \"Flatten\";\n  var TOK_STAR = \"Star\";\n  var TOK_FILTER = \"Filter\";\n  var TOK_DOT = \"Dot\";\n  var TOK_NOT = \"Not\";\n  var TOK_LBRACE = \"Lbrace\";\n  var TOK_LBRACKET = \"Lbracket\";\n  var TOK_LPAREN= \"Lparen\";\n  var TOK_LITERAL= \"Literal\";\n\n  // The \"&\", \"[\", \"<\", \">\" tokens\n  // are not in basicToken because\n  // there are two token variants\n  // (\"&&\", \"[?\", \"<=\", \">=\").  This is specially handled\n  // below.\n\n  var basicTokens = {\n    \".\": TOK_DOT,\n    \"*\": TOK_STAR,\n    \",\": TOK_COMMA,\n    \":\": TOK_COLON,\n    \"{\": TOK_LBRACE,\n    \"}\": TOK_RBRACE,\n    \"]\": TOK_RBRACKET,\n    \"(\": TOK_LPAREN,\n    \")\": TOK_RPAREN,\n    \"@\": TOK_CURRENT\n  };\n\n  var operatorStartToken = {\n      \"<\": true,\n      \">\": true,\n      \"=\": true,\n      \"!\": true\n  };\n\n  var skipChars = {\n      \" \": true,\n      \"\\t\": true,\n      \"\\n\": true\n  };\n\n\n  function isAlpha(ch) {\n      return (ch >= \"a\" && ch <= \"z\") ||\n             (ch >= \"A\" && ch <= \"Z\") ||\n             ch === \"_\";\n  }\n\n  function isNum(ch) {\n      return (ch >= \"0\" && ch <= \"9\") ||\n             ch === \"-\";\n  }\n  function isAlphaNum(ch) {\n      return (ch >= \"a\" && ch <= \"z\") ||\n             (ch >= \"A\" && ch <= \"Z\") ||\n             (ch >= \"0\" && ch <= \"9\") ||\n             ch === \"_\";\n  }\n\n  function Lexer() {\n  }\n  Lexer.prototype = {\n      tokenize: function(stream) {\n          var tokens = [];\n          this._current = 0;\n          var start;\n          var identifier;\n          var token;\n          while (this._current < stream.length) {\n              if (isAlpha(stream[this._current])) {\n                  start = this._current;\n                  identifier = this._consumeUnquotedIdentifier(stream);\n                  tokens.push({type: TOK_UNQUOTEDIDENTIFIER,\n                               value: identifier,\n                               start: start});\n              } else if (basicTokens[stream[this._current]] !== undefined) {\n                  tokens.push({type: basicTokens[stream[this._current]],\n                              value: stream[this._current],\n                              start: this._current});\n                  this._current++;\n              } else if (isNum(stream[this._current])) {\n                  token = this._consumeNumber(stream);\n                  tokens.push(token);\n              } else if (stream[this._current] === \"[\") {\n                  // No need to increment this._current.  This happens\n                  // in _consumeLBracket\n                  token = this._consumeLBracket(stream);\n                  tokens.push(token);\n              } else if (stream[this._current] === \"\\\"\") {\n                  start = this._current;\n                  identifier = this._consumeQuotedIdentifier(stream);\n                  tokens.push({type: TOK_QUOTEDIDENTIFIER,\n                               value: identifier,\n                               start: start});\n              } else if (stream[this._current] === \"'\") {\n                  start = this._current;\n                  identifier = this._consumeRawStringLiteral(stream);\n                  tokens.push({type: TOK_LITERAL,\n                               value: identifier,\n                               start: start});\n              } else if (stream[this._current] === \"`\") {\n                  start = this._current;\n                  var literal = this._consumeLiteral(stream);\n                  tokens.push({type: TOK_LITERAL,\n                               value: literal,\n                               start: start});\n              } else if (operatorStartToken[stream[this._current]] !== undefined) {\n                  tokens.push(this._consumeOperator(stream));\n              } else if (skipChars[stream[this._current]] !== undefined) {\n                  // Ignore whitespace.\n                  this._current++;\n              } else if (stream[this._current] === \"&\") {\n                  start = this._current;\n                  this._current++;\n                  if (stream[this._current] === \"&\") {\n                      this._current++;\n                      tokens.push({type: TOK_AND, value: \"&&\", start: start});\n                  } else {\n                      tokens.push({type: TOK_EXPREF, value: \"&\", start: start});\n                  }\n              } else if (stream[this._current] === \"|\") {\n                  start = this._current;\n                  this._current++;\n                  if (stream[this._current] === \"|\") {\n                      this._current++;\n                      tokens.push({type: TOK_OR, value: \"||\", start: start});\n                  } else {\n                      tokens.push({type: TOK_PIPE, value: \"|\", start: start});\n                  }\n              } else {\n                  var error = new Error(\"Unknown character:\" + stream[this._current]);\n                  error.name = \"LexerError\";\n                  throw error;\n              }\n          }\n          return tokens;\n      },\n\n      _consumeUnquotedIdentifier: function(stream) {\n          var start = this._current;\n          this._current++;\n          while (this._current < stream.length && isAlphaNum(stream[this._current])) {\n              this._current++;\n          }\n          return stream.slice(start, this._current);\n      },\n\n      _consumeQuotedIdentifier: function(stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n          while (stream[this._current] !== \"\\\"\" && this._current < maxLength) {\n              // You can escape a double quote and you can escape an escape.\n              var current = this._current;\n              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                               stream[current + 1] === \"\\\"\")) {\n                  current += 2;\n              } else {\n                  current++;\n              }\n              this._current = current;\n          }\n          this._current++;\n          return JSON.parse(stream.slice(start, this._current));\n      },\n\n      _consumeRawStringLiteral: function(stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n          while (stream[this._current] !== \"'\" && this._current < maxLength) {\n              // You can escape a single quote and you can escape an escape.\n              var current = this._current;\n              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                               stream[current + 1] === \"'\")) {\n                  current += 2;\n              } else {\n                  current++;\n              }\n              this._current = current;\n          }\n          this._current++;\n          var literal = stream.slice(start + 1, this._current - 1);\n          return literal.replace(\"\\\\'\", \"'\");\n      },\n\n      _consumeNumber: function(stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n          while (isNum(stream[this._current]) && this._current < maxLength) {\n              this._current++;\n          }\n          var value = parseInt(stream.slice(start, this._current));\n          return {type: TOK_NUMBER, value: value, start: start};\n      },\n\n      _consumeLBracket: function(stream) {\n          var start = this._current;\n          this._current++;\n          if (stream[this._current] === \"?\") {\n              this._current++;\n              return {type: TOK_FILTER, value: \"[?\", start: start};\n          } else if (stream[this._current] === \"]\") {\n              this._current++;\n              return {type: TOK_FLATTEN, value: \"[]\", start: start};\n          } else {\n              return {type: TOK_LBRACKET, value: \"[\", start: start};\n          }\n      },\n\n      _consumeOperator: function(stream) {\n          var start = this._current;\n          var startingChar = stream[start];\n          this._current++;\n          if (startingChar === \"!\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_NE, value: \"!=\", start: start};\n              } else {\n                return {type: TOK_NOT, value: \"!\", start: start};\n              }\n          } else if (startingChar === \"<\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_LTE, value: \"<=\", start: start};\n              } else {\n                  return {type: TOK_LT, value: \"<\", start: start};\n              }\n          } else if (startingChar === \">\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_GTE, value: \">=\", start: start};\n              } else {\n                  return {type: TOK_GT, value: \">\", start: start};\n              }\n          } else if (startingChar === \"=\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_EQ, value: \"==\", start: start};\n              }\n          }\n      },\n\n      _consumeLiteral: function(stream) {\n          this._current++;\n          var start = this._current;\n          var maxLength = stream.length;\n          var literal;\n          while(stream[this._current] !== \"`\" && this._current < maxLength) {\n              // You can escape a literal char or you can escape the escape.\n              var current = this._current;\n              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                               stream[current + 1] === \"`\")) {\n                  current += 2;\n              } else {\n                  current++;\n              }\n              this._current = current;\n          }\n          var literalString = trimLeft(stream.slice(start, this._current));\n          literalString = literalString.replace(\"\\\\`\", \"`\");\n          if (this._looksLikeJSON(literalString)) {\n              literal = JSON.parse(literalString);\n          } else {\n              // Try to JSON parse it as \"<literal>\"\n              literal = JSON.parse(\"\\\"\" + literalString + \"\\\"\");\n          }\n          // +1 gets us to the ending \"`\", +1 to move on to the next char.\n          this._current++;\n          return literal;\n      },\n\n      _looksLikeJSON: function(literalString) {\n          var startingChars = \"[{\\\"\";\n          var jsonLiterals = [\"true\", \"false\", \"null\"];\n          var numberLooking = \"-0123456789\";\n\n          if (literalString === \"\") {\n              return false;\n          } else if (startingChars.indexOf(literalString[0]) >= 0) {\n              return true;\n          } else if (jsonLiterals.indexOf(literalString) >= 0) {\n              return true;\n          } else if (numberLooking.indexOf(literalString[0]) >= 0) {\n              try {\n                  JSON.parse(literalString);\n                  return true;\n              } catch (ex) {\n                  return false;\n              }\n          } else {\n              return false;\n          }\n      }\n  };\n\n      var bindingPower = {};\n      bindingPower[TOK_EOF] = 0;\n      bindingPower[TOK_UNQUOTEDIDENTIFIER] = 0;\n      bindingPower[TOK_QUOTEDIDENTIFIER] = 0;\n      bindingPower[TOK_RBRACKET] = 0;\n      bindingPower[TOK_RPAREN] = 0;\n      bindingPower[TOK_COMMA] = 0;\n      bindingPower[TOK_RBRACE] = 0;\n      bindingPower[TOK_NUMBER] = 0;\n      bindingPower[TOK_CURRENT] = 0;\n      bindingPower[TOK_EXPREF] = 0;\n      bindingPower[TOK_PIPE] = 1;\n      bindingPower[TOK_OR] = 2;\n      bindingPower[TOK_AND] = 3;\n      bindingPower[TOK_EQ] = 5;\n      bindingPower[TOK_GT] = 5;\n      bindingPower[TOK_LT] = 5;\n      bindingPower[TOK_GTE] = 5;\n      bindingPower[TOK_LTE] = 5;\n      bindingPower[TOK_NE] = 5;\n      bindingPower[TOK_FLATTEN] = 9;\n      bindingPower[TOK_STAR] = 20;\n      bindingPower[TOK_FILTER] = 21;\n      bindingPower[TOK_DOT] = 40;\n      bindingPower[TOK_NOT] = 45;\n      bindingPower[TOK_LBRACE] = 50;\n      bindingPower[TOK_LBRACKET] = 55;\n      bindingPower[TOK_LPAREN] = 60;\n\n  function Parser() {\n  }\n\n  Parser.prototype = {\n      parse: function(expression) {\n          this._loadTokens(expression);\n          this.index = 0;\n          var ast = this.expression(0);\n          if (this._lookahead(0) !== TOK_EOF) {\n              var t = this._lookaheadToken(0);\n              var error = new Error(\n                  \"Unexpected token type: \" + t.type + \", value: \" + t.value);\n              error.name = \"ParserError\";\n              throw error;\n          }\n          return ast;\n      },\n\n      _loadTokens: function(expression) {\n          var lexer = new Lexer();\n          var tokens = lexer.tokenize(expression);\n          tokens.push({type: TOK_EOF, value: \"\", start: expression.length});\n          this.tokens = tokens;\n      },\n\n      expression: function(rbp) {\n          var leftToken = this._lookaheadToken(0);\n          this._advance();\n          var left = this.nud(leftToken);\n          var currentToken = this._lookahead(0);\n          while (rbp < bindingPower[currentToken]) {\n              this._advance();\n              left = this.led(currentToken, left);\n              currentToken = this._lookahead(0);\n          }\n          return left;\n      },\n\n      _lookahead: function(number) {\n          return this.tokens[this.index + number].type;\n      },\n\n      _lookaheadToken: function(number) {\n          return this.tokens[this.index + number];\n      },\n\n      _advance: function() {\n          this.index++;\n      },\n\n      nud: function(token) {\n        var left;\n        var right;\n        var expression;\n        switch (token.type) {\n          case TOK_LITERAL:\n            return {type: \"Literal\", value: token.value};\n          case TOK_UNQUOTEDIDENTIFIER:\n            return {type: \"Field\", name: token.value};\n          case TOK_QUOTEDIDENTIFIER:\n            var node = {type: \"Field\", name: token.value};\n            if (this._lookahead(0) === TOK_LPAREN) {\n                throw new Error(\"Quoted identifier not allowed for function names.\");\n            } else {\n                return node;\n            }\n            break;\n          case TOK_NOT:\n            right = this.expression(bindingPower.Not);\n            return {type: \"NotExpression\", children: [right]};\n          case TOK_STAR:\n            left = {type: \"Identity\"};\n            right = null;\n            if (this._lookahead(0) === TOK_RBRACKET) {\n                // This can happen in a multiselect,\n                // [a, b, *]\n                right = {type: \"Identity\"};\n            } else {\n                right = this._parseProjectionRHS(bindingPower.Star);\n            }\n            return {type: \"ValueProjection\", children: [left, right]};\n          case TOK_FILTER:\n            return this.led(token.type, {type: \"Identity\"});\n          case TOK_LBRACE:\n            return this._parseMultiselectHash();\n          case TOK_FLATTEN:\n            left = {type: TOK_FLATTEN, children: [{type: \"Identity\"}]};\n            right = this._parseProjectionRHS(bindingPower.Flatten);\n            return {type: \"Projection\", children: [left, right]};\n          case TOK_LBRACKET:\n            if (this._lookahead(0) === TOK_NUMBER || this._lookahead(0) === TOK_COLON) {\n                right = this._parseIndexExpression();\n                return this._projectIfSlice({type: \"Identity\"}, right);\n            } else if (this._lookahead(0) === TOK_STAR &&\n                       this._lookahead(1) === TOK_RBRACKET) {\n                this._advance();\n                this._advance();\n                right = this._parseProjectionRHS(bindingPower.Star);\n                return {type: \"Projection\",\n                        children: [{type: \"Identity\"}, right]};\n            } else {\n                return this._parseMultiselectList();\n            }\n            break;\n          case TOK_CURRENT:\n            return {type: TOK_CURRENT};\n          case TOK_EXPREF:\n            expression = this.expression(bindingPower.Expref);\n            return {type: \"ExpressionReference\", children: [expression]};\n          case TOK_LPAREN:\n            var args = [];\n            while (this._lookahead(0) !== TOK_RPAREN) {\n              if (this._lookahead(0) === TOK_CURRENT) {\n                expression = {type: TOK_CURRENT};\n                this._advance();\n              } else {\n                expression = this.expression(0);\n              }\n              args.push(expression);\n            }\n            this._match(TOK_RPAREN);\n            return args[0];\n          default:\n            this._errorToken(token);\n        }\n      },\n\n      led: function(tokenName, left) {\n        var right;\n        switch(tokenName) {\n          case TOK_DOT:\n            var rbp = bindingPower.Dot;\n            if (this._lookahead(0) !== TOK_STAR) {\n                right = this._parseDotRHS(rbp);\n                return {type: \"Subexpression\", children: [left, right]};\n            } else {\n                // Creating a projection.\n                this._advance();\n                right = this._parseProjectionRHS(rbp);\n                return {type: \"ValueProjection\", children: [left, right]};\n            }\n            break;\n          case TOK_PIPE:\n            right = this.expression(bindingPower.Pipe);\n            return {type: TOK_PIPE, children: [left, right]};\n          case TOK_OR:\n            right = this.expression(bindingPower.Or);\n            return {type: \"OrExpression\", children: [left, right]};\n          case TOK_AND:\n            right = this.expression(bindingPower.And);\n            return {type: \"AndExpression\", children: [left, right]};\n          case TOK_LPAREN:\n            var name = left.name;\n            var args = [];\n            var expression, node;\n            while (this._lookahead(0) !== TOK_RPAREN) {\n              if (this._lookahead(0) === TOK_CURRENT) {\n                expression = {type: TOK_CURRENT};\n                this._advance();\n              } else {\n                expression = this.expression(0);\n              }\n              if (this._lookahead(0) === TOK_COMMA) {\n                this._match(TOK_COMMA);\n              }\n              args.push(expression);\n            }\n            this._match(TOK_RPAREN);\n            node = {type: \"Function\", name: name, children: args};\n            return node;\n          case TOK_FILTER:\n            var condition = this.expression(0);\n            this._match(TOK_RBRACKET);\n            if (this._lookahead(0) === TOK_FLATTEN) {\n              right = {type: \"Identity\"};\n            } else {\n              right = this._parseProjectionRHS(bindingPower.Filter);\n            }\n            return {type: \"FilterProjection\", children: [left, right, condition]};\n          case TOK_FLATTEN:\n            var leftNode = {type: TOK_FLATTEN, children: [left]};\n            var rightNode = this._parseProjectionRHS(bindingPower.Flatten);\n            return {type: \"Projection\", children: [leftNode, rightNode]};\n          case TOK_EQ:\n          case TOK_NE:\n          case TOK_GT:\n          case TOK_GTE:\n          case TOK_LT:\n          case TOK_LTE:\n            return this._parseComparator(left, tokenName);\n          case TOK_LBRACKET:\n            var token = this._lookaheadToken(0);\n            if (token.type === TOK_NUMBER || token.type === TOK_COLON) {\n                right = this._parseIndexExpression();\n                return this._projectIfSlice(left, right);\n            } else {\n                this._match(TOK_STAR);\n                this._match(TOK_RBRACKET);\n                right = this._parseProjectionRHS(bindingPower.Star);\n                return {type: \"Projection\", children: [left, right]};\n            }\n            break;\n          default:\n            this._errorToken(this._lookaheadToken(0));\n        }\n      },\n\n      _match: function(tokenType) {\n          if (this._lookahead(0) === tokenType) {\n              this._advance();\n          } else {\n              var t = this._lookaheadToken(0);\n              var error = new Error(\"Expected \" + tokenType + \", got: \" + t.type);\n              error.name = \"ParserError\";\n              throw error;\n          }\n      },\n\n      _errorToken: function(token) {\n          var error = new Error(\"Invalid token (\" +\n                                token.type + \"): \\\"\" +\n                                token.value + \"\\\"\");\n          error.name = \"ParserError\";\n          throw error;\n      },\n\n\n      _parseIndexExpression: function() {\n          if (this._lookahead(0) === TOK_COLON || this._lookahead(1) === TOK_COLON) {\n              return this._parseSliceExpression();\n          } else {\n              var node = {\n                  type: \"Index\",\n                  value: this._lookaheadToken(0).value};\n              this._advance();\n              this._match(TOK_RBRACKET);\n              return node;\n          }\n      },\n\n      _projectIfSlice: function(left, right) {\n          var indexExpr = {type: \"IndexExpression\", children: [left, right]};\n          if (right.type === \"Slice\") {\n              return {\n                  type: \"Projection\",\n                  children: [indexExpr, this._parseProjectionRHS(bindingPower.Star)]\n              };\n          } else {\n              return indexExpr;\n          }\n      },\n\n      _parseSliceExpression: function() {\n          // [start:end:step] where each part is optional, as well as the last\n          // colon.\n          var parts = [null, null, null];\n          var index = 0;\n          var currentToken = this._lookahead(0);\n          while (currentToken !== TOK_RBRACKET && index < 3) {\n              if (currentToken === TOK_COLON) {\n                  index++;\n                  this._advance();\n              } else if (currentToken === TOK_NUMBER) {\n                  parts[index] = this._lookaheadToken(0).value;\n                  this._advance();\n              } else {\n                  var t = this._lookahead(0);\n                  var error = new Error(\"Syntax error, unexpected token: \" +\n                                        t.value + \"(\" + t.type + \")\");\n                  error.name = \"Parsererror\";\n                  throw error;\n              }\n              currentToken = this._lookahead(0);\n          }\n          this._match(TOK_RBRACKET);\n          return {\n              type: \"Slice\",\n              children: parts\n          };\n      },\n\n      _parseComparator: function(left, comparator) {\n        var right = this.expression(bindingPower[comparator]);\n        return {type: \"Comparator\", name: comparator, children: [left, right]};\n      },\n\n      _parseDotRHS: function(rbp) {\n          var lookahead = this._lookahead(0);\n          var exprTokens = [TOK_UNQUOTEDIDENTIFIER, TOK_QUOTEDIDENTIFIER, TOK_STAR];\n          if (exprTokens.indexOf(lookahead) >= 0) {\n              return this.expression(rbp);\n          } else if (lookahead === TOK_LBRACKET) {\n              this._match(TOK_LBRACKET);\n              return this._parseMultiselectList();\n          } else if (lookahead === TOK_LBRACE) {\n              this._match(TOK_LBRACE);\n              return this._parseMultiselectHash();\n          }\n      },\n\n      _parseProjectionRHS: function(rbp) {\n          var right;\n          if (bindingPower[this._lookahead(0)] < 10) {\n              right = {type: \"Identity\"};\n          } else if (this._lookahead(0) === TOK_LBRACKET) {\n              right = this.expression(rbp);\n          } else if (this._lookahead(0) === TOK_FILTER) {\n              right = this.expression(rbp);\n          } else if (this._lookahead(0) === TOK_DOT) {\n              this._match(TOK_DOT);\n              right = this._parseDotRHS(rbp);\n          } else {\n              var t = this._lookaheadToken(0);\n              var error = new Error(\"Sytanx error, unexpected token: \" +\n                                    t.value + \"(\" + t.type + \")\");\n              error.name = \"ParserError\";\n              throw error;\n          }\n          return right;\n      },\n\n      _parseMultiselectList: function() {\n          var expressions = [];\n          while (this._lookahead(0) !== TOK_RBRACKET) {\n              var expression = this.expression(0);\n              expressions.push(expression);\n              if (this._lookahead(0) === TOK_COMMA) {\n                  this._match(TOK_COMMA);\n                  if (this._lookahead(0) === TOK_RBRACKET) {\n                    throw new Error(\"Unexpected token Rbracket\");\n                  }\n              }\n          }\n          this._match(TOK_RBRACKET);\n          return {type: \"MultiSelectList\", children: expressions};\n      },\n\n      _parseMultiselectHash: function() {\n        var pairs = [];\n        var identifierTypes = [TOK_UNQUOTEDIDENTIFIER, TOK_QUOTEDIDENTIFIER];\n        var keyToken, keyName, value, node;\n        for (;;) {\n          keyToken = this._lookaheadToken(0);\n          if (identifierTypes.indexOf(keyToken.type) < 0) {\n            throw new Error(\"Expecting an identifier token, got: \" +\n                            keyToken.type);\n          }\n          keyName = keyToken.value;\n          this._advance();\n          this._match(TOK_COLON);\n          value = this.expression(0);\n          node = {type: \"KeyValuePair\", name: keyName, value: value};\n          pairs.push(node);\n          if (this._lookahead(0) === TOK_COMMA) {\n            this._match(TOK_COMMA);\n          } else if (this._lookahead(0) === TOK_RBRACE) {\n            this._match(TOK_RBRACE);\n            break;\n          }\n        }\n        return {type: \"MultiSelectHash\", children: pairs};\n      }\n  };\n\n\n  function TreeInterpreter(runtime) {\n    this.runtime = runtime;\n  }\n\n  TreeInterpreter.prototype = {\n      search: function(node, value) {\n          return this.visit(node, value);\n      },\n\n      visit: function(node, value) {\n          var matched, current, result, first, second, field, left, right, collected, i;\n          switch (node.type) {\n            case \"Field\":\n              if (value === null ) {\n                  return null;\n              } else if (isObject(value)) {\n                  field = value[node.name];\n                  if (field === undefined) {\n                      return null;\n                  } else {\n                      return field;\n                  }\n              } else {\n                return null;\n              }\n              break;\n            case \"Subexpression\":\n              result = this.visit(node.children[0], value);\n              for (i = 1; i < node.children.length; i++) {\n                  result = this.visit(node.children[1], result);\n                  if (result === null) {\n                      return null;\n                  }\n              }\n              return result;\n            case \"IndexExpression\":\n              left = this.visit(node.children[0], value);\n              right = this.visit(node.children[1], left);\n              return right;\n            case \"Index\":\n              if (!isArray(value)) {\n                return null;\n              }\n              var index = node.value;\n              if (index < 0) {\n                index = value.length + index;\n              }\n              result = value[index];\n              if (result === undefined) {\n                result = null;\n              }\n              return result;\n            case \"Slice\":\n              if (!isArray(value)) {\n                return null;\n              }\n              var sliceParams = node.children.slice(0);\n              var computed = this.computeSliceParams(value.length, sliceParams);\n              var start = computed[0];\n              var stop = computed[1];\n              var step = computed[2];\n              result = [];\n              if (step > 0) {\n                  for (i = start; i < stop; i += step) {\n                      result.push(value[i]);\n                  }\n              } else {\n                  for (i = start; i > stop; i += step) {\n                      result.push(value[i]);\n                  }\n              }\n              return result;\n            case \"Projection\":\n              // Evaluate left child.\n              var base = this.visit(node.children[0], value);\n              if (!isArray(base)) {\n                return null;\n              }\n              collected = [];\n              for (i = 0; i < base.length; i++) {\n                current = this.visit(node.children[1], base[i]);\n                if (current !== null) {\n                  collected.push(current);\n                }\n              }\n              return collected;\n            case \"ValueProjection\":\n              // Evaluate left child.\n              base = this.visit(node.children[0], value);\n              if (!isObject(base)) {\n                return null;\n              }\n              collected = [];\n              var values = objValues(base);\n              for (i = 0; i < values.length; i++) {\n                current = this.visit(node.children[1], values[i]);\n                if (current !== null) {\n                  collected.push(current);\n                }\n              }\n              return collected;\n            case \"FilterProjection\":\n              base = this.visit(node.children[0], value);\n              if (!isArray(base)) {\n                return null;\n              }\n              var filtered = [];\n              var finalResults = [];\n              for (i = 0; i < base.length; i++) {\n                matched = this.visit(node.children[2], base[i]);\n                if (!isFalse(matched)) {\n                  filtered.push(base[i]);\n                }\n              }\n              for (var j = 0; j < filtered.length; j++) {\n                current = this.visit(node.children[1], filtered[j]);\n                if (current !== null) {\n                  finalResults.push(current);\n                }\n              }\n              return finalResults;\n            case \"Comparator\":\n              first = this.visit(node.children[0], value);\n              second = this.visit(node.children[1], value);\n              switch(node.name) {\n                case TOK_EQ:\n                  result = strictDeepEqual(first, second);\n                  break;\n                case TOK_NE:\n                  result = !strictDeepEqual(first, second);\n                  break;\n                case TOK_GT:\n                  result = first > second;\n                  break;\n                case TOK_GTE:\n                  result = first >= second;\n                  break;\n                case TOK_LT:\n                  result = first < second;\n                  break;\n                case TOK_LTE:\n                  result = first <= second;\n                  break;\n                default:\n                  throw new Error(\"Unknown comparator: \" + node.name);\n              }\n              return result;\n            case TOK_FLATTEN:\n              var original = this.visit(node.children[0], value);\n              if (!isArray(original)) {\n                return null;\n              }\n              var merged = [];\n              for (i = 0; i < original.length; i++) {\n                current = original[i];\n                if (isArray(current)) {\n                  merged.push.apply(merged, current);\n                } else {\n                  merged.push(current);\n                }\n              }\n              return merged;\n            case \"Identity\":\n              return value;\n            case \"MultiSelectList\":\n              if (value === null) {\n                return null;\n              }\n              collected = [];\n              for (i = 0; i < node.children.length; i++) {\n                  collected.push(this.visit(node.children[i], value));\n              }\n              return collected;\n            case \"MultiSelectHash\":\n              if (value === null) {\n                return null;\n              }\n              collected = {};\n              var child;\n              for (i = 0; i < node.children.length; i++) {\n                child = node.children[i];\n                collected[child.name] = this.visit(child.value, value);\n              }\n              return collected;\n            case \"OrExpression\":\n              matched = this.visit(node.children[0], value);\n              if (isFalse(matched)) {\n                  matched = this.visit(node.children[1], value);\n              }\n              return matched;\n            case \"AndExpression\":\n              first = this.visit(node.children[0], value);\n\n              if (isFalse(first) === true) {\n                return first;\n              }\n              return this.visit(node.children[1], value);\n            case \"NotExpression\":\n              first = this.visit(node.children[0], value);\n              return isFalse(first);\n            case \"Literal\":\n              return node.value;\n            case TOK_PIPE:\n              left = this.visit(node.children[0], value);\n              return this.visit(node.children[1], left);\n            case TOK_CURRENT:\n              return value;\n            case \"Function\":\n              var resolvedArgs = [];\n              for (i = 0; i < node.children.length; i++) {\n                  resolvedArgs.push(this.visit(node.children[i], value));\n              }\n              return this.runtime.callFunction(node.name, resolvedArgs);\n            case \"ExpressionReference\":\n              var refNode = node.children[0];\n              // Tag the node with a specific attribute so the type\n              // checker verify the type.\n              refNode.jmespathType = TOK_EXPREF;\n              return refNode;\n            default:\n              throw new Error(\"Unknown node type: \" + node.type);\n          }\n      },\n\n      computeSliceParams: function(arrayLength, sliceParams) {\n        var start = sliceParams[0];\n        var stop = sliceParams[1];\n        var step = sliceParams[2];\n        var computed = [null, null, null];\n        if (step === null) {\n          step = 1;\n        } else if (step === 0) {\n          var error = new Error(\"Invalid slice, step cannot be 0\");\n          error.name = \"RuntimeError\";\n          throw error;\n        }\n        var stepValueNegative = step < 0 ? true : false;\n\n        if (start === null) {\n            start = stepValueNegative ? arrayLength - 1 : 0;\n        } else {\n            start = this.capSliceRange(arrayLength, start, step);\n        }\n\n        if (stop === null) {\n            stop = stepValueNegative ? -1 : arrayLength;\n        } else {\n            stop = this.capSliceRange(arrayLength, stop, step);\n        }\n        computed[0] = start;\n        computed[1] = stop;\n        computed[2] = step;\n        return computed;\n      },\n\n      capSliceRange: function(arrayLength, actualValue, step) {\n          if (actualValue < 0) {\n              actualValue += arrayLength;\n              if (actualValue < 0) {\n                  actualValue = step < 0 ? -1 : 0;\n              }\n          } else if (actualValue >= arrayLength) {\n              actualValue = step < 0 ? arrayLength - 1 : arrayLength;\n          }\n          return actualValue;\n      }\n\n  };\n\n  function Runtime(interpreter) {\n    this._interpreter = interpreter;\n    this.functionTable = {\n        // name: [function, <signature>]\n        // The <signature> can be:\n        //\n        // {\n        //   args: [[type1, type2], [type1, type2]],\n        //   variadic: true|false\n        // }\n        //\n        // Each arg in the arg list is a list of valid types\n        // (if the function is overloaded and supports multiple\n        // types.  If the type is \"any\" then no type checking\n        // occurs on the argument.  Variadic is optional\n        // and if not provided is assumed to be false.\n        abs: {_func: this._functionAbs, _signature: [{types: [TYPE_NUMBER]}]},\n        avg: {_func: this._functionAvg, _signature: [{types: [TYPE_ARRAY_NUMBER]}]},\n        ceil: {_func: this._functionCeil, _signature: [{types: [TYPE_NUMBER]}]},\n        contains: {\n            _func: this._functionContains,\n            _signature: [{types: [TYPE_STRING, TYPE_ARRAY]},\n                        {types: [TYPE_ANY]}]},\n        \"ends_with\": {\n            _func: this._functionEndsWith,\n            _signature: [{types: [TYPE_STRING]}, {types: [TYPE_STRING]}]},\n        floor: {_func: this._functionFloor, _signature: [{types: [TYPE_NUMBER]}]},\n        length: {\n            _func: this._functionLength,\n            _signature: [{types: [TYPE_STRING, TYPE_ARRAY, TYPE_OBJECT]}]},\n        map: {\n            _func: this._functionMap,\n            _signature: [{types: [TYPE_EXPREF]}, {types: [TYPE_ARRAY]}]},\n        max: {\n            _func: this._functionMax,\n            _signature: [{types: [TYPE_ARRAY_NUMBER, TYPE_ARRAY_STRING]}]},\n        \"merge\": {\n            _func: this._functionMerge,\n            _signature: [{types: [TYPE_OBJECT], variadic: true}]\n        },\n        \"max_by\": {\n          _func: this._functionMaxBy,\n          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n        },\n        sum: {_func: this._functionSum, _signature: [{types: [TYPE_ARRAY_NUMBER]}]},\n        \"starts_with\": {\n            _func: this._functionStartsWith,\n            _signature: [{types: [TYPE_STRING]}, {types: [TYPE_STRING]}]},\n        min: {\n            _func: this._functionMin,\n            _signature: [{types: [TYPE_ARRAY_NUMBER, TYPE_ARRAY_STRING]}]},\n        \"min_by\": {\n          _func: this._functionMinBy,\n          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n        },\n        type: {_func: this._functionType, _signature: [{types: [TYPE_ANY]}]},\n        keys: {_func: this._functionKeys, _signature: [{types: [TYPE_OBJECT]}]},\n        values: {_func: this._functionValues, _signature: [{types: [TYPE_OBJECT]}]},\n        sort: {_func: this._functionSort, _signature: [{types: [TYPE_ARRAY_STRING, TYPE_ARRAY_NUMBER]}]},\n        \"sort_by\": {\n          _func: this._functionSortBy,\n          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n        },\n        join: {\n            _func: this._functionJoin,\n            _signature: [\n                {types: [TYPE_STRING]},\n                {types: [TYPE_ARRAY_STRING]}\n            ]\n        },\n        reverse: {\n            _func: this._functionReverse,\n            _signature: [{types: [TYPE_STRING, TYPE_ARRAY]}]},\n        \"to_array\": {_func: this._functionToArray, _signature: [{types: [TYPE_ANY]}]},\n        \"to_string\": {_func: this._functionToString, _signature: [{types: [TYPE_ANY]}]},\n        \"to_number\": {_func: this._functionToNumber, _signature: [{types: [TYPE_ANY]}]},\n        \"not_null\": {\n            _func: this._functionNotNull,\n            _signature: [{types: [TYPE_ANY], variadic: true}]\n        }\n    };\n  }\n\n  Runtime.prototype = {\n    callFunction: function(name, resolvedArgs) {\n      var functionEntry = this.functionTable[name];\n      if (functionEntry === undefined) {\n          throw new Error(\"Unknown function: \" + name + \"()\");\n      }\n      this._validateArgs(name, resolvedArgs, functionEntry._signature);\n      return functionEntry._func.call(this, resolvedArgs);\n    },\n\n    _validateArgs: function(name, args, signature) {\n        // Validating the args requires validating\n        // the correct arity and the correct type of each arg.\n        // If the last argument is declared as variadic, then we need\n        // a minimum number of args to be required.  Otherwise it has to\n        // be an exact amount.\n        var pluralized;\n        if (signature[signature.length - 1].variadic) {\n            if (args.length < signature.length) {\n                pluralized = signature.length === 1 ? \" argument\" : \" arguments\";\n                throw new Error(\"ArgumentError: \" + name + \"() \" +\n                                \"takes at least\" + signature.length + pluralized +\n                                \" but received \" + args.length);\n            }\n        } else if (args.length !== signature.length) {\n            pluralized = signature.length === 1 ? \" argument\" : \" arguments\";\n            throw new Error(\"ArgumentError: \" + name + \"() \" +\n                            \"takes \" + signature.length + pluralized +\n                            \" but received \" + args.length);\n        }\n        var currentSpec;\n        var actualType;\n        var typeMatched;\n        for (var i = 0; i < signature.length; i++) {\n            typeMatched = false;\n            currentSpec = signature[i].types;\n            actualType = this._getTypeName(args[i]);\n            for (var j = 0; j < currentSpec.length; j++) {\n                if (this._typeMatches(actualType, currentSpec[j], args[i])) {\n                    typeMatched = true;\n                    break;\n                }\n            }\n            if (!typeMatched) {\n                throw new Error(\"TypeError: \" + name + \"() \" +\n                                \"expected argument \" + (i + 1) +\n                                \" to be type \" + currentSpec +\n                                \" but received type \" + actualType +\n                                \" instead.\");\n            }\n        }\n    },\n\n    _typeMatches: function(actual, expected, argValue) {\n        if (expected === TYPE_ANY) {\n            return true;\n        }\n        if (expected === TYPE_ARRAY_STRING ||\n            expected === TYPE_ARRAY_NUMBER ||\n            expected === TYPE_ARRAY) {\n            // The expected type can either just be array,\n            // or it can require a specific subtype (array of numbers).\n            //\n            // The simplest case is if \"array\" with no subtype is specified.\n            if (expected === TYPE_ARRAY) {\n                return actual === TYPE_ARRAY;\n            } else if (actual === TYPE_ARRAY) {\n                // Otherwise we need to check subtypes.\n                // I think this has potential to be improved.\n                var subtype;\n                if (expected === TYPE_ARRAY_NUMBER) {\n                  subtype = TYPE_NUMBER;\n                } else if (expected === TYPE_ARRAY_STRING) {\n                  subtype = TYPE_STRING;\n                }\n                for (var i = 0; i < argValue.length; i++) {\n                    if (!this._typeMatches(\n                            this._getTypeName(argValue[i]), subtype,\n                                             argValue[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        } else {\n            return actual === expected;\n        }\n    },\n    _getTypeName: function(obj) {\n        switch (Object.prototype.toString.call(obj)) {\n            case \"[object String]\":\n              return TYPE_STRING;\n            case \"[object Number]\":\n              return TYPE_NUMBER;\n            case \"[object Array]\":\n              return TYPE_ARRAY;\n            case \"[object Boolean]\":\n              return TYPE_BOOLEAN;\n            case \"[object Null]\":\n              return TYPE_NULL;\n            case \"[object Object]\":\n              // Check if it's an expref.  If it has, it's been\n              // tagged with a jmespathType attr of 'Expref';\n              if (obj.jmespathType === TOK_EXPREF) {\n                return TYPE_EXPREF;\n              } else {\n                return TYPE_OBJECT;\n              }\n        }\n    },\n\n    _functionStartsWith: function(resolvedArgs) {\n        return resolvedArgs[0].lastIndexOf(resolvedArgs[1]) === 0;\n    },\n\n    _functionEndsWith: function(resolvedArgs) {\n        var searchStr = resolvedArgs[0];\n        var suffix = resolvedArgs[1];\n        return searchStr.indexOf(suffix, searchStr.length - suffix.length) !== -1;\n    },\n\n    _functionReverse: function(resolvedArgs) {\n        var typeName = this._getTypeName(resolvedArgs[0]);\n        if (typeName === TYPE_STRING) {\n          var originalStr = resolvedArgs[0];\n          var reversedStr = \"\";\n          for (var i = originalStr.length - 1; i >= 0; i--) {\n              reversedStr += originalStr[i];\n          }\n          return reversedStr;\n        } else {\n          var reversedArray = resolvedArgs[0].slice(0);\n          reversedArray.reverse();\n          return reversedArray;\n        }\n    },\n\n    _functionAbs: function(resolvedArgs) {\n      return Math.abs(resolvedArgs[0]);\n    },\n\n    _functionCeil: function(resolvedArgs) {\n        return Math.ceil(resolvedArgs[0]);\n    },\n\n    _functionAvg: function(resolvedArgs) {\n        var sum = 0;\n        var inputArray = resolvedArgs[0];\n        for (var i = 0; i < inputArray.length; i++) {\n            sum += inputArray[i];\n        }\n        return sum / inputArray.length;\n    },\n\n    _functionContains: function(resolvedArgs) {\n        return resolvedArgs[0].indexOf(resolvedArgs[1]) >= 0;\n    },\n\n    _functionFloor: function(resolvedArgs) {\n        return Math.floor(resolvedArgs[0]);\n    },\n\n    _functionLength: function(resolvedArgs) {\n       if (!isObject(resolvedArgs[0])) {\n         return resolvedArgs[0].length;\n       } else {\n         // As far as I can tell, there's no way to get the length\n         // of an object without O(n) iteration through the object.\n         return Object.keys(resolvedArgs[0]).length;\n       }\n    },\n\n    _functionMap: function(resolvedArgs) {\n      var mapped = [];\n      var interpreter = this._interpreter;\n      var exprefNode = resolvedArgs[0];\n      var elements = resolvedArgs[1];\n      for (var i = 0; i < elements.length; i++) {\n          mapped.push(interpreter.visit(exprefNode, elements[i]));\n      }\n      return mapped;\n    },\n\n    _functionMerge: function(resolvedArgs) {\n      var merged = {};\n      for (var i = 0; i < resolvedArgs.length; i++) {\n        var current = resolvedArgs[i];\n        for (var key in current) {\n          merged[key] = current[key];\n        }\n      }\n      return merged;\n    },\n\n    _functionMax: function(resolvedArgs) {\n      if (resolvedArgs[0].length > 0) {\n        var typeName = this._getTypeName(resolvedArgs[0][0]);\n        if (typeName === TYPE_NUMBER) {\n          return Math.max.apply(Math, resolvedArgs[0]);\n        } else {\n          var elements = resolvedArgs[0];\n          var maxElement = elements[0];\n          for (var i = 1; i < elements.length; i++) {\n              if (maxElement.localeCompare(elements[i]) < 0) {\n                  maxElement = elements[i];\n              }\n          }\n          return maxElement;\n        }\n      } else {\n          return null;\n      }\n    },\n\n    _functionMin: function(resolvedArgs) {\n      if (resolvedArgs[0].length > 0) {\n        var typeName = this._getTypeName(resolvedArgs[0][0]);\n        if (typeName === TYPE_NUMBER) {\n          return Math.min.apply(Math, resolvedArgs[0]);\n        } else {\n          var elements = resolvedArgs[0];\n          var minElement = elements[0];\n          for (var i = 1; i < elements.length; i++) {\n              if (elements[i].localeCompare(minElement) < 0) {\n                  minElement = elements[i];\n              }\n          }\n          return minElement;\n        }\n      } else {\n        return null;\n      }\n    },\n\n    _functionSum: function(resolvedArgs) {\n      var sum = 0;\n      var listToSum = resolvedArgs[0];\n      for (var i = 0; i < listToSum.length; i++) {\n        sum += listToSum[i];\n      }\n      return sum;\n    },\n\n    _functionType: function(resolvedArgs) {\n        switch (this._getTypeName(resolvedArgs[0])) {\n          case TYPE_NUMBER:\n            return \"number\";\n          case TYPE_STRING:\n            return \"string\";\n          case TYPE_ARRAY:\n            return \"array\";\n          case TYPE_OBJECT:\n            return \"object\";\n          case TYPE_BOOLEAN:\n            return \"boolean\";\n          case TYPE_EXPREF:\n            return \"expref\";\n          case TYPE_NULL:\n            return \"null\";\n        }\n    },\n\n    _functionKeys: function(resolvedArgs) {\n        return Object.keys(resolvedArgs[0]);\n    },\n\n    _functionValues: function(resolvedArgs) {\n        var obj = resolvedArgs[0];\n        var keys = Object.keys(obj);\n        var values = [];\n        for (var i = 0; i < keys.length; i++) {\n            values.push(obj[keys[i]]);\n        }\n        return values;\n    },\n\n    _functionJoin: function(resolvedArgs) {\n        var joinChar = resolvedArgs[0];\n        var listJoin = resolvedArgs[1];\n        return listJoin.join(joinChar);\n    },\n\n    _functionToArray: function(resolvedArgs) {\n        if (this._getTypeName(resolvedArgs[0]) === TYPE_ARRAY) {\n            return resolvedArgs[0];\n        } else {\n            return [resolvedArgs[0]];\n        }\n    },\n\n    _functionToString: function(resolvedArgs) {\n        if (this._getTypeName(resolvedArgs[0]) === TYPE_STRING) {\n            return resolvedArgs[0];\n        } else {\n            return JSON.stringify(resolvedArgs[0]);\n        }\n    },\n\n    _functionToNumber: function(resolvedArgs) {\n        var typeName = this._getTypeName(resolvedArgs[0]);\n        var convertedValue;\n        if (typeName === TYPE_NUMBER) {\n            return resolvedArgs[0];\n        } else if (typeName === TYPE_STRING) {\n            convertedValue = +resolvedArgs[0];\n            if (!isNaN(convertedValue)) {\n                return convertedValue;\n            }\n        }\n        return null;\n    },\n\n    _functionNotNull: function(resolvedArgs) {\n        for (var i = 0; i < resolvedArgs.length; i++) {\n            if (this._getTypeName(resolvedArgs[i]) !== TYPE_NULL) {\n                return resolvedArgs[i];\n            }\n        }\n        return null;\n    },\n\n    _functionSort: function(resolvedArgs) {\n        var sortedArray = resolvedArgs[0].slice(0);\n        sortedArray.sort();\n        return sortedArray;\n    },\n\n    _functionSortBy: function(resolvedArgs) {\n        var sortedArray = resolvedArgs[0].slice(0);\n        if (sortedArray.length === 0) {\n            return sortedArray;\n        }\n        var interpreter = this._interpreter;\n        var exprefNode = resolvedArgs[1];\n        var requiredType = this._getTypeName(\n            interpreter.visit(exprefNode, sortedArray[0]));\n        if ([TYPE_NUMBER, TYPE_STRING].indexOf(requiredType) < 0) {\n            throw new Error(\"TypeError\");\n        }\n        var that = this;\n        // In order to get a stable sort out of an unstable\n        // sort algorithm, we decorate/sort/undecorate (DSU)\n        // by creating a new list of [index, element] pairs.\n        // In the cmp function, if the evaluated elements are\n        // equal, then the index will be used as the tiebreaker.\n        // After the decorated list has been sorted, it will be\n        // undecorated to extract the original elements.\n        var decorated = [];\n        for (var i = 0; i < sortedArray.length; i++) {\n          decorated.push([i, sortedArray[i]]);\n        }\n        decorated.sort(function(a, b) {\n          var exprA = interpreter.visit(exprefNode, a[1]);\n          var exprB = interpreter.visit(exprefNode, b[1]);\n          if (that._getTypeName(exprA) !== requiredType) {\n              throw new Error(\n                  \"TypeError: expected \" + requiredType + \", received \" +\n                  that._getTypeName(exprA));\n          } else if (that._getTypeName(exprB) !== requiredType) {\n              throw new Error(\n                  \"TypeError: expected \" + requiredType + \", received \" +\n                  that._getTypeName(exprB));\n          }\n          if (exprA > exprB) {\n            return 1;\n          } else if (exprA < exprB) {\n            return -1;\n          } else {\n            // If they're equal compare the items by their\n            // order to maintain relative order of equal keys\n            // (i.e. to get a stable sort).\n            return a[0] - b[0];\n          }\n        });\n        // Undecorate: extract out the original list elements.\n        for (var j = 0; j < decorated.length; j++) {\n          sortedArray[j] = decorated[j][1];\n        }\n        return sortedArray;\n    },\n\n    _functionMaxBy: function(resolvedArgs) {\n      var exprefNode = resolvedArgs[1];\n      var resolvedArray = resolvedArgs[0];\n      var keyFunction = this.createKeyFunction(exprefNode, [TYPE_NUMBER, TYPE_STRING]);\n      var maxNumber = -Infinity;\n      var maxRecord;\n      var current;\n      for (var i = 0; i < resolvedArray.length; i++) {\n        current = keyFunction(resolvedArray[i]);\n        if (current > maxNumber) {\n          maxNumber = current;\n          maxRecord = resolvedArray[i];\n        }\n      }\n      return maxRecord;\n    },\n\n    _functionMinBy: function(resolvedArgs) {\n      var exprefNode = resolvedArgs[1];\n      var resolvedArray = resolvedArgs[0];\n      var keyFunction = this.createKeyFunction(exprefNode, [TYPE_NUMBER, TYPE_STRING]);\n      var minNumber = Infinity;\n      var minRecord;\n      var current;\n      for (var i = 0; i < resolvedArray.length; i++) {\n        current = keyFunction(resolvedArray[i]);\n        if (current < minNumber) {\n          minNumber = current;\n          minRecord = resolvedArray[i];\n        }\n      }\n      return minRecord;\n    },\n\n    createKeyFunction: function(exprefNode, allowedTypes) {\n      var that = this;\n      var interpreter = this._interpreter;\n      var keyFunc = function(x) {\n        var current = interpreter.visit(exprefNode, x);\n        if (allowedTypes.indexOf(that._getTypeName(current)) < 0) {\n          var msg = \"TypeError: expected one of \" + allowedTypes +\n                    \", received \" + that._getTypeName(current);\n          throw new Error(msg);\n        }\n        return current;\n      };\n      return keyFunc;\n    }\n\n  };\n\n  function compile(stream) {\n    var parser = new Parser();\n    var ast = parser.parse(stream);\n    return ast;\n  }\n\n  function tokenize(stream) {\n      var lexer = new Lexer();\n      return lexer.tokenize(stream);\n  }\n\n  function search(data, expression) {\n      var parser = new Parser();\n      // This needs to be improved.  Both the interpreter and runtime depend on\n      // each other.  The runtime needs the interpreter to support exprefs.\n      // There's likely a clean way to avoid the cyclic dependency.\n      var runtime = new Runtime();\n      var interpreter = new TreeInterpreter(runtime);\n      runtime._interpreter = interpreter;\n      var node = parser.parse(expression);\n      return interpreter.search(node, data);\n  }\n\n  exports.tokenize = tokenize;\n  exports.compile = compile;\n  exports.search = search;\n  exports.strictDeepEqual = strictDeepEqual;\n})( false ? undefined : exports);\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar picoModal = __webpack_require__(13);\nvar translate = __webpack_require__(1).translate;\nvar util = __webpack_require__(0);\n\n/**\n * Show advanced sorting modal\n * @param {HTMLElement} container   The container where to center\n *                                  the modal and create an overlay\n * @param {JSON} json               The JSON data to be sorted.\n * @param {function} onSort         Callback function, invoked with\n *                                  an object containing the selected\n *                                  path and direction\n * @param {Object} options\n *            Available options:\n *                - {string} path              The selected path\n *                - {'asc' | 'desc'} direction The selected direction\n */\nfunction showSortModal (container, json, onSort, options) {\n  var paths = Array.isArray(json)\n      ? util.getChildPaths(json)\n      : [''];\n  var selectedPath = options && options.path && util.contains(paths, options.path)\n      ? options.path\n      : paths[0]\n  var selectedDirection = options && options.direction || 'asc'\n\n  var content = '<div class=\"pico-modal-contents\">' +\n      '<div class=\"pico-modal-header\">' + translate('sort') + '</div>' +\n      '<form>' +\n      '<table>' +\n      '<tbody>' +\n      '<tr>' +\n      '  <td>' + translate('sortFieldLabel') + ' </td>' +\n      '  <td class=\"jsoneditor-modal-input\">' +\n      '  <div class=\"jsoneditor-select-wrapper\">' +\n      '    <select id=\"field\" title=\"' + translate('sortFieldTitle') + '\">' +\n      '    </select>' +\n      '  </div>' +\n      '  </td>' +\n      '</tr>' +\n      '<tr>' +\n      '  <td>' + translate('sortDirectionLabel') + ' </td>' +\n      '  <td class=\"jsoneditor-modal-input\">' +\n      '  <div id=\"direction\" class=\"jsoneditor-button-group\">' +\n      '<input type=\"button\" ' +\n      'value=\"' + translate('sortAscending') + '\" ' +\n      'title=\"'  + translate('sortAscendingTitle') + '\" ' +\n      'data-value=\"asc\" ' +\n      'class=\"jsoneditor-button-first jsoneditor-button-asc\"/>' +\n      '<input type=\"button\" ' +\n      'value=\"' + translate('sortDescending') + '\" ' +\n      'title=\"' + translate('sortDescendingTitle') + '\" ' +\n      'data-value=\"desc\" ' +\n      'class=\"jsoneditor-button-last jsoneditor-button-desc\"/>' +\n      '  </div>' +\n      '  </td>' +\n      '</tr>' +\n      '<tr>' +\n      '<td colspan=\"2\" class=\"jsoneditor-modal-input jsoneditor-modal-actions\">' +\n      '  <input type=\"submit\" id=\"ok\" value=\"' + translate('ok') + '\" />' +\n      '</td>' +\n      '</tr>' +\n      '</tbody>' +\n      '</table>' +\n      '</form>' +\n      '</div>';\n\n  picoModal({\n    parent: container,\n    content: content,\n    overlayClass: 'jsoneditor-modal-overlay',\n    modalClass: 'jsoneditor-modal jsoneditor-modal-sort'\n  })\n      .afterCreate(function (modal) {\n        var form = modal.modalElem().querySelector('form');\n        var ok = modal.modalElem().querySelector('#ok');\n        var field = modal.modalElem().querySelector('#field');\n        var direction = modal.modalElem().querySelector('#direction');\n\n        function preprocessPath(path) {\n          return (path === '')\n              ? '@'\n              : (path[0] === '.')\n                  ? path.slice(1)\n                  : path;\n        }\n\n        paths.forEach(function (path) {\n          var option = document.createElement('option');\n          option.text = preprocessPath(path);\n          option.value = path;\n          field.appendChild(option);\n        });\n\n        function setDirection(value) {\n          direction.value = value;\n          direction.className = 'jsoneditor-button-group jsoneditor-button-group-value-' + direction.value;\n        }\n\n        field.value = selectedPath || paths[0];\n        setDirection(selectedDirection || 'asc');\n\n        direction.onclick = function (event) {\n          setDirection(event.target.getAttribute('data-value'));\n        };\n\n        ok.onclick = function (event) {\n          event.preventDefault();\n          event.stopPropagation();\n\n          modal.close();\n\n          onSort({\n            path: field.value,\n            direction: direction.value\n          })\n        };\n\n        if (form) { // form is not available when JSONEditor is created inside a form\n          form.onsubmit = ok.onclick;\n        }\n      })\n      .afterClose(function (modal) {\n        modal.destroy();\n      })\n      .show();\n}\n\nmodule.exports = showSortModal;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar jmespath = __webpack_require__(4);\nvar picoModal = __webpack_require__(13);\nvar Selectr = __webpack_require__(30);\nvar translate = __webpack_require__(1).translate;\nvar stringifyPartial = __webpack_require__(31).stringifyPartial;\nvar util = __webpack_require__(0);\nvar MAX_PREVIEW_CHARACTERS = __webpack_require__(2).MAX_PREVIEW_CHARACTERS\nvar debounce = util.debounce;\n\n/**\n * Show advanced filter and transform modal using JMESPath\n * @param {HTMLElement} container   The container where to center\n *                                  the modal and create an overlay\n * @param {JSON} json               The json data to be transformed\n * @param {function} onTransform    Callback invoked with the created\n *                                  query as callback\n */\nfunction showTransformModal (container, json, onTransform) {\n  var value = json;\n\n  var content = '<label class=\"pico-modal-contents\">' +\n      '<div class=\"pico-modal-header\">' + translate('transform') + '</div>' +\n      '<p>' +\n      'Enter a <a href=\"http://jmespath.org\" target=\"_blank\">JMESPath</a> query to filter, sort, or transform the JSON data.<br/>' +\n      'To learn JMESPath, go to <a href=\"http://jmespath.org/tutorial.html\" target=\"_blank\">the interactive tutorial</a>.' +\n      '</p>' +\n      '<div class=\"jsoneditor-jmespath-label\">' + translate('transformWizardLabel') + ' </div>' +\n      '<div id=\"wizard\" class=\"jsoneditor-jmespath-block jsoneditor-jmespath-wizard\">' +\n      '  <table class=\"jsoneditor-jmespath-wizard-table\">' +\n      '    <tbody>' +\n      '      <tr>' +\n      '        <th>' + translate('transformWizardFilter') + '</th>' +\n      '        <td class=\"jsoneditor-jmespath-filter\">' +\n      '          <div class=\"jsoneditor-inline jsoneditor-jmespath-filter-field\" >' +\n      '            <select id=\"filterField\">' +\n      '            </select>' +\n      '          </div>' +\n      '          <div class=\"jsoneditor-inline jsoneditor-jmespath-filter-relation\" >' +\n      '            <select id=\"filterRelation\">' +\n      '              <option value=\"==\">==</option>' +\n      '              <option value=\"!=\">!=</option>' +\n      '              <option value=\"<\">&lt;</option>' +\n      '              <option value=\"<=\">&lt;=</option>' +\n      '              <option value=\">\">&gt;</option>' +\n      '              <option value=\">=\">&gt;=</option>' +\n      '            </select>' +\n      '          </div>' +\n      '          <div class=\"jsoneditor-inline jsoneditor-jmespath-filter-value\" >' +\n      '            <input placeholder=\"value...\" id=\"filterValue\" />' +\n      '          </div>' +\n      '        </td>' +\n      '      </tr>' +\n      '      <tr>' +\n      '        <th>' + translate('transformWizardSortBy') + '</th>' +\n      '        <td class=\"jsoneditor-jmespath-filter\">' +\n      '          <div class=\"jsoneditor-inline jsoneditor-jmespath-sort-field\">' +\n      '            <select id=\"sortField\">' +\n      '            </select>' +\n      '          </div>' +\n      '          <div class=\"jsoneditor-inline jsoneditor-jmespath-sort-order\" >' +\n      '            <select id=\"sortOrder\">' +\n      '              <option value=\"asc\">Ascending</option>' +\n      '              <option value=\"desc\">Descending</option>' +\n      '            </select>' +\n      '          </div>' +\n      '        </td>' +\n      '      </tr>' +\n      '      <tr id=\"selectFieldsPart\">' +\n      '        <th>' + translate('transformWizardSelectFields') + '</th>' +\n      '        <td class=\"jsoneditor-jmespath-filter\">' +\n      '          <select class=\"jsoneditor-jmespath-select-fields\" id=\"selectFields\" multiple></select>' +\n      '        </td>' +\n      '      </tr>' +\n      '    </tbody>' +\n      '  </table>' +\n      '</div>' +\n      '<div class=\"jsoneditor-jmespath-label\">' + translate('transformQueryLabel') + ' </div>' +\n      '<div class=\"jsoneditor-jmespath-block\">' +\n      '  <textarea id=\"query\" ' +\n      '            rows=\"4\" ' +\n      '            autocomplete=\"off\" ' +\n      '            autocorrect=\"off\" ' +\n      '            autocapitalize=\"off\" ' +\n      '            spellcheck=\"false\"' +\n      '            title=\"' + translate('transformQueryTitle') + '\">[*]</textarea>' +\n      '</div>' +\n      '<div class=\"jsoneditor-jmespath-label\">' + translate('transformPreviewLabel') + ' </div>' +\n      '<div class=\"jsoneditor-jmespath-block\">' +\n      '  <textarea id=\"preview\" ' +\n      '      class=\"jsoneditor-transform-preview\"' +\n      '      readonly> </textarea>' +\n      '</div>' +\n      '<div class=\"jsoneditor-jmespath-block jsoneditor-modal-actions\">' +\n      '  <input type=\"submit\" id=\"ok\" value=\"' + translate('ok') + '\" autofocus />' +\n      '</div>' +\n      '</div>';\n\n  picoModal({\n    parent: container,\n    content: content,\n    overlayClass: 'jsoneditor-modal-overlay',\n    modalClass: 'jsoneditor-modal jsoneditor-modal-transform',\n    focus: false\n  })\n      .afterCreate(function (modal) {\n        var elem = modal.modalElem();\n\n        var wizard = elem.querySelector('#wizard');\n        var ok = elem.querySelector('#ok');\n        var filterField = elem.querySelector('#filterField');\n        var filterRelation = elem.querySelector('#filterRelation');\n        var filterValue = elem.querySelector('#filterValue');\n        var sortField = elem.querySelector('#sortField');\n        var sortOrder = elem.querySelector('#sortOrder');\n        var selectFields = elem.querySelector('#selectFields');\n        var query = elem.querySelector('#query');\n        var preview = elem.querySelector('#preview');\n\n        if (!Array.isArray(value)) {\n          wizard.style.fontStyle = 'italic';\n          wizard.innerHTML = '(wizard not available for objects, only for arrays)'\n        }\n\n        var sortablePaths = util.getChildPaths(json);\n\n        sortablePaths.forEach(function (path) {\n          var formattedPath = preprocessPath(path);\n          var filterOption = document.createElement('option');\n          filterOption.text = formattedPath;\n          filterOption.value = formattedPath;\n          filterField.appendChild(filterOption);\n\n          var sortOption = document.createElement('option');\n          sortOption.text = formattedPath;\n          sortOption.value = formattedPath;\n          sortField.appendChild(sortOption);\n        });\n\n        var selectablePaths = util.getChildPaths(json, true).filter(function(path) {\n          return path !== '';\n        });\n        if (selectablePaths.length > 0) {\n          selectablePaths.forEach(function (path) {\n            var formattedPath = preprocessPath(path);\n            var option = document.createElement('option');\n            option.text = formattedPath;\n            option.value = formattedPath;\n            selectFields.appendChild(option);\n          });\n        }\n        else {\n          var selectFieldsPart = elem.querySelector('#selectFieldsPart');\n          if (selectFieldsPart) {\n            selectFieldsPart.style.display = 'none';\n          }\n        }\n\n        var selectrFilterField = new Selectr(filterField, { defaultSelected: false, clearable: true, allowDeselect: true, placeholder: 'field...' });\n        var selectrFilterRelation = new Selectr(filterRelation, { defaultSelected: false, clearable: true, allowDeselect: true, placeholder: 'compare...' });\n        var selectrSortField = new Selectr(sortField, { defaultSelected: false, clearable: true, allowDeselect: true, placeholder: 'field...' });\n        var selectrSortOrder = new Selectr(sortOrder, { defaultSelected: false, clearable: true, allowDeselect: true, placeholder: 'order...' });\n        var selectrSelectFields = new Selectr(selectFields, {multiple: true, clearable: true, defaultSelected: false, placeholder: 'select fields...'});\n\n        selectrFilterField.on('selectr.change', generateQueryFromWizard);\n        selectrFilterRelation.on('selectr.change', generateQueryFromWizard);\n        filterValue.oninput = generateQueryFromWizard;\n        selectrSortField.on('selectr.change', generateQueryFromWizard);\n        selectrSortOrder.on('selectr.change', generateQueryFromWizard);\n        selectrSelectFields.on('selectr.change', generateQueryFromWizard);\n\n        elem.querySelector('.pico-modal-contents').onclick = function (event) {\n          // prevent the first clear button (in any select box) from getting\n          // focus when clicking anywhere in the modal. Only allow clicking links.\n          if (event.target.nodeName !== 'A') {\n            event.preventDefault();\n          }\n        };\n\n        query.value = Array.isArray(value) ? '[*]' : '@';\n\n        function preprocessPath(path) {\n          return (path === '')\n              ? '@'\n              : (path[0] === '.')\n                  ? path.slice(1)\n                  : path;\n        }\n\n        function generateQueryFromWizard () {\n          if (filterField.value && filterRelation.value && filterValue.value) {\n            var field1 = filterField.value;\n            var examplePath = field1 !== '@'\n                ? ['0'].concat(util.parsePath('.' + field1))\n                : ['0']\n            var exampleValue = util.get(value, examplePath)\n            var value1 = typeof exampleValue === 'string'\n                ? filterValue.value\n                : util.parseString(filterValue.value);\n\n            query.value = '[? ' +\n                field1 + ' ' +\n                filterRelation.value + ' ' +\n                '`' + JSON.stringify(value1) + '`' +\n                ']';\n          }\n          else {\n            query.value = '[*]';\n          }\n\n          if (sortField.value && sortOrder.value) {\n            var field2 = sortField.value;\n            if (sortOrder.value === 'desc') {\n              query.value += ' | reverse(sort_by(@, &' + field2 + '))';\n            }\n            else {\n              query.value += ' | sort_by(@, &' + field2 + ')';\n            }\n          }\n\n          if (selectFields.value) {\n            var values = [];\n            for (var i=0; i < selectFields.options.length; i++) {\n              if (selectFields.options[i].selected) {\n                var selectedValue = selectFields.options[i].value;\n                values.push(selectedValue);\n              }\n            }\n\n            if (query.value[query.value.length - 1] !== ']') {\n              query.value += ' | [*]';\n            }\n\n            if (values.length === 1) {\n              query.value += '.' + values[0];\n            }\n            else if (values.length > 1) {\n              query.value += '.{' +\n                  values.map(function (value) {\n                    var parts = value.split('.');\n                    var last = parts[parts.length - 1];\n                    return last + ': ' + value;\n                  }).join(', ') +\n                  '}';\n            }\n            else { // values.length === 0\n              // ignore\n            }\n          }\n\n          debouncedUpdatePreview();\n        }\n\n        function updatePreview() {\n          try {\n            var transformed = jmespath.search(value, query.value);\n\n            preview.className = 'jsoneditor-transform-preview';\n            preview.value = stringifyPartial(transformed, 2, MAX_PREVIEW_CHARACTERS);\n\n            ok.disabled = false;\n          }\n          catch (err) {\n            preview.className = 'jsoneditor-transform-preview jsoneditor-error';\n            preview.value = err.toString();\n            ok.disabled = true;\n          }\n        }\n\n        var debouncedUpdatePreview = debounce(updatePreview, 300);\n\n        query.oninput = debouncedUpdatePreview;\n        debouncedUpdatePreview();\n\n        ok.onclick = function (event) {\n          event.preventDefault();\n          event.stopPropagation();\n\n          modal.close();\n\n          onTransform(query.value)\n        };\n\n        setTimeout(function () {\n          query.select();\n          query.focus();\n          query.selectionStart = 3;\n          query.selectionEnd = 3;\n        });\n      })\n      .afterClose(function (modal) {\n        modal.destroy();\n      })\n      .show();\n}\n\nmodule.exports = showTransformModal;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar ContextMenu = __webpack_require__(3);\nvar translate = __webpack_require__(1).translate;\n\n/**\n * Create a select box to be used in the editor menu's, which allows to switch mode\n * @param {HTMLElement} container\n * @param {String[]} modes  Available modes: 'code', 'form', 'text', 'tree', 'view', 'preview'\n * @param {String} current  Available modes: 'code', 'form', 'text', 'tree', 'view', 'preview'\n * @param {function(mode: string)} onSwitch  Callback invoked on switch\n * @constructor\n */\nfunction ModeSwitcher(container, modes, current, onSwitch) {\n  // available modes\n  var availableModes = {\n    code: {\n      'text': translate('modeCodeText'),\n      'title': translate('modeCodeTitle'),\n      'click': function () {\n        onSwitch('code')\n      }\n    },\n    form: {\n      'text': translate('modeFormText'),\n      'title': translate('modeFormTitle'),\n      'click': function () {\n        onSwitch('form');\n      }\n    },\n    text: {\n      'text': translate('modeTextText'),\n      'title': translate('modeTextTitle'),\n      'click': function () {\n        onSwitch('text');\n      }\n    },\n    tree: {\n      'text': translate('modeTreeText'),\n      'title': translate('modeTreeTitle'),\n      'click': function () {\n        onSwitch('tree');\n      }\n    },\n    view: {\n      'text': translate('modeViewText'),\n      'title': translate('modeViewTitle'),\n      'click': function () {\n        onSwitch('view');\n      }\n    },\n    preview: {\n      'text': translate('modePreviewText'),\n      'title': translate('modePreviewTitle'),\n      'click': function () {\n        onSwitch('preview');\n      }\n    }\n  };\n\n  // list the selected modes\n  var items = [];\n  for (var i = 0; i < modes.length; i++) {\n    var mode = modes[i];\n    var item = availableModes[mode];\n    if (!item) {\n      throw new Error('Unknown mode \"' + mode + '\"');\n    }\n\n    item.className = 'jsoneditor-type-modes' + ((current == mode) ? ' jsoneditor-selected' : '');\n    items.push(item);\n  }\n\n  // retrieve the title of current mode\n  var currentMode = availableModes[current];\n  if (!currentMode) {\n    throw new Error('Unknown mode \"' + current + '\"');\n  }\n  var currentTitle = currentMode.text;\n\n  // create the html element\n  var box = document.createElement('button');\n  box.type = 'button';\n  box.className = 'jsoneditor-modes jsoneditor-separator';\n  box.innerHTML = currentTitle + ' &#x25BE;';\n  box.title = 'Switch editor mode';\n  box.onclick = function () {\n    var menu = new ContextMenu(items);\n    menu.show(box, container);\n  };\n\n  var frame = document.createElement('div');\n  frame.className = 'jsoneditor-modes';\n  frame.style.position = 'relative';\n  frame.appendChild(box);\n\n  container.appendChild(frame);\n\n  this.dom = {\n    container: container,\n    box: box,\n    frame: frame\n  };\n}\n\n/**\n * Set focus to switcher\n */\nModeSwitcher.prototype.focus = function () {\n  this.dom.box.focus();\n};\n\n/**\n * Destroy the ModeSwitcher, remove from DOM\n */\nModeSwitcher.prototype.destroy = function () {\n  if (this.dom && this.dom.frame && this.dom.frame.parentNode) {\n    this.dom.frame.parentNode.removeChild(this.dom.frame);\n  }\n  this.dom = null;\n};\n\nmodule.exports = ModeSwitcher;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ace\nif (window.ace) {\n  // use the already loaded instance of Ace\n  ace = window.ace\n}\nelse {\n  try {\n    // load brace\n    ace = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module 'brace'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\n    // load required Ace plugins\n    __webpack_require__(17);\n    __webpack_require__(19);\n  }\n  catch (err) {\n    // failed to load brace (can be minimalist bundle).\n    // No worries, the editor will fall back to plain text if needed.\n  }\n}\n\nmodule.exports = ace;\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar VanillaPicker;\n\nif (window.Picker) {\n  // use the already loaded instance of VanillaPicker\n  VanillaPicker = window.Picker;\n}\nelse {\n  try {\n    // load color picker\n    VanillaPicker = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module 'vanilla-picker'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n  }\n  catch (err) {\n    // probably running the minimalist bundle\n  }\n}\n\nmodule.exports = VanillaPicker;\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\nif (typeof Element !== 'undefined') {\n  // Polyfill for array remove\n  (function () {\n    function polyfill (item) {\n      if (item.hasOwnProperty('remove')) {\n        return;\n      }\n      Object.defineProperty(item, 'remove', {\n        configurable: true,\n        enumerable: true,\n        writable: true,\n        value: function remove() {\n          if (this.parentNode != null)\n            this.parentNode.removeChild(this);\n        }\n      });\n    }\n\n    if (typeof Element !== 'undefined')       { polyfill(Element.prototype); }\n    if (typeof CharacterData !== 'undefined') { polyfill(CharacterData.prototype); }\n    if (typeof DocumentType !== 'undefined')  { polyfill(DocumentType.prototype); }\n  })();\n}\n\n\n// Polyfill for startsWith\nif (!String.prototype.startsWith) {\n  String.prototype.startsWith = function (searchString, position) {\n    position = position || 0;\n    return this.substr(position, searchString.length) === searchString;\n  };\n}\n\n// Polyfill for Array.find\nif (!Array.prototype.find) {\n  Array.prototype.find = function(callback) {\n    for (var i = 0; i < this.length; i++) {\n      var element = this[i];\n      if ( callback.call(this, element, i, this) ) {\n        return element;\n      }\n    }\n  }\n}\n\n// Polyfill for String.trim\nif (!String.prototype.trim) {\n  String.prototype.trim = function () {\n    return this.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n  };\n}\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n/*\r\n * Natural Sort algorithm for Javascript - Version 0.7 - Released under MIT license\r\n * Author: Jim Palmer (based on chunking idea from Dave Koelle)\r\n */\r\n/*jshint unused:false */\r\nmodule.exports = function naturalSort (a, b) {\r\n\t\"use strict\";\r\n\tvar re = /(^([+\\-]?(?:0|[1-9]\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)?$|^0x[0-9a-f]+$|\\d+)/gi,\r\n\t\tsre = /(^[ ]*|[ ]*$)/g,\r\n\t\tdre = /(^([\\w ]+,?[\\w ]+)?[\\w ]+,?[\\w ]+\\d+:\\d+(:\\d+)?[\\w ]?|^\\d{1,4}[\\/\\-]\\d{1,4}[\\/\\-]\\d{1,4}|^\\w+, \\w+ \\d+, \\d{4})/,\r\n\t\thre = /^0x[0-9a-f]+$/i,\r\n\t\tore = /^0/,\r\n\t\ti = function(s) { return naturalSort.insensitive && ('' + s).toLowerCase() || '' + s; },\r\n\t\t// convert all to strings strip whitespace\r\n\t\tx = i(a).replace(sre, '') || '',\r\n\t\ty = i(b).replace(sre, '') || '',\r\n\t\t// chunk/tokenize\r\n\t\txN = x.replace(re, '\\0$1\\0').replace(/\\0$/,'').replace(/^\\0/,'').split('\\0'),\r\n\t\tyN = y.replace(re, '\\0$1\\0').replace(/\\0$/,'').replace(/^\\0/,'').split('\\0'),\r\n\t\t// numeric, hex or date detection\r\n\t\txD = parseInt(x.match(hre), 16) || (xN.length !== 1 && x.match(dre) && Date.parse(x)),\r\n\t\tyD = parseInt(y.match(hre), 16) || xD && y.match(dre) && Date.parse(y) || null,\r\n\t\toFxNcL, oFyNcL;\r\n\t// first try and sort Hex codes or Dates\r\n\tif (yD) {\r\n\t\tif ( xD < yD ) { return -1; }\r\n\t\telse if ( xD > yD ) { return 1; }\r\n\t}\r\n\t// natural sorting through split numeric strings and default strings\r\n\tfor(var cLoc=0, numS=Math.max(xN.length, yN.length); cLoc < numS; cLoc++) {\r\n\t\t// find floats not starting with '0', string or 0 if not defined (Clint Priest)\r\n\t\toFxNcL = !(xN[cLoc] || '').match(ore) && parseFloat(xN[cLoc]) || xN[cLoc] || 0;\r\n\t\toFyNcL = !(yN[cLoc] || '').match(ore) && parseFloat(yN[cLoc]) || yN[cLoc] || 0;\r\n\t\t// handle numeric vs string comparison - number < string - (Kyle Adams)\r\n\t\tif (isNaN(oFxNcL) !== isNaN(oFyNcL)) { return (isNaN(oFxNcL)) ? 1 : -1; }\r\n\t\t// rely on string comparison if different types - i.e. '02' < 2 != '02' < '2'\r\n\t\telse if (typeof oFxNcL !== typeof oFyNcL) {\r\n\t\t\toFxNcL += '';\r\n\t\t\toFyNcL += '';\r\n\t\t}\r\n\t\tif (oFxNcL < oFyNcL) { return -1; }\r\n\t\tif (oFxNcL > oFyNcL) { return 1; }\r\n\t}\r\n\treturn 0;\r\n};\r\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar util = __webpack_require__(0);\n\n/**\n * Create an anchor element absolutely positioned in the `parent`\n * element.\n * @param {HTMLElement} anchor\n * @param {HTMLElement} parent\n * @param [onDestroy(function(anchor)]  Callback when the anchor is destroyed\n * @returns {HTMLElement}\n */\nexports.createAbsoluteAnchor = function (anchor, parent, onDestroy) {\n  var root = getRootNode(anchor);\n  var eventListeners = {};\n\n  var anchorRect = anchor.getBoundingClientRect();\n  var frameRect = parent.getBoundingClientRect();\n\n  var absoluteAnchor = document.createElement('div');\n  absoluteAnchor.className = 'jsoneditor-anchor';\n  absoluteAnchor.style.position = 'absolute';\n  absoluteAnchor.style.left = (anchorRect.left - frameRect.left) + 'px';\n  absoluteAnchor.style.top = (anchorRect.top - frameRect.top) + 'px';\n  absoluteAnchor.style.width = (anchorRect.width - 2) + 'px';\n  absoluteAnchor.style.height = (anchorRect.height - 2) + 'px';\n  absoluteAnchor.style.boxSizing = 'border-box';\n  parent.appendChild(absoluteAnchor);\n\n  function destroy () {\n    // remove temporary absolutely positioned anchor\n    if (absoluteAnchor && absoluteAnchor.parentNode) {\n      absoluteAnchor.parentNode.removeChild(absoluteAnchor);\n\n      // remove all event listeners\n      // all event listeners are supposed to be attached to document.\n      for (var name in eventListeners) {\n        if (eventListeners.hasOwnProperty(name)) {\n          var fn = eventListeners[name];\n          if (fn) {\n            util.removeEventListener(root, name, fn);\n          }\n          delete eventListeners[name];\n        }\n      }\n\n      if (typeof onDestroy === 'function') {\n        onDestroy(anchor);\n      }\n    }\n  }\n\n  // create and attach event listeners\n  var destroyIfOutside = function (event) {\n    var target = event.target;\n    if ((target !== absoluteAnchor) && !util.isChildOf(target, absoluteAnchor)) {\n      destroy();\n    }\n  }\n\n  eventListeners.mousedown = util.addEventListener(root, 'mousedown', destroyIfOutside);\n  eventListeners.mousewheel = util.addEventListener(root, 'mousewheel', destroyIfOutside);\n  // eventListeners.scroll = util.addEventListener(root, 'scroll', destroyIfOutside);\n\n  absoluteAnchor.destroy = destroy;\n\n  return absoluteAnchor\n}\n\n/**\n * Node.getRootNode shim\n * @param  {HTMLElement} node node to check\n * @return {HTMLElement}      node's rootNode or `window` if there is ShadowDOM is not supported.\n */\nfunction getRootNode(node){\n  return (typeof node.getRootNode === 'function')\n      ? node.getRootNode()\n      : window;\n}\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n(function (root, factory) {\n    \"use strict\";\n\n    if (true) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    }\n    else {}\n}(this, function () {\n\n    /**\n     * A self-contained modal library\n     */\n    \"use strict\";\n\n    /** Returns whether a value is a dom node */\n    function isNode(value) {\n        if ( typeof Node === \"object\" ) {\n            return value instanceof Node;\n        }\n        else {\n            return value && typeof value === \"object\" && typeof value.nodeType === \"number\";\n        }\n    }\n\n    /** Returns whether a value is a string */\n    function isString(value) {\n        return typeof value === \"string\";\n    }\n\n    /**\n     * Generates observable objects that can be watched and triggered\n     */\n    function observable() {\n        var callbacks = [];\n        return {\n            watch: callbacks.push.bind(callbacks),\n            trigger: function(context, detail) {\n\n                var unprevented = true;\n                var event = {\n                    detail: detail,\n                    preventDefault: function preventDefault () {\n                        unprevented = false;\n                    }\n                };\n\n                for (var i = 0; i < callbacks.length; i++) {\n                    callbacks[i](context, event);\n                }\n\n                return unprevented;\n            }\n        };\n    }\n\n\n    /** Whether an element is hidden */\n    function isHidden ( elem ) {\n        // @see http://stackoverflow.com/questions/19669786\n        return window.getComputedStyle(elem).display === 'none';\n    }\n\n\n    /**\n     * A small interface for creating and managing a dom element\n     */\n    function Elem( elem ) {\n        this.elem = elem;\n    }\n\n    /** Creates a new div */\n    Elem.make = function ( parent, tag ) {\n        if ( typeof parent === \"string\" ) {\n            parent = document.querySelector(parent);\n        }\n        var elem = document.createElement(tag || 'div');\n        (parent || document.body).appendChild(elem);\n        return new Elem(elem);\n    };\n\n    Elem.prototype = {\n\n        /** Creates a child of this node */\n        child: function (tag) {\n            return Elem.make(this.elem, tag);\n        },\n\n        /** Applies a set of styles to an element */\n        stylize: function(styles) {\n            styles = styles || {};\n\n            if ( typeof styles.opacity !== \"undefined\" ) {\n                styles.filter = \"alpha(opacity=\" + (styles.opacity * 100) + \")\";\n            }\n\n            for (var prop in styles) {\n                if (styles.hasOwnProperty(prop)) {\n                    this.elem.style[prop] = styles[prop];\n                }\n            }\n\n            return this;\n        },\n\n        /** Adds a class name */\n        clazz: function (clazz) {\n            this.elem.className += \" \" + clazz;\n            return this;\n        },\n\n        /** Sets the HTML */\n        html: function (content) {\n            if ( isNode(content) ) {\n                this.elem.appendChild( content );\n            }\n            else {\n                this.elem.innerHTML = content;\n            }\n            return this;\n        },\n\n        /** Adds a click handler to this element */\n        onClick: function(callback) {\n            this.elem.addEventListener('click', callback);\n            return this;\n        },\n\n        /** Removes this element from the DOM */\n        destroy: function() {\n            this.elem.parentNode.removeChild(this.elem);\n        },\n\n        /** Hides this element */\n        hide: function() {\n            this.elem.style.display = \"none\";\n        },\n\n        /** Shows this element */\n        show: function() {\n            this.elem.style.display = \"block\";\n        },\n\n        /** Sets an attribute on this element */\n        attr: function ( name, value ) {\n            if (value !== undefined) {\n                this.elem.setAttribute(name, value);\n            }\n            return this;\n        },\n\n        /** Executes a callback on all the ancestors of an element */\n        anyAncestor: function ( predicate ) {\n            var elem = this.elem;\n            while ( elem ) {\n                if ( predicate( new Elem(elem) ) ) {\n                    return true;\n                }\n                else {\n                    elem = elem.parentNode;\n                }\n            }\n            return false;\n        },\n\n        /** Whether this element is visible */\n        isVisible: function () {\n            return !isHidden(this.elem);\n        }\n    };\n\n\n    /** Generates the grey-out effect */\n    function buildOverlay( getOption, close ) {\n        return Elem.make( getOption(\"parent\") )\n            .clazz(\"pico-overlay\")\n            .clazz( getOption(\"overlayClass\", \"\") )\n            .stylize({\n                display: \"none\",\n                position: \"fixed\",\n                top: \"0px\",\n                left: \"0px\",\n                height: \"100%\",\n                width: \"100%\",\n                zIndex: 10000\n            })\n            .stylize(getOption('overlayStyles', {\n                opacity: 0.5,\n                background: \"#000\"\n            }))\n            .onClick(function () {\n                if ( getOption('overlayClose', true) ) {\n                    close();\n                }\n            });\n    }\n\n    // An auto incrementing ID assigned to each modal\n    var autoinc = 1;\n\n    /** Builds the content of a modal */\n    function buildModal( getOption, close ) {\n        var width = getOption('width', 'auto');\n        if ( typeof width === \"number\" ) {\n            width = \"\" + width + \"px\";\n        }\n\n        var id = getOption(\"modalId\", \"pico-\" + autoinc++);\n\n        var elem = Elem.make( getOption(\"parent\") )\n            .clazz(\"pico-content\")\n            .clazz( getOption(\"modalClass\", \"\") )\n            .stylize({\n                display: 'none',\n                position: 'fixed',\n                zIndex: 10001,\n                left: \"50%\",\n                top: \"38.1966%\",\n                maxHeight: '90%',\n                boxSizing: 'border-box',\n                width: width,\n                '-ms-transform': 'translate(-50%,-38.1966%)',\n                '-moz-transform': 'translate(-50%,-38.1966%)',\n                '-webkit-transform': 'translate(-50%,-38.1966%)',\n                '-o-transform': 'translate(-50%,-38.1966%)',\n                transform: 'translate(-50%,-38.1966%)'\n            })\n            .stylize(getOption('modalStyles', {\n                overflow: 'auto',\n                backgroundColor: \"white\",\n                padding: \"20px\",\n                borderRadius: \"5px\"\n            }))\n            .html( getOption('content') )\n            .attr(\"id\", id)\n            .attr(\"role\", \"dialog\")\n            .attr(\"aria-labelledby\", getOption(\"ariaLabelledBy\"))\n            .attr(\"aria-describedby\", getOption(\"ariaDescribedBy\", id))\n            .onClick(function (event) {\n                var isCloseClick = new Elem(event.target).anyAncestor(function (elem) {\n                    return /\\bpico-close\\b/.test(elem.elem.className);\n                });\n                if ( isCloseClick ) {\n                    close();\n                }\n            });\n\n        return elem;\n    }\n\n    /** Builds the close button */\n    function buildClose ( elem, getOption ) {\n        if ( getOption('closeButton', true) ) {\n            return elem.child('button')\n                .html( getOption('closeHtml', \"&#xD7;\") )\n                .clazz(\"pico-close\")\n                .clazz( getOption(\"closeClass\", \"\") )\n                .stylize( getOption('closeStyles', {\n                    borderRadius: \"2px\",\n                    border: 0,\n                    padding: 0,\n                    cursor: \"pointer\",\n                    height: \"15px\",\n                    width: \"15px\",\n                    position: \"absolute\",\n                    top: \"5px\",\n                    right: \"5px\",\n                    fontSize: \"16px\",\n                    textAlign: \"center\",\n                    lineHeight: \"15px\",\n                    background: \"#CCC\"\n                }) )\n                .attr(\"aria-label\", getOption(\"close-label\", \"Close\"));\n        }\n    }\n\n    /** Builds a method that calls a method and returns an element */\n    function buildElemAccessor( builder ) {\n        return function () {\n            return builder().elem;\n        };\n    }\n\n\n    // An observable that is triggered whenever the escape key is pressed\n    var escapeKey = observable();\n\n    // An observable that is triggered when the user hits the tab key\n    var tabKey = observable();\n\n    /** A global event handler to detect the escape key being pressed */\n    document.documentElement.addEventListener('keydown', function onKeyPress (event) {\n        var keycode = event.which || event.keyCode;\n\n        // If this is the escape key\n        if ( keycode === 27 ) {\n            escapeKey.trigger();\n        }\n\n        // If this is the tab key\n        else if ( keycode === 9 ) {\n            tabKey.trigger(event);\n        }\n    });\n\n\n    /** Attaches focus management events */\n    function manageFocus ( iface, isEnabled ) {\n\n        /** Whether an element matches a selector */\n        function matches ( elem, selector ) {\n            var fn = elem.msMatchesSelector || elem.webkitMatchesSelector || elem.matches;\n            return fn.call(elem, selector);\n        }\n\n        /**\n         * Returns whether an element is focusable\n         * @see http://stackoverflow.com/questions/18261595\n         */\n        function canFocus( elem ) {\n            if (\n                isHidden(elem) ||\n                matches(elem, \":disabled\") ||\n                elem.hasAttribute(\"contenteditable\")\n            ) {\n                return false;\n            }\n            else {\n                return elem.hasAttribute(\"tabindex\") ||\n                    matches(elem, \"input,select,textarea,button,a[href],area[href],iframe\");\n            }\n        }\n\n        /** Returns the first descendant that can be focused */\n        function firstFocusable ( elem ) {\n            var items = elem.getElementsByTagName(\"*\");\n            for (var i = 0; i < items.length; i++) {\n                if ( canFocus(items[i]) ) {\n                    return items[i];\n                }\n            }\n        }\n\n        /** Returns the last descendant that can be focused */\n        function lastFocusable ( elem ) {\n            var items = elem.getElementsByTagName(\"*\");\n            for (var i = items.length; i--;) {\n                if ( canFocus(items[i]) ) {\n                    return items[i];\n                }\n            }\n        }\n\n        // The element focused before the modal opens\n        var focused;\n\n        // Records the currently focused element so state can be returned\n        // after the modal closes\n        iface.beforeShow(function getActiveFocus() {\n            focused = document.activeElement;\n        });\n\n        // Shift focus into the modal\n        iface.afterShow(function focusModal() {\n            if ( isEnabled() ) {\n                var focusable = firstFocusable(iface.modalElem());\n                if ( focusable ) {\n                    focusable.focus();\n                }\n            }\n        });\n\n        // Restore the previously focused element when the modal closes\n        iface.afterClose(function returnFocus() {\n            if ( isEnabled() && focused ) {\n                focused.focus();\n            }\n            focused = null;\n        });\n\n        // Capture tab key presses and loop them within the modal\n        tabKey.watch(function tabKeyPress (event) {\n            if ( isEnabled() && iface.isVisible() ) {\n                var first = firstFocusable(iface.modalElem());\n                var last = lastFocusable(iface.modalElem());\n\n                var from = event.shiftKey ? first : last;\n                if ( from === document.activeElement ) {\n                    (event.shiftKey ? last : first).focus();\n                    event.preventDefault();\n                }\n            }\n        });\n    }\n\n    /** Manages setting the 'overflow: hidden' on the body tag */\n    function manageBodyOverflow(iface, isEnabled) {\n        var origOverflow;\n        var body = new Elem(document.body);\n\n        iface.beforeShow(function () {\n            // Capture the current values so they can be restored\n            origOverflow = body.elem.style.overflow;\n\n            if (isEnabled()) {\n                body.stylize({ overflow: \"hidden\" });\n            }\n        });\n\n        iface.afterClose(function () {\n            body.stylize({ overflow: origOverflow });\n        });\n    }\n\n    /**\n     * Displays a modal\n     */\n    return function picoModal(options) {\n\n        if ( isString(options) || isNode(options) ) {\n            options = { content: options };\n        }\n\n        var afterCreateEvent = observable();\n        var beforeShowEvent = observable();\n        var afterShowEvent = observable();\n        var beforeCloseEvent = observable();\n        var afterCloseEvent = observable();\n\n        /**\n         * Returns a named option if it has been explicitly defined. Otherwise,\n         * it returns the given default value\n         */\n        function getOption ( opt, defaultValue ) {\n            var value = options[opt];\n            if ( typeof value === \"function\" ) {\n                value = value( defaultValue );\n            }\n            return value === undefined ? defaultValue : value;\n        }\n\n\n        // The various DOM elements that constitute the modal\n        var modalElem = build.bind(window, 'modal');\n        var shadowElem = build.bind(window, 'overlay');\n        var closeElem = build.bind(window, 'close');\n\n        // This will eventually contain the modal API returned to the user\n        var iface;\n\n\n        /** Hides this modal */\n        function forceClose (detail) {\n            shadowElem().hide();\n            modalElem().hide();\n            afterCloseEvent.trigger(iface, detail);\n        }\n\n        /** Gracefully hides this modal */\n        function close (detail) {\n            if ( beforeCloseEvent.trigger(iface, detail) ) {\n                forceClose(detail);\n            }\n        }\n\n        /** Wraps a method so it returns the modal interface */\n        function returnIface ( callback ) {\n            return function () {\n                callback.apply(this, arguments);\n                return iface;\n            };\n        }\n\n\n        // The constructed dom nodes\n        var built;\n\n        /** Builds a method that calls a method and returns an element */\n        function build (name, detail) {\n            if ( !built ) {\n                var modal = buildModal(getOption, close);\n                built = {\n                    modal: modal,\n                    overlay: buildOverlay(getOption, close),\n                    close: buildClose(modal, getOption)\n                };\n                afterCreateEvent.trigger(iface, detail);\n            }\n            return built[name];\n        }\n\n        iface = {\n\n            /** Returns the wrapping modal element */\n            modalElem: buildElemAccessor(modalElem),\n\n            /** Returns the close button element */\n            closeElem: buildElemAccessor(closeElem),\n\n            /** Returns the overlay element */\n            overlayElem: buildElemAccessor(shadowElem),\n\n            /** Builds the dom without showing the modal */\n            buildDom: returnIface(build.bind(null, null)),\n\n            /** Returns whether this modal is currently being shown */\n            isVisible: function () {\n                return !!(built && modalElem && modalElem().isVisible());\n            },\n\n            /** Shows this modal */\n            show: function (detail) {\n                if ( beforeShowEvent.trigger(iface, detail) ) {\n                    shadowElem().show();\n                    closeElem();\n                    modalElem().show();\n                    afterShowEvent.trigger(iface, detail);\n                }\n                return this;\n            },\n\n            /** Hides this modal */\n            close: returnIface(close),\n\n            /**\n             * Force closes this modal. This will not call beforeClose\n             * events and will just immediately hide the modal\n             */\n            forceClose: returnIface(forceClose),\n\n            /** Destroys this modal */\n            destroy: function () {\n                modalElem().destroy();\n                shadowElem().destroy();\n                shadowElem = modalElem = closeElem = undefined;\n            },\n\n            /**\n             * Updates the options for this modal. This will only let you\n             * change options that are re-evaluted regularly, such as\n             * `overlayClose`.\n             */\n            options: function ( opts ) {\n                Object.keys(opts).map(function (key) {\n                    options[key] = opts[key];\n                });\n            },\n\n            /** Executes after the DOM nodes are created */\n            afterCreate: returnIface(afterCreateEvent.watch),\n\n            /** Executes a callback before this modal is closed */\n            beforeShow: returnIface(beforeShowEvent.watch),\n\n            /** Executes a callback after this modal is shown */\n            afterShow: returnIface(afterShowEvent.watch),\n\n            /** Executes a callback before this modal is closed */\n            beforeClose: returnIface(beforeCloseEvent.watch),\n\n            /** Executes a callback after this modal is closed */\n            afterClose: returnIface(afterCloseEvent.watch)\n        };\n\n        manageFocus(iface, getOption.bind(null, \"focus\", true));\n\n        manageBodyOverflow(iface, getOption.bind(null, \"bodyOverflow\", true));\n\n        // If a user presses the 'escape' key, close the modal.\n        escapeKey.watch(function escapeKeyPress () {\n            if ( getOption(\"escCloses\", true) && iface.isVisible() ) {\n                iface.close();\n            }\n        });\n\n        return iface;\n    };\n\n}));\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar ace = __webpack_require__(8);\nvar jmespath = __webpack_require__(4);\nvar translate = __webpack_require__(1).translate;\nvar ModeSwitcher = __webpack_require__(7);\nvar ErrorTable = __webpack_require__(15);\nvar validateCustom = __webpack_require__(33).validateCustom;\nvar showSortModal = __webpack_require__(5);\nvar showTransformModal = __webpack_require__(6);\nvar util = __webpack_require__(0);\nvar DEFAULT_MODAL_ANCHOR = __webpack_require__(2).DEFAULT_MODAL_ANCHOR;\n\n// create a mixin with the functions for text mode\nvar textmode = {};\n\nvar DEFAULT_THEME = 'ace/theme/jsoneditor';\n\n/**\n * Create a text editor\n * @param {Element} container\n * @param {Object} [options]   Object with options. See docs for details.\n * @private\n */\ntextmode.create = function (container, options) {\n  // read options\n  options = options || {};\n  \n  if (typeof options.statusBar === 'undefined') {\n    options.statusBar = true;\n  }\n\n  // setting default for textmode\n  options.mainMenuBar = options.mainMenuBar !== false;\n  options.enableSort = options.enableSort !== false;\n  options.enableTransform = options.enableTransform !== false;\n\n  this.options = options;\n\n  // indentation\n  if (options.indentation) {\n    this.indentation = Number(options.indentation);\n  }\n  else {\n    this.indentation = 2; // number of spaces\n  }\n\n  // grab ace from options if provided\n  var _ace = options.ace ? options.ace : ace;\n  // TODO: make the option options.ace deprecated, it's not needed anymore (see #309)\n\n  // determine mode\n  this.mode = (options.mode == 'code') ? 'code' : 'text';\n  if (this.mode == 'code') {\n    // verify whether Ace editor is available and supported\n    if (typeof _ace === 'undefined') {\n      this.mode = 'text';\n      console.warn('Failed to load Ace editor, falling back to plain text mode. Please use a JSONEditor bundle including Ace, or pass Ace as via the configuration option `ace`.');\n    }\n  }\n\n  // determine theme\n  this.theme = options.theme || DEFAULT_THEME;\n  if (this.theme === DEFAULT_THEME && _ace) {\n    try {\n      __webpack_require__(34);\n    }\n    catch (err) {\n      console.error(err);\n    }\n  }\n\n  if (options.onTextSelectionChange) {\n    this.onTextSelectionChange(options.onTextSelectionChange);\n  }\n\n  var me = this;\n  this.container = container;\n  this.dom = {};\n  this.aceEditor = undefined;  // ace code editor\n  this.textarea = undefined;  // plain text editor (fallback when Ace is not available)\n  this.validateSchema = null;\n  this.annotations = [];\n\n  // create a debounced validate function\n  this._debouncedValidate = util.debounce(this.validate.bind(this), this.DEBOUNCE_INTERVAL);\n\n  this.width = container.clientWidth;\n  this.height = container.clientHeight;\n\n  this.frame = document.createElement('div');\n  this.frame.className = 'jsoneditor jsoneditor-mode-' + this.options.mode;\n  this.frame.onclick = function (event) {\n    // prevent default submit action when the editor is located inside a form\n    event.preventDefault();\n  };\n  this.frame.onkeydown = function (event) {\n    me._onKeyDown(event);\n  };\n\n  this.content = document.createElement('div');\n  this.content.className = 'jsoneditor-outer';\n\n  if (this.options.mainMenuBar) {\n    util.addClassName(this.content, 'has-main-menu-bar');\n\n    // create menu\n    this.menu = document.createElement('div');\n    this.menu.className = 'jsoneditor-menu';\n    this.frame.appendChild(this.menu);\n\n    // create format button\n    var buttonFormat = document.createElement('button');\n    buttonFormat.type = 'button';\n    buttonFormat.className = 'jsoneditor-format';\n    buttonFormat.title = 'Format JSON data, with proper indentation and line feeds (Ctrl+\\\\)';\n    this.menu.appendChild(buttonFormat);\n    buttonFormat.onclick = function () {\n      try {\n        me.format();\n        me._onChange();\n      }\n      catch (err) {\n        me._onError(err);\n      }\n    };\n\n    // create compact button\n    var buttonCompact = document.createElement('button');\n    buttonCompact.type = 'button';\n    buttonCompact.className = 'jsoneditor-compact';\n    buttonCompact.title = 'Compact JSON data, remove all whitespaces (Ctrl+Shift+\\\\)';\n    this.menu.appendChild(buttonCompact);\n    buttonCompact.onclick = function () {\n      try {\n        me.compact();\n        me._onChange();\n      }\n      catch (err) {\n        me._onError(err);\n      }\n    };\n\n    // create sort button\n    if (this.options.enableSort) {\n      var sort = document.createElement('button');\n      sort.type = 'button';\n      sort.className = 'jsoneditor-sort';\n      sort.title = translate('sortTitleShort');\n      sort.onclick = function () {\n        me._showSortModal();\n      };\n      this.menu.appendChild(sort);\n    }\n\n    // create transform button\n    if (this.options.enableTransform) {\n      var transform = document.createElement('button');\n      transform.type = 'button';\n      transform.title = translate('transformTitleShort');\n      transform.className = 'jsoneditor-transform';\n      transform.onclick = function () {\n        me._showTransformModal();\n      };\n      this.menu.appendChild(transform);\n    }\n\n    // create repair button\n    var buttonRepair = document.createElement('button');\n    buttonRepair.type = 'button';\n    buttonRepair.className = 'jsoneditor-repair';\n    buttonRepair.title = 'Repair JSON: fix quotes and escape characters, remove comments and JSONP notation, turn JavaScript objects into JSON.';\n    this.menu.appendChild(buttonRepair);\n    buttonRepair.onclick = function () {\n      try {\n        me.repair();\n        me._onChange();\n      }\n      catch (err) {\n        me._onError(err);\n      }\n    };\n\n    // create mode box\n    if (this.options && this.options.modes && this.options.modes.length) {\n      this.modeSwitcher = new ModeSwitcher(this.menu, this.options.modes, this.options.mode, function onSwitch(mode) {\n        // switch mode and restore focus\n        me.setMode(mode);\n        me.modeSwitcher.focus();\n      });\n    }\n\n    if (this.mode === 'code') {\n      var poweredBy = document.createElement('a');\n      poweredBy.appendChild(document.createTextNode('powered by ace'));\n      poweredBy.href = 'http://ace.ajax.org';\n      poweredBy.target = '_blank';\n      poweredBy.className = 'jsoneditor-poweredBy';\n      poweredBy.onclick = function () {\n        // TODO: this anchor falls below the margin of the content,\n        // therefore the normal a.href does not work. We use a click event\n        // for now, but this should be fixed.\n        window.open(poweredBy.href, poweredBy.target);\n      };\n      this.menu.appendChild(poweredBy);\n    }\n  }\n\n  var emptyNode = {};\n  var isReadOnly = (this.options.onEditable\n  && typeof(this.options.onEditable === 'function')\n  && !this.options.onEditable(emptyNode));\n\n  this.frame.appendChild(this.content);\n  this.container.appendChild(this.frame);\n\n  if (this.mode === 'code') {\n    this.editorDom = document.createElement('div');\n    this.editorDom.style.height = '100%'; // TODO: move to css\n    this.editorDom.style.width = '100%'; // TODO: move to css\n    this.content.appendChild(this.editorDom);\n\n    var aceEditor = _ace.edit(this.editorDom);\n    var aceSession = aceEditor.getSession();\n    aceEditor.$blockScrolling = Infinity;\n    aceEditor.setTheme(this.theme);\n    aceEditor.setOptions({ readOnly: isReadOnly });\n    aceEditor.setShowPrintMargin(false);\n    aceEditor.setFontSize(13);\n    aceSession.setMode('ace/mode/json');\n    aceSession.setTabSize(this.indentation);\n    aceSession.setUseSoftTabs(true);\n    aceSession.setUseWrapMode(true);\n    \n    // replace ace setAnnotations with custom function that also covers jsoneditor annotations\n    var originalSetAnnotations = aceSession.setAnnotations;\n    aceSession.setAnnotations = function (annotations) {\n      originalSetAnnotations.call(this, annotations && annotations.length ? annotations : me.annotations);\n    };\n    \n    aceEditor.commands.bindKey('Ctrl-L', null);    // disable Ctrl+L (is used by the browser to select the address bar)\n    aceEditor.commands.bindKey('Command-L', null); // disable Ctrl+L (is used by the browser to select the address bar)\n    this.aceEditor = aceEditor;\n\n    // TODO: deprecated since v5.0.0. Cleanup backward compatibility some day\n    if (!this.hasOwnProperty('editor')) {\n      Object.defineProperty(this, 'editor', {\n        get: function () {\n          console.warn('Property \"editor\" has been renamed to \"aceEditor\".');\n          return me.aceEditor;\n        },\n        set: function (aceEditor) {\n          console.warn('Property \"editor\" has been renamed to \"aceEditor\".');\n          me.aceEditor = aceEditor;\n        }\n      });\n    }\n\n    // register onchange event\n    aceEditor.on('change', this._onChange.bind(this));\n    aceEditor.on('changeSelection', this._onSelect.bind(this));\n  }\n  else {\n    // load a plain text textarea\n    var textarea = document.createElement('textarea');\n    textarea.className = 'jsoneditor-text';\n    textarea.spellcheck = false;\n    this.content.appendChild(textarea);\n    this.textarea = textarea;\n    this.textarea.readOnly = isReadOnly;\n\n    // register onchange event\n    if (this.textarea.oninput === null) {\n      this.textarea.oninput = this._onChange.bind(this);\n    }\n    else {\n      // oninput is undefined. For IE8-\n      this.textarea.onchange = this._onChange.bind(this);\n    }\n\n    textarea.onselect = this._onSelect.bind(this);\n    textarea.onmousedown = this._onMouseDown.bind(this);\n    textarea.onblur = this._onBlur.bind(this);\n  }\n\n  this.errorTable = new ErrorTable({\n    errorTableVisible: this.mode === 'text',\n    onToggleVisibility: function () {\n      me.validate();\n    },\n    onFocusLine: function  (line) {\n      me.isFocused = true;\n      if (!isNaN(line)) {\n        me.setTextSelection({row: line, column: 1}, {row: line, column: 1000});\n      }\n    },\n    onChangeHeight: function (height) {\n      // TODO: change CSS to using flex box, remove setting height using JavaScript\n      var totalHeight = height + me.dom.statusBar.clientHeight + 1;\n      me.content.style.marginBottom = (-totalHeight) + 'px';\n      me.content.style.paddingBottom = totalHeight + 'px';\n    }\n  });\n  this.frame.appendChild(this.errorTable.getErrorTable());\n\n  if (options.statusBar) {\n    util.addClassName(this.content, 'has-status-bar');\n\n    this.curserInfoElements = {};\n    var statusBar = document.createElement('div');\n    this.dom.statusBar = statusBar;\n    statusBar.className = 'jsoneditor-statusbar';\n    this.frame.appendChild(statusBar);\n\n    var lnLabel = document.createElement('span');\n    lnLabel.className = 'jsoneditor-curserinfo-label';\n    lnLabel.innerText = 'Ln:';\n\n    var lnVal = document.createElement('span');\n    lnVal.className = 'jsoneditor-curserinfo-val';\n    lnVal.innerText = '1';\n\n    statusBar.appendChild(lnLabel);\n    statusBar.appendChild(lnVal);\n\n    var colLabel = document.createElement('span');\n    colLabel.className = 'jsoneditor-curserinfo-label';\n    colLabel.innerText = 'Col:';\n\n    var colVal = document.createElement('span');\n    colVal.className = 'jsoneditor-curserinfo-val';\n    colVal.innerText = '1';\n\n    statusBar.appendChild(colLabel);\n    statusBar.appendChild(colVal);\n\n    this.curserInfoElements.colVal = colVal;\n    this.curserInfoElements.lnVal = lnVal;\n\n    var countLabel = document.createElement('span');\n    countLabel.className = 'jsoneditor-curserinfo-label';\n    countLabel.innerText = 'characters selected';\n    countLabel.style.display = 'none';\n\n    var countVal = document.createElement('span');\n    countVal.className = 'jsoneditor-curserinfo-count';\n    countVal.innerText = '0';\n    countVal.style.display = 'none';\n\n    this.curserInfoElements.countLabel = countLabel;\n    this.curserInfoElements.countVal = countVal;\n\n    statusBar.appendChild(countVal);\n    statusBar.appendChild(countLabel);\n\n    statusBar.appendChild(this.errorTable.getErrorCounter());\n    statusBar.appendChild(this.errorTable.getWarningIcon());\n    statusBar.appendChild(this.errorTable.getErrorIcon());\n  }\n\n  this.setSchema(this.options.schema, this.options.schemaRefs);  \n};\n\n/**\n * Handle a change:\n * - Validate JSON schema\n * - Send a callback to the onChange listener if provided\n * @private\n */\ntextmode._onChange = function () {\n  if (this.onChangeDisabled) {\n    return;\n  }\n\n  // validate JSON schema (if configured)\n  this._debouncedValidate();\n\n  // trigger the onChange callback\n  if (this.options.onChange) {\n    try {\n      this.options.onChange();\n    }\n    catch (err) {\n      console.error('Error in onChange callback: ', err);\n    }\n  }\n\n  // trigger the onChangeText callback\n  if (this.options.onChangeText) {\n    try {\n      this.options.onChangeText(this.getText());\n    }\n    catch (err) {\n      console.error('Error in onChangeText callback: ', err);\n    }\n  }\n};\n\n/**\n * Open a sort modal\n * @private\n */\ntextmode._showSortModal = function () {\n  var me = this;\n  var container = this.options.modalAnchor || DEFAULT_MODAL_ANCHOR;\n  var json = this.get();\n\n  function onSort (sortedBy) {\n    if (Array.isArray(json)) {\n      var sortedJson = util.sort(json, sortedBy.path, sortedBy.direction);\n\n      me.sortedBy = sortedBy\n      me.set(sortedJson);\n    }\n\n    if (util.isObject(json)) {\n      var sortedJson = util.sortObjectKeys(json, sortedBy.direction);\n\n      me.sortedBy = sortedBy;\n      me.set(sortedJson);\n    }\n  }\n\n  showSortModal(container, json, onSort, me.sortedBy)\n}\n\n/**\n * Open a transform modal\n * @private\n */\ntextmode._showTransformModal = function () {\n  var me = this;\n  var anchor = this.options.modalAnchor || DEFAULT_MODAL_ANCHOR;\n  var json = this.get();\n  showTransformModal(anchor, json, function (query) {\n    var updatedJson = jmespath.search(json, query);\n    me.set(updatedJson);\n  })\n}\n\n/**\n * Handle text selection\n * Calculates the cursor position and selection range and updates menu\n * @private\n */\ntextmode._onSelect = function () {\n  this._updateCursorInfo();\n  this._emitSelectionChange();\n};\n\n/**\n * Event handler for keydown. Handles shortcut keys\n * @param {Event} event\n * @private\n */\ntextmode._onKeyDown = function (event) {\n  var keynum = event.which || event.keyCode;\n  var handled = false;\n\n  if (keynum == 220 && event.ctrlKey) {\n    if (event.shiftKey) { // Ctrl+Shift+\\\n      this.compact();\n      this._onChange();\n    }\n    else { // Ctrl+\\\n      this.format();\n      this._onChange();\n    }\n    handled = true;\n  }\n\n  if (handled) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  this._updateCursorInfo();\n  this._emitSelectionChange();\n};\n\n/**\n * Event handler for mousedown.\n * @private\n */\ntextmode._onMouseDown = function () {\n  this._updateCursorInfo();\n  this._emitSelectionChange();\n};\n\n/**\n * Event handler for blur.\n * @private\n */\ntextmode._onBlur = function () {\n  var me = this;\n  // this allows to avoid blur when clicking inner elements (like the errors panel)\n  // just make sure to set the isFocused to true on the inner element onclick callback\n  setTimeout(function(){\n    if (!me.isFocused) {\n      me._updateCursorInfo();\n      me._emitSelectionChange();\n    }\n    me.isFocused = false;\n  });\n};\n\n/**\n * Update the cursor info and the status bar, if presented\n */\ntextmode._updateCursorInfo = function () {\n  var me = this;\n  var line, col, count;\n\n  if (this.textarea) {\n    setTimeout(function() { //this to verify we get the most updated textarea cursor selection\n      var selectionRange = util.getInputSelection(me.textarea);\n      \n      if (selectionRange.startIndex !== selectionRange.endIndex) {\n        count = selectionRange.endIndex - selectionRange.startIndex;\n      }\n      \n      if (count && me.cursorInfo && me.cursorInfo.line === selectionRange.end.row && me.cursorInfo.column === selectionRange.end.column) {\n        line = selectionRange.start.row;\n        col = selectionRange.start.column;\n      } else {\n        line = selectionRange.end.row;\n        col = selectionRange.end.column;\n      }\n      \n      me.cursorInfo = {\n        line: line,\n        column: col,\n        count: count\n      };\n\n      if(me.options.statusBar) {\n        updateDisplay();\n      }\n    },0);\n    \n  } else if (this.aceEditor && this.curserInfoElements) {\n    var curserPos = this.aceEditor.getCursorPosition();\n    var selectedText = this.aceEditor.getSelectedText();\n\n    line = curserPos.row + 1;\n    col = curserPos.column + 1;\n    count = selectedText.length;\n\n    me.cursorInfo = {\n      line: line,\n      column: col,\n      count: count\n    };\n\n    if(this.options.statusBar) {\n      updateDisplay();\n    }\n  }\n\n  function updateDisplay() {\n\n    if (me.curserInfoElements.countVal.innerText !== count) {\n      me.curserInfoElements.countVal.innerText = count;\n      me.curserInfoElements.countVal.style.display = count ? 'inline' : 'none';\n      me.curserInfoElements.countLabel.style.display = count ? 'inline' : 'none';\n    }\n    me.curserInfoElements.lnVal.innerText = line;\n    me.curserInfoElements.colVal.innerText = col;\n  }\n};\n\n/**\n * emits selection change callback, if given\n * @private\n */\ntextmode._emitSelectionChange = function () {\n  if(this._selectionChangedHandler) {\n    var currentSelection = this.getTextSelection();\n    this._selectionChangedHandler(currentSelection.start, currentSelection.end, currentSelection.text);\n  }\n};\n\n/**\n * refresh ERROR annotations state\n * error annotations are handled by the ace json mode (ace/mode/json)\n * validation annotations are handled by this mode\n * therefore in order to refresh we send only the annotations of error type in order to maintain its state \n * @private\n */\ntextmode._refreshAnnotations = function () {  \n  var session = this.aceEditor && this.aceEditor.getSession();\n  if (session) {\n    var errEnnotations = session.getAnnotations().filter(function(annotation) {return annotation.type === 'error' });\n    session.setAnnotations(errEnnotations);\n  }\n};\n\n/**\n * Destroy the editor. Clean up DOM, event listeners, and web workers.\n */\ntextmode.destroy = function () {\n  // remove old ace editor\n  if (this.aceEditor) {\n    this.aceEditor.destroy();\n    this.aceEditor = null;\n  }\n\n  if (this.frame && this.container && this.frame.parentNode === this.container) {\n    this.container.removeChild(this.frame);\n  }\n\n  if (this.modeSwitcher) {\n    this.modeSwitcher.destroy();\n    this.modeSwitcher = null;\n  }\n\n  this.textarea = null;\n  \n  this._debouncedValidate = null;\n};\n\n/**\n * Compact the code in the text editor\n */\ntextmode.compact = function () {\n  var json = this.get();\n  var text = JSON.stringify(json);\n  this._setText(text, false);\n};\n\n/**\n * Format the code in the text editor\n */\ntextmode.format = function () {\n  var json = this.get();\n  var text = JSON.stringify(json, null, this.indentation);\n  this._setText(text, false);\n};\n\n/**\n * Repair the code in the text editor\n */\ntextmode.repair = function () {\n  var text = this.getText();\n  var repairedText = util.repair(text);\n  this._setText(repairedText, false);\n};\n\n/**\n * Set focus to the formatter\n */\ntextmode.focus = function () {\n  if (this.textarea) {\n    this.textarea.focus();\n  }\n  if (this.aceEditor) {\n    this.aceEditor.focus();\n  }\n};\n\n/**\n * Resize the formatter\n */\ntextmode.resize = function () {\n  if (this.aceEditor) {\n    var force = false;\n    this.aceEditor.resize(force);\n  }\n};\n\n/**\n * Set json data in the formatter\n * @param {*} json\n */\ntextmode.set = function(json) {\n  this.setText(JSON.stringify(json, null, this.indentation));\n};\n\n/**\n * Update data. Same as calling `set` in text/code mode.\n * @param {*} json\n */\ntextmode.update = function(json) {\n  this.updateText(JSON.stringify(json, null, this.indentation));\n};\n\n/**\n * Get json data from the formatter\n * @return {*} json\n */\ntextmode.get = function() {\n  var text = this.getText();\n\n  return util.parse(text); // this can throw an error\n};\n\n/**\n * Get the text contents of the editor\n * @return {String} jsonText\n */\ntextmode.getText = function() {\n  if (this.textarea) {\n    return this.textarea.value;\n  }\n  if (this.aceEditor) {\n    return this.aceEditor.getValue();\n  }\n  return '';\n};\n\n/**\n * Set the text contents of the editor and optionally clear the history\n * @param {String} jsonText\n * @param {boolean} clearHistory   Only applicable for mode 'code'\n * @private\n */\ntextmode._setText = function(jsonText, clearHistory) {\n  var text;\n\n  if (this.options.escapeUnicode === true) {\n    text = util.escapeUnicodeChars(jsonText);\n  }\n  else {\n    text = jsonText;\n  }\n\n  if (this.textarea) {\n    this.textarea.value = text;\n  }\n  if (this.aceEditor) {\n    // prevent emitting onChange events while setting new text\n    this.onChangeDisabled = true;\n\n    this.aceEditor.setValue(text, -1);\n\n    if (clearHistory) {\n      // prevent initial undo action clearing the initial contents\n      var me = this;\n      setTimeout(function () {\n        me.aceEditor.session.getUndoManager().reset();\n      }, 0);\n    }\n\n    this.onChangeDisabled = false;\n  }\n  // validate JSON schema\n  this._debouncedValidate();\n};\n\n/**\n * Set the text contents of the editor\n * @param {String} jsonText\n */\ntextmode.setText = function(jsonText) {\n  this._setText(jsonText, true)\n};\n\n/**\n * Update the text contents\n * @param {string} jsonText\n */\ntextmode.updateText = function(jsonText) {\n  // don't update if there are no changes\n  if (this.getText() === jsonText) {\n    return;\n  }\n\n  this._setText(jsonText, false);\n};\n\n/**\n * Validate current JSON object against the configured JSON schema\n * Throws an exception when no JSON schema is configured\n */\ntextmode.validate = function () {\n  var schemaErrors = [];\n  var parseErrors = [];\n  var json;\n  try {\n    json = this.get(); // this can fail when there is no valid json\n\n    // execute JSON schema validation (ajv)\n    if (this.validateSchema) {\n      var valid = this.validateSchema(json);\n      if (!valid) {\n        schemaErrors = this.validateSchema.errors.map(function (error) {\n          error.type = \"validation\";\n          return util.improveSchemaError(error);\n        });\n      }\n    }\n\n    // execute custom validation and after than merge and render all errors\n    // TODO: implement a better mechanism for only using the last validation action\n    this.validationSequence = (this.validationSequence || 0) + 1;\n    var me = this;\n    var seq = this.validationSequence;\n    validateCustom(json, this.options.onValidate)\n        .then(function (customValidationErrors) {\n          // only apply when there was no other validation started whilst resolving async results\n          if (seq === me.validationSequence) {\n            var errors = schemaErrors.concat(parseErrors).concat(customValidationErrors);\n            me._renderErrors(errors);\n          }\n        })\n        .catch(function (err) {\n          console.error('Custom validation function did throw an error', err);\n        });\n  }\n  catch (err) {\n    if (this.getText()) {\n      // try to extract the line number from the jsonlint error message\n      var match = /\\w*line\\s*(\\d+)\\w*/g.exec(err.message);\n      var line;\n      if (match) {\n        line = +match[1];\n      }\n      parseErrors = [{\n        type: 'error',\n        message: err.message.replace(/\\n/g, '<br>'),\n        line: line\n      }];\n    }\n\n    this._renderErrors(parseErrors);\n  }\n};\n\ntextmode._renderErrors = function(errors) {\n  var jsonText = this.getText();\n  var errorPaths = [];\n  errors.reduce(function(acc, curr) {\n    if(acc.indexOf(curr.dataPath) === -1) {\n      acc.push(curr.dataPath);\n    }\n    return acc;\n  }, errorPaths);\n  var errorLocations = util.getPositionForPath(jsonText, errorPaths);\n\n  // render annotations in Ace Editor (if any)\n  if (this.aceEditor) {\n    this.annotations = errorLocations.map(function (errLoc) {\n      var validationErrors = errors.filter(function(err){ return err.dataPath === errLoc.path; });\n      var message = validationErrors.map(function(err) { return err.message }).join('\\n');\n      if (message) {\n        return {\n          row: errLoc.line,\n          column: errLoc.column,\n          text: 'Schema validation error' + (validationErrors.length !== 1 ? 's' : '') + ': \\n' + message,\n          type: 'warning',\n          source: 'jsoneditor',\n        }\n      }\n\n      return {};\n    });\n    this._refreshAnnotations();\n  }\n\n  // render errors in the errors table (if any)\n  this.errorTable.setErrors(errors, errorLocations);\n\n  // update the height of the ace editor\n  if (this.aceEditor) {\n    var force = false;\n    this.aceEditor.resize(force);\n  }\n};\n\n/**\n * Get the selection details\n * @returns {{start:{row:Number, column:Number},end:{row:Number, column:Number},text:String}}\n */\ntextmode.getTextSelection = function () {\n  var selection = {};\n  if (this.textarea) {\n    var selectionRange = util.getInputSelection(this.textarea);\n\n    if (this.cursorInfo && this.cursorInfo.line === selectionRange.end.row && this.cursorInfo.column === selectionRange.end.column) {\n      //selection direction is bottom => up\n      selection.start = selectionRange.end;\n      selection.end = selectionRange.start;\n    } else {\n      selection = selectionRange;\n    }\n\n    return {\n      start: selection.start,\n      end: selection.end,\n      text: this.textarea.value.substring(selectionRange.startIndex, selectionRange.endIndex)\n    }\n  }\n\n  if (this.aceEditor) {\n    var aceSelection = this.aceEditor.getSelection();\n    var selectedText = this.aceEditor.getSelectedText();\n    var range = aceSelection.getRange();\n    var lead = aceSelection.getSelectionLead();\n\n    if (lead.row === range.end.row && lead.column === range.end.column) {\n      selection = range;\n    } else {\n      //selection direction is bottom => up\n      selection.start = range.end;\n      selection.end = range.start;\n    }\n    \n    return {\n      start: {\n        row: selection.start.row + 1,\n        column: selection.start.column + 1\n      },\n      end: {\n        row: selection.end.row + 1,\n        column: selection.end.column + 1\n      },\n      text: selectedText\n    };\n  }\n};\n\n/**\n * Callback registration for selection change\n * @param {selectionCallback} callback\n * \n * @callback selectionCallback\n */\ntextmode.onTextSelectionChange = function (callback) {\n  if (typeof callback === 'function') {\n    this._selectionChangedHandler = util.debounce(callback, this.DEBOUNCE_INTERVAL);\n  }\n};\n\n/**\n * Set selection on editor's text\n * @param {{row:Number, column:Number}} startPos selection start position\n * @param {{row:Number, column:Number}} endPos selected end position\n */\ntextmode.setTextSelection = function (startPos, endPos) {\n\n  if (!startPos || !endPos) return;\n\n  if (this.textarea) {\n    var startIndex = util.getIndexForPosition(this.textarea, startPos.row, startPos.column);\n    var endIndex = util.getIndexForPosition(this.textarea, endPos.row, endPos.column);\n    if (startIndex > -1 && endIndex  > -1) {\n      if (this.textarea.setSelectionRange) {\n        this.textarea.focus();\n        this.textarea.setSelectionRange(startIndex, endIndex);\n      } else if (this.textarea.createTextRange) { // IE < 9\n        var range = this.textarea.createTextRange();\n        range.collapse(true);\n        range.moveEnd('character', endIndex);\n        range.moveStart('character', startIndex);\n        range.select();\n      }\n      var rows = (this.textarea.value.match(/\\n/g) || []).length + 1;\n      var lineHeight =  this.textarea.scrollHeight / rows;\n      var selectionScrollPos = (startPos.row * lineHeight);\n      this.textarea.scrollTop = selectionScrollPos > this.textarea.clientHeight ? (selectionScrollPos - (this.textarea.clientHeight / 2)) : 0;\n    }\n  } else if (this.aceEditor) {\n    var range = {\n      start:{\n        row: startPos.row - 1,\n        column: startPos.column - 1\n      },\n      end:{\n        row: endPos.row - 1,\n        column: endPos.column - 1\n      }\n    };\n    this.aceEditor.selection.setRange(range);\n    this.aceEditor.scrollToLine(startPos.row - 1, true);\n  }\n};\n\nfunction load () {\n  try {\n    this.format()\n  }\n  catch (err) {\n    // in case of an error, just move on, failing formatting is not a big deal\n  }\n}\n\n// define modes\nmodule.exports = [\n  {\n    mode: 'text',\n    mixin: textmode,\n    data: 'text',\n    load: load\n  },\n  {\n    mode: 'code',\n    mixin: textmode,\n    data: 'text',\n    load: load\n  }\n];\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\n/**\n * Show errors and schema warnings in a clickable table view\n * @param {Object} config\n * @property {boolean} errorTableVisible\n * @property {function (boolean) : void} onToggleVisibility\n * @property {function (number)} [onFocusLine]\n * @property {function (number)} onChangeHeight\n * @constructor\n */\nfunction ErrorTable (config) {\n  this.errorTableVisible = config.errorTableVisible;\n  this.onToggleVisibility = config.onToggleVisibility;\n  this.onFocusLine = config.onFocusLine || function () {};\n  this.onChangeHeight = config.onChangeHeight;\n\n  this.dom = {};\n\n  var validationErrorsContainer = document.createElement('div');\n  validationErrorsContainer.className = 'jsoneditor-validation-errors-container';\n  this.dom.validationErrorsContainer = validationErrorsContainer;\n\n  var additionalErrorsIndication = document.createElement('div');\n  additionalErrorsIndication.style.display = 'none';\n  additionalErrorsIndication.className = \"jsoneditor-additional-errors fadein\";\n  additionalErrorsIndication.innerHTML = \"Scroll for more &#9663;\";\n  this.dom.additionalErrorsIndication = additionalErrorsIndication;\n  validationErrorsContainer.appendChild(additionalErrorsIndication);\n\n  var validationErrorIcon = document.createElement('span');\n  validationErrorIcon.className = 'jsoneditor-validation-error-icon';\n  validationErrorIcon.style.display = 'none';\n  this.dom.validationErrorIcon = validationErrorIcon;\n\n  var validationErrorCount = document.createElement('span');\n  validationErrorCount.className = 'jsoneditor-validation-error-count';\n  validationErrorCount.style.display = 'none';\n  this.dom.validationErrorCount = validationErrorCount;\n\n  this.dom.parseErrorIndication = document.createElement('span');\n  this.dom.parseErrorIndication.className = 'jsoneditor-parse-error-icon';\n  this.dom.parseErrorIndication.style.display = 'none';\n}\n\nErrorTable.prototype.getErrorTable = function () {\n  return this.dom.validationErrorsContainer;\n};\n\nErrorTable.prototype.getErrorCounter = function () {\n  return this.dom.validationErrorCount;\n};\n\nErrorTable.prototype.getWarningIcon = function () {\n  return this.dom.validationErrorIcon;\n};\n\nErrorTable.prototype.getErrorIcon = function () {\n  return this.dom.parseErrorIndication;\n};\n\nErrorTable.prototype.toggleTableVisibility = function () {\n  this.errorTableVisible = !this.errorTableVisible;\n  this.onToggleVisibility(this.errorTableVisible);\n}\n\nErrorTable.prototype.setErrors = function (errors, errorLocations) {\n  var me = this;\n\n  // clear any previous errors\n  if (this.dom.validationErrors) {\n    this.dom.validationErrors.parentNode.removeChild(this.dom.validationErrors);\n    this.dom.validationErrors = null;\n    this.dom.additionalErrorsIndication.style.display = 'none';\n  }\n\n  // create the table with errors\n  // keep default behavior for parse errors\n  if (this.errorTableVisible && errors.length > 0) {\n    var validationErrors = document.createElement('div');\n    validationErrors.className = 'jsoneditor-validation-errors';\n    validationErrors.innerHTML = '<table class=\"jsoneditor-text-errors\"><tbody></tbody></table>';\n    var tbody = validationErrors.getElementsByTagName('tbody')[0];\n\n    errors.forEach(function (error) {\n      var message;\n      if (typeof error === 'string') {\n        message = '<td colspan=\"2\"><pre>' + error + '</pre></td>';\n      }\n      else {\n        message =\n            '<td>' + (error.dataPath || '') + '</td>' +\n            '<td><pre>' + error.message + '</pre></td>';\n      }\n\n      var line;\n\n      if (!isNaN(error.line)) {\n        line = error.line;\n      } else if (error.dataPath) {\n        var errLoc = errorLocations.find(function(loc) { return loc.path === error.dataPath; });\n        if (errLoc) {\n          line = errLoc.line + 1;\n        }\n      }\n\n      var trEl = document.createElement('tr');\n      trEl.className = !isNaN(line) ? 'jump-to-line' : '';\n      if (error.type === 'error') {\n        trEl.className += ' parse-error';\n      } else {\n        trEl.className += ' validation-error';\n      }\n\n      trEl.innerHTML =  ('<td><button class=\"jsoneditor-schema-error\"></button></td><td style=\"white-space:nowrap;\">'+ (!isNaN(line) ? ('Ln ' + line) : '') +'</td>' + message);\n      trEl.onclick = function() {\n        me.onFocusLine(line);\n      };\n\n      tbody.appendChild(trEl);\n    });\n\n    this.dom.validationErrors = validationErrors;\n    this.dom.validationErrorsContainer.appendChild(validationErrors);\n    this.dom.additionalErrorsIndication.title = errors.length + \" errors total\";\n\n    if (this.dom.validationErrorsContainer.clientHeight < this.dom.validationErrorsContainer.scrollHeight) {\n      this.dom.additionalErrorsIndication.style.display = 'block';\n      this.dom.validationErrorsContainer.onscroll = function () {\n        me.dom.additionalErrorsIndication.style.display =\n            (me.dom.validationErrorsContainer.clientHeight > 0 && me.dom.validationErrorsContainer.scrollTop === 0) ? 'block' : 'none';\n      }\n    } else {\n      this.dom.validationErrorsContainer.onscroll = undefined;\n    }\n\n    var height = this.dom.validationErrorsContainer.clientHeight + (this.dom.statusBar ? this.dom.statusBar.clientHeight : 0);\n    // this.content.style.marginBottom = (-height) + 'px';\n    // this.content.style.paddingBottom = height + 'px';\n    this.onChangeHeight(height);\n  } else {\n    this.onChangeHeight(0);\n  }\n\n  // update the status bar\n  var validationErrorsCount = errors.filter(function (error) {\n    return error.type !== 'error'\n  }).length;\n  if (validationErrorsCount > 0) {\n    this.dom.validationErrorCount.style.display = 'inline';\n    this.dom.validationErrorCount.innerText = validationErrorsCount;\n    this.dom.validationErrorCount.onclick = this.toggleTableVisibility.bind(this);\n\n    this.dom.validationErrorIcon.style.display = 'inline';\n    this.dom.validationErrorIcon.title = validationErrorsCount + ' schema validation error(s) found';\n    this.dom.validationErrorIcon.onclick = this.toggleTableVisibility.bind(this);\n  }\n  else {\n    this.dom.validationErrorCount.style.display = 'none';\n    this.dom.validationErrorIcon.style.display = 'none';\n  }\n\n  // update the parse error icon\n  var hasParseErrors = errors.some(function (error) {\n    return error.type === 'error'\n  });\n  if (hasParseErrors) {\n    var line = errors[0].line\n    this.dom.parseErrorIndication.style.display = 'block';\n    this.dom.parseErrorIndication.title = !isNaN(line)\n        ? ('parse error on line ' + line)\n        : 'parse error - check that the json is valid';\n  }\n  else {\n    this.dom.parseErrorIndication.style.display = 'none';\n  }\n};\n\nmodule.exports = ErrorTable;\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar Ajv;\ntry {\n  Ajv = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module 'ajv'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n}\ncatch (err) {\n  // no problem... when we need Ajv we will throw a neat exception\n}\n\nvar ace = __webpack_require__(8); // may be undefined in case of minimalist bundle\nvar VanillaPicker = __webpack_require__(9); // may be undefined in case of minimalist bundle\n\nvar treemode = __webpack_require__(20);\nvar textmode = __webpack_require__(14);\nvar previewmode = __webpack_require__(35);\nvar util = __webpack_require__(0);\n\nif (typeof Promise === 'undefined') {\n  console.error('Promise undefined. Please load a Promise polyfill in the browser in order to use JSONEditor');\n}\n\n/**\n * @constructor JSONEditor\n * @param {Element} container    Container element\n * @param {Object}  [options]    Object with options. available options:\n *                               {String} mode        Editor mode. Available values:\n *                                                    'tree' (default), 'view',\n *                                                    'form', 'text', and 'code'.\n *                               {function} onChange  Callback method, triggered\n *                                                    on change of contents.\n *                                                    Does not pass the contents itself.\n *                                                    See also `onChangeJSON` and\n *                                                    `onChangeText`.\n *                               {function} onChangeJSON  Callback method, triggered\n *                                                        in modes on change of contents,\n *                                                        passing the changed contents\n *                                                        as JSON.\n *                                                        Only applicable for modes\n *                                                        'tree', 'view', and 'form'.\n *                               {function} onChangeText  Callback method, triggered\n *                                                        in modes on change of contents,\n *                                                        passing the changed contents\n *                                                        as stringified JSON.\n *                               {function} onError   Callback method, triggered\n *                                                    when an error occurs\n *                               {Boolean} search     Enable search box.\n *                                                    True by default\n *                                                    Only applicable for modes\n *                                                    'tree', 'view', and 'form'\n *                               {Boolean} history    Enable history (undo/redo).\n *                                                    True by default\n *                                                    Only applicable for modes\n *                                                    'tree', 'view', and 'form'\n *                               {String} name        Field name for the root node.\n *                                                    Only applicable for modes\n *                                                    'tree', 'view', and 'form'\n *                               {Number} indentation     Number of indentation\n *                                                        spaces. 4 by default.\n *                                                        Only applicable for\n *                                                        modes 'text' and 'code'\n *                               {boolean} escapeUnicode  If true, unicode\n *                                                        characters are escaped.\n *                                                        false by default.\n *                               {boolean} sortObjectKeys If true, object keys are\n *                                                        sorted before display.\n *                                                        false by default.\n *                               {function} onSelectionChange Callback method,\n *                                                            triggered on node selection change\n *                                                            Only applicable for modes\n *                                                            'tree', 'view', and 'form'\n *                               {function} onTextSelectionChange Callback method,\n *                                                                triggered on text selection change\n *                                                                Only applicable for modes\n *                               {HTMLElement} modalAnchor        The anchor element to apply an\n *                                                                overlay and display the modals in a\n *                                                                centered location.\n *                                                                Defaults to document.body\n *                                                                'text' and 'code'\n *                               {function} onEvent Callback method, triggered\n *                                                  when an event occurs in\n *                                                  a JSON field or value.\n *                                                  Only applicable for\n *                                                  modes 'form', 'tree' and\n *                                                  'view'\n *                               {function} onClassName Callback method, triggered\n *                                                  when a Node DOM is rendered. Function returns\n *                                                  a css class name to be set on a node.\n *                                                  Only applicable for\n *                                                  modes 'form', 'tree' and\n *                                                  'view'\n *                               {Number} maxVisibleChilds Number of children allowed for a node \n *                                                         in 'tree', 'view', or 'form' mode before \n *                                                         the \"show more/show all\" buttons appear.  \n *                                                         100 by default.\n *\n * @param {Object | undefined} json JSON object\n */\nfunction JSONEditor (container, options, json) {\n  if (!(this instanceof JSONEditor)) {\n    throw new Error('JSONEditor constructor called without \"new\".');\n  }\n\n  // check for unsupported browser (IE8 and older)\n  var ieVersion = util.getInternetExplorerVersion();\n  if (ieVersion != -1 && ieVersion < 9) {\n    throw new Error('Unsupported browser, IE9 or newer required. ' +\n        'Please install the newest version of your browser.');\n  }\n\n  if (options) {\n    // check for deprecated options\n    if (options.error) {\n      console.warn('Option \"error\" has been renamed to \"onError\"');\n      options.onError = options.error;\n      delete options.error;\n    }\n    if (options.change) {\n      console.warn('Option \"change\" has been renamed to \"onChange\"');\n      options.onChange = options.change;\n      delete options.change;\n    }\n    if (options.editable) {\n      console.warn('Option \"editable\" has been renamed to \"onEditable\"');\n      options.onEditable = options.editable;\n      delete options.editable;\n    }\n\n    // warn if onChangeJSON is used when mode can be `text` or `code`\n    if (options.onChangeJSON) {\n      if (options.mode === 'text' || options.mode === 'code' ||\n          (options.modes && (options.modes.indexOf('text') !== -1 || options.modes.indexOf('code') !== -1))) {\n        console.warn('Option \"onChangeJSON\" is not applicable to modes \"text\" and \"code\". ' +\n            'Use \"onChangeText\" or \"onChange\" instead.');\n      }\n    }\n\n    // validate options\n    if (options) {\n      Object.keys(options).forEach(function (option) {\n        if (JSONEditor.VALID_OPTIONS.indexOf(option) === -1) {\n          console.warn('Unknown option \"' + option + '\". This option will be ignored');\n        }\n      });\n    }\n  }\n\n  if (arguments.length) {\n    this._create(container, options, json);\n  }\n}\n\n/**\n * Configuration for all registered modes. Example:\n * {\n *     tree: {\n *         mixin: TreeEditor,\n *         data: 'json'\n *     },\n *     text: {\n *         mixin: TextEditor,\n *         data: 'text'\n *     }\n * }\n *\n * @type { Object.<String, {mixin: Object, data: String} > }\n */\nJSONEditor.modes = {};\n\n// debounce interval for JSON schema vaidation in milliseconds\nJSONEditor.prototype.DEBOUNCE_INTERVAL = 150;\n\nJSONEditor.VALID_OPTIONS = [\n  'ajv', 'schema', 'schemaRefs','templates',\n  'ace', 'theme', 'autocomplete',\n  'onChange', 'onChangeJSON', 'onChangeText',\n  'onEditable', 'onError', 'onEvent', 'onModeChange', 'onNodeName', 'onValidate', 'onCreateMenu',\n  'onSelectionChange', 'onTextSelectionChange', 'onClassName',\n  'colorPicker', 'onColorPicker',\n  'timestampTag',\n  'escapeUnicode', 'history', 'search', 'mode', 'modes', 'name', 'indentation',\n  'sortObjectKeys', 'navigationBar', 'statusBar', 'mainMenuBar', 'languages', 'language', 'enableSort', 'enableTransform',\n  'maxVisibleChilds'\n];\n\n/**\n * Create the JSONEditor\n * @param {Element} container    Container element\n * @param {Object}  [options]    See description in constructor\n * @param {Object | undefined} json JSON object\n * @private\n */\nJSONEditor.prototype._create = function (container, options, json) {\n  this.container = container;\n  this.options = options || {};\n  this.json = json || {};\n\n  var mode = this.options.mode || (this.options.modes && this.options.modes[0]) || 'tree';\n  this.setMode(mode);\n};\n\n/**\n * Destroy the editor. Clean up DOM, event listeners, and web workers.\n */\nJSONEditor.prototype.destroy = function () {};\n\n/**\n * Set JSON object in editor\n * @param {Object | undefined} json      JSON data\n */\nJSONEditor.prototype.set = function (json) {\n  this.json = json;\n};\n\n/**\n * Get JSON from the editor\n * @returns {Object} json\n */\nJSONEditor.prototype.get = function () {\n  return this.json;\n};\n\n/**\n * Set string containing JSON for the editor\n * @param {String | undefined} jsonText\n */\nJSONEditor.prototype.setText = function (jsonText) {\n  this.json = util.parse(jsonText);\n};\n\n/**\n * Get stringified JSON contents from the editor\n * @returns {String} jsonText\n */\nJSONEditor.prototype.getText = function () {\n  return JSON.stringify(this.json);\n};\n\n/**\n * Set a field name for the root node.\n * @param {String | undefined} name\n */\nJSONEditor.prototype.setName = function (name) {\n  if (!this.options) {\n    this.options = {};\n  }\n  this.options.name = name;\n};\n\n/**\n * Get the field name for the root node.\n * @return {String | undefined} name\n */\nJSONEditor.prototype.getName = function () {\n  return this.options && this.options.name;\n};\n\n/**\n * Change the mode of the editor.\n * JSONEditor will be extended with all methods needed for the chosen mode.\n * @param {String} mode     Available modes: 'tree' (default), 'view', 'form',\n *                          'text', and 'code'.\n */\nJSONEditor.prototype.setMode = function (mode) {\n  // if the mode is the same as current mode (and it's not the first time), do nothing.\n  if (mode === this.options.mode && this.create) {\n    return;\n  }\n\n  var container = this.container;\n  var options = util.extend({}, this.options);\n  var oldMode = options.mode;\n  var data;\n  var name;\n\n  options.mode = mode;\n  var config = JSONEditor.modes[mode];\n  if (config) {\n    try {\n      var asText = (config.data == 'text');\n      name = this.getName();\n      data = this[asText ? 'getText' : 'get'](); // get text or json\n\n      this.destroy();\n      util.clear(this);\n      util.extend(this, config.mixin);\n      this.create(container, options);\n\n      this.setName(name);\n      this[asText ? 'setText' : 'set'](data); // set text or json\n\n      if (typeof config.load === 'function') {\n        try {\n          config.load.call(this);\n        }\n        catch (err) {\n          console.error(err);\n        }\n      }\n\n      if (typeof options.onModeChange === 'function' && mode !== oldMode) {\n        try {\n          options.onModeChange(mode, oldMode);\n        }\n        catch (err) {\n          console.error(err);\n        }\n      }\n    }\n    catch (err) {\n      this._onError(err);\n    }\n  }\n  else {\n    throw new Error('Unknown mode \"' + options.mode + '\"');\n  }\n};\n\n/**\n * Get the current mode\n * @return {string}\n */\nJSONEditor.prototype.getMode = function () {\n  return this.options.mode;\n};\n\n/**\n * Throw an error. If an error callback is configured in options.error, this\n * callback will be invoked. Else, a regular error is thrown.\n * @param {Error} err\n * @private\n */\nJSONEditor.prototype._onError = function(err) {\n  if (this.options && typeof this.options.onError === 'function') {\n    this.options.onError(err);\n  }\n  else {\n    throw err;\n  }\n};\n\n/**\n * Set a JSON schema for validation of the JSON object.\n * To remove the schema, call JSONEditor.setSchema(null)\n * @param {Object | null} schema\n * @param {Object.<string, Object>=} schemaRefs Schemas that are referenced using the `$ref` property from the JSON schema that are set in the `schema` option,\n +  the object structure in the form of `{reference_key: schemaObject}`\n */\nJSONEditor.prototype.setSchema = function (schema, schemaRefs) {\n  // compile a JSON schema validator if a JSON schema is provided\n  if (schema) {\n    var ajv;\n    try {\n      // grab ajv from options if provided, else create a new instance\n      if (this.options.ajv) {\n        ajv = this.options.ajv\n      }\n      else {\n        ajv = Ajv({\n          allErrors: true,\n          verbose: true,\n          schemaId: 'auto',\n          $data: true\n        });\n\n        // support both draft-04 and draft-06 alongside the latest draft-07\n        ajv.addMetaSchema(__webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module 'ajv/lib/refs/json-schema-draft-04.json'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())));\n        ajv.addMetaSchema(__webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module 'ajv/lib/refs/json-schema-draft-06.json'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())));\n      }\n    }\n    catch (err) {\n      console.warn('Failed to create an instance of Ajv, JSON Schema validation is not available. Please use a JSONEditor bundle including Ajv, or pass an instance of Ajv as via the configuration option `ajv`.');\n    }\n\n    if (ajv) {\n      if(schemaRefs) {\n        for (var ref in schemaRefs) {\n          ajv.removeSchema(ref);  // When updating a schema - old refs has to be removed first\n          if(schemaRefs[ref]) {\n            ajv.addSchema(schemaRefs[ref], ref);\n          }\n        }\n        this.options.schemaRefs = schemaRefs;\n      }\n      this.validateSchema = ajv.compile(schema);\n\n      // add schema to the options, so that when switching to an other mode,\n      // the set schema is not lost\n      this.options.schema = schema;\n\n      // validate now\n      this.validate();\n    }\n\n    this.refresh(); // update DOM\n  }\n  else {\n    // remove current schema\n    this.validateSchema = null;\n    this.options.schema = null;\n    this.options.schemaRefs = null;\n    this.validate(); // to clear current error messages\n    this.refresh();  // update DOM\n  }\n};\n\n/**\n * Validate current JSON object against the configured JSON schema\n * Throws an exception when no JSON schema is configured\n */\nJSONEditor.prototype.validate = function () {\n  // must be implemented by treemode and textmode\n};\n\n/**\n * Refresh the rendered contents\n */\nJSONEditor.prototype.refresh = function () {\n  // can be implemented by treemode and textmode\n};\n\n/**\n * Register a plugin with one ore multiple modes for the JSON Editor.\n *\n * A mode is described as an object with properties:\n *\n * - `mode: String`           The name of the mode.\n * - `mixin: Object`          An object containing the mixin functions which\n *                            will be added to the JSONEditor. Must contain functions\n *                            create, get, getText, set, and setText. May have\n *                            additional functions.\n *                            When the JSONEditor switches to a mixin, all mixin\n *                            functions are added to the JSONEditor, and then\n *                            the function `create(container, options)` is executed.\n * - `data: 'text' | 'json'`  The type of data that will be used to load the mixin.\n * - `[load: function]`       An optional function called after the mixin\n *                            has been loaded.\n *\n * @param {Object | Array} mode  A mode object or an array with multiple mode objects.\n */\nJSONEditor.registerMode = function (mode) {\n  var i, prop;\n\n  if (util.isArray(mode)) {\n    // multiple modes\n    for (i = 0; i < mode.length; i++) {\n      JSONEditor.registerMode(mode[i]);\n    }\n  }\n  else {\n    // validate the new mode\n    if (!('mode' in mode)) throw new Error('Property \"mode\" missing');\n    if (!('mixin' in mode)) throw new Error('Property \"mixin\" missing');\n    if (!('data' in mode)) throw new Error('Property \"data\" missing');\n    var name = mode.mode;\n    if (name in JSONEditor.modes) {\n      throw new Error('Mode \"' + name + '\" already registered');\n    }\n\n    // validate the mixin\n    if (typeof mode.mixin.create !== 'function') {\n      throw new Error('Required function \"create\" missing on mixin');\n    }\n    var reserved = ['setMode', 'registerMode', 'modes'];\n    for (i = 0; i < reserved.length; i++) {\n      prop = reserved[i];\n      if (prop in mode.mixin) {\n        throw new Error('Reserved property \"' + prop + '\" not allowed in mixin');\n      }\n    }\n\n    JSONEditor.modes[name] = mode;\n  }\n};\n\n// register tree, text, and preview modes\nJSONEditor.registerMode(treemode);\nJSONEditor.registerMode(textmode);\nJSONEditor.registerMode(previewmode);\n\n// expose some of the libraries that can be used customized\nJSONEditor.ace = ace;\nJSONEditor.Ajv = Ajv;\nJSONEditor.VanillaPicker = VanillaPicker;\n\n// default export for TypeScript ES6 projects\nJSONEditor.default = JSONEditor;\n\nmodule.exports = JSONEditor;\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\nace.define(\"ace/mode/json_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"../lib/oop\");\nvar TextHighlightRules = acequire(\"./text_highlight_rules\").TextHighlightRules;\n\nvar JsonHighlightRules = function() {\n    this.$rules = {\n        \"start\" : [\n            {\n                token : \"variable\", // single line\n                regex : '[\"](?:(?:\\\\\\\\.)|(?:[^\"\\\\\\\\]))*?[\"]\\\\s*(?=:)'\n            }, {\n                token : \"string\", // single line\n                regex : '\"',\n                next  : \"string\"\n            }, {\n                token : \"constant.numeric\", // hex\n                regex : \"0[xX][0-9a-fA-F]+\\\\b\"\n            }, {\n                token : \"constant.numeric\", // float\n                regex : \"[+-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?\\\\b\"\n            }, {\n                token : \"constant.language.boolean\",\n                regex : \"(?:true|false)\\\\b\"\n            }, {\n                token : \"text\", // single quoted strings are not allowed\n                regex : \"['](?:(?:\\\\\\\\.)|(?:[^'\\\\\\\\]))*?[']\"\n            }, {\n                token : \"comment\", // comments are not allowed, but who cares?\n                regex : \"\\\\/\\\\/.*$\"\n            }, {\n                token : \"comment.start\", // comments are not allowed, but who cares?\n                regex : \"\\\\/\\\\*\",\n                next  : \"comment\"\n            }, {\n                token : \"paren.lparen\",\n                regex : \"[[({]\"\n            }, {\n                token : \"paren.rparen\",\n                regex : \"[\\\\])}]\"\n            }, {\n                token : \"text\",\n                regex : \"\\\\s+\"\n            }\n        ],\n        \"string\" : [\n            {\n                token : \"constant.language.escape\",\n                regex : /\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|[\"\\\\\\/bfnrt])/\n            }, {\n                token : \"string\",\n                regex : '\"|$',\n                next  : \"start\"\n            }, {\n                defaultToken : \"string\"\n            }\n        ],\n        \"comment\" : [\n            {\n                token : \"comment.end\", // comments are not allowed, but who cares?\n                regex : \"\\\\*\\\\/\",\n                next  : \"start\"\n            }, {\n                defaultToken: \"comment\"\n            }\n        ]\n    };\n    \n};\n\noop.inherits(JsonHighlightRules, TextHighlightRules);\n\nexports.JsonHighlightRules = JsonHighlightRules;\n});\n\nace.define(\"ace/mode/matching_brace_outdent\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar Range = acequire(\"../range\").Range;\n\nvar MatchingBraceOutdent = function() {};\n\n(function() {\n\n    this.checkOutdent = function(line, input) {\n        if (! /^\\s+$/.test(line))\n            return false;\n\n        return /^\\s*\\}/.test(input);\n    };\n\n    this.autoOutdent = function(doc, row) {\n        var line = doc.getLine(row);\n        var match = line.match(/^(\\s*\\})/);\n\n        if (!match) return 0;\n\n        var column = match[1].length;\n        var openBracePos = doc.findMatchingBracket({row: row, column: column});\n\n        if (!openBracePos || openBracePos.row == row) return 0;\n\n        var indent = this.$getIndent(doc.getLine(openBracePos.row));\n        doc.replace(new Range(row, 0, row, column-1), indent);\n    };\n\n    this.$getIndent = function(line) {\n        return line.match(/^\\s*/)[0];\n    };\n\n}).call(MatchingBraceOutdent.prototype);\n\nexports.MatchingBraceOutdent = MatchingBraceOutdent;\n});\n\nace.define(\"ace/mode/folding/cstyle\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/range\",\"ace/mode/folding/fold_mode\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"../../lib/oop\");\nvar Range = acequire(\"../../range\").Range;\nvar BaseFoldMode = acequire(\"./fold_mode\").FoldMode;\n\nvar FoldMode = exports.FoldMode = function(commentRegex) {\n    if (commentRegex) {\n        this.foldingStartMarker = new RegExp(\n            this.foldingStartMarker.source.replace(/\\|[^|]*?$/, \"|\" + commentRegex.start)\n        );\n        this.foldingStopMarker = new RegExp(\n            this.foldingStopMarker.source.replace(/\\|[^|]*?$/, \"|\" + commentRegex.end)\n        );\n    }\n};\noop.inherits(FoldMode, BaseFoldMode);\n\n(function() {\n    \n    this.foldingStartMarker = /([\\{\\[\\(])[^\\}\\]\\)]*$|^\\s*(\\/\\*)/;\n    this.foldingStopMarker = /^[^\\[\\{\\(]*([\\}\\]\\)])|^[\\s\\*]*(\\*\\/)/;\n    this.singleLineBlockCommentRe= /^\\s*(\\/\\*).*\\*\\/\\s*$/;\n    this.tripleStarBlockCommentRe = /^\\s*(\\/\\*\\*\\*).*\\*\\/\\s*$/;\n    this.startRegionRe = /^\\s*(\\/\\*|\\/\\/)#?region\\b/;\n    this._getFoldWidgetBase = this.getFoldWidget;\n    this.getFoldWidget = function(session, foldStyle, row) {\n        var line = session.getLine(row);\n    \n        if (this.singleLineBlockCommentRe.test(line)) {\n            if (!this.startRegionRe.test(line) && !this.tripleStarBlockCommentRe.test(line))\n                return \"\";\n        }\n    \n        var fw = this._getFoldWidgetBase(session, foldStyle, row);\n    \n        if (!fw && this.startRegionRe.test(line))\n            return \"start\"; // lineCommentRegionStart\n    \n        return fw;\n    };\n\n    this.getFoldWidgetRange = function(session, foldStyle, row, forceMultiline) {\n        var line = session.getLine(row);\n        \n        if (this.startRegionRe.test(line))\n            return this.getCommentRegionBlock(session, line, row);\n        \n        var match = line.match(this.foldingStartMarker);\n        if (match) {\n            var i = match.index;\n\n            if (match[1])\n                return this.openingBracketBlock(session, match[1], row, i);\n                \n            var range = session.getCommentFoldRange(row, i + match[0].length, 1);\n            \n            if (range && !range.isMultiLine()) {\n                if (forceMultiline) {\n                    range = this.getSectionRange(session, row);\n                } else if (foldStyle != \"all\")\n                    range = null;\n            }\n            \n            return range;\n        }\n\n        if (foldStyle === \"markbegin\")\n            return;\n\n        var match = line.match(this.foldingStopMarker);\n        if (match) {\n            var i = match.index + match[0].length;\n\n            if (match[1])\n                return this.closingBracketBlock(session, match[1], row, i);\n\n            return session.getCommentFoldRange(row, i, -1);\n        }\n    };\n    \n    this.getSectionRange = function(session, row) {\n        var line = session.getLine(row);\n        var startIndent = line.search(/\\S/);\n        var startRow = row;\n        var startColumn = line.length;\n        row = row + 1;\n        var endRow = row;\n        var maxRow = session.getLength();\n        while (++row < maxRow) {\n            line = session.getLine(row);\n            var indent = line.search(/\\S/);\n            if (indent === -1)\n                continue;\n            if  (startIndent > indent)\n                break;\n            var subRange = this.getFoldWidgetRange(session, \"all\", row);\n            \n            if (subRange) {\n                if (subRange.start.row <= startRow) {\n                    break;\n                } else if (subRange.isMultiLine()) {\n                    row = subRange.end.row;\n                } else if (startIndent == indent) {\n                    break;\n                }\n            }\n            endRow = row;\n        }\n        \n        return new Range(startRow, startColumn, endRow, session.getLine(endRow).length);\n    };\n    this.getCommentRegionBlock = function(session, line, row) {\n        var startColumn = line.search(/\\s*$/);\n        var maxRow = session.getLength();\n        var startRow = row;\n        \n        var re = /^\\s*(?:\\/\\*|\\/\\/|--)#?(end)?region\\b/;\n        var depth = 1;\n        while (++row < maxRow) {\n            line = session.getLine(row);\n            var m = re.exec(line);\n            if (!m) continue;\n            if (m[1]) depth--;\n            else depth++;\n\n            if (!depth) break;\n        }\n\n        var endRow = row;\n        if (endRow > startRow) {\n            return new Range(startRow, startColumn, endRow, line.length);\n        }\n    };\n\n}).call(FoldMode.prototype);\n\n});\n\nace.define(\"ace/mode/json\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/mode/json_highlight_rules\",\"ace/mode/matching_brace_outdent\",\"ace/mode/behaviour/cstyle\",\"ace/mode/folding/cstyle\",\"ace/worker/worker_client\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"../lib/oop\");\nvar TextMode = acequire(\"./text\").Mode;\nvar HighlightRules = acequire(\"./json_highlight_rules\").JsonHighlightRules;\nvar MatchingBraceOutdent = acequire(\"./matching_brace_outdent\").MatchingBraceOutdent;\nvar CstyleBehaviour = acequire(\"./behaviour/cstyle\").CstyleBehaviour;\nvar CStyleFoldMode = acequire(\"./folding/cstyle\").FoldMode;\nvar WorkerClient = acequire(\"../worker/worker_client\").WorkerClient;\n\nvar Mode = function() {\n    this.HighlightRules = HighlightRules;\n    this.$outdent = new MatchingBraceOutdent();\n    this.$behaviour = new CstyleBehaviour();\n    this.foldingRules = new CStyleFoldMode();\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n\n    this.getNextLineIndent = function(state, line, tab) {\n        var indent = this.$getIndent(line);\n\n        if (state == \"start\") {\n            var match = line.match(/^.*[\\{\\(\\[]\\s*$/);\n            if (match) {\n                indent += tab;\n            }\n        }\n\n        return indent;\n    };\n\n    this.checkOutdent = function(state, line, input) {\n        return this.$outdent.checkOutdent(line, input);\n    };\n\n    this.autoOutdent = function(state, doc, row) {\n        this.$outdent.autoOutdent(doc, row);\n    };\n\n    this.createWorker = function(session) {\n        var worker = new WorkerClient([\"ace\"], __webpack_require__(18), \"JsonWorker\");\n        worker.attachToDocument(session.getDocument());\n\n        worker.on(\"annotate\", function(e) {\n            session.setAnnotations(e.data);\n        });\n\n        worker.on(\"terminate\", function() {\n            session.clearAnnotations();\n        });\n\n        return worker;\n    };\n\n\n    this.$id = \"ace/mode/json\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n});\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\nmodule.exports.id = 'ace/mode/json_worker';\nmodule.exports.src = \"\\\"no use strict\\\";!function(window){function resolveModuleId(id,paths){for(var testPath=id,tail=\\\"\\\";testPath;){var alias=paths[testPath];if(\\\"string\\\"==typeof alias)return alias+tail;if(alias)return alias.location.replace(/\\\\/*$/,\\\"/\\\")+(tail||alias.main||alias.name);if(alias===!1)return\\\"\\\";var i=testPath.lastIndexOf(\\\"/\\\");if(-1===i)break;tail=testPath.substr(i)+tail,testPath=testPath.slice(0,i)}return id}if(!(void 0!==window.window&&window.document||window.acequire&&window.define)){window.console||(window.console=function(){var msgs=Array.prototype.slice.call(arguments,0);postMessage({type:\\\"log\\\",data:msgs})},window.console.error=window.console.warn=window.console.log=window.console.trace=window.console),window.window=window,window.ace=window,window.onerror=function(message,file,line,col,err){postMessage({type:\\\"error\\\",data:{message:message,data:err.data,file:file,line:line,col:col,stack:err.stack}})},window.normalizeModule=function(parentId,moduleName){if(-1!==moduleName.indexOf(\\\"!\\\")){var chunks=moduleName.split(\\\"!\\\");return window.normalizeModule(parentId,chunks[0])+\\\"!\\\"+window.normalizeModule(parentId,chunks[1])}if(\\\".\\\"==moduleName.charAt(0)){var base=parentId.split(\\\"/\\\").slice(0,-1).join(\\\"/\\\");for(moduleName=(base?base+\\\"/\\\":\\\"\\\")+moduleName;-1!==moduleName.indexOf(\\\".\\\")&&previous!=moduleName;){var previous=moduleName;moduleName=moduleName.replace(/^\\\\.\\\\//,\\\"\\\").replace(/\\\\/\\\\.\\\\//,\\\"/\\\").replace(/[^\\\\/]+\\\\/\\\\.\\\\.\\\\//,\\\"\\\")}}return moduleName},window.acequire=function acequire(parentId,id){if(id||(id=parentId,parentId=null),!id.charAt)throw Error(\\\"worker.js acequire() accepts only (parentId, id) as arguments\\\");id=window.normalizeModule(parentId,id);var module=window.acequire.modules[id];if(module)return module.initialized||(module.initialized=!0,module.exports=module.factory().exports),module.exports;if(!window.acequire.tlns)return console.log(\\\"unable to load \\\"+id);var path=resolveModuleId(id,window.acequire.tlns);return\\\".js\\\"!=path.slice(-3)&&(path+=\\\".js\\\"),window.acequire.id=id,window.acequire.modules[id]={},importScripts(path),window.acequire(parentId,id)},window.acequire.modules={},window.acequire.tlns={},window.define=function(id,deps,factory){if(2==arguments.length?(factory=deps,\\\"string\\\"!=typeof id&&(deps=id,id=window.acequire.id)):1==arguments.length&&(factory=id,deps=[],id=window.acequire.id),\\\"function\\\"!=typeof factory)return window.acequire.modules[id]={exports:factory,initialized:!0},void 0;deps.length||(deps=[\\\"require\\\",\\\"exports\\\",\\\"module\\\"]);var req=function(childId){return window.acequire(id,childId)};window.acequire.modules[id]={exports:{},factory:function(){var module=this,returnExports=factory.apply(this,deps.map(function(dep){switch(dep){case\\\"require\\\":return req;case\\\"exports\\\":return module.exports;case\\\"module\\\":return module;default:return req(dep)}}));return returnExports&&(module.exports=returnExports),module}}},window.define.amd={},acequire.tlns={},window.initBaseUrls=function(topLevelNamespaces){for(var i in topLevelNamespaces)acequire.tlns[i]=topLevelNamespaces[i]},window.initSender=function(){var EventEmitter=window.acequire(\\\"ace/lib/event_emitter\\\").EventEmitter,oop=window.acequire(\\\"ace/lib/oop\\\"),Sender=function(){};return function(){oop.implement(this,EventEmitter),this.callback=function(data,callbackId){postMessage({type:\\\"call\\\",id:callbackId,data:data})},this.emit=function(name,data){postMessage({type:\\\"event\\\",name:name,data:data})}}.call(Sender.prototype),new Sender};var main=window.main=null,sender=window.sender=null;window.onmessage=function(e){var msg=e.data;if(msg.event&&sender)sender._signal(msg.event,msg.data);else if(msg.command)if(main[msg.command])main[msg.command].apply(main,msg.args);else{if(!window[msg.command])throw Error(\\\"Unknown command:\\\"+msg.command);window[msg.command].apply(window,msg.args)}else if(msg.init){window.initBaseUrls(msg.tlns),acequire(\\\"ace/lib/es5-shim\\\"),sender=window.sender=window.initSender();var clazz=acequire(msg.module)[msg.classname];main=window.main=new clazz(sender)}}}}(this),ace.define(\\\"ace/lib/oop\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(acequire,exports){\\\"use strict\\\";exports.inherits=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key];return obj},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}),ace.define(\\\"ace/range\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(acequire,exports){\\\"use strict\\\";var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column},this.toString=function(){return\\\"Range: [\\\"+this.start.row+\\\"/\\\"+this.start.column+\\\"] -> [\\\"+this.end.row+\\\"/\\\"+this.end.column+\\\"]\\\"},this.contains=function(row,column){return 0==this.compare(row,column)},this.compareRange=function(range){var cmp,end=range.end,start=range.start;return cmp=this.compare(end.row,end.column),1==cmp?(cmp=this.compare(start.row,start.column),1==cmp?2:0==cmp?1:0):-1==cmp?-2:(cmp=this.compare(start.row,start.column),-1==cmp?-1:1==cmp?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){return 0==this.comparePoint(range.start)&&0==this.comparePoint(range.end)},this.intersects=function(range){var cmp=this.compareRange(range);return-1==cmp||0==cmp||1==cmp},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){\\\"object\\\"==typeof row?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)},this.setEnd=function(row,column){\\\"object\\\"==typeof row?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,this.end.column=column)},this.inside=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)||this.isStart(row,column)?!1:!0:!1},this.insideStart=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)?!1:!0:!1},this.insideEnd=function(row,column){return 0==this.compare(row,column)?this.isStart(row,column)?!1:!0:!1},this.compare=function(row,column){return this.isMultiLine()||row!==this.start.row?this.start.row>row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?this.end.column>=column?0:1:0:this.start.column>column?-1:column>this.end.column?1:0},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(firstRow>this.end.row)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(firstRow>this.start.row)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column);if(0==cmp)return this;if(-1==cmp)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)},this.moveBy=function(row,column){this.start.row+=row,this.start.column+=column,this.end.row+=row,this.end.column+=column}}).call(Range.prototype),Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},Range.comparePoints=comparePoints,Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},exports.Range=Range}),ace.define(\\\"ace/apply_delta\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(acequire,exports){\\\"use strict\\\";exports.applyDelta=function(docLines,delta){var row=delta.start.row,startColumn=delta.start.column,line=docLines[row]||\\\"\\\";switch(delta.action){case\\\"insert\\\":var lines=delta.lines;if(1===lines.length)docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn);else{var args=[row,1].concat(delta.lines);docLines.splice.apply(docLines,args),docLines[row]=line.substring(0,startColumn)+docLines[row],docLines[row+delta.lines.length-1]+=line.substring(startColumn)}break;case\\\"remove\\\":var endColumn=delta.end.column,endRow=delta.end.row;row===endRow?docLines[row]=line.substring(0,startColumn)+line.substring(endColumn):docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))}}}),ace.define(\\\"ace/lib/event_emitter\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(acequire,exports){\\\"use strict\\\";var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){this.defaultPrevented=!0};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName];if(listeners.length||defaultHandler){\\\"object\\\"==typeof e&&e||(e={}),e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=stopPropagation),e.preventDefault||(e.preventDefault=preventDefault),listeners=listeners.slice();for(var i=0;listeners.length>i&&(listeners[i](e,this),!e.propagationStopped);i++);return defaultHandler&&!e.defaultPrevented?defaultHandler(e,this):void 0}},EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(listeners){listeners=listeners.slice();for(var i=0;listeners.length>i;i++)listeners[i](e,this)}},EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback),callback.apply(null,arguments)})},EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers||(handlers=this._defaultHandlers={_disabled_:{}}),handlers[eventName]){var old=handlers[eventName],disabled=handlers._disabled_[eventName];disabled||(handlers._disabled_[eventName]=disabled=[]),disabled.push(old);var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}handlers[eventName]=callback},EventEmitter.removeDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers){var disabled=handlers._disabled_[eventName];if(handlers[eventName]==callback)handlers[eventName],disabled&&this.setDefaultHandler(eventName,disabled.pop());else if(disabled){var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];return listeners||(listeners=this._eventRegistry[eventName]=[]),-1==listeners.indexOf(callback)&&listeners[capturing?\\\"unshift\\\":\\\"push\\\"](callback),callback},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(listeners){var index=listeners.indexOf(callback);-1!==index&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])},exports.EventEmitter=EventEmitter}),ace.define(\\\"ace/anchor\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\",\\\"ace/lib/oop\\\",\\\"ace/lib/event_emitter\\\"],function(acequire,exports){\\\"use strict\\\";var oop=acequire(\\\"./lib/oop\\\"),EventEmitter=acequire(\\\"./lib/event_emitter\\\").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){this.$onChange=this.onChange.bind(this),this.attach(doc),column===void 0?this.setPosition(row.row,row.column):this.setPosition(row,column)};(function(){function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column;return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){var deltaIsInsert=\\\"insert\\\"==delta.action,deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row),deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column),deltaStart=delta.start,deltaEnd=deltaIsInsert?deltaStart:delta.end;return $pointsInOrder(point,deltaStart,moveIfEqual)?{row:point.row,column:point.column}:$pointsInOrder(deltaEnd,point,!moveIfEqual)?{row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}:{row:deltaStart.row,column:deltaStart.column}}oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(delta){if(!(delta.start.row==delta.end.row&&delta.start.row!=this.row||delta.start.row>this.row)){var point=$getTransformedPoint(delta,{row:this.row,column:this.column},this.$insertRight);this.setPosition(point.row,point.column,!0)}},this.setPosition=function(row,column,noClip){var pos;if(pos=noClip?{row:row,column:column}:this.$clipPositionToDocument(row,column),this.row!=pos.row||this.column!=pos.column){var old={row:this.row,column:this.column};this.row=pos.row,this.column=pos.column,this._signal(\\\"change\\\",{old:old,value:pos})}},this.detach=function(){this.document.removeEventListener(\\\"change\\\",this.$onChange)},this.attach=function(doc){this.document=doc||this.document,this.document.on(\\\"change\\\",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={};return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):0>row?(pos.row=0,pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),0>column&&(pos.column=0),pos}}).call(Anchor.prototype)}),ace.define(\\\"ace/document\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\",\\\"ace/lib/oop\\\",\\\"ace/apply_delta\\\",\\\"ace/lib/event_emitter\\\",\\\"ace/range\\\",\\\"ace/anchor\\\"],function(acequire,exports){\\\"use strict\\\";var oop=acequire(\\\"./lib/oop\\\"),applyDelta=acequire(\\\"./apply_delta\\\").applyDelta,EventEmitter=acequire(\\\"./lib/event_emitter\\\").EventEmitter,Range=acequire(\\\"./range\\\").Range,Anchor=acequire(\\\"./anchor\\\").Anchor,Document=function(textOrLines){this.$lines=[\\\"\\\"],0===textOrLines.length?this.$lines=[\\\"\\\"]:Array.isArray(textOrLines)?this.insertMergedLines({row:0,column:0},textOrLines):this.insert({row:0,column:0},textOrLines)};(function(){oop.implement(this,EventEmitter),this.setValue=function(text){var len=this.getLength()-1;this.remove(new Range(0,0,len,this.getLine(len).length)),this.insert({row:0,column:0},text)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)},this.$split=0===\\\"aaa\\\".split(/a/).length?function(text){return text.replace(/\\\\r\\\\n|\\\\r/g,\\\"\\\\n\\\").split(\\\"\\\\n\\\")}:function(text){return text.split(/\\\\r\\\\n|\\\\r|\\\\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\\\\r\\\\n|\\\\r|\\\\n)/m);this.$autoNewLine=match?match[1]:\\\"\\\\n\\\",this._signal(\\\"changeNewLineMode\\\")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case\\\"windows\\\":return\\\"\\\\r\\\\n\\\";case\\\"unix\\\":return\\\"\\\\n\\\";default:return this.$autoNewLine||\\\"\\\\n\\\"}},this.$autoNewLine=\\\"\\\",this.$newLineMode=\\\"auto\\\",this.setNewLineMode=function(newLineMode){this.$newLineMode!==newLineMode&&(this.$newLineMode=newLineMode,this._signal(\\\"changeNewLineMode\\\"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(text){return\\\"\\\\r\\\\n\\\"==text||\\\"\\\\r\\\"==text||\\\"\\\\n\\\"==text},this.getLine=function(row){return this.$lines[row]||\\\"\\\"},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())},this.getLinesForRange=function(range){var lines;if(range.start.row===range.end.row)lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)];else{lines=this.getLines(range.start.row,range.end.row),lines[0]=(lines[0]||\\\"\\\").substring(range.start.column);var l=lines.length-1;range.end.row-range.start.row==l&&(lines[l]=lines[l].substring(0,range.end.column))}return lines},this.insertLines=function(row,lines){return console.warn(\\\"Use of document.insertLines is deprecated. Use the insertFullLines method instead.\\\"),this.insertFullLines(row,lines)},this.removeLines=function(firstRow,lastRow){return console.warn(\\\"Use of document.removeLines is deprecated. Use the removeFullLines method instead.\\\"),this.removeFullLines(firstRow,lastRow)},this.insertNewLine=function(position){return console.warn(\\\"Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.\\\"),this.insertMergedLines(position,[\\\"\\\",\\\"\\\"])},this.insert=function(position,text){return 1>=this.getLength()&&this.$detectNewLine(text),this.insertMergedLines(position,this.$split(text))},this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column),end=this.pos(position.row,position.column+text.length);return this.applyDelta({start:start,end:end,action:\\\"insert\\\",lines:[text]},!0),this.clonePos(end)},this.clippedPos=function(row,column){var length=this.getLength();void 0===row?row=length:0>row?row=0:row>=length&&(row=length-1,column=void 0);var line=this.getLine(row);return void 0==column&&(column=line.length),column=Math.min(Math.max(column,0),line.length),{row:row,column:column}},this.clonePos=function(pos){return{row:pos.row,column:pos.column}},this.pos=function(row,column){return{row:row,column:column}},this.$clipPosition=function(position){var length=this.getLength();return position.row>=length?(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length):(position.row=Math.max(0,position.row),position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)),position},this.insertFullLines=function(row,lines){row=Math.min(Math.max(row,0),this.getLength());var column=0;this.getLength()>row?(lines=lines.concat([\\\"\\\"]),column=0):(lines=[\\\"\\\"].concat(lines),row--,column=this.$lines[row].length),this.insertMergedLines({row:row,column:column},lines)},this.insertMergedLines=function(position,lines){var start=this.clippedPos(position.row,position.column),end={row:start.row+lines.length-1,column:(1==lines.length?start.column:0)+lines[lines.length-1].length};return this.applyDelta({start:start,end:end,action:\\\"insert\\\",lines:lines}),this.clonePos(end)},this.remove=function(range){var start=this.clippedPos(range.start.row,range.start.column),end=this.clippedPos(range.end.row,range.end.column);return this.applyDelta({start:start,end:end,action:\\\"remove\\\",lines:this.getLinesForRange({start:start,end:end})}),this.clonePos(start)},this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn),end=this.clippedPos(row,endColumn);return this.applyDelta({start:start,end:end,action:\\\"remove\\\",lines:this.getLinesForRange({start:start,end:end})},!0),this.clonePos(start)},this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1),lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1);var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0,deleteLastNewLine=this.getLength()-1>lastRow,startRow=deleteFirstNewLine?firstRow-1:firstRow,startCol=deleteFirstNewLine?this.getLine(startRow).length:0,endRow=deleteLastNewLine?lastRow+1:lastRow,endCol=deleteLastNewLine?0:this.getLine(endRow).length,range=new Range(startRow,startCol,endRow,endCol),deletedLines=this.$lines.slice(firstRow,lastRow+1);return this.applyDelta({start:range.start,end:range.end,action:\\\"remove\\\",lines:this.getLinesForRange(range)}),deletedLines},this.removeNewLine=function(row){this.getLength()-1>row&&row>=0&&this.applyDelta({start:this.pos(row,this.getLine(row).length),end:this.pos(row+1,0),action:\\\"remove\\\",lines:[\\\"\\\",\\\"\\\"]})},this.replace=function(range,text){if(range instanceof Range||(range=Range.fromPoints(range.start,range.end)),0===text.length&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);var end;return end=text?this.insert(range.start,text):range.start},this.applyDeltas=function(deltas){for(var i=0;deltas.length>i;i++)this.applyDelta(deltas[i])},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--)this.revertDelta(deltas[i])},this.applyDelta=function(delta,doNotValidate){var isInsert=\\\"insert\\\"==delta.action;(isInsert?1>=delta.lines.length&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end))||(isInsert&&delta.lines.length>2e4&&this.$splitAndapplyLargeDelta(delta,2e4),applyDelta(this.$lines,delta,doNotValidate),this._signal(\\\"change\\\",delta))},this.$splitAndapplyLargeDelta=function(delta,MAX){for(var lines=delta.lines,l=lines.length,row=delta.start.row,column=delta.start.column,from=0,to=0;;){from=to,to+=MAX-1;var chunk=lines.slice(from,to);if(to>l){delta.lines=chunk,delta.start.row=row+from,delta.start.column=column;break}chunk.push(\\\"\\\"),this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,lines:chunk},!0)}},this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),end:this.clonePos(delta.end),action:\\\"insert\\\"==delta.action?\\\"remove\\\":\\\"insert\\\",lines:delta.lines.slice()})},this.indexToPosition=function(index,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,i=startRow||0,l=lines.length;l>i;i++)if(index-=lines[i].length+newlineLength,0>index)return{row:i,column:index+lines[i].length+newlineLength};return{row:l-1,column:lines[l-1].length}},this.positionToIndex=function(pos,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,row=Math.min(pos.row,lines.length),i=startRow||0;row>i;++i)index+=lines[i].length+newlineLength;return index+pos.column}}).call(Document.prototype),exports.Document=Document}),ace.define(\\\"ace/lib/lang\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(acequire,exports){\\\"use strict\\\";exports.last=function(a){return a[a.length-1]},exports.stringReverse=function(string){return string.split(\\\"\\\").reverse().join(\\\"\\\")},exports.stringRepeat=function(string,count){for(var result=\\\"\\\";count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string);return result};var trimBeginRegexp=/^\\\\s\\\\s*/,trimEndRegexp=/\\\\s\\\\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,\\\"\\\")},exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,\\\"\\\")},exports.copyObject=function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},exports.copyArray=function(array){for(var copy=[],i=0,l=array.length;l>i;i++)copy[i]=array[i]&&\\\"object\\\"==typeof array[i]?this.copyObject(array[i]):array[i];return copy},exports.deepCopy=function deepCopy(obj){if(\\\"object\\\"!=typeof obj||!obj)return obj;var copy;if(Array.isArray(obj)){copy=[];for(var key=0;obj.length>key;key++)copy[key]=deepCopy(obj[key]);return copy}if(\\\"[object Object]\\\"!==Object.prototype.toString.call(obj))return obj;copy={};for(var key in obj)copy[key]=deepCopy(obj[key]);return copy},exports.arrayToMap=function(arr){for(var map={},i=0;arr.length>i;i++)map[arr[i]]=1;return map},exports.createMap=function(props){var map=Object.create(null);for(var i in props)map[i]=props[i];return map},exports.arrayRemove=function(array,value){for(var i=0;array.length>=i;i++)value===array[i]&&array.splice(i,1)},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\\\\]\\\\/\\\\\\\\])/g,\\\"\\\\\\\\$1\\\")},exports.escapeHTML=function(str){return str.replace(/&/g,\\\"&#38;\\\").replace(/\\\"/g,\\\"&#34;\\\").replace(/'/g,\\\"&#39;\\\").replace(/</g,\\\"&#60;\\\")},exports.getMatchOffsets=function(string,regExp){var matches=[];return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred};return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){return clearTimeout(timer),timer=null,deferred},deferred.isPending=function(){return timer},deferred},exports.delayedCall=function(fcn,defaultTimeout){var timer=null,callback=function(){timer=null,fcn()},_self=function(timeout){null==timer&&(timer=setTimeout(callback,timeout||defaultTimeout))};return _self.delay=function(timeout){timer&&clearTimeout(timer),timer=setTimeout(callback,timeout||defaultTimeout)},_self.schedule=_self,_self.call=function(){this.cancel(),fcn()},_self.cancel=function(){timer&&clearTimeout(timer),timer=null},_self.isPending=function(){return timer},_self}}),ace.define(\\\"ace/worker/mirror\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\",\\\"ace/range\\\",\\\"ace/document\\\",\\\"ace/lib/lang\\\"],function(acequire,exports){\\\"use strict\\\";acequire(\\\"../range\\\").Range;var Document=acequire(\\\"../document\\\").Document,lang=acequire(\\\"../lib/lang\\\"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(\\\"\\\"),deferredUpdate=this.deferredUpdate=lang.delayedCall(this.onUpdate.bind(this)),_self=this;sender.on(\\\"change\\\",function(e){var data=e.data;if(data[0].start)doc.applyDeltas(data);else for(var i=0;data.length>i;i+=2){if(Array.isArray(data[i+1]))var d={action:\\\"insert\\\",start:data[i],lines:data[i+1]};else var d={action:\\\"remove\\\",start:data[i],end:data[i+1]};doc.applyDelta(d,!0)}return _self.$timeout?deferredUpdate.schedule(_self.$timeout):(_self.onUpdate(),void 0)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(Mirror.prototype)}),ace.define(\\\"ace/mode/json/json_parse\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(){\\\"use strict\\\";var at,ch,text,value,escapee={'\\\"':'\\\"',\\\"\\\\\\\\\\\":\\\"\\\\\\\\\\\",\\\"/\\\":\\\"/\\\",b:\\\"\\\\b\\\",f:\\\"\\\\f\\\",n:\\\"\\\\n\\\",r:\\\"\\\\r\\\",t:\\\"\\t\\\"},error=function(m){throw{name:\\\"SyntaxError\\\",message:m,at:at,text:text}},next=function(c){return c&&c!==ch&&error(\\\"Expected '\\\"+c+\\\"' instead of '\\\"+ch+\\\"'\\\"),ch=text.charAt(at),at+=1,ch},number=function(){var number,string=\\\"\\\";for(\\\"-\\\"===ch&&(string=\\\"-\\\",next(\\\"-\\\"));ch>=\\\"0\\\"&&\\\"9\\\">=ch;)string+=ch,next();if(\\\".\\\"===ch)for(string+=\\\".\\\";next()&&ch>=\\\"0\\\"&&\\\"9\\\">=ch;)string+=ch;if(\\\"e\\\"===ch||\\\"E\\\"===ch)for(string+=ch,next(),(\\\"-\\\"===ch||\\\"+\\\"===ch)&&(string+=ch,next());ch>=\\\"0\\\"&&\\\"9\\\">=ch;)string+=ch,next();return number=+string,isNaN(number)?(error(\\\"Bad number\\\"),void 0):number},string=function(){var hex,i,uffff,string=\\\"\\\";if('\\\"'===ch)for(;next();){if('\\\"'===ch)return next(),string;if(\\\"\\\\\\\\\\\"===ch)if(next(),\\\"u\\\"===ch){for(uffff=0,i=0;4>i&&(hex=parseInt(next(),16),isFinite(hex));i+=1)uffff=16*uffff+hex;string+=String.fromCharCode(uffff)}else{if(\\\"string\\\"!=typeof escapee[ch])break;string+=escapee[ch]}else string+=ch}error(\\\"Bad string\\\")},white=function(){for(;ch&&\\\" \\\">=ch;)next()},word=function(){switch(ch){case\\\"t\\\":return next(\\\"t\\\"),next(\\\"r\\\"),next(\\\"u\\\"),next(\\\"e\\\"),!0;case\\\"f\\\":return next(\\\"f\\\"),next(\\\"a\\\"),next(\\\"l\\\"),next(\\\"s\\\"),next(\\\"e\\\"),!1;case\\\"n\\\":return next(\\\"n\\\"),next(\\\"u\\\"),next(\\\"l\\\"),next(\\\"l\\\"),null}error(\\\"Unexpected '\\\"+ch+\\\"'\\\")},array=function(){var array=[];if(\\\"[\\\"===ch){if(next(\\\"[\\\"),white(),\\\"]\\\"===ch)return next(\\\"]\\\"),array;for(;ch;){if(array.push(value()),white(),\\\"]\\\"===ch)return next(\\\"]\\\"),array;next(\\\",\\\"),white()}}error(\\\"Bad array\\\")},object=function(){var key,object={};if(\\\"{\\\"===ch){if(next(\\\"{\\\"),white(),\\\"}\\\"===ch)return next(\\\"}\\\"),object;for(;ch;){if(key=string(),white(),next(\\\":\\\"),Object.hasOwnProperty.call(object,key)&&error('Duplicate key \\\"'+key+'\\\"'),object[key]=value(),white(),\\\"}\\\"===ch)return next(\\\"}\\\"),object;next(\\\",\\\"),white()}}error(\\\"Bad object\\\")};return value=function(){switch(white(),ch){case\\\"{\\\":return object();case\\\"[\\\":return array();case'\\\"':return string();case\\\"-\\\":return number();default:return ch>=\\\"0\\\"&&\\\"9\\\">=ch?number():word()}},function(source,reviver){var result;return text=source,at=0,ch=\\\" \\\",result=value(),white(),ch&&error(\\\"Syntax error\\\"),\\\"function\\\"==typeof reviver?function walk(holder,key){var k,v,value=holder[key];if(value&&\\\"object\\\"==typeof value)for(k in value)Object.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}({\\\"\\\":result},\\\"\\\"):result}}),ace.define(\\\"ace/mode/json_worker\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\",\\\"ace/lib/oop\\\",\\\"ace/worker/mirror\\\",\\\"ace/mode/json/json_parse\\\"],function(acequire,exports){\\\"use strict\\\";var oop=acequire(\\\"../lib/oop\\\"),Mirror=acequire(\\\"../worker/mirror\\\").Mirror,parse=acequire(\\\"./json/json_parse\\\"),JsonWorker=exports.JsonWorker=function(sender){Mirror.call(this,sender),this.setTimeout(200)};oop.inherits(JsonWorker,Mirror),function(){this.onUpdate=function(){var value=this.doc.getValue(),errors=[];try{value&&parse(value)}catch(e){var pos=this.doc.indexToPosition(e.at-1);errors.push({row:pos.row,column:pos.column,text:e.message,type:\\\"error\\\"})}this.sender.emit(\\\"annotate\\\",errors)}}.call(JsonWorker.prototype)}),ace.define(\\\"ace/lib/es5-shim\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(){function Empty(){}function doesDefinePropertyWork(object){try{return Object.defineProperty(object,\\\"sentinel\\\",{}),\\\"sentinel\\\"in object}catch(exception){}}function toInteger(n){return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if(\\\"function\\\"!=typeof target)throw new TypeError(\\\"Function.prototype.bind called on incompatible \\\"+target);var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))};return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound});var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,_toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty);if((supportsAccessors=owns(prototypeOfObject,\\\"__defineGetter__\\\"))&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function makeArray(l){var a=Array(l+2);return a[0]=a[1]=0,a}var lengthBefore,array=[];return array.splice.apply(array,makeArray(20)),array.splice.apply(array,makeArray(26)),lengthBefore=array.length,array.splice(5,0,\\\"XXX\\\"),lengthBefore+1==array.length,lengthBefore+1==array.length?!0:void 0\\n}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){return arguments.length?array_splice.apply(this,[void 0===start?0:start,void 0===deleteCount?this.length-start:deleteCount].concat(slice.call(arguments,2))):[]}}else Array.prototype.splice=function(pos,removeCount){var length=this.length;pos>0?pos>length&&(pos=length):void 0==pos?pos=0:0>pos&&(pos=Math.max(length+pos,0)),length>pos+removeCount||(removeCount=length-pos);var removed=this.slice(pos,pos+removeCount),insert=slice.call(arguments,2),add=insert.length;if(pos===length)add&&this.push.apply(this,insert);else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove;if(tailOldPos>tailNewPos)for(var i=0;tailCount>i;++i)this[tailNewPos+i]=this[tailOldPos+i];else if(tailNewPos>tailOldPos)for(i=tailCount;i--;)this[tailNewPos+i]=this[tailOldPos+i];if(add&&pos===lengthAfterRemove)this.length=lengthAfterRemove,this.push.apply(this,insert);else for(this.length=lengthAfterRemove+add,i=0;add>i;++i)this[pos+i]=insert[i]}return removed};Array.isArray||(Array.isArray=function(obj){return\\\"[object Array]\\\"==_toString(obj)});var boxedString=Object(\\\"a\\\"),splitString=\\\"a\\\"!=boxedString[0]||!(0 in boxedString);if(Array.prototype.forEach||(Array.prototype.forEach=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,thisp=arguments[1],i=-1,length=self.length>>>0;if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError;for(;length>++i;)i in self&&fun.call(thisp,self[i],i,object)}),Array.prototype.map||(Array.prototype.map=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");for(var i=0;length>i;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object));return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var value,object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0,result=[],thisp=arguments[1];if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");for(var i=0;length>i;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value));return result}),Array.prototype.every||(Array.prototype.every=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0,thisp=arguments[1];if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");for(var i=0;length>i;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0,thisp=arguments[1];if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");for(var i=0;length>i;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0;if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");if(!length&&1==arguments.length)throw new TypeError(\\\"reduce of empty array with no initial value\\\");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError(\\\"reduce of empty array with no initial value\\\")}for(;length>i;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object));return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0;if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");if(!length&&1==arguments.length)throw new TypeError(\\\"reduceRight of empty array with no initial value\\\");var result,i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(0>--i)throw new TypeError(\\\"reduceRight of empty array with no initial value\\\")}do i in this&&(result=fun.call(void 0,result,self[i],i,object));while(i--);return result}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(sought){var self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);length>i;i++)if(i in self&&self[i]===sought)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(sought){var self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT=\\\"Object.getOwnPropertyDescriptor called on a non-object: \\\";Object.getOwnPropertyDescriptor=function(object,property){if(\\\"object\\\"!=typeof object&&\\\"function\\\"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object);if(owns(object,property)){var descriptor,getter,setter;if(descriptor={enumerable:!0,configurable:!0},supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(object.__proto__=prototype,getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),!Object.create){var createEmpty;createEmpty=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var empty={};for(var i in empty)empty[i]=null;return empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null,empty},Object.create=function(prototype,properties){var object;if(null===prototype)object=createEmpty();else{if(\\\"object\\\"!=typeof prototype)throw new TypeError(\\\"typeof prototype[\\\"+typeof prototype+\\\"] != 'object'\\\");var Type=function(){};Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom=\\\"undefined\\\"==typeof document||doesDefinePropertyWork(document.createElement(\\\"div\\\"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR=\\\"Property description must be an object: \\\",ERR_NON_OBJECT_TARGET=\\\"Object.defineProperty called on non-object: \\\",ERR_ACCESSORS_NOT_SUPPORTED=\\\"getters & setters can not be defined on this javascript engine\\\";Object.defineProperty=function(object,property,descriptor){if(\\\"object\\\"!=typeof object&&\\\"function\\\"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if(\\\"object\\\"!=typeof descriptor&&\\\"function\\\"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,\\\"value\\\"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,\\\"get\\\")&&defineGetter(object,property,descriptor.get),owns(descriptor,\\\"set\\\")&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return\\\"function\\\"==typeof object?object:freezeObject(object)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError;for(var name=\\\"\\\";owns(object,name);)name+=\\\"?\\\";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue}),!Object.keys){var hasDontEnumBug=!0,dontEnums=[\\\"toString\\\",\\\"toLocaleString\\\",\\\"valueOf\\\",\\\"hasOwnProperty\\\",\\\"isPrototypeOf\\\",\\\"propertyIsEnumerable\\\",\\\"constructor\\\"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function(object){if(\\\"object\\\"!=typeof object&&\\\"function\\\"!=typeof object||null===object)throw new TypeError(\\\"Object.keys called on a non-object\\\");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;ii>i;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}Date.now||(Date.now=function(){return(new Date).getTime()});var ws=\\\"\\t\\\\n\\u000b\\\\f\\\\r \\\\u2028\\\\u2029\\\";if(!String.prototype.trim||ws.trim()){ws=\\\"[\\\"+ws+\\\"]\\\";var trimBeginRegexp=RegExp(\\\"^\\\"+ws+ws+\\\"*\\\"),trimEndRegexp=RegExp(ws+ws+\\\"*$\\\");String.prototype.trim=function(){return(this+\\\"\\\").replace(trimBeginRegexp,\\\"\\\").replace(trimEndRegexp,\\\"\\\")}}var toObject=function(o){if(null==o)throw new TypeError(\\\"can't convert \\\"+o+\\\" to object\\\");return Object(o)}});\";\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports) {\n\nace.define(\"ace/ext/searchbox\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/lib/event\",\"ace/keyboard/hash_handler\",\"ace/lib/keys\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar dom = acequire(\"../lib/dom\");\nvar lang = acequire(\"../lib/lang\");\nvar event = acequire(\"../lib/event\");\nvar searchboxCss = \"\\\n.ace_search {\\\nbackground-color: #ddd;\\\ncolor: #666;\\\nborder: 1px solid #cbcbcb;\\\nborder-top: 0 none;\\\noverflow: hidden;\\\nmargin: 0;\\\npadding: 4px 6px 0 4px;\\\nposition: absolute;\\\ntop: 0;\\\nz-index: 99;\\\nwhite-space: normal;\\\n}\\\n.ace_search.left {\\\nborder-left: 0 none;\\\nborder-radius: 0px 0px 5px 0px;\\\nleft: 0;\\\n}\\\n.ace_search.right {\\\nborder-radius: 0px 0px 0px 5px;\\\nborder-right: 0 none;\\\nright: 0;\\\n}\\\n.ace_search_form, .ace_replace_form {\\\nmargin: 0 20px 4px 0;\\\noverflow: hidden;\\\nline-height: 1.9;\\\n}\\\n.ace_replace_form {\\\nmargin-right: 0;\\\n}\\\n.ace_search_form.ace_nomatch {\\\noutline: 1px solid red;\\\n}\\\n.ace_search_field {\\\nborder-radius: 3px 0 0 3px;\\\nbackground-color: white;\\\ncolor: black;\\\nborder: 1px solid #cbcbcb;\\\nborder-right: 0 none;\\\nbox-sizing: border-box!important;\\\noutline: 0;\\\npadding: 0;\\\nfont-size: inherit;\\\nmargin: 0;\\\nline-height: inherit;\\\npadding: 0 6px;\\\nmin-width: 17em;\\\nvertical-align: top;\\\n}\\\n.ace_searchbtn {\\\nborder: 1px solid #cbcbcb;\\\nline-height: inherit;\\\ndisplay: inline-block;\\\npadding: 0 6px;\\\nbackground: #fff;\\\nborder-right: 0 none;\\\nborder-left: 1px solid #dcdcdc;\\\ncursor: pointer;\\\nmargin: 0;\\\nposition: relative;\\\nbox-sizing: content-box!important;\\\ncolor: #666;\\\n}\\\n.ace_searchbtn:last-child {\\\nborder-radius: 0 3px 3px 0;\\\nborder-right: 1px solid #cbcbcb;\\\n}\\\n.ace_searchbtn:disabled {\\\nbackground: none;\\\ncursor: default;\\\n}\\\n.ace_searchbtn:hover {\\\nbackground-color: #eef1f6;\\\n}\\\n.ace_searchbtn.prev, .ace_searchbtn.next {\\\npadding: 0px 0.7em\\\n}\\\n.ace_searchbtn.prev:after, .ace_searchbtn.next:after {\\\ncontent: \\\"\\\";\\\nborder: solid 2px #888;\\\nwidth: 0.5em;\\\nheight: 0.5em;\\\nborder-width:  2px 0 0 2px;\\\ndisplay:inline-block;\\\ntransform: rotate(-45deg);\\\n}\\\n.ace_searchbtn.next:after {\\\nborder-width: 0 2px 2px 0 ;\\\n}\\\n.ace_searchbtn_close {\\\nbackground: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;\\\nborder-radius: 50%;\\\nborder: 0 none;\\\ncolor: #656565;\\\ncursor: pointer;\\\nfont: 16px/16px Arial;\\\npadding: 0;\\\nheight: 14px;\\\nwidth: 14px;\\\ntop: 9px;\\\nright: 7px;\\\nposition: absolute;\\\n}\\\n.ace_searchbtn_close:hover {\\\nbackground-color: #656565;\\\nbackground-position: 50% 100%;\\\ncolor: white;\\\n}\\\n.ace_button {\\\nmargin-left: 2px;\\\ncursor: pointer;\\\n-webkit-user-select: none;\\\n-moz-user-select: none;\\\n-o-user-select: none;\\\n-ms-user-select: none;\\\nuser-select: none;\\\noverflow: hidden;\\\nopacity: 0.7;\\\nborder: 1px solid rgba(100,100,100,0.23);\\\npadding: 1px;\\\nbox-sizing:    border-box!important;\\\ncolor: black;\\\n}\\\n.ace_button:hover {\\\nbackground-color: #eee;\\\nopacity:1;\\\n}\\\n.ace_button:active {\\\nbackground-color: #ddd;\\\n}\\\n.ace_button.checked {\\\nborder-color: #3399ff;\\\nopacity:1;\\\n}\\\n.ace_search_options{\\\nmargin-bottom: 3px;\\\ntext-align: right;\\\n-webkit-user-select: none;\\\n-moz-user-select: none;\\\n-o-user-select: none;\\\n-ms-user-select: none;\\\nuser-select: none;\\\nclear: both;\\\n}\\\n.ace_search_counter {\\\nfloat: left;\\\nfont-family: arial;\\\npadding: 0 8px;\\\n}\";\nvar HashHandler = acequire(\"../keyboard/hash_handler\").HashHandler;\nvar keyUtil = acequire(\"../lib/keys\");\n\nvar MAX_COUNT = 999;\n\ndom.importCssString(searchboxCss, \"ace_searchbox\");\n\nvar html = '<div class=\"ace_search right\">\\\n    <span action=\"hide\" class=\"ace_searchbtn_close\"></span>\\\n    <div class=\"ace_search_form\">\\\n        <input class=\"ace_search_field\" placeholder=\"Search for\" spellcheck=\"false\"></input>\\\n        <span action=\"findPrev\" class=\"ace_searchbtn prev\"></span>\\\n        <span action=\"findNext\" class=\"ace_searchbtn next\"></span>\\\n        <span action=\"findAll\" class=\"ace_searchbtn\" title=\"Alt-Enter\">All</span>\\\n    </div>\\\n    <div class=\"ace_replace_form\">\\\n        <input class=\"ace_search_field\" placeholder=\"Replace with\" spellcheck=\"false\"></input>\\\n        <span action=\"replaceAndFindNext\" class=\"ace_searchbtn\">Replace</span>\\\n        <span action=\"replaceAll\" class=\"ace_searchbtn\">All</span>\\\n    </div>\\\n    <div class=\"ace_search_options\">\\\n        <span action=\"toggleReplace\" class=\"ace_button\" title=\"Toggel Replace mode\"\\\n            style=\"float:left;margin-top:-2px;padding:0 5px;\">+</span>\\\n        <span class=\"ace_search_counter\"></span>\\\n        <span action=\"toggleRegexpMode\" class=\"ace_button\" title=\"RegExp Search\">.*</span>\\\n        <span action=\"toggleCaseSensitive\" class=\"ace_button\" title=\"CaseSensitive Search\">Aa</span>\\\n        <span action=\"toggleWholeWords\" class=\"ace_button\" title=\"Whole Word Search\">\\\\b</span>\\\n        <span action=\"searchInSelection\" class=\"ace_button\" title=\"Search In Selection\">S</span>\\\n    </div>\\\n</div>'.replace(/> +/g, \">\");\n\nvar SearchBox = function(editor, range, showReplaceForm) {\n    var div = dom.createElement(\"div\");\n    div.innerHTML = html;\n    this.element = div.firstChild;\n\n    this.setSession = this.setSession.bind(this);\n\n    this.$init();\n    this.setEditor(editor);\n};\n\n(function() {\n    this.setEditor = function(editor) {\n        editor.searchBox = this;\n        editor.renderer.scroller.appendChild(this.element);\n        this.editor = editor;\n    };\n\n    this.setSession = function(e) {\n        this.searchRange = null;\n        this.$syncOptions(true);\n    };\n\n    this.$initElements = function(sb) {\n        this.searchBox = sb.querySelector(\".ace_search_form\");\n        this.replaceBox = sb.querySelector(\".ace_replace_form\");\n        this.searchOption = sb.querySelector(\"[action=searchInSelection]\");\n        this.replaceOption = sb.querySelector(\"[action=toggleReplace]\");\n        this.regExpOption = sb.querySelector(\"[action=toggleRegexpMode]\");\n        this.caseSensitiveOption = sb.querySelector(\"[action=toggleCaseSensitive]\");\n        this.wholeWordOption = sb.querySelector(\"[action=toggleWholeWords]\");\n        this.searchInput = this.searchBox.querySelector(\".ace_search_field\");\n        this.replaceInput = this.replaceBox.querySelector(\".ace_search_field\");\n        this.searchCounter = sb.querySelector(\".ace_search_counter\");\n    };\n    \n    this.$init = function() {\n        var sb = this.element;\n        \n        this.$initElements(sb);\n        \n        var _this = this;\n        event.addListener(sb, \"mousedown\", function(e) {\n            setTimeout(function(){\n                _this.activeInput.focus();\n            }, 0);\n            event.stopPropagation(e);\n        });\n        event.addListener(sb, \"click\", function(e) {\n            var t = e.target || e.srcElement;\n            var action = t.getAttribute(\"action\");\n            if (action && _this[action])\n                _this[action]();\n            else if (_this.$searchBarKb.commands[action])\n                _this.$searchBarKb.commands[action].exec(_this);\n            event.stopPropagation(e);\n        });\n\n        event.addCommandKeyListener(sb, function(e, hashId, keyCode) {\n            var keyString = keyUtil.keyCodeToString(keyCode);\n            var command = _this.$searchBarKb.findKeyCommand(hashId, keyString);\n            if (command && command.exec) {\n                command.exec(_this);\n                event.stopEvent(e);\n            }\n        });\n\n        this.$onChange = lang.delayedCall(function() {\n            _this.find(false, false);\n        });\n\n        event.addListener(this.searchInput, \"input\", function() {\n            _this.$onChange.schedule(20);\n        });\n        event.addListener(this.searchInput, \"focus\", function() {\n            _this.activeInput = _this.searchInput;\n            _this.searchInput.value && _this.highlight();\n        });\n        event.addListener(this.replaceInput, \"focus\", function() {\n            _this.activeInput = _this.replaceInput;\n            _this.searchInput.value && _this.highlight();\n        });\n    };\n    this.$closeSearchBarKb = new HashHandler([{\n        bindKey: \"Esc\",\n        name: \"closeSearchBar\",\n        exec: function(editor) {\n            editor.searchBox.hide();\n        }\n    }]);\n    this.$searchBarKb = new HashHandler();\n    this.$searchBarKb.bindKeys({\n        \"Ctrl-f|Command-f\": function(sb) {\n            var isReplace = sb.isReplace = !sb.isReplace;\n            sb.replaceBox.style.display = isReplace ? \"\" : \"none\";\n            sb.replaceOption.checked = false;\n            sb.$syncOptions();\n            sb.searchInput.focus();\n        },\n        \"Ctrl-H|Command-Option-F\": function(sb) {\n            sb.replaceOption.checked = true;\n            sb.$syncOptions();\n            sb.replaceInput.focus();\n        },\n        \"Ctrl-G|Command-G\": function(sb) {\n            sb.findNext();\n        },\n        \"Ctrl-Shift-G|Command-Shift-G\": function(sb) {\n            sb.findPrev();\n        },\n        \"esc\": function(sb) {\n            setTimeout(function() { sb.hide();});\n        },\n        \"Return\": function(sb) {\n            if (sb.activeInput == sb.replaceInput)\n                sb.replace();\n            sb.findNext();\n        },\n        \"Shift-Return\": function(sb) {\n            if (sb.activeInput == sb.replaceInput)\n                sb.replace();\n            sb.findPrev();\n        },\n        \"Alt-Return\": function(sb) {\n            if (sb.activeInput == sb.replaceInput)\n                sb.replaceAll();\n            sb.findAll();\n        },\n        \"Tab\": function(sb) {\n            (sb.activeInput == sb.replaceInput ? sb.searchInput : sb.replaceInput).focus();\n        }\n    });\n\n    this.$searchBarKb.addCommands([{\n        name: \"toggleRegexpMode\",\n        bindKey: {win: \"Alt-R|Alt-/\", mac: \"Ctrl-Alt-R|Ctrl-Alt-/\"},\n        exec: function(sb) {\n            sb.regExpOption.checked = !sb.regExpOption.checked;\n            sb.$syncOptions();\n        }\n    }, {\n        name: \"toggleCaseSensitive\",\n        bindKey: {win: \"Alt-C|Alt-I\", mac: \"Ctrl-Alt-R|Ctrl-Alt-I\"},\n        exec: function(sb) {\n            sb.caseSensitiveOption.checked = !sb.caseSensitiveOption.checked;\n            sb.$syncOptions();\n        }\n    }, {\n        name: \"toggleWholeWords\",\n        bindKey: {win: \"Alt-B|Alt-W\", mac: \"Ctrl-Alt-B|Ctrl-Alt-W\"},\n        exec: function(sb) {\n            sb.wholeWordOption.checked = !sb.wholeWordOption.checked;\n            sb.$syncOptions();\n        }\n    }, {\n        name: \"toggleReplace\",\n        exec: function(sb) {\n            sb.replaceOption.checked = !sb.replaceOption.checked;\n            sb.$syncOptions();\n        }\n    }, {\n        name: \"searchInSelection\",\n        exec: function(sb) {\n            sb.searchOption.checked = !sb.searchRange;\n            sb.setSearchRange(sb.searchOption.checked && sb.editor.getSelectionRange());\n            sb.$syncOptions();\n        }\n    }]);\n\n    this.setSearchRange = function(range) {\n        this.searchRange = range;\n        if (range) {\n            this.searchRangeMarker = this.editor.session.addMarker(range, \"ace_active-line\");\n        } else if (this.searchRangeMarker) {\n            this.editor.session.removeMarker(this.searchRangeMarker);\n            this.searchRangeMarker = null;\n        }\n    };\n\n    this.$syncOptions = function(preventScroll) {\n        dom.setCssClass(this.replaceOption, \"checked\", this.searchRange);\n        dom.setCssClass(this.searchOption, \"checked\", this.searchOption.checked);\n        this.replaceOption.textContent = this.replaceOption.checked ? \"-\" : \"+\";\n        dom.setCssClass(this.regExpOption, \"checked\", this.regExpOption.checked);\n        dom.setCssClass(this.wholeWordOption, \"checked\", this.wholeWordOption.checked);\n        dom.setCssClass(this.caseSensitiveOption, \"checked\", this.caseSensitiveOption.checked);\n        this.replaceBox.style.display = this.replaceOption.checked ? \"\" : \"none\";\n        this.find(false, false, preventScroll);\n    };\n\n    this.highlight = function(re) {\n        this.editor.session.highlight(re || this.editor.$search.$options.re);\n        this.editor.renderer.updateBackMarkers();\n    };\n    this.find = function(skipCurrent, backwards, preventScroll) {\n        var range = this.editor.find(this.searchInput.value, {\n            skipCurrent: skipCurrent,\n            backwards: backwards,\n            wrap: true,\n            regExp: this.regExpOption.checked,\n            caseSensitive: this.caseSensitiveOption.checked,\n            wholeWord: this.wholeWordOption.checked,\n            preventScroll: preventScroll,\n            range: this.searchRange\n        });\n        var noMatch = !range && this.searchInput.value;\n        dom.setCssClass(this.searchBox, \"ace_nomatch\", noMatch);\n        this.editor._emit(\"findSearchBox\", { match: !noMatch });\n        this.highlight();\n        this.updateCounter();\n    };\n    this.updateCounter = function() {\n        var editor = this.editor;\n        var regex = editor.$search.$options.re;\n        var all = 0;\n        var before = 0;\n        if (regex) {\n            var value = this.searchRange\n                ? editor.session.getTextRange(this.searchRange)\n                : editor.getValue();\n\n            var offset = editor.session.doc.positionToIndex(editor.selection.anchor);\n            if (this.searchRange)\n                offset -= editor.session.doc.positionToIndex(this.searchRange.start);\n\n            var last = regex.lastIndex = 0;\n            var m;\n            while ((m = regex.exec(value))) {\n                all++;\n                last = m.index;\n                if (last <= offset)\n                    before++;\n                if (all > MAX_COUNT)\n                    break;\n                if (!m[0]) {\n                    regex.lastIndex = last += 1;\n                    if (last >= value.length)\n                        break;\n                }\n            }\n        }\n        this.searchCounter.textContent = before + \" of \" + (all > MAX_COUNT ? MAX_COUNT + \"+\" : all);\n    };\n    this.findNext = function() {\n        this.find(true, false);\n    };\n    this.findPrev = function() {\n        this.find(true, true);\n    };\n    this.findAll = function(){\n        var range = this.editor.findAll(this.searchInput.value, {            \n            regExp: this.regExpOption.checked,\n            caseSensitive: this.caseSensitiveOption.checked,\n            wholeWord: this.wholeWordOption.checked\n        });\n        var noMatch = !range && this.searchInput.value;\n        dom.setCssClass(this.searchBox, \"ace_nomatch\", noMatch);\n        this.editor._emit(\"findSearchBox\", { match: !noMatch });\n        this.highlight();\n        this.hide();\n    };\n    this.replace = function() {\n        if (!this.editor.getReadOnly())\n            this.editor.replace(this.replaceInput.value);\n    };    \n    this.replaceAndFindNext = function() {\n        if (!this.editor.getReadOnly()) {\n            this.editor.replace(this.replaceInput.value);\n            this.findNext();\n        }\n    };\n    this.replaceAll = function() {\n        if (!this.editor.getReadOnly())\n            this.editor.replaceAll(this.replaceInput.value);\n    };\n\n    this.hide = function() {\n        this.active = false;\n        this.setSearchRange(null);\n        this.editor.off(\"changeSession\", this.setSession);\n\n        this.element.style.display = \"none\";\n        this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb);\n        this.editor.focus();\n    };\n    this.show = function(value, isReplace) {\n        this.active = true;\n        this.editor.on(\"changeSession\", this.setSession);\n        this.element.style.display = \"\";\n        this.replaceOption.checked = isReplace;\n\n        if (value)\n            this.searchInput.value = value;\n        \n        this.searchInput.focus();\n        this.searchInput.select();\n\n        this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb);\n\n        this.$syncOptions(true);\n    };\n\n    this.isFocused = function() {\n        var el = document.activeElement;\n        return el == this.searchInput || el == this.replaceInput;\n    };\n}).call(SearchBox.prototype);\n\nexports.SearchBox = SearchBox;\n\nexports.Search = function(editor, isReplace) {\n    var sb = editor.searchBox || new SearchBox(editor);\n    sb.show(editor.session.getTextRange(), isReplace);\n};\n\n});\n                (function() {\n                    ace.acequire([\"ace/ext/searchbox\"], function() {});\n                })();\n            \n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar VanillaPicker = __webpack_require__(9);\nvar Highlighter = __webpack_require__(21);\nvar NodeHistory = __webpack_require__(22);\nvar SearchBox = __webpack_require__(25);\nvar ContextMenu = __webpack_require__(3);\nvar TreePath = __webpack_require__(26);\nvar Node = __webpack_require__(27);\nvar ModeSwitcher = __webpack_require__(7);\nvar util = __webpack_require__(0);\nvar autocomplete = __webpack_require__(32);\nvar translate = __webpack_require__(1).translate;\nvar setLanguages = __webpack_require__(1).setLanguages;\nvar setLanguage = __webpack_require__(1).setLanguage;\n\n// create a mixin with the functions for tree mode\nvar treemode = {};\n\n/**\n * Create a tree editor\n * @param {Element} container    Container element\n * @param {Object} [options]   Object with options. See docs for details.\n * @private\n */\ntreemode.create = function (container, options) {\n  if (!container) {\n    throw new Error('No container element provided.');\n  }\n  this.container = container;\n  this.dom = {};\n  this.highlighter = new Highlighter();\n  this.selection = undefined; // will hold the last input selection\n  this.multiselection = {\n    nodes: []\n  };\n  this.validateSchema = null; // will be set in .setSchema(schema)\n  this.validationSequence = 0;\n  this.errorNodes = [];\n\n  this.node = null;\n  this.focusTarget = null;\n\n  this._setOptions(options);\n\n  if (options.autocomplete)\n      this.autocomplete = new autocomplete(options.autocomplete);\n\n  if (this.options.history && this.options.mode !== 'view') {\n    this.history = new NodeHistory(this);\n  }\n\n  this._createFrame();\n  this._createTable();\n};\n\n/**\n * Destroy the editor. Clean up DOM, event listeners, and web workers.\n */\ntreemode.destroy = function () {\n  if (this.frame && this.container && this.frame.parentNode == this.container) {\n    this.container.removeChild(this.frame);\n    this.frame = null;\n  }\n  this.container = null;\n\n  this.dom = null;\n\n  this.clear();\n  this.node = null;\n  this.focusTarget = null;\n  this.selection = null;\n  this.multiselection = null;\n  this.errorNodes = null;\n  this.validateSchema = null;\n  this._debouncedValidate = null;\n\n  if (this.history) {\n    this.history.destroy();\n    this.history = null;\n  }\n\n  if (this.searchBox) {\n    this.searchBox.destroy();\n    this.searchBox = null;\n  }\n\n  if (this.modeSwitcher) {\n    this.modeSwitcher.destroy();\n    this.modeSwitcher = null;\n  }\n};\n\n/**\n * Initialize and set default options\n * @param {Object}  [options]    See description in constructor\n * @private\n */\ntreemode._setOptions = function (options) {\n  this.options = {\n    search: true,\n    history: true,\n    mode: 'tree',\n    name: undefined,   // field name of root node\n    schema: null,\n    schemaRefs: null,\n    autocomplete: null,\n    navigationBar : true,\n    mainMenuBar: true,\n    onSelectionChange: null,\n    colorPicker: true,\n    onColorPicker: function (parent, color, onChange) {\n      if (VanillaPicker) {\n        new VanillaPicker({\n          parent: parent,\n          color: color,\n          popup: 'bottom',\n          onDone: function (color) {\n            var alpha = color.rgba[3];\n            var hex = (alpha === 1)\n                ? color.hex.substr(0, 7)  // return #RRGGBB\n                : color.hex;               // return #RRGGBBAA\n            onChange(hex);\n          }\n        }).show();\n      }\n      else {\n        console.warn('Cannot open color picker: the `vanilla-picker` library is not included in the bundle. ' +\n            'Either use the full bundle or implement your own color picker using `onColorPicker`.')\n      }\n    },\n    timestampTag: true,\n    onEvent: null,\n    enableSort: true,\n    enableTransform: true\n  };\n\n  // copy all options\n  if (options) {\n    for (var prop in options) {\n      if (options.hasOwnProperty(prop)) {\n        this.options[prop] = options[prop];\n      }\n    }\n  }\n\n  // compile a JSON schema validator if a JSON schema is provided\n  this.setSchema(this.options.schema, this.options.schemaRefs);\n\n  // create a debounced validate function\n  this._debouncedValidate = util.debounce(this.validate.bind(this), this.DEBOUNCE_INTERVAL);\n\n  if (options.onSelectionChange) {\n    this.onSelectionChange(options.onSelectionChange);\n  }\n\n  setLanguages(this.options.languages);\n  setLanguage(this.options.language)\n};\n\n/**\n * Set new JSON object in editor.\n * Resets the state of the editor (expanded nodes, search, selection).\n *\n * @param {*} json\n */\ntreemode.set = function (json) {\n  // verify if json is valid JSON, ignore when a function\n  if (json instanceof Function || (json === undefined)) {\n    this.clear();\n  }\n  else {\n    this.content.removeChild(this.table);  // Take the table offline\n\n    // replace the root node\n    var params = {\n      field: this.options.name,\n      value: json\n    };\n    var node = new Node(this, params);\n    this._setRoot(node);\n\n    // validate JSON schema (if configured)\n    this.validate();\n\n    // expand\n    var recurse = false;\n    this.node.expand(recurse);\n\n    this.content.appendChild(this.table);  // Put the table online again\n  }\n\n  // TODO: maintain history, store last state and previous document\n  if (this.history) {\n    this.history.clear();\n  }\n\n  // clear search\n  if (this.searchBox) {\n    this.searchBox.clear();\n  }\n};\n\n/**\n * Update JSON object in editor.\n * Maintains the state of the editor (expanded nodes, search, selection).\n *\n * @param {*} json\n */\ntreemode.update = function (json) {\n  // don't update if there are no changes\n  if (this.node.deepEqual(json)) {\n    return;\n  }\n\n  var selection = this.getSelection();\n\n  // apply the changed json\n  this.onChangeDisabled = true; // don't fire an onChange event\n  this.node.update(json);\n  this.onChangeDisabled = false;\n\n  // validate JSON schema\n  this.validate();\n\n  // update search result if any\n  if (this.searchBox && !this.searchBox.isEmpty()) {\n    this.searchBox.forceSearch();\n  }\n\n  // update selection if any\n  if (selection && selection.start && selection.end) {\n    // only keep/update the selection if both start and end node still exists,\n    // else we clear the selection\n    var startNode = this.node.findNodeByPath(selection.start.path);\n    var endNode = this.node.findNodeByPath(selection.end.path);\n    if (startNode && endNode) {\n      this.setSelection(selection.start, selection.end);\n    }\n    else {\n      this.setSelection({}, {}); // clear selection\n    }\n  }\n  else {\n    this.setSelection({}, {}); // clear selection\n  }\n};\n\n/**\n * Get JSON object from editor\n * @return {Object | undefined} json\n */\ntreemode.get = function () {\n  // TODO: resolve pending debounced input changes if any, but do not resolve invalid inputs\n\n  if (this.node) {\n    return this.node.getValue();\n  }\n  else {\n    return undefined;\n  }\n};\n\n/**\n * Get the text contents of the editor\n * @return {String} jsonText\n */\ntreemode.getText = function() {\n  return JSON.stringify(this.get());\n};\n\n/**\n * Set the text contents of the editor.\n * Resets the state of the editor (expanded nodes, search, selection).\n * @param {String} jsonText\n */\ntreemode.setText = function(jsonText) {\n  try {\n    this.set(util.parse(jsonText)); // this can throw an error\n  }\n  catch (err) {\n    // try to repair json, replace JavaScript notation with JSON notation\n    var repairedJsonText = util.repair(jsonText);\n\n    // try to parse again\n    this.set(util.parse(repairedJsonText)); // this can throw an error\n  }\n};\n\n/**\n * Update the text contents of the editor.\n * Maintains the state of the editor (expanded nodes, search, selection).\n * @param {String} jsonText\n */\ntreemode.updateText = function(jsonText) {\n  try {\n    this.update(util.parse(jsonText)); // this can throw an error\n  }\n  catch (err) {\n    // try to repair json, replace JavaScript notation with JSON notation\n    var repairJsonText = util.repair(jsonText);\n\n    // try to parse again\n    this.update(util.parse(repairJsonText)); // this can throw an error\n  }\n};\n\n/**\n * Set a field name for the root node.\n * @param {String | undefined} name\n */\ntreemode.setName = function (name) {\n  this.options.name = name;\n  if (this.node) {\n    this.node.updateField(this.options.name);\n  }\n};\n\n/**\n * Get the field name for the root node.\n * @return {String | undefined} name\n */\ntreemode.getName = function () {\n  return this.options.name;\n};\n\n/**\n * Set focus to the editor. Focus will be set to:\n * - the first editable field or value, or else\n * - to the expand button of the root node, or else\n * - to the context menu button of the root node, or else\n * - to the first button in the top menu\n */\ntreemode.focus = function () {\n  var input = this.scrollableContent.querySelector('[contenteditable=true]');\n  if (input) {\n    input.focus();\n  }\n  else if (this.node.dom.expand) {\n    this.node.dom.expand.focus();\n  }\n  else if (this.node.dom.menu) {\n    this.node.dom.menu.focus();\n  }\n  else {\n    // focus to the first button in the menu\n    input = this.frame.querySelector('button');\n    if (input) {\n      input.focus();\n    }\n  }\n};\n\n/**\n * Remove the root node from the editor\n */\ntreemode.clear = function () {\n  if (this.node) {\n    this.node.hide();\n    delete this.node;\n  }\n\n  if (this.treePath) {\n    this.treePath.reset();\n  }\n};\n\n/**\n * Set the root node for the json editor\n * @param {Node} node\n * @private\n */\ntreemode._setRoot = function (node) {\n  this.clear();\n\n  this.node = node;\n  node.setParent(null);\n  node.setField(undefined, false);\n  delete node.index;\n\n  // append to the dom\n  this.tbody.appendChild(node.getDom());\n};\n\n/**\n * Search text in all nodes\n * The nodes will be expanded when the text is found one of its childs,\n * else it will be collapsed. Searches are case insensitive.\n * @param {String} text\n * @return {Object[]} results  Array with nodes containing the search results\n *                             The result objects contains fields:\n *                             - {Node} node,\n *                             - {String} elem  the dom element name where\n *                                              the result is found ('field' or\n *                                              'value')\n */\ntreemode.search = function (text) {\n  var results;\n  if (this.node) {\n    this.content.removeChild(this.table);  // Take the table offline\n    results = this.node.search(text);\n    this.content.appendChild(this.table);  // Put the table online again\n  }\n  else {\n    results = [];\n  }\n\n  return results;\n};\n\n/**\n * Expand all nodes\n */\ntreemode.expandAll = function () {\n  if (this.node) {\n    this.content.removeChild(this.table);  // Take the table offline\n    this.node.expand();\n    this.content.appendChild(this.table);  // Put the table online again\n  }\n};\n\n/**\n * Collapse all nodes\n */\ntreemode.collapseAll = function () {\n  if (this.node) {\n    this.content.removeChild(this.table);  // Take the table offline\n    this.node.collapse();\n    this.content.appendChild(this.table);  // Put the table online again\n  }\n};\n\n/**\n * The method onChange is called whenever a field or value is changed, created,\n * deleted, duplicated, etc.\n * @param {String} action  Change action. Available values: \"editField\",\n *                         \"editValue\", \"changeType\", \"appendNode\",\n *                         \"removeNode\", \"duplicateNode\", \"moveNode\", \"expand\",\n *                         \"collapse\".\n * @param {Object} params  Object containing parameters describing the change.\n *                         The parameters in params depend on the action (for\n *                         example for \"editValue\" the Node, old value, and new\n *                         value are provided). params contains all information\n *                         needed to undo or redo the action.\n * @private\n */\ntreemode._onAction = function (action, params) {\n  // add an action to the history\n  if (this.history) {\n    this.history.add(action, params);\n  }\n\n  this._onChange();\n};\n\n/**\n * Handle a change:\n * - Validate JSON schema\n * - Send a callback to the onChange listener if provided\n * @private\n */\ntreemode._onChange = function () {\n  if (this.onChangeDisabled) {\n    return;\n  }\n\n  // selection can be changed after undo/redo\n  this.selection = this.getDomSelection();\n\n  // validate JSON schema (if configured)\n  this._debouncedValidate();\n\n  if (this.treePath) {\n    var selectedNode = this.selection\n        ?  this.node.findNodeByInternalPath(this.selection.path)\n        : this.multiselection\n            ? this.multiselection.nodes[0]\n            : undefined;\n\n    if (selectedNode) {\n      this._updateTreePath(selectedNode.getNodePath())\n    }\n    else {\n      this.treePath.reset()\n    }\n  }\n\n  // trigger the onChange callback\n  if (this.options.onChange) {\n    try {\n      this.options.onChange();\n    }\n    catch (err) {\n      console.error('Error in onChange callback: ', err);\n    }\n  }\n\n  // trigger the onChangeJSON callback\n  if (this.options.onChangeJSON) {\n    try {\n      this.options.onChangeJSON(this.get());\n    }\n    catch (err) {\n      console.error('Error in onChangeJSON callback: ', err);\n    }\n  }\n\n  // trigger the onChangeText callback\n  if (this.options.onChangeText) {\n    try {\n      this.options.onChangeText(this.getText());\n    }\n    catch (err) {\n      console.error('Error in onChangeText callback: ', err);\n    }\n  }\n\n  // trigger the onClassName callback\n  if(this.options.onClassName) {\n    this.node.recursivelyUpdateCssClassesOnNodes();\n  }\n\n  // trigger the onNodeName callback\n  if (this.options.onNodeName && this.node.childs) {\n    try {\n      this.node.recursivelyUpdateNodeName();\n    } catch (err) {\n      console.error(\"Error in onNodeName callback: \", err);\n    }  \n  }\n};\n\n/**\n * Validate current JSON object against the configured JSON schema\n * Throws an exception when no JSON schema is configured\n */\ntreemode.validate = function () {\n  var root = this.node;\n  if (!root) { // TODO: this should be redundant but is needed on mode switch\n    return;\n  }\n\n  var json = root.getValue();\n\n  // execute JSON schema validation\n  var schemaErrors = [];\n  if (this.validateSchema) {\n    var valid = this.validateSchema(json);\n    if (!valid) {\n      // apply all new errors\n      schemaErrors = this.validateSchema.errors\n          .map(function (error) {\n            return util.improveSchemaError(error);\n          })\n          .map(function findNode (error) {\n            return {\n              node: root.findNode(error.dataPath),\n              error: error\n            }\n          })\n          .filter(function hasNode (entry) {\n            return entry.node != null\n          });\n    }\n  }\n\n  // execute custom validation and after than merge and render all errors\n  try {\n    this.validationSequence++;\n    var me = this;\n    var seq = this.validationSequence;\n    this._validateCustom(json)\n        .then(function (customValidationErrors) {\n          // only apply when there was no other validation started whilst resolving async results\n          if (seq === me.validationSequence) {\n            var errorNodes = [].concat(schemaErrors, customValidationErrors || []);\n            me._renderValidationErrors(errorNodes);\n          }\n        })\n        .catch(function (err) {\n          console.error(err);\n        });\n  }\n  catch (err) {\n    console.error(err);\n  }\n};\n\ntreemode._renderValidationErrors = function (errorNodes) {\n  // clear all current errors\n  if (this.errorNodes) {\n    this.errorNodes.forEach(function (node) {\n      node.setError(null);\n    });\n  }\n\n  // render the new errors\n  var parentPairs = errorNodes\n      .reduce(function (all, entry) {\n        return entry.node\n            .findParents()\n            .filter(function (parent) {\n              return !all.some(function (pair) {\n                return pair[0] === parent;\n              });\n            })\n            .map(function (parent) {\n              return [parent, entry.node];\n            })\n            .concat(all);\n      }, []);\n\n  this.errorNodes = parentPairs\n      .map(function (pair) {\n        return {\n          node: pair[0],\n          child: pair[1],\n          error: {\n            message: pair[0].type === 'object'\n                ? 'Contains invalid properties' // object\n                : 'Contains invalid items'      // array\n          }\n        };\n      })\n      .concat(errorNodes)\n      .map(function setError (entry) {\n        entry.node.setError(entry.error, entry.child);\n        return entry.node;\n      });\n};\n\n/**\n * Execute custom validation if configured.\n *\n * Returns a promise resolving with the custom errors (or nothing).\n */\ntreemode._validateCustom = function (json) {\n  try {\n    if (this.options.onValidate) {\n      var root = this.node;\n      var customValidateResults = this.options.onValidate(json);\n\n      var resultPromise = util.isPromise(customValidateResults)\n          ? customValidateResults\n          : Promise.resolve(customValidateResults);\n\n      return resultPromise.then(function (customValidationPathErrors) {\n        if (Array.isArray(customValidationPathErrors)) {\n          return customValidationPathErrors\n              .filter(function (error) {\n                var valid = util.isValidValidationError(error);\n\n                if (!valid) {\n                  console.warn('Ignoring a custom validation error with invalid structure. ' +\n                      'Expected structure: {path: [...], message: \"...\"}. ' +\n                      'Actual error:', error);\n                }\n\n                return valid;\n              })\n              .map(function (error) {\n                var node;\n                try {\n                  node = (error && error.path) ? root.findNodeByPath(error.path) : null\n                }\n                catch (err) {\n                  // stay silent here, we throw a generic warning if no node is found\n                }\n                if (!node) {\n                  console.warn('Ignoring validation error: node not found. Path:', error.path, 'Error:', error);\n                }\n\n                return {\n                  node: node,\n                  error: error\n                }\n              })\n              .filter(function (entry) {\n                return entry && entry.node && entry.error && entry.error.message\n              });\n        }\n        else {\n          return null;\n        }\n      });\n    }\n  }\n  catch (err) {\n    return Promise.reject(err);\n  }\n\n  return Promise.resolve(null);\n};\n\n/**\n * Refresh the rendered contents\n */\ntreemode.refresh = function () {\n  if (this.node) {\n    this.node.updateDom({recurse: true});\n  }\n};\n\n/**\n * Start autoscrolling when given mouse position is above the top of the\n * editor contents, or below the bottom.\n * @param {Number} mouseY  Absolute mouse position in pixels\n */\ntreemode.startAutoScroll = function (mouseY) {\n  var me = this;\n  var content = this.scrollableContent;\n  var top = util.getAbsoluteTop(content);\n  var height = content.clientHeight;\n  var bottom = top + height;\n  var margin = 24;\n  var interval = 50; // ms\n\n  if ((mouseY < top + margin) && content.scrollTop > 0) {\n    this.autoScrollStep = ((top + margin) - mouseY) / 3;\n  }\n  else if (mouseY > bottom - margin &&\n      height + content.scrollTop < content.scrollHeight) {\n    this.autoScrollStep = ((bottom - margin) - mouseY) / 3;\n  }\n  else {\n    this.autoScrollStep = undefined;\n  }\n\n  if (this.autoScrollStep) {\n    if (!this.autoScrollTimer) {\n      this.autoScrollTimer = setInterval(function () {\n        if (me.autoScrollStep) {\n          content.scrollTop -= me.autoScrollStep;\n        }\n        else {\n          me.stopAutoScroll();\n        }\n      }, interval);\n    }\n  }\n  else {\n    this.stopAutoScroll();\n  }\n};\n\n/**\n * Stop auto scrolling. Only applicable when scrolling\n */\ntreemode.stopAutoScroll = function () {\n  if (this.autoScrollTimer) {\n    clearTimeout(this.autoScrollTimer);\n    delete this.autoScrollTimer;\n  }\n  if (this.autoScrollStep) {\n    delete this.autoScrollStep;\n  }\n};\n\n\n/**\n * Set the focus to an element in the editor, set text selection, and\n * set scroll position.\n * @param {Object} selection  An object containing fields:\n *                            {Element | undefined} dom     The dom element\n *                                                          which has focus\n *                            {Range | TextRange} range     A text selection\n *                            {Node[]} nodes                Nodes in case of multi selection\n *                            {Number} scrollTop            Scroll position\n */\ntreemode.setDomSelection = function (selection) {\n  if (!selection) {\n    return;\n  }\n\n  if ('scrollTop' in selection && this.scrollableContent) {\n    // TODO: animated scroll\n    this.scrollableContent.scrollTop = selection.scrollTop;\n  }\n  if (selection.paths) {\n    // multi-select\n    var me = this;\n    var nodes = selection.paths.map(function (path) {\n      return me.node.findNodeByInternalPath(path);\n    });\n\n    this.select(nodes);\n  }\n  else {\n    // find the actual DOM element where to apply the focus\n    var node = selection.path\n        ? this.node.findNodeByInternalPath(selection.path)\n        : null;\n    var container = (node && selection.domName)\n        ? node.dom[selection.domName]\n        : null;\n    if (selection.range && container) {\n      var range = Object.assign({}, selection.range, { container: container });\n      util.setSelectionOffset(range);\n    }\n    else if (node) { // just a fallback\n      node.focus();\n    }\n  }\n};\n\n/**\n * Get the current focus\n * @return {Object} selection An object containing fields:\n *                            {Element | undefined} dom     The dom element\n *                                                          which has focus\n *                            {Range | TextRange} range     A text selection\n *                            {Node[]} nodes                Nodes in case of multi selection\n *                            {Number} scrollTop            Scroll position\n */\ntreemode.getDomSelection = function () {\n  // find the node and field name of the current target,\n  // so we can store the current selection in a serializable\n  // way (internal node path and domName)\n  var node = Node.getNodeFromTarget(this.focusTarget);\n  var focusTarget = this.focusTarget;\n  var domName = node\n      ? Object.keys(node.dom).find(function (domName) {\n        return node.dom[domName] === focusTarget;\n      })\n      : null;\n\n  var range = util.getSelectionOffset();\n  if (range && range.container.nodeName !== 'DIV') { // filter on (editable) divs)\n    range = null;\n  }\n  if (range && range.container !== focusTarget) {\n    range = null;\n  }\n  if (range) {\n    // we cannot rely on the current instance of the container,\n    // we need to store the internal node path and field and\n    // find the actual DOM field when applying the selection\n    delete range.container;\n  }\n\n  return {\n    path: node ? node.getInternalPath() : null,\n    domName: domName,\n    range: range,\n    paths: this.multiselection.length > 0\n        ? this.multiselection.nodes.map(function (node) {\n            return node.getInternalPath();\n          })\n        : null,\n    scrollTop: this.scrollableContent ? this.scrollableContent.scrollTop : 0\n  };\n};\n\n/**\n * Adjust the scroll position such that given top position is shown at 1/4\n * of the window height.\n * @param {Number} top\n * @param {function(boolean)} [callback]   Callback, executed when animation is\n *                                         finished. The callback returns true\n *                                         when animation is finished, or false\n *                                         when not.\n */\ntreemode.scrollTo = function (top, callback) {\n  var content = this.scrollableContent;\n  if (content) {\n    var editor = this;\n    // cancel any running animation\n    if (editor.animateTimeout) {\n      clearTimeout(editor.animateTimeout);\n      delete editor.animateTimeout;\n    }\n    if (editor.animateCallback) {\n      editor.animateCallback(false);\n      delete editor.animateCallback;\n    }\n\n    // calculate final scroll position\n    var height = content.clientHeight;\n    var bottom = content.scrollHeight - height;\n    var finalScrollTop = Math.min(Math.max(top - height / 4, 0), bottom);\n\n    // animate towards the new scroll position\n    var animate = function () {\n      var scrollTop = content.scrollTop;\n      var diff = (finalScrollTop - scrollTop);\n      if (Math.abs(diff) > 3) {\n        content.scrollTop += diff / 3;\n        editor.animateCallback = callback;\n        editor.animateTimeout = setTimeout(animate, 50);\n      }\n      else {\n        // finished\n        if (callback) {\n          callback(true);\n        }\n        content.scrollTop = finalScrollTop;\n        delete editor.animateTimeout;\n        delete editor.animateCallback;\n      }\n    };\n    animate();\n  }\n  else {\n    if (callback) {\n      callback(false);\n    }\n  }\n};\n\n/**\n * Create main frame\n * @private\n */\ntreemode._createFrame = function () {\n  // create the frame\n  this.frame = document.createElement('div');\n  this.frame.className = 'jsoneditor jsoneditor-mode-' + this.options.mode;\n  this.container.appendChild(this.frame);\n\n  this.contentOuter = document.createElement('div');\n  this.contentOuter.className = 'jsoneditor-outer';\n\n  // create one global event listener to handle all events from all nodes\n  var editor = this;\n  function onEvent(event) {\n    // when switching to mode \"code\" or \"text\" via the menu, some events\n    // are still fired whilst the _onEvent methods is already removed.\n    if (editor._onEvent) {\n      editor._onEvent(event);\n    }\n  }\n  this.frame.onclick = function (event) {\n    var target = event.target;// || event.srcElement;\n\n    onEvent(event);\n\n    // prevent default submit action of buttons when editor is located\n    // inside a form\n    if (target.nodeName == 'BUTTON') {\n      event.preventDefault();\n    }\n  };\n  this.frame.oninput = onEvent;\n  this.frame.onchange = onEvent;\n  this.frame.onkeydown = onEvent;\n  this.frame.onkeyup = onEvent;\n  this.frame.oncut = onEvent;\n  this.frame.onpaste = onEvent;\n  this.frame.onmousedown = onEvent;\n  this.frame.onmouseup = onEvent;\n  this.frame.onmouseover = onEvent;\n  this.frame.onmouseout = onEvent;\n  // Note: focus and blur events do not propagate, therefore they defined\n  // using an eventListener with useCapture=true\n  // see http://www.quirksmode.org/blog/archives/2008/04/delegating_the.html\n  util.addEventListener(this.frame, 'focus', onEvent, true);\n  util.addEventListener(this.frame, 'blur', onEvent, true);\n  this.frame.onfocusin = onEvent;  // for IE\n  this.frame.onfocusout = onEvent; // for IE\n\n  if (this.options.mainMenuBar) {\n    util.addClassName(this.contentOuter, 'has-main-menu-bar');\n\n    // create menu\n    this.menu = document.createElement('div');\n    this.menu.className = 'jsoneditor-menu';\n    this.frame.appendChild(this.menu);\n\n    // create expand all button\n    var expandAll = document.createElement('button');\n    expandAll.type = 'button';\n    expandAll.className = 'jsoneditor-expand-all';\n    expandAll.title = translate('expandAll');\n    expandAll.onclick = function () {\n      editor.expandAll();\n    };\n    this.menu.appendChild(expandAll);\n\n    // create collapse all button\n    var collapseAll = document.createElement('button');\n    collapseAll.type = 'button';\n    collapseAll.title = translate('collapseAll');\n    collapseAll.className = 'jsoneditor-collapse-all';\n    collapseAll.onclick = function () {\n      editor.collapseAll();\n    };\n    this.menu.appendChild(collapseAll);\n\n    // create sort button\n    if (this.options.enableSort) {\n      var sort = document.createElement('button');\n      sort.type = 'button';\n      sort.className = 'jsoneditor-sort';\n      sort.title = translate('sortTitleShort');\n      sort.onclick = function () {\n        editor.node.showSortModal()\n      };\n      this.menu.appendChild(sort);\n    }\n\n    // create transform button\n    if (this.options.enableTransform) {\n      var transform = document.createElement('button');\n      transform.type = 'button';\n      transform.title = translate('transformTitleShort');\n      transform.className = 'jsoneditor-transform';\n      transform.onclick = function () {\n        editor.node.showTransformModal();\n      };\n      this.menu.appendChild(transform);\n    }\n\n    // create undo/redo buttons\n    if (this.history) {\n      // create undo button\n      var undo = document.createElement('button');\n      undo.type = 'button';\n      undo.className = 'jsoneditor-undo jsoneditor-separator';\n      undo.title = translate('undo');\n      undo.onclick = function () {\n        editor._onUndo();\n      };\n      this.menu.appendChild(undo);\n      this.dom.undo = undo;\n\n      // create redo button\n      var redo = document.createElement('button');\n      redo.type = 'button';\n      redo.className = 'jsoneditor-redo';\n      redo.title = translate('redo');\n      redo.onclick = function () {\n        editor._onRedo();\n      };\n      this.menu.appendChild(redo);\n      this.dom.redo = redo;\n\n      // register handler for onchange of history\n      this.history.onChange = function () {\n        undo.disabled = !editor.history.canUndo();\n        redo.disabled = !editor.history.canRedo();\n      };\n      this.history.onChange();\n    }\n\n    // create mode box\n    if (this.options && this.options.modes && this.options.modes.length) {\n      var me = this;\n      this.modeSwitcher = new ModeSwitcher(this.menu, this.options.modes, this.options.mode, function onSwitch(mode) {\n        // switch mode and restore focus\n        me.setMode(mode);\n        me.modeSwitcher.focus();\n      });\n    }\n\n    // create search box\n    if (this.options.search) {\n      this.searchBox = new SearchBox(this, this.menu);\n    }\n  }\n\n  if (this.options.navigationBar) {\n    // create second menu row for treepath\n    this.navBar = document.createElement('div');\n    this.navBar.className = 'jsoneditor-navigation-bar nav-bar-empty';\n    this.frame.appendChild(this.navBar);\n\n    this.treePath = new TreePath(this.navBar, this.frame);\n    this.treePath.onSectionSelected(this._onTreePathSectionSelected.bind(this));\n    this.treePath.onContextMenuItemSelected(this._onTreePathMenuItemSelected.bind(this));\n  }\n};\n\n/**\n * Perform an undo action\n * @private\n */\ntreemode._onUndo = function () {\n  if (this.history) {\n    // undo last action\n    this.history.undo();\n\n    // fire change event\n    this._onChange();\n  }\n};\n\n/**\n * Perform a redo action\n * @private\n */\ntreemode._onRedo = function () {\n  if (this.history) {\n    // redo last action\n    this.history.redo();\n\n    // fire change event\n    this._onChange();\n  }\n};\n\n/**\n * Event handler\n * @param event\n * @private\n */\ntreemode._onEvent = function (event) {\n  // don't process events when coming from the color picker\n  if (Node.targetIsColorPicker(event.target)) {\n    return;\n  }\n\n  var node = Node.getNodeFromTarget(event.target);\n\n  if (event.type === 'keydown') {\n    this._onKeyDown(event);\n  }\n\n  if (event.type === 'focus') {\n    this.focusTarget = event.target;\n    if (this.options.autocomplete && this.options.autocomplete.trigger === 'focus') {\n      this._showAutoComplete(event.target);\n    }\n  }\n\n  if (event.type === 'mousedown') {\n    this._startDragDistance(event);\n  }\n  if (event.type === 'mousemove' || event.type === 'mouseup' || event.type === 'click') {\n    this._updateDragDistance(event);\n  }\n\n\n  if (node && this.options && this.options.navigationBar && node && (event.type === 'keydown' || event.type === 'mousedown')) {\n    // apply on next tick, right after the new key press is applied\n    var me = this;\n    setTimeout(function () {\n      me._updateTreePath(node.getNodePath());\n    })\n  }\n\n  if (node && node.selected) {\n    if (event.type === 'click') {\n      if (event.target === node.dom.menu) {\n        this.showContextMenu(event.target);\n\n        // stop propagation (else we will open the context menu of a single node)\n        return;\n      }\n\n      // deselect a multi selection\n      if (!event.hasMoved) {\n        this.deselect();\n      }\n    }\n\n    if (event.type === 'mousedown') {\n      // drag multiple nodes\n      Node.onDragStart(this.multiselection.nodes, event);\n    }\n  }\n  else {\n    // filter mouse events in the contents part of the editor (not the main menu)\n    if (event.type === 'mousedown' && util.hasParentNode(event.target, this.content)) {\n      this.deselect();\n\n      if (node && event.target === node.dom.drag) {\n        // drag a singe node\n        Node.onDragStart(node, event);\n      }\n      else if (!node || (event.target !== node.dom.field && event.target !== node.dom.value && event.target !== node.dom.select)) {\n        // select multiple nodes\n        this._onMultiSelectStart(event);\n      }\n    }\n  }\n\n  if (node) {\n    node.onEvent(event);\n  }\n};\n\n/**\n * Update TreePath components\n * @param {Array<Node>} pathNodes list of nodes in path from root to selection\n * @private\n */\ntreemode._updateTreePath = function (pathNodes) {\n  if (pathNodes && pathNodes.length) {\n    util.removeClassName(this.navBar, 'nav-bar-empty');\n\n    var pathObjs = [];\n    pathNodes.forEach(function (node) {\n      var pathObj = {\n        name: getName(node),\n        node: node,\n        children: []\n      };\n      if (node.childs && node.childs.length) {\n        node.childs.forEach(function (childNode) {\n          pathObj.children.push({\n            name: getName(childNode),\n            node: childNode\n          });\n        });\n      }\n      pathObjs.push(pathObj);\n    });\n    this.treePath.setPath(pathObjs);\n  } else {\n    util.addClassName(this.navBar, 'nav-bar-empty');\n  }\n\n  function getName(node) {\n    return node.parent\n        ? ((node.parent.type === 'array') ? node.index : node.field)\n        : node.type;\n  }\n};\n\n/**\n * Callback for tree path section selection - focus the selected node in the tree\n * @param {Object} pathObj path object that was represents the selected section node\n * @private\n */\ntreemode._onTreePathSectionSelected = function (pathObj) {\n  if(pathObj && pathObj.node) {\n    pathObj.node.expandTo();\n    pathObj.node.focus();\n  }\n};\n\n/**\n * Callback for tree path menu item selection - rebuild the path accrding to the new selection and focus the selected node in the tree\n * @param {Object} pathObj path object that was represents the parent section node\n * @param {String} selection selected section child\n * @private\n */\ntreemode._onTreePathMenuItemSelected = function (pathObj, selection) {\n  if(pathObj && pathObj.children.length) {\n    var selectionObj = pathObj.children.find(function (obj) {\n      return obj.name === selection;\n    });\n    if(selectionObj && selectionObj.node) {\n      this._updateTreePath(selectionObj.node.getNodePath());\n      selectionObj.node.expandTo();\n      selectionObj.node.focus();\n    }\n  }\n};\n\ntreemode._startDragDistance = function (event) {\n  this.dragDistanceEvent = {\n    initialTarget: event.target,\n    initialPageX: event.pageX,\n    initialPageY: event.pageY,\n    dragDistance: 0,\n    hasMoved: false\n  };\n};\n\ntreemode._updateDragDistance = function (event) {\n  if (!this.dragDistanceEvent) {\n    this._startDragDistance(event);\n  }\n\n  var diffX = event.pageX - this.dragDistanceEvent.initialPageX;\n  var diffY = event.pageY - this.dragDistanceEvent.initialPageY;\n\n  this.dragDistanceEvent.dragDistance = Math.sqrt(diffX * diffX + diffY * diffY);\n  this.dragDistanceEvent.hasMoved =\n      this.dragDistanceEvent.hasMoved || this.dragDistanceEvent.dragDistance > 10;\n\n  event.dragDistance = this.dragDistanceEvent.dragDistance;\n  event.hasMoved = this.dragDistanceEvent.hasMoved;\n\n  return event.dragDistance;\n};\n\n/**\n * Start multi selection of nodes by dragging the mouse\n * @param event\n * @private\n */\ntreemode._onMultiSelectStart = function (event) {\n  var node = Node.getNodeFromTarget(event.target);\n\n  if (this.options.mode !== 'tree' || this.options.onEditable !== undefined) {\n    // dragging not allowed in modes 'view' and 'form'\n    // TODO: allow multiselection of items when option onEditable is specified\n    return;\n  }\n\n  this.multiselection = {\n    start: node || null,\n    end: null,\n    nodes: []\n  };\n\n  this._startDragDistance(event);\n\n  var editor = this;\n  if (!this.mousemove) {\n    this.mousemove = util.addEventListener(window, 'mousemove', function (event) {\n      editor._onMultiSelect(event);\n    });\n  }\n  if (!this.mouseup) {\n    this.mouseup = util.addEventListener(window, 'mouseup', function (event ) {\n      editor._onMultiSelectEnd(event);\n    });\n  }\n\n  event.preventDefault();\n};\n\n/**\n * Multiselect nodes by dragging\n * @param event\n * @private\n */\ntreemode._onMultiSelect = function (event) {\n  event.preventDefault();\n\n  this._updateDragDistance(event);\n  if (!event.hasMoved) {\n    return;\n  }\n\n  var node = Node.getNodeFromTarget(event.target);\n\n  if (node) {\n    if (this.multiselection.start == null) {\n      this.multiselection.start = node;\n    }\n    this.multiselection.end = node;\n  }\n\n  // deselect previous selection\n  this.deselect();\n\n  // find the selected nodes in the range from first to last\n  var start = this.multiselection.start;\n  var end = this.multiselection.end || this.multiselection.start;\n  if (start && end) {\n    // find the top level childs, all having the same parent\n    this.multiselection.nodes = this._findTopLevelNodes(start, end);\n    if (this.multiselection.nodes && this.multiselection.nodes.length) {\n      var firstNode = this.multiselection.nodes[0];\n      if (this.multiselection.start === firstNode || this.multiselection.start.isDescendantOf(firstNode)) {\n        this.multiselection.direction = 'down';\n      } else {\n        this.multiselection.direction = 'up';\n      }\n    }\n    this.select(this.multiselection.nodes);\n  }\n};\n\n/**\n * End of multiselect nodes by dragging\n * @private\n */\ntreemode._onMultiSelectEnd = function () {\n  // set focus to the context menu button of the first node\n  if (this.multiselection.nodes[0]) {\n    this.multiselection.nodes[0].dom.menu.focus();\n  }\n\n  this.multiselection.start = null;\n  this.multiselection.end = null;\n\n  // cleanup global event listeners\n  if (this.mousemove) {\n    util.removeEventListener(window, 'mousemove', this.mousemove);\n    delete this.mousemove;\n  }\n  if (this.mouseup) {\n    util.removeEventListener(window, 'mouseup', this.mouseup);\n    delete this.mouseup;\n  }\n};\n\n/**\n * deselect currently selected nodes\n * @param {boolean} [clearStartAndEnd=false]  If true, the `start` and `end`\n *                                            state is cleared too.\n */\ntreemode.deselect = function (clearStartAndEnd) {\n  var selectionChanged = !!this.multiselection.nodes.length;\n  this.multiselection.nodes.forEach(function (node) {\n    node.setSelected(false);\n  });\n  this.multiselection.nodes = [];\n\n  if (clearStartAndEnd) {\n    this.multiselection.start = null;\n    this.multiselection.end = null;\n  }\n\n  if (selectionChanged) {\n    if (this._selectionChangedHandler) {\n      this._selectionChangedHandler();\n    }\n  }\n};\n\n/**\n * select nodes\n * @param {Node[] | Node} nodes\n */\ntreemode.select = function (nodes) {\n  if (!Array.isArray(nodes)) {\n    return this.select([nodes]);\n  }\n\n  if (nodes) {\n    this.deselect();\n\n    this.multiselection.nodes = nodes.slice(0);\n\n    var first = nodes[0];\n    nodes.forEach(function (node) {\n      node.expandPathToNode();\n      node.setSelected(true, node === first);\n    });\n\n    if (this._selectionChangedHandler) {\n      var selection = this.getSelection();\n      this._selectionChangedHandler(selection.start, selection.end);\n    }\n  }\n};\n\n/**\n * From two arbitrary selected nodes, find their shared parent node.\n * From that parent node, select the two child nodes in the brances going to\n * nodes `start` and `end`, and select all childs in between.\n * @param {Node} start\n * @param {Node} end\n * @return {Array.<Node>} Returns an ordered list with child nodes\n * @private\n */\ntreemode._findTopLevelNodes = function (start, end) {\n  var startPath = start.getNodePath();\n  var endPath = end.getNodePath();\n  var i = 0;\n  while (i < startPath.length && startPath[i] === endPath[i]) {\n    i++;\n  }\n  var root = startPath[i - 1];\n  var startChild = startPath[i];\n  var endChild = endPath[i];\n\n  if (!startChild || !endChild) {\n    if (root.parent) {\n      // startChild is a parent of endChild or vice versa\n      startChild = root;\n      endChild = root;\n      root = root.parent\n    }\n    else {\n      // we have selected the root node (which doesn't have a parent)\n      startChild = root.childs[0];\n      endChild = root.childs[root.childs.length - 1];\n    }\n  }\n\n  if (root && startChild && endChild) {\n    var startIndex = root.childs.indexOf(startChild);\n    var endIndex = root.childs.indexOf(endChild);\n    var firstIndex = Math.min(startIndex, endIndex);\n    var lastIndex = Math.max(startIndex, endIndex);\n\n    return root.childs.slice(firstIndex, lastIndex + 1);\n  }\n  else {\n    return [];\n  }\n};\n\n/**\n * Show autocomplete menu\n * @param {Node} node\n * @param {HTMLElement} element\n * @private\n */\ntreemode._showAutoComplete = function (element) {\n  var node = Node.getNodeFromTarget(element);\n\n  var jsonElementType = \"\";\n    if (event.target.className.indexOf(\"jsoneditor-value\") >= 0) jsonElementType = \"value\";\n    if (event.target.className.indexOf(\"jsoneditor-field\") >= 0) jsonElementType = \"field\";\n\n  var self = this;\n\n  setTimeout(function () {\n      if (self.options.autocomplete.trigger === 'focus' || element.innerText.length > 0) {\n          var result = self.options.autocomplete.getOptions(element.innerText, node.getPath(), jsonElementType, node.editor);\n          if (result === null) {\n              self.autocomplete.hideDropDown();\n          } else if (typeof result.then === 'function') {\n              // probably a promise\n              if (result.then(function (obj) {\n                  if (obj === null) {\n                      self.autocomplete.hideDropDown();\n                  } else if (obj.options) {\n                      self.autocomplete.show(element, obj.startFrom, obj.options);\n                  } else {\n                      self.autocomplete.show(element, 0, obj);\n                  }\n              }.bind(self)));\n          } else {\n              // definitely not a promise\n              if (result.options)\n                  self.autocomplete.show(element, result.startFrom, result.options);\n              else\n                  self.autocomplete.show(element, 0, result);\n          }\n      }\n      else\n          self.autocomplete.hideDropDown();\n\n  }, 50);\n}\n\n/**\n * Event handler for keydown. Handles shortcut keys\n * @param {Event} event\n * @private\n */\ntreemode._onKeyDown = function (event) {\n  var keynum = event.which || event.keyCode;\n  var altKey = event.altKey;\n  var ctrlKey = event.ctrlKey;\n  var metaKey = event.metaKey;\n  var shiftKey = event.shiftKey;\n  var handled = false;\n\n  if (keynum == 9) { // Tab or Shift+Tab\n    var me = this;\n    setTimeout(function () {\n      // select all text when moving focus to an editable div\n      util.selectContentEditable(me.focusTarget);\n    }, 0);\n  }\n\n  if (this.searchBox) {\n    if (ctrlKey && keynum == 70) { // Ctrl+F\n      this.searchBox.dom.search.focus();\n      this.searchBox.dom.search.select();\n      handled = true;\n    }\n    else if (keynum == 114 || (ctrlKey && keynum == 71)) { // F3 or Ctrl+G\n      var focus = true;\n      if (!shiftKey) {\n        // select next search result (F3 or Ctrl+G)\n        this.searchBox.next(focus);\n      }\n      else {\n        // select previous search result (Shift+F3 or Ctrl+Shift+G)\n        this.searchBox.previous(focus);\n      }\n\n      handled = true;\n    }\n  }\n\n  if (this.history) {\n    if (ctrlKey && !shiftKey && keynum == 90) { // Ctrl+Z\n      // undo\n      this._onUndo();\n      handled = true;\n    }\n    else if (ctrlKey && shiftKey && keynum == 90) { // Ctrl+Shift+Z\n      // redo\n      this._onRedo();\n      handled = true;\n    }\n  }\n\n  if ((this.options.autocomplete) && (!handled)) {\n      if (!ctrlKey && !altKey && !metaKey && (event.key.length == 1 || keynum == 8 || keynum == 46)) {\n        handled = false;\n        var node = Node.getNodeFromTarget(event.target);\n\n        // Activate autocomplete\n        this._showAutoComplete(event.target);\n      }\n  }\n\n  if (handled) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n};\n\n/**\n * Create main table\n * @private\n */\ntreemode._createTable = function () {\n  if (this.options.navigationBar) {\n    util.addClassName(this.contentOuter, 'has-nav-bar');\n  }\n\n  this.scrollableContent = document.createElement('div');\n  this.scrollableContent.className = 'jsoneditor-tree';\n  this.contentOuter.appendChild(this.scrollableContent);\n\n  // the jsoneditor-tree-inner div with bottom padding is here to\n  // keep space for the action menu dropdown. It's created as a\n  // separate div instead of using scrollableContent to work around\n  // and issue in the Chrome browser showing scrollable contents outside of the div\n  // see https://github.com/josdejong/jsoneditor/issues/557\n  this.content = document.createElement('div');\n  this.content.className = 'jsoneditor-tree-inner';\n  this.scrollableContent.appendChild(this.content);\n\n  this.table = document.createElement('table');\n  this.table.className = 'jsoneditor-tree';\n  this.content.appendChild(this.table);\n\n  // create colgroup where the first two columns don't have a fixed\n  // width, and the edit columns do have a fixed width\n  var col;\n  this.colgroupContent = document.createElement('colgroup');\n  if (this.options.mode === 'tree') {\n    col = document.createElement('col');\n    col.width = \"24px\";\n    this.colgroupContent.appendChild(col);\n  }\n  col = document.createElement('col');\n  col.width = \"24px\";\n  this.colgroupContent.appendChild(col);\n  col = document.createElement('col');\n  this.colgroupContent.appendChild(col);\n  this.table.appendChild(this.colgroupContent);\n\n  this.tbody = document.createElement('tbody');\n  this.table.appendChild(this.tbody);\n\n  this.frame.appendChild(this.contentOuter);\n};\n\n/**\n * Show a contextmenu for this node.\n * Used for multiselection\n * @param {HTMLElement} anchor   Anchor element to attach the context menu to.\n * @param {function} [onClose]   Callback method called when the context menu\n *                               is being closed.\n */\ntreemode.showContextMenu = function (anchor, onClose) {\n  var items = [];\n  var selectedNodes = this.multiselection.nodes.slice();\n\n  // create duplicate button\n  items.push({\n    text: translate('duplicateText'),\n    title: translate('duplicateTitle'),\n    className: 'jsoneditor-duplicate',\n    click: function () {\n      Node.onDuplicate(selectedNodes );\n    }\n  });\n\n  // create remove button\n  items.push({\n    text: translate('remove'),\n    title: translate('removeTitle'),\n    className: 'jsoneditor-remove',\n    click: function () {\n      Node.onRemove(selectedNodes);\n    }\n  });\n  \n  if (this.options.onCreateMenu) {\n    var paths = selectedNodes.map(function (node) {\n      return node.getPath();\n    });\n\n\t\titems = this.options.onCreateMenu(items, {\n\t\t  type: 'multiple',\n\t\t  path: paths[0],\n      paths: paths\n\t\t});\n\t}\n\n  var menu = new ContextMenu(items, {close: onClose});\n  menu.show(anchor, this.frame);\n};\n\n/**\n * Get current selected nodes\n * @return {{start:SerializableNode, end: SerializableNode}}\n */\ntreemode.getSelection = function () {\n  var selection = {\n    start: null,\n    end: null\n  };\n  if (this.multiselection.nodes && this.multiselection.nodes.length) {\n    if (this.multiselection.nodes.length) {\n      var selection1 = this.multiselection.nodes[0];\n      var selection2 = this.multiselection.nodes[this.multiselection.nodes.length - 1];\n      if (this.multiselection.direction === 'down') {\n        selection.start = selection1.serialize();\n        selection.end = selection2.serialize();\n      } else {\n        selection.start = selection2.serialize();\n        selection.end = selection1.serialize();\n      }\n    }\n  }\n  return selection;\n};\n\n/**\n * Callback registration for selection change\n * @param {selectionCallback} callback\n *\n * @callback selectionCallback\n */\ntreemode.onSelectionChange = function (callback) {\n  if (typeof callback === 'function') {\n    this._selectionChangedHandler = util.debounce(callback, this.DEBOUNCE_INTERVAL);\n  }\n};\n\n/**\n * Select range of nodes.\n * For selecting single node send only the start parameter\n * For clear the selection do not send any parameter\n * If the nodes are not from the same level the first common parent will be selected\n * @param {{path: Array.<String>}} start object contains the path for selection start\n * @param {{path: Array.<String>}} end object contains the path for selection end\n */\ntreemode.setSelection = function (start, end) {\n  // check for old usage\n  if (start && start.dom && start.range) {\n    console.warn('setSelection/getSelection usage for text selection is deprecated and should not be used, see documentation for supported selection options');\n    this.setDomSelection(start);\n  }\n\n  var nodes = this._getNodeInstancesByRange(start, end);\n\n  nodes.forEach(function(node) {\n    node.expandTo();\n  });\n  this.select(nodes);\n};\n\n/**\n * Returns a set of Nodes according to a range of selection\n * @param {{path: Array.<String>}} start object contains the path for range start\n * @param {{path: Array.<String>}=} end object contains the path for range end\n * @return {Array.<Node>} Node instances on the given range\n * @private\n */\ntreemode._getNodeInstancesByRange = function (start, end) {\n  var startNode, endNode;\n\n  if (start && start.path) {\n    startNode = this.node.findNodeByPath(start.path);\n    if (end && end.path) {\n      endNode = this.node.findNodeByPath(end.path);\n    }\n  }\n\n  var nodes = [];\n  if (startNode instanceof Node) {\n    if (endNode instanceof Node && endNode !== startNode) {\n      if (startNode.parent === endNode.parent) {\n        var start, end;\n        if (startNode.getIndex() < endNode.getIndex()) {\n          start = startNode;\n          end = endNode;\n        } else {\n          start = endNode;\n          end = startNode;\n        }\n        var current = start;\n        nodes.push(current);\n        do {\n          current = current.nextSibling();\n          nodes.push(current);\n        } while (current && current !== end);\n      } else {\n        nodes = this._findTopLevelNodes(startNode, endNode);\n      }\n    } else {\n      nodes.push(startNode);\n    }\n  }\n\n  return nodes;\n\n};\n\ntreemode.getNodesByRange = function (start, end) {\n  var nodes = this._getNodeInstancesByRange(start, end);\n  var serializableNodes = [];\n\n  nodes.forEach(function (node){\n    serializableNodes.push(node.serialize());\n  });\n\n  return serializableNodes;\n};\n\n// define modes\nmodule.exports = [\n  {\n    mode: 'tree',\n    mixin: treemode,\n    data: 'json'\n  },\n  {\n    mode: 'view',\n    mixin: treemode,\n    data: 'json'\n  },\n  {\n    mode: 'form',\n    mixin: treemode,\n    data: 'json'\n  }\n];\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * The highlighter can highlight/unhighlight a node, and\n * animate the visibility of a context menu.\n * @constructor Highlighter\n */\nfunction Highlighter () {\n  this.locked = false;\n}\n\n/**\n * Hightlight given node and its childs\n * @param {Node} node\n */\nHighlighter.prototype.highlight = function (node) {\n  if (this.locked) {\n    return;\n  }\n\n  if (this.node != node) {\n    // unhighlight current node\n    if (this.node) {\n      this.node.setHighlight(false);\n    }\n\n    // highlight new node\n    this.node = node;\n    this.node.setHighlight(true);\n  }\n\n  // cancel any current timeout\n  this._cancelUnhighlight();\n};\n\n/**\n * Unhighlight currently highlighted node.\n * Will be done after a delay\n */\nHighlighter.prototype.unhighlight = function () {\n  if (this.locked) {\n    return;\n  }\n\n  var me = this;\n  if (this.node) {\n    this._cancelUnhighlight();\n\n    // do the unhighlighting after a small delay, to prevent re-highlighting\n    // the same node when moving from the drag-icon to the contextmenu-icon\n    // or vice versa.\n    this.unhighlightTimer = setTimeout(function () {\n      me.node.setHighlight(false);\n      me.node = undefined;\n      me.unhighlightTimer = undefined;\n    }, 0);\n  }\n};\n\n/**\n * Cancel an unhighlight action (if before the timeout of the unhighlight action)\n * @private\n */\nHighlighter.prototype._cancelUnhighlight = function () {\n  if (this.unhighlightTimer) {\n    clearTimeout(this.unhighlightTimer);\n    this.unhighlightTimer = undefined;\n  }\n};\n\n/**\n * Lock highlighting or unhighlighting nodes.\n * methods highlight and unhighlight do not work while locked.\n */\nHighlighter.prototype.lock = function () {\n  this.locked = true;\n};\n\n/**\n * Unlock highlighting or unhighlighting nodes\n */\nHighlighter.prototype.unlock = function () {\n  this.locked = false;\n};\n\nmodule.exports = Highlighter;\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar util = __webpack_require__(0);\n\n/**\n * @constructor History\n * Store action history, enables undo and redo\n * @param {JSONEditor} editor\n */\nfunction NodeHistory (editor) {\n  this.editor = editor;\n  this.history = [];\n  this.index = -1;\n\n  this.clear();\n\n  // helper function to find a Node from a path\n  function findNode(path) {\n    return editor.node.findNodeByInternalPath(path)\n  }\n\n  // map with all supported actions\n  this.actions = {\n    'editField': {\n      'undo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        var node = parentNode.childs[params.index];\n        node.updateField(params.oldValue);\n      },\n      'redo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        var node = parentNode.childs[params.index];\n        node.updateField(params.newValue);\n      }\n    },\n    'editValue': {\n      'undo': function (params) {\n        findNode(params.path).updateValue(params.oldValue);\n      },\n      'redo': function (params) {\n        findNode(params.path).updateValue(params.newValue);\n      }\n    },\n    'changeType': {\n      'undo': function (params) {\n        findNode(params.path).changeType(params.oldType);\n      },\n      'redo': function (params) {\n        findNode(params.path).changeType(params.newType);\n      }\n    },\n\n    'appendNodes': {\n      'undo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        params.paths.map(findNode).forEach(function (node) {\n          parentNode.removeChild(node);\n        });\n       },\n      'redo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        params.nodes.forEach(function (node) {\n          parentNode.appendChild(node);\n        });\n      }\n    },\n    'insertBeforeNodes': {\n      'undo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        params.paths.map(findNode).forEach(function (node) {\n          parentNode.removeChild(node);\n        });\n      },\n      'redo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        var beforeNode = findNode(params.beforePath);\n        params.nodes.forEach(function (node) {\n          parentNode.insertBefore(node, beforeNode);\n        });\n      }\n    },\n    'insertAfterNodes': {\n      'undo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        params.paths.map(findNode).forEach(function (node) {\n          parentNode.removeChild(node);\n        });\n      },\n      'redo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        var afterNode = findNode(params.afterPath);\n        params.nodes.forEach(function (node) {\n          parentNode.insertAfter(node, afterNode);\n          afterNode = node;\n        });\n      }\n    },\n    'removeNodes': {\n      'undo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        var beforeNode = parentNode.childs[params.index] || parentNode.append;\n        params.nodes.forEach(function (node) {\n          parentNode.insertBefore(node, beforeNode);\n        });\n      },\n      'redo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        params.paths.map(findNode).forEach(function (node) {\n          parentNode.removeChild(node);\n        });\n      }\n    },\n    'duplicateNodes': {\n      'undo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        params.clonePaths.map(findNode).forEach(function (node) {\n          parentNode.removeChild(node);\n        });\n      },\n      'redo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        var afterNode = findNode(params.afterPath);\n        var nodes = params.paths.map(findNode);\n        nodes.forEach(function (node) {\n          var clone = node.clone();\n          if (parentNode.type === 'object') {\n            var existingFieldNames = parentNode.getFieldNames();\n            clone.field = util.findUniqueName(node.field, existingFieldNames);\n          }\n          parentNode.insertAfter(clone, afterNode);\n          afterNode = clone;\n        });\n      }\n    },\n    'moveNodes': {\n      'undo': function (params) {\n        var oldParentNode = findNode(params.oldParentPath);\n        var newParentNode = findNode(params.newParentPath);\n        var oldBeforeNode = oldParentNode.childs[params.oldIndex] || oldParentNode.append;\n\n        // first copy the nodes, then move them\n        var nodes = newParentNode.childs.slice(params.newIndex, params.newIndex + params.count);\n\n        nodes.forEach(function (node, index) {\n          node.field = params.fieldNames[index];\n          oldParentNode.moveBefore(node, oldBeforeNode);\n        });\n\n        // This is a hack to work around an issue that we don't know tha original\n        // path of the new parent after dragging, as the node is already moved at that time.\n        if (params.newParentPathRedo === null) {\n          params.newParentPathRedo = newParentNode.getInternalPath();\n        }\n      },\n      'redo': function (params) {\n        var oldParentNode = findNode(params.oldParentPathRedo);\n        var newParentNode = findNode(params.newParentPathRedo);\n        var newBeforeNode = newParentNode.childs[params.newIndexRedo] || newParentNode.append;\n\n        // first copy the nodes, then move them\n        var nodes = oldParentNode.childs.slice(params.oldIndexRedo, params.oldIndexRedo + params.count);\n\n        nodes.forEach(function (node, index) {\n          node.field = params.fieldNames[index];\n          newParentNode.moveBefore(node, newBeforeNode);\n        });\n      }\n    },\n\n    'sort': {\n      'undo': function (params) {\n        var node = findNode(params.path);\n        node.hideChilds();\n        node.childs = params.oldChilds;\n        node.updateDom({updateIndexes: true});\n        node.showChilds();\n      },\n      'redo': function (params) {\n        var node = findNode(params.path);\n        node.hideChilds();\n        node.childs = params.newChilds;\n        node.updateDom({updateIndexes: true});\n        node.showChilds();\n      }\n    },\n\n    'transform': {\n      'undo': function (params) {\n        findNode(params.path).setInternalValue(params.oldValue);\n\n        // TODO: would be nice to restore the state of the node and childs\n      },\n      'redo': function (params) {\n        findNode(params.path).setInternalValue(params.newValue);\n\n        // TODO: would be nice to restore the state of the node and childs\n      }\n    }\n\n    // TODO: restore the original caret position and selection with each undo\n    // TODO: implement history for actions \"expand\", \"collapse\", \"scroll\", \"setDocument\"\n  };\n}\n\n/**\n * The method onChange is executed when the History is changed, and can\n * be overloaded.\n */\nNodeHistory.prototype.onChange = function () {};\n\n/**\n * Add a new action to the history\n * @param {String} action  The executed action. Available actions: \"editField\",\n *                         \"editValue\", \"changeType\", \"appendNode\",\n *                         \"removeNode\", \"duplicateNode\", \"moveNode\"\n * @param {Object} params  Object containing parameters describing the change.\n *                         The parameters in params depend on the action (for\n *                         example for \"editValue\" the Node, old value, and new\n *                         value are provided). params contains all information\n *                         needed to undo or redo the action.\n */\nNodeHistory.prototype.add = function (action, params) {\n  this.index++;\n  this.history[this.index] = {\n    'action': action,\n    'params': params,\n    'timestamp': new Date()\n  };\n\n  // remove redo actions which are invalid now\n  if (this.index < this.history.length - 1) {\n    this.history.splice(this.index + 1, this.history.length - this.index - 1);\n  }\n\n  // fire onchange event\n  this.onChange();\n};\n\n/**\n * Clear history\n */\nNodeHistory.prototype.clear = function () {\n  this.history = [];\n  this.index = -1;\n\n  // fire onchange event\n  this.onChange();\n};\n\n/**\n * Check if there is an action available for undo\n * @return {Boolean} canUndo\n */\nNodeHistory.prototype.canUndo = function () {\n  return (this.index >= 0);\n};\n\n/**\n * Check if there is an action available for redo\n * @return {Boolean} canRedo\n */\nNodeHistory.prototype.canRedo = function () {\n  return (this.index < this.history.length - 1);\n};\n\n/**\n * Undo the last action\n */\nNodeHistory.prototype.undo = function () {\n  if (this.canUndo()) {\n    var obj = this.history[this.index];\n    if (obj) {\n      var action = this.actions[obj.action];\n      if (action && action.undo) {\n        action.undo(obj.params);\n        if (obj.params.oldSelection) {\n          try {\n            this.editor.setDomSelection(obj.params.oldSelection);\n          }\n          catch (err) {\n            console.error(err);\n          }\n        }\n      }\n      else {\n        console.error(new Error('unknown action \"' + obj.action + '\"'));\n      }\n    }\n    this.index--;\n\n    // fire onchange event\n    this.onChange();\n  }\n};\n\n/**\n * Redo the last action\n */\nNodeHistory.prototype.redo = function () {\n  if (this.canRedo()) {\n    this.index++;\n\n    var obj = this.history[this.index];\n    if (obj) {\n      var action = this.actions[obj.action];\n      if (action && action.redo) {\n        action.redo(obj.params);\n        if (obj.params.newSelection) {\n          try {\n            this.editor.setDomSelection(obj.params.newSelection);\n          }\n          catch (err) {\n            console.error(err);\n          }\n        }\n      }\n      else {\n        console.error(new Error('unknown action \"' + obj.action + '\"'));\n      }\n    }\n\n    // fire onchange event\n    this.onChange();\n  }\n};\n\n/**\n * Destroy history\n */\nNodeHistory.prototype.destroy = function () {\n  this.editor = null;\n\n  this.history = [];\n  this.index = -1;\n};\n\nmodule.exports = NodeHistory;\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* Jison generated parser */\nvar jsonlint = (function(){\nvar parser = {trace: function trace() { },\nyy: {},\nsymbols_: {\"error\":2,\"JSONString\":3,\"STRING\":4,\"JSONNumber\":5,\"NUMBER\":6,\"JSONNullLiteral\":7,\"NULL\":8,\"JSONBooleanLiteral\":9,\"TRUE\":10,\"FALSE\":11,\"JSONText\":12,\"JSONValue\":13,\"EOF\":14,\"JSONObject\":15,\"JSONArray\":16,\"{\":17,\"}\":18,\"JSONMemberList\":19,\"JSONMember\":20,\":\":21,\",\":22,\"[\":23,\"]\":24,\"JSONElementList\":25,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"STRING\",6:\"NUMBER\",8:\"NULL\",10:\"TRUE\",11:\"FALSE\",14:\"EOF\",17:\"{\",18:\"}\",21:\":\",22:\",\",23:\"[\",24:\"]\"},\nproductions_: [0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],\nperformAction: function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$) {\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 1: // replace escaped characters with actual character\n          this.$ = yytext.replace(/\\\\(\\\\|\")/g, \"$\"+\"1\")\n                     .replace(/\\\\n/g,'\\n')\n                     .replace(/\\\\r/g,'\\r')\n                     .replace(/\\\\t/g,'\\t')\n                     .replace(/\\\\v/g,'\\v')\n                     .replace(/\\\\f/g,'\\f')\n                     .replace(/\\\\b/g,'\\b');\n        \nbreak;\ncase 2:this.$ = Number(yytext);\nbreak;\ncase 3:this.$ = null;\nbreak;\ncase 4:this.$ = true;\nbreak;\ncase 5:this.$ = false;\nbreak;\ncase 6:return this.$ = $$[$0-1];\nbreak;\ncase 13:this.$ = {};\nbreak;\ncase 14:this.$ = $$[$0-1];\nbreak;\ncase 15:this.$ = [$$[$0-2], $$[$0]];\nbreak;\ncase 16:this.$ = {}; this.$[$$[$0][0]] = $$[$0][1];\nbreak;\ncase 17:this.$ = $$[$0-2]; $$[$0-2][$$[$0][0]] = $$[$0][1];\nbreak;\ncase 18:this.$ = [];\nbreak;\ncase 19:this.$ = $$[$0-1];\nbreak;\ncase 20:this.$ = [$$[$0]];\nbreak;\ncase 21:this.$ = $$[$0-2]; $$[$0-2].push($$[$0]);\nbreak;\n}\n},\ntable: [{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],\ndefaultActions: {16:[2,6]},\nparseError: function parseError(str, hash) {\n    throw new Error(str);\n},\nparse: function parse(input) {\n    var self = this,\n        stack = [0],\n        vstack = [null], // semantic value stack\n        lstack = [], // location stack\n        table = this.table,\n        yytext = '',\n        yylineno = 0,\n        yyleng = 0,\n        recovering = 0,\n        TERROR = 2,\n        EOF = 1;\n\n    //this.reductionCount = this.shiftCount = 0;\n\n    this.lexer.setInput(input);\n    this.lexer.yy = this.yy;\n    this.yy.lexer = this.lexer;\n    if (typeof this.lexer.yylloc == 'undefined')\n        this.lexer.yylloc = {};\n    var yyloc = this.lexer.yylloc;\n    lstack.push(yyloc);\n\n    if (typeof this.yy.parseError === 'function')\n        this.parseError = this.yy.parseError;\n\n    function popStack (n) {\n        stack.length = stack.length - 2*n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n\n    function lex() {\n        var token;\n        token = self.lexer.lex() || 1; // $end = 1\n        // if token isn't its numeric value, convert\n        if (typeof token !== 'number') {\n            token = self.symbols_[token] || token;\n        }\n        return token;\n    }\n\n    var symbol, preErrorSymbol, state, action, a, r, yyval={},p,len,newState, expected;\n    while (true) {\n        // retreive state number from top of stack\n        state = stack[stack.length-1];\n\n        // use default actions if available\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol == null)\n                symbol = lex();\n            // read action for current state and first input\n            action = table[state] && table[state][symbol];\n        }\n\n        // handle parse error\n        _handle_error:\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n\n            if (!recovering) {\n                // Report error\n                expected = [];\n                for (p in table[state]) if (this.terminals_[p] && p > 2) {\n                    expected.push(\"'\"+this.terminals_[p]+\"'\");\n                }\n                var errStr = '';\n                if (this.lexer.showPosition) {\n                    errStr = 'Parse error on line '+(yylineno+1)+\":\\n\"+this.lexer.showPosition()+\"\\nExpecting \"+expected.join(', ') + \", got '\" + this.terminals_[symbol]+ \"'\";\n                } else {\n                    errStr = 'Parse error on line '+(yylineno+1)+\": Unexpected \" +\n                                  (symbol == 1 /*EOF*/ ? \"end of input\" :\n                                              (\"'\"+(this.terminals_[symbol] || symbol)+\"'\"));\n                }\n                this.parseError(errStr,\n                    {text: this.lexer.match, token: this.terminals_[symbol] || symbol, line: this.lexer.yylineno, loc: yyloc, expected: expected});\n            }\n\n            // just recovered from another error\n            if (recovering == 3) {\n                if (symbol == EOF) {\n                    throw new Error(errStr || 'Parsing halted.');\n                }\n\n                // discard current lookahead and grab another\n                yyleng = this.lexer.yyleng;\n                yytext = this.lexer.yytext;\n                yylineno = this.lexer.yylineno;\n                yyloc = this.lexer.yylloc;\n                symbol = lex();\n            }\n\n            // try to recover from error\n            while (1) {\n                // check for error recovery rule in this state\n                if ((TERROR.toString()) in table[state]) {\n                    break;\n                }\n                if (state == 0) {\n                    throw new Error(errStr || 'Parsing halted.');\n                }\n                popStack(1);\n                state = stack[stack.length-1];\n            }\n\n            preErrorSymbol = symbol; // save the lookahead token\n            symbol = TERROR;         // insert generic error symbol as new lookahead\n            state = stack[stack.length-1];\n            action = table[state] && table[state][TERROR];\n            recovering = 3; // allow 3 real symbols to be shifted before reporting a new error\n        }\n\n        // this shouldn't happen, unless resolve defaults are off\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: '+state+', token: '+symbol);\n        }\n\n        switch (action[0]) {\n\n            case 1: // shift\n                //this.shiftCount++;\n\n                stack.push(symbol);\n                vstack.push(this.lexer.yytext);\n                lstack.push(this.lexer.yylloc);\n                stack.push(action[1]); // push state\n                symbol = null;\n                if (!preErrorSymbol) { // normal execution/no error\n                    yyleng = this.lexer.yyleng;\n                    yytext = this.lexer.yytext;\n                    yylineno = this.lexer.yylineno;\n                    yyloc = this.lexer.yylloc;\n                    if (recovering > 0)\n                        recovering--;\n                } else { // error just occurred, resume old lookahead f/ before error\n                    symbol = preErrorSymbol;\n                    preErrorSymbol = null;\n                }\n                break;\n\n            case 2: // reduce\n                //this.reductionCount++;\n\n                len = this.productions_[action[1]][1];\n\n                // perform semantic action\n                yyval.$ = vstack[vstack.length-len]; // default to $$ = $1\n                // default location, uses first token for firsts, last for lasts\n                yyval._$ = {\n                    first_line: lstack[lstack.length-(len||1)].first_line,\n                    last_line: lstack[lstack.length-1].last_line,\n                    first_column: lstack[lstack.length-(len||1)].first_column,\n                    last_column: lstack[lstack.length-1].last_column\n                };\n                r = this.performAction.call(yyval, yytext, yyleng, yylineno, this.yy, action[1], vstack, lstack);\n\n                if (typeof r !== 'undefined') {\n                    return r;\n                }\n\n                // pop off stack\n                if (len) {\n                    stack = stack.slice(0,-1*len*2);\n                    vstack = vstack.slice(0, -1*len);\n                    lstack = lstack.slice(0, -1*len);\n                }\n\n                stack.push(this.productions_[action[1]][0]);    // push nonterminal (reduce)\n                vstack.push(yyval.$);\n                lstack.push(yyval._$);\n                // goto new state = table[STATE][NONTERMINAL]\n                newState = table[stack[stack.length-2]][stack[stack.length-1]];\n                stack.push(newState);\n                break;\n\n            case 3: // accept\n                return true;\n        }\n\n    }\n\n    return true;\n}};\n/* Jison generated lexer */\nvar lexer = (function(){\nvar lexer = ({EOF:1,\nparseError:function parseError(str, hash) {\n        if (this.yy.parseError) {\n            this.yy.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\nsetInput:function (input) {\n        this._input = input;\n        this._more = this._less = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {first_line:1,first_column:0,last_line:1,last_column:0};\n        return this;\n    },\ninput:function () {\n        var ch = this._input[0];\n        this.yytext+=ch;\n        this.yyleng++;\n        this.match+=ch;\n        this.matched+=ch;\n        var lines = ch.match(/\\n/);\n        if (lines) this.yylineno++;\n        this._input = this._input.slice(1);\n        return ch;\n    },\nunput:function (ch) {\n        this._input = ch + this._input;\n        return this;\n    },\nmore:function () {\n        this._more = true;\n        return this;\n    },\nless:function (n) {\n        this._input = this.match.slice(n) + this._input;\n    },\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20)+(next.length > 20 ? '...':'')).replace(/\\n/g, \"\");\n    },\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c+\"^\";\n    },\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) this.done = true;\n\n        var token,\n            match,\n            tempMatch,\n            index,\n            col,\n            lines;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i=0;i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (!this.options.flex) break;\n            }\n        }\n        if (match) {\n            lines = match[0].match(/\\n.*/g);\n            if (lines) this.yylineno += lines.length;\n            this.yylloc = {first_line: this.yylloc.last_line,\n                           last_line: this.yylineno+1,\n                           first_column: this.yylloc.last_column,\n                           last_column: lines ? lines[lines.length-1].length-1 : this.yylloc.last_column + match[0].length}\n            this.yytext += match[0];\n            this.match += match[0];\n            this.yyleng = this.yytext.length;\n            this._more = false;\n            this._input = this._input.slice(match[0].length);\n            this.matched += match[0];\n            token = this.performAction.call(this, this.yy, this, rules[index],this.conditionStack[this.conditionStack.length-1]);\n            if (this.done && this._input) this.done = false;\n            if (token) return token;\n            else return;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            this.parseError('Lexical error on line '+(this.yylineno+1)+'. Unrecognized text.\\n'+this.showPosition(), \n                    {text: \"\", token: null, line: this.yylineno});\n        }\n    },\nlex:function lex() {\n        var r = this.next();\n        if (typeof r !== 'undefined') {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\nbegin:function begin(condition) {\n        this.conditionStack.push(condition);\n    },\npopState:function popState() {\n        return this.conditionStack.pop();\n    },\n_currentRules:function _currentRules() {\n        return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules;\n    },\ntopState:function () {\n        return this.conditionStack[this.conditionStack.length-2];\n    },\npushState:function begin(condition) {\n        this.begin(condition);\n    }});\nlexer.options = {};\nlexer.performAction = function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\n\nvar YYSTATE=YY_START\nswitch($avoiding_name_collisions) {\ncase 0:/* skip whitespace */\nbreak;\ncase 1:return 6\nbreak;\ncase 2:yy_.yytext = yy_.yytext.substr(1,yy_.yyleng-2); return 4\nbreak;\ncase 3:return 17\nbreak;\ncase 4:return 18\nbreak;\ncase 5:return 23\nbreak;\ncase 6:return 24\nbreak;\ncase 7:return 22\nbreak;\ncase 8:return 21\nbreak;\ncase 9:return 10\nbreak;\ncase 10:return 11\nbreak;\ncase 11:return 8\nbreak;\ncase 12:return 14\nbreak;\ncase 13:return 'INVALID'\nbreak;\n}\n};\nlexer.rules = [/^(?:\\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\\.[0-9]+)?([eE][-+]?[0-9]+)?\\b)/,/^(?:\"(?:\\\\[\\\\\"bfnrt/]|\\\\u[a-fA-F0-9]{4}|[^\\\\\\0-\\x09\\x0a-\\x1f\"])*\")/,/^(?:\\{)/,/^(?:\\})/,/^(?:\\[)/,/^(?:\\])/,/^(?:,)/,/^(?::)/,/^(?:true\\b)/,/^(?:false\\b)/,/^(?:null\\b)/,/^(?:$)/,/^(?:.)/];\nlexer.conditions = {\"INITIAL\":{\"rules\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13],\"inclusive\":true}};\n\n\n;\nreturn lexer;})()\nparser.lexer = lexer;\nreturn parser;\n})();\nif (true) {\n  exports.parser = jsonlint;\n  exports.parse = jsonlint.parse.bind(jsonlint);\n}\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar escapedChars = {\n  'b': '\\b',\n  'f': '\\f',\n  'n': '\\n',\n  'r': '\\r',\n  't': '\\t',\n  '\"': '\"',\n  '/': '/',\n  '\\\\': '\\\\'\n};\n\nvar A_CODE = 'a'.charCodeAt();\n\n\nexports.parse = function (source) {\n  var pointers = {};\n  var line = 0;\n  var column = 0;\n  var pos = 0;\n  return {\n    data: _parse('', true),\n    pointers: pointers\n  };\n\n  function _parse(ptr, topLevel) {\n    whitespace();\n    var data;\n    map(ptr, 'value');\n    var char = getChar();\n    switch (char) {\n      case 't': read('rue'); data = true; break;\n      case 'f': read('alse'); data = false; break;\n      case 'n': read('ull'); data = null; break;\n      case '\"': data = parseString(); break;\n      case '[': data = parseArray(ptr); break;\n      case '{': data = parseObject(ptr); break;\n      default:\n        backChar();\n        if ('-0123456789'.indexOf(char) >= 0)\n          data = parseNumber();\n        else\n          unexpectedToken();\n    }\n    map(ptr, 'valueEnd');\n    whitespace();\n    if (topLevel && pos < source.length) unexpectedToken();\n    return data;\n  }\n\n  function whitespace() {\n    loop:\n      while (pos < source.length) {\n        switch (source[pos]) {\n          case ' ': column++; break;\n          case '\\t': column += 4; break;\n          case '\\r': column = 0; break;\n          case '\\n': column = 0; line++; break;\n          default: break loop;\n        }\n        pos++;\n      }\n  }\n\n  function parseString() {\n    var str = '';\n    var char;\n    while (true) {\n      char = getChar();\n      if (char == '\"') {\n        break;\n      } else if (char == '\\\\') {\n        char = getChar();\n        if (char in escapedChars)\n          str += escapedChars[char];\n        else if (char == 'u')\n          str += getCharCode();\n        else\n          wasUnexpectedToken();\n      } else {\n        str += char;\n      }\n    }\n    return str;\n  }\n\n  function parseNumber() {\n    var numStr = '';\n    if (source[pos] == '-') numStr += getChar();\n\n    numStr += source[pos] == '0'\n              ? getChar()\n              : getDigits();\n\n    if (source[pos] == '.')\n      numStr += getChar() + getDigits();\n\n    if (source[pos] == 'e' || source[pos] == 'E') {\n      numStr += getChar();\n      if (source[pos] == '+' || source[pos] == '-') numStr += getChar();\n      numStr += getDigits();\n    }\n\n    return +numStr;\n  }\n\n  function parseArray(ptr) {\n    whitespace();\n    var arr = [];\n    var i = 0;\n    if (getChar() == ']') return arr;\n    backChar();\n\n    while (true) {\n      var itemPtr = ptr + '/' + i;\n      arr.push(_parse(itemPtr));\n      whitespace();\n      var char = getChar();\n      if (char == ']') break;\n      if (char != ',') wasUnexpectedToken();\n      whitespace();\n      i++;\n    }\n    return arr;\n  }\n\n  function parseObject(ptr) {\n    whitespace();\n    var obj = {};\n    if (getChar() == '}') return obj;\n    backChar();\n\n    while (true) {\n      var loc = getLoc();\n      if (getChar() != '\"') wasUnexpectedToken();\n      var key = parseString();\n      var propPtr = ptr + '/' + escapeJsonPointer(key);\n      mapLoc(propPtr, 'key', loc);\n      map(propPtr, 'keyEnd');\n      whitespace();\n      if (getChar() != ':') wasUnexpectedToken();\n      whitespace();\n      obj[key] = _parse(propPtr);\n      whitespace();\n      var char = getChar();\n      if (char == '}') break;\n      if (char != ',') wasUnexpectedToken();\n      whitespace();\n    }\n    return obj;\n  }\n\n  function read(str) {\n    for (var i=0; i<str.length; i++)\n      if (getChar() !== str[i]) wasUnexpectedToken();\n  }\n\n  function getChar() {\n    checkUnexpectedEnd();\n    var char = source[pos];\n    pos++;\n    column++; // new line?\n    return char;\n  }\n\n  function backChar() {\n    pos--;\n    column--;\n  }\n\n  function getCharCode() {\n    var count = 4;\n    var code = 0;\n    while (count--) {\n      code <<= 4;\n      var char = getChar().toLowerCase();\n      if (char >= 'a' && char <= 'f')\n        code += char.charCodeAt() - A_CODE + 10;\n      else if (char >= '0' && char <= '9')\n        code += +char;\n      else\n        wasUnexpectedToken();\n    }\n    return String.fromCharCode(code);\n  }\n\n  function getDigits() {\n    var digits = '';\n    while (source[pos] >= '0' && source[pos] <= '9')\n      digits += getChar();\n\n    if (digits.length) return digits;\n    checkUnexpectedEnd();\n    unexpectedToken();\n  }\n\n  function map(ptr, prop) {\n    mapLoc(ptr, prop, getLoc());\n  }\n\n  function mapLoc(ptr, prop, loc) {\n    pointers[ptr] = pointers[ptr] || {};\n    pointers[ptr][prop] = loc;\n  }\n\n  function getLoc() {\n    return {\n      line: line,\n      column: column,\n      pos: pos\n    };\n  }\n\n  function unexpectedToken() {\n    throw new SyntaxError('Unexpected token ' + source[pos] + ' in JSON at position ' + pos);\n  }\n\n  function wasUnexpectedToken() {\n    backChar();\n    unexpectedToken();\n  }\n\n  function checkUnexpectedEnd() {\n    if (pos >= source.length)\n      throw new SyntaxError('Unexpected end of JSON input');\n  }\n};\n\n\nexports.stringify = function (data, _, whitespace) {\n  if (!validType(data)) return;\n  var wsLine = 0;\n  var wsPos, wsColumn;\n  switch (typeof whitespace) {\n    case 'number':\n      var len = whitespace > 10\n                  ? 10\n                  : whitespace < 0\n                    ? 0\n                    : Math.floor(whitespace);\n      whitespace = len && repeat(len, ' ');\n      wsPos = len;\n      wsColumn = len;\n      break;\n    case 'string':\n      whitespace = whitespace.slice(0, 10);\n      wsPos = 0;\n      wsColumn = 0;\n      for (var j=0; j<whitespace.length; j++) {\n        var char = whitespace[j];\n        switch (char) {\n          case ' ': wsColumn++; break;\n          case '\\t': wsColumn += 4; break;\n          case '\\r': wsColumn = 0; break;\n          case '\\n': wsColumn = 0; wsLine++; break;\n          default: throw new Error('whitespace characters not allowed in JSON');\n        }\n        wsPos++;\n      }\n      break;\n    default:\n      whitespace = undefined;\n  }\n\n  var json = '';\n  var pointers = {};\n  var line = 0;\n  var column = 0;\n  var pos = 0;\n  _stringify(data, 0, '');\n  return {\n    json: json,\n    pointers: pointers\n  };\n\n  function _stringify(_data, lvl, ptr) {\n    map(ptr, 'value');\n    switch (typeof _data) {\n      case 'number':\n      case 'boolean':\n        out('' + _data); break;\n      case 'string':\n        out(quoted(_data)); break;\n      case 'object':\n        if (_data === null)\n          out('null');\n        else if (typeof _data.toJSON == 'function')\n          out(quoted(_data.toJSON()));\n        else if (Array.isArray(_data))\n          stringifyArray();\n        else\n          stringifyObject();\n    }\n    map(ptr, 'valueEnd');\n\n    function stringifyArray() {\n      if (_data.length) {\n        out('[');\n        var itemLvl = lvl + 1;\n        for (var i=0; i<_data.length; i++) {\n          if (i) out(',');\n          indent(itemLvl);\n          var item = validType(_data[i]) ? _data[i] : null;\n          var itemPtr = ptr + '/' + i;\n          _stringify(item, itemLvl, itemPtr);\n        }\n        indent(lvl);\n        out(']');\n      } else {\n        out('[]');\n      }\n    }\n\n    function stringifyObject() {\n      var keys = Object.keys(_data);\n      if (keys.length) {\n        out('{');\n        var propLvl = lvl + 1;\n        for (var i=0; i<keys.length; i++) {\n          var key = keys[i];\n          var value = _data[key];\n          if (validType(value)) {\n            if (i) out(',');\n            var propPtr = ptr + '/' + escapeJsonPointer(key);\n            indent(propLvl);\n            map(propPtr, 'key');\n            out(quoted(key));\n            map(propPtr, 'keyEnd');\n            out(':');\n            if (whitespace) out(' ');\n            _stringify(value, propLvl, propPtr);\n          }\n        }\n        indent(lvl);\n        out('}');\n      } else {\n        out('{}');\n      }\n    }\n  }\n\n  function out(str) {\n    column += str.length;\n    pos += str.length;\n    json += str;\n  }\n\n  function indent(lvl) {\n    if (whitespace) {\n      json += '\\n' + repeat(lvl, whitespace);\n      line++;\n      column = 0;\n      while (lvl--) {\n        if (wsLine) {\n          line += wsLine;\n          column = wsColumn;\n        } else {\n          column += wsColumn;\n        }\n        pos += wsPos;\n      }\n      pos += 1; // \\n character\n    }\n  }\n\n  function map(ptr, prop) {\n    pointers[ptr] = pointers[ptr] || {};\n    pointers[ptr][prop] = {\n      line: line,\n      column: column,\n      pos: pos\n    };\n  }\n\n  function repeat(n, str) {\n    return Array(n + 1).join(str);\n  }\n};\n\n\nvar VALID_TYPES = ['number', 'boolean', 'string', 'object'];\nfunction validType(data) {\n  return VALID_TYPES.indexOf(typeof data) >= 0;\n}\n\n\nvar ESC_QUOTE = /\"|\\\\/g;\nvar ESC_B = /[\\b]/g;\nvar ESC_F = /\\f/g;\nvar ESC_N = /\\n/g;\nvar ESC_R = /\\r/g;\nvar ESC_T = /\\t/g;\nfunction quoted(str) {\n  str = str.replace(ESC_QUOTE, '\\\\$&')\n           .replace(ESC_F, '\\\\f')\n           .replace(ESC_B, '\\\\b')\n           .replace(ESC_N, '\\\\n')\n           .replace(ESC_R, '\\\\r')\n           .replace(ESC_T, '\\\\t');\n  return '\"' + str + '\"';\n}\n\n\nvar ESC_0 = /~/g;\nvar ESC_1 = /\\//g;\nfunction escapeJsonPointer(str) {\n  return str.replace(ESC_0, '~0')\n            .replace(ESC_1, '~1');\n}\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * @constructor SearchBox\n * Create a search box in given HTML container\n * @param {JSONEditor} editor    The JSON Editor to attach to\n * @param {Element} container               HTML container element of where to\n *                                          create the search box\n */\nfunction SearchBox (editor, container) {\n  var searchBox = this;\n\n  this.editor = editor;\n  this.timeout = undefined;\n  this.delay = 200; // ms\n  this.lastText = undefined;\n\n  this.dom = {};\n  this.dom.container = container;\n\n  var table = document.createElement('table');\n  this.dom.table = table;\n  table.className = 'jsoneditor-search';\n  container.appendChild(table);\n  var tbody = document.createElement('tbody');\n  this.dom.tbody = tbody;\n  table.appendChild(tbody);\n  var tr = document.createElement('tr');\n  tbody.appendChild(tr);\n\n  var td = document.createElement('td');\n  tr.appendChild(td);\n  var results = document.createElement('div');\n  this.dom.results = results;\n  results.className = 'jsoneditor-results';\n  td.appendChild(results);\n\n  td = document.createElement('td');\n  tr.appendChild(td);\n  var divInput = document.createElement('div');\n  this.dom.input = divInput;\n  divInput.className = 'jsoneditor-frame';\n  divInput.title = 'Search fields and values';\n  td.appendChild(divInput);\n\n  // table to contain the text input and search button\n  var tableInput = document.createElement('table');\n  divInput.appendChild(tableInput);\n  var tbodySearch = document.createElement('tbody');\n  tableInput.appendChild(tbodySearch);\n  tr = document.createElement('tr');\n  tbodySearch.appendChild(tr);\n\n  var refreshSearch = document.createElement('button');\n  refreshSearch.type = 'button';\n  refreshSearch.className = 'jsoneditor-refresh';\n  td = document.createElement('td');\n  td.appendChild(refreshSearch);\n  tr.appendChild(td);\n\n  var search = document.createElement('input');\n  // search.type = 'button';\n  this.dom.search = search;\n  search.oninput = function (event) {\n    searchBox._onDelayedSearch(event);\n  };\n  search.onchange = function (event) { // For IE 9\n    searchBox._onSearch();\n  };\n  search.onkeydown = function (event) {\n    searchBox._onKeyDown(event);\n  };\n  search.onkeyup = function (event) {\n    searchBox._onKeyUp(event);\n  };\n  refreshSearch.onclick = function (event) {\n    search.select();\n  };\n\n  // TODO: ESC in FF restores the last input, is a FF bug, https://bugzilla.mozilla.org/show_bug.cgi?id=598819\n  td = document.createElement('td');\n  td.appendChild(search);\n  tr.appendChild(td);\n\n  var searchNext = document.createElement('button');\n  searchNext.type = 'button';\n  searchNext.title = 'Next result (Enter)';\n  searchNext.className = 'jsoneditor-next';\n  searchNext.onclick = function () {\n    searchBox.next();\n  };\n  td = document.createElement('td');\n  td.appendChild(searchNext);\n  tr.appendChild(td);\n\n  var searchPrevious = document.createElement('button');\n  searchPrevious.type = 'button';\n  searchPrevious.title = 'Previous result (Shift+Enter)';\n  searchPrevious.className = 'jsoneditor-previous';\n  searchPrevious.onclick = function () {\n    searchBox.previous();\n  };\n  td = document.createElement('td');\n  td.appendChild(searchPrevious);\n  tr.appendChild(td);\n}\n\n/**\n * Go to the next search result\n * @param {boolean} [focus]   If true, focus will be set to the next result\n *                            focus is false by default.\n */\nSearchBox.prototype.next = function(focus) {\n  if (this.results != undefined) {\n    var index = (this.resultIndex != undefined) ? this.resultIndex + 1 : 0;\n    if (index > this.results.length - 1) {\n      index = 0;\n    }\n    this._setActiveResult(index, focus);\n  }\n};\n\n/**\n * Go to the prevous search result\n * @param {boolean} [focus]   If true, focus will be set to the next result\n *                            focus is false by default.\n */\nSearchBox.prototype.previous = function(focus) {\n  if (this.results != undefined) {\n    var max = this.results.length - 1;\n    var index = (this.resultIndex != undefined) ? this.resultIndex - 1 : max;\n    if (index < 0) {\n      index = max;\n    }\n    this._setActiveResult(index, focus);\n  }\n};\n\n/**\n * Set new value for the current active result\n * @param {Number} index\n * @param {boolean} [focus]   If true, focus will be set to the next result.\n *                            focus is false by default.\n * @private\n */\nSearchBox.prototype._setActiveResult = function(index, focus) {\n  // de-activate current active result\n  if (this.activeResult) {\n    var prevNode = this.activeResult.node;\n    var prevElem = this.activeResult.elem;\n    if (prevElem == 'field') {\n      delete prevNode.searchFieldActive;\n    }\n    else {\n      delete prevNode.searchValueActive;\n    }\n    prevNode.updateDom();\n  }\n\n  if (!this.results || !this.results[index]) {\n    // out of range, set to undefined\n    this.resultIndex = undefined;\n    this.activeResult = undefined;\n    return;\n  }\n\n  this.resultIndex = index;\n\n  // set new node active\n  var node = this.results[this.resultIndex].node;\n  var elem = this.results[this.resultIndex].elem;\n  if (elem == 'field') {\n    node.searchFieldActive = true;\n  }\n  else {\n    node.searchValueActive = true;\n  }\n  this.activeResult = this.results[this.resultIndex];\n  node.updateDom();\n\n  // TODO: not so nice that the focus is only set after the animation is finished\n  node.scrollTo(function () {\n    if (focus) {\n      node.focus(elem);\n    }\n  });\n};\n\n/**\n * Cancel any running onDelayedSearch.\n * @private\n */\nSearchBox.prototype._clearDelay = function() {\n  if (this.timeout != undefined) {\n    clearTimeout(this.timeout);\n    delete this.timeout;\n  }\n};\n\n/**\n * Start a timer to execute a search after a short delay.\n * Used for reducing the number of searches while typing.\n * @param {Event} event\n * @private\n */\nSearchBox.prototype._onDelayedSearch = function (event) {\n  // execute the search after a short delay (reduces the number of\n  // search actions while typing in the search text box)\n  this._clearDelay();\n  var searchBox = this;\n  this.timeout = setTimeout(function (event) {\n    searchBox._onSearch();\n  },\n  this.delay);\n};\n\n/**\n * Handle onSearch event\n * @param {boolean} [forceSearch]  If true, search will be executed again even\n *                                 when the search text is not changed.\n *                                 Default is false.\n * @private\n */\nSearchBox.prototype._onSearch = function (forceSearch) {\n  this._clearDelay();\n\n  var value = this.dom.search.value;\n  var text = (value.length > 0) ? value : undefined;\n  if (text !== this.lastText || forceSearch) {\n    // only search again when changed\n    this.lastText = text;\n    this.results = this.editor.search(text);\n    var MAX_SEARCH_RESULTS = this.results[0]\n        ? this.results[0].node.MAX_SEARCH_RESULTS\n        : Infinity;\n\n    // try to maintain the current active result if this is still part of the new search results\n    var activeResultIndex = 0;\n    if (this.activeResult) {\n      for (var i = 0; i < this.results.length; i++) {\n        if (this.results[i].node === this.activeResult.node) {\n          activeResultIndex = i;\n          break;\n        }\n      }\n    }\n\n    this._setActiveResult(activeResultIndex, false);\n\n    // display search results\n    if (text !== undefined) {\n      var resultCount = this.results.length;\n      if (resultCount === 0) {\n        this.dom.results.innerHTML = 'no&nbsp;results';\n      }\n      else if (resultCount === 1) {\n        this.dom.results.innerHTML = '1&nbsp;result';\n      }\n      else if (resultCount > MAX_SEARCH_RESULTS) {\n        this.dom.results.innerHTML = MAX_SEARCH_RESULTS + '+&nbsp;results';\n      }\n      else {\n        this.dom.results.innerHTML = resultCount + '&nbsp;results';\n      }\n    }\n    else {\n      this.dom.results.innerHTML = '';\n    }\n  }\n};\n\n/**\n * Handle onKeyDown event in the input box\n * @param {Event} event\n * @private\n */\nSearchBox.prototype._onKeyDown = function (event) {\n  var keynum = event.which;\n  if (keynum == 27) { // ESC\n    this.dom.search.value = '';  // clear search\n    this._onSearch();\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  else if (keynum == 13) { // Enter\n    if (event.ctrlKey) {\n      // force to search again\n      this._onSearch(true);\n    }\n    else if (event.shiftKey) {\n      // move to the previous search result\n      this.previous();\n    }\n    else {\n      // move to the next search result\n      this.next();\n    }\n    event.preventDefault();\n    event.stopPropagation();\n  }\n};\n\n/**\n * Handle onKeyUp event in the input box\n * @param {Event} event\n * @private\n */\nSearchBox.prototype._onKeyUp = function (event) {\n  var keynum = event.keyCode;\n  if (keynum != 27 && keynum != 13) { // !show and !Enter\n    this._onDelayedSearch(event);   // For IE 9\n  }\n};\n\n/**\n * Clear the search results\n */\nSearchBox.prototype.clear = function () {\n  this.dom.search.value = '';\n  this._onSearch();\n};\n\n/**\n * Refresh searchResults if there is a search value\n */\nSearchBox.prototype.forceSearch = function () {\n  this._onSearch(true);\n};\n\n/**\n * Test whether the search box value is empty\n * @returns {boolean} Returns true when empty.\n */\nSearchBox.prototype.isEmpty = function () {\n  return this.dom.search.value === '';\n};\n\n/**\n * Destroy the search box\n */\nSearchBox.prototype.destroy = function () {\n  this.editor = null;\n  this.dom.container.removeChild(this.dom.table);\n  this.dom = null;\n\n  this.results = null;\n  this.activeResult = null;\n\n  this._clearDelay();\n\n};\n\nmodule.exports = SearchBox;\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar ContextMenu = __webpack_require__(3);\nvar translate = __webpack_require__(1).translate;\nvar util = __webpack_require__(0);\n\n/**\n * Creates a component that visualize path selection in tree based editors\n * @param {HTMLElement} container \n * @param {HTMLElement} root\n * @constructor\n */\nfunction TreePath(container, root) {\n  if (container) {\n    this.root = root;\n    this.path = document.createElement('div');\n    this.path.className = 'jsoneditor-treepath';\n    this.path.setAttribute('tabindex',0);\n    this.contentMenuClicked;\n    container.appendChild(this.path);\n    this.reset();\n  }\n}\n\n/**\n * Reset component to initial status\n */\nTreePath.prototype.reset = function () {\n  this.path.innerHTML = translate('selectNode');\n};\n\n/**\n * Renders the component UI according to a given path objects\n * @param {Array<{name: String, childs: Array}>} pathObjs a list of path objects\n * \n */\nTreePath.prototype.setPath = function (pathObjs) {\n  var me = this;\n\n  this.path.innerHTML = '';\n\n  if (pathObjs && pathObjs.length) {\n    pathObjs.forEach(function (pathObj, idx) {\n      var pathEl = document.createElement('span');\n      var sepEl;\n      pathEl.className = 'jsoneditor-treepath-element';\n      pathEl.innerText = pathObj.name;\n      pathEl.onclick = _onSegmentClick.bind(me, pathObj);\n  \n      me.path.appendChild(pathEl);\n\n      if (pathObj.children.length) {\n        sepEl = document.createElement('span');\n        sepEl.className = 'jsoneditor-treepath-seperator';\n        sepEl.innerHTML = '&#9658;';\n\n        sepEl.onclick = function () {\n          me.contentMenuClicked = true;\n          var items = [];\n          pathObj.children.forEach(function (child) {\n            items.push({\n              'text': child.name,\n              'className': 'jsoneditor-type-modes' + (pathObjs[idx + 1] + 1 && pathObjs[idx + 1].name === child.name ? ' jsoneditor-selected' : ''),\n              'click': _onContextMenuItemClick.bind(me, pathObj, child.name)\n            });\n          });\n          var menu = new ContextMenu(items);\n          menu.show(sepEl, me.root, true);\n        };\n\n        me.path.appendChild(sepEl);\n      }\n\n      if(idx === pathObjs.length - 1) {\n        var leftRectPos = (sepEl || pathEl).getBoundingClientRect().right;\n        if(me.path.offsetWidth < leftRectPos) {\n          me.path.scrollLeft = leftRectPos;\n        }\n\n        if (me.path.scrollLeft) {\n          var showAllBtn = document.createElement('span');\n          showAllBtn.className = 'jsoneditor-treepath-show-all-btn';\n          showAllBtn.title = 'show all path';\n          showAllBtn.innerHTML = '...';\n          showAllBtn.onclick = _onShowAllClick.bind(me, pathObjs);\n          me.path.insertBefore(showAllBtn, me.path.firstChild);\n        }\n      }\n    });\n  }\n\n  function _onShowAllClick(pathObjs) {\n    me.contentMenuClicked = false;\n    util.addClassName(me.path, 'show-all');\n    me.path.style.width = me.path.parentNode.getBoundingClientRect().width - 10 + 'px';\n    me.path.onblur = function() {\n      if (me.contentMenuClicked) {\n        me.contentMenuClicked = false;\n        me.path.focus();\n        return;\n      }\n      util.removeClassName(me.path, 'show-all');\n      me.path.onblur = undefined;\n      me.path.style.width = '';\n      me.setPath(pathObjs);\n    };\n  }\n\n  function _onSegmentClick(pathObj) {\n    if (this.selectionCallback) {\n      this.selectionCallback(pathObj);\n    }\n  }\n\n  function _onContextMenuItemClick(pathObj, selection) {\n    if (this.contextMenuCallback) {\n      this.contextMenuCallback(pathObj, selection);\n    }\n  }\n};\n\n/**\n * set a callback function for selection of path section\n * @param {Function} callback function to invoke when section is selected\n */\nTreePath.prototype.onSectionSelected = function (callback) {\n  if (typeof callback === 'function') {\n    this.selectionCallback = callback;      \n  }\n};\n\n/**\n * set a callback function for selection of path section\n * @param {Function} callback function to invoke when section is selected\n */\nTreePath.prototype.onContextMenuItemSelected = function (callback) {\n  if (typeof callback === 'function') {\n    this.contextMenuCallback = callback;\n  }\n};\n\nmodule.exports = TreePath;\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar jmespath = __webpack_require__(4);\nvar naturalSort = __webpack_require__(11);\nvar createAbsoluteAnchor = __webpack_require__(12).createAbsoluteAnchor;\nvar ContextMenu = __webpack_require__(3);\nvar appendNodeFactory = __webpack_require__(28);\nvar showMoreNodeFactory = __webpack_require__(29);\nvar showSortModal = __webpack_require__(5);\nvar showTransformModal = __webpack_require__(6);\nvar util = __webpack_require__(0);\nvar translate = __webpack_require__(1).translate;\nvar DEFAULT_MODAL_ANCHOR = __webpack_require__(2).DEFAULT_MODAL_ANCHOR;\n\nvar YEAR_2000 = 946684800000;\n\n/**\n * @constructor Node\n * Create a new Node\n * @param {./treemode} editor\n * @param {Object} [params] Can contain parameters:\n *                          {string}  field\n *                          {boolean} fieldEditable\n *                          {*}       value\n *                          {String}  type  Can have values 'auto', 'array',\n *                                          'object', or 'string'.\n */\nfunction Node (editor, params) {\n  /** @type {./treemode} */\n  this.editor = editor;\n  this.dom = {};\n  this.expanded = false;\n\n  if(params && (params instanceof Object)) {\n    this.setField(params.field, params.fieldEditable);\n    if ('value' in params) {\n      this.setValue(params.value, params.type);\n    }\n    if ('internalValue' in params) {\n      this.setInternalValue(params.internalValue);\n    }\n  }\n  else {\n    this.setField('');\n    this.setValue(null);\n  }\n\n  this._debouncedOnChangeValue = util.debounce(this._onChangeValue.bind(this), Node.prototype.DEBOUNCE_INTERVAL);\n  this._debouncedOnChangeField = util.debounce(this._onChangeField.bind(this), Node.prototype.DEBOUNCE_INTERVAL);\n\n  // starting value for visible children\n  this.visibleChilds = this.getMaxVisibleChilds();\n}\n\n// debounce interval for keyboard input in milliseconds\nNode.prototype.DEBOUNCE_INTERVAL = 150;\n\n// search will stop iterating as soon as the max is reached\nNode.prototype.MAX_SEARCH_RESULTS = 999;\n\n// default number of child nodes to display \nvar DEFAULT_MAX_VISIBLE_CHILDS = 100;\n\nNode.prototype.getMaxVisibleChilds = function() {\n  return (this.editor && this.editor.options && this.editor.options.maxVisibleChilds)\n      ? this.editor.options.maxVisibleChilds\n      : DEFAULT_MAX_VISIBLE_CHILDS;\n}\n\n/**\n * Determine whether the field and/or value of this node are editable\n * @private\n */\nNode.prototype._updateEditability = function () {\n  this.editable = {\n    field: true,\n    value: true\n  };\n\n  if (this.editor) {\n    this.editable.field = this.editor.options.mode === 'tree';\n    this.editable.value = this.editor.options.mode !== 'view';\n\n    if ((this.editor.options.mode === 'tree' || this.editor.options.mode === 'form') &&\n        (typeof this.editor.options.onEditable === 'function')) {\n      var editable = this.editor.options.onEditable({\n        field: this.field,\n        value: this.value,\n        path: this.getPath()\n      });\n\n      if (typeof editable === 'boolean') {\n        this.editable.field = editable;\n        this.editable.value = editable;\n      }\n      else {\n        if (typeof editable.field === 'boolean') this.editable.field = editable.field;\n        if (typeof editable.value === 'boolean') this.editable.value = editable.value;\n      }\n    }\n  }\n};\n\n/**\n * Get the path of this node\n * @return {{string|number}[]} Array containing the path to this node.\n * Element is a number if is the index of an array, a string otherwise.\n */\nNode.prototype.getPath = function () {\n  var node = this;\n  var path = [];\n  while (node) {\n    var field = node.getName();\n    if (field !== undefined) {\n      path.unshift(field);\n    }\n    node = node.parent;\n  }\n  return path;\n};\n\n/**\n * Get the internal path of this node, a list with the child indexes.\n * @return {String[]} Array containing the internal path to this node\n */\nNode.prototype.getInternalPath = function () {\n  var node = this;\n  var internalPath = [];\n  while (node) {\n    if (node.parent) {\n      internalPath.unshift(node.getIndex());\n    }\n    node = node.parent;\n  }\n  return internalPath;\n};\n\n/**\n * Get node serializable name\n * @returns {String|Number}\n */\nNode.prototype.getName = function () {\n return !this.parent\n ? undefined  // do not add an (optional) field name of the root node\n :  (this.parent.type != 'array')\n     ? this.field\n     : this.index;\n};\n\n/**\n * Find child node by serializable path\n * @param {Array<String>} path\n */\nNode.prototype.findNodeByPath = function (path) {\n  if (!path) {\n    return;\n  }\n\n  if (path.length == 0) {\n    return this;\n  }\n\n  if (path.length && this.childs && this.childs.length) {\n    for (var i=0; i < this.childs.length; ++i) {\n      if (('' + path[0]) === ('' + this.childs[i].getName())) {\n        return this.childs[i].findNodeByPath(path.slice(1));\n      }\n    }\n  }\n};\n\n/**\n * Find child node by an internal path: the indexes of the childs nodes\n * @param {Array<String>} internalPath\n * @return {Node | undefined} Returns the node if the path exists.\n *                            Returns undefined otherwise.\n */\nNode.prototype.findNodeByInternalPath = function (internalPath) {\n  if (!internalPath) {\n    return undefined;\n  }\n\n  var node = this;\n  for (var i = 0; i < internalPath.length && node; i++) {\n    var childIndex = internalPath[i];\n    node = node.childs[childIndex];\n  }\n\n  return node;\n};\n\n/**\n * @typedef {{value: String|Object|Number|Boolean, path: Array.<String|Number>}} SerializableNode\n *\n * Returns serializable representation for the node\n * @return {SerializableNode}\n */\nNode.prototype.serialize = function () {\n  return {\n    value: this.getValue(),\n    path: this.getPath()\n  };\n};\n\n/**\n * Find a Node from a JSON path like '.items[3].name'\n * @param {string} jsonPath\n * @return {Node | null} Returns the Node when found, returns null if not found\n */\nNode.prototype.findNode = function (jsonPath) {\n  var path = util.parsePath(jsonPath);\n  var node = this;\n  while (node && path.length > 0) {\n    var prop = path.shift();\n    if (typeof prop === 'number') {\n      if (node.type !== 'array') {\n        throw new Error('Cannot get child node at index ' + prop + ': node is no array');\n      }\n      node = node.childs[prop];\n    }\n    else { // string\n      if (node.type !== 'object') {\n        throw new Error('Cannot get child node ' + prop + ': node is no object');\n      }\n      node = node.childs.filter(function (child) {\n        return child.field === prop;\n      })[0];\n    }\n  }\n\n  return node;\n};\n\n/**\n * Find all parents of this node. The parents are ordered from root node towards\n * the original node.\n * @return {Array.<Node>}\n */\nNode.prototype.findParents = function () {\n  var parents = [];\n  var parent = this.parent;\n  while (parent) {\n    parents.unshift(parent);\n    parent = parent.parent;\n  }\n  return parents;\n};\n\n/**\n *\n * @param {{dataPath: string, keyword: string, message: string, params: Object, schemaPath: string} | null} error\n * @param {Node} [child]  When this is the error of a parent node, pointing\n *                        to an invalid child node, the child node itself\n *                        can be provided. If provided, clicking the error\n *                        icon will set focus to the invalid child node.\n */\nNode.prototype.setError = function (error, child) {\n  this.error = error;\n  this.errorChild = child;\n\n  if (this.dom && this.dom.tr) {\n    this.updateError();\n  }\n};\n\n/**\n * Render the error\n */\nNode.prototype.updateError = function() {\n  var error = this.fieldError || this.valueError || this.error;\n  var tdError = this.dom.tdError;\n  if (error && this.dom && this.dom.tr) {\n    util.addClassName(this.dom.tr, 'jsoneditor-validation-error');\n\n    if (!tdError) {\n      tdError = document.createElement('td');\n      this.dom.tdError = tdError;\n      this.dom.tdValue.parentNode.appendChild(tdError);\n    }\n\n    var popover = document.createElement('div');\n    popover.className = 'jsoneditor-popover jsoneditor-right';\n    popover.appendChild(document.createTextNode(error.message));\n\n    var button = document.createElement('button');\n    button.type = 'button';\n    button.className = 'jsoneditor-button jsoneditor-schema-error';\n    button.appendChild(popover);\n\n    // update the direction of the popover\n    button.onmouseover = button.onfocus = function updateDirection() {\n      var directions = ['right', 'above', 'below', 'left'];\n      for (var i = 0; i < directions.length; i++) {\n        var direction = directions[i];\n        popover.className = 'jsoneditor-popover jsoneditor-' + direction;\n\n        var contentRect = this.editor.content.getBoundingClientRect();\n        var popoverRect = popover.getBoundingClientRect();\n        var margin = 20; // account for a scroll bar\n        var fit = util.insideRect(contentRect, popoverRect, margin);\n\n        if (fit) {\n          break;\n        }\n      }\n    }.bind(this);\n\n    // when clicking the error icon, expand all nodes towards the invalid\n    // child node, and set focus to the child node\n    var child = this.errorChild;\n    if (child) {\n      button.onclick = function showInvalidNode() {\n        child.findParents().forEach(function (parent) {\n          parent.expand(false);\n        });\n\n        child.scrollTo(function () {\n          child.focus();\n        });\n      };\n    }\n\n    // apply the error message to the node\n    while (tdError.firstChild) {\n      tdError.removeChild(tdError.firstChild);\n    }\n    tdError.appendChild(button);\n  }\n  else {\n    if (this.dom.tr) {\n      util.removeClassName(this.dom.tr, 'jsoneditor-validation-error');\n    }\n\n    if (tdError) {\n      this.dom.tdError.parentNode.removeChild(this.dom.tdError);\n      delete this.dom.tdError;\n    }\n  }\n};\n\n/**\n * Get the index of this node: the index in the list of childs where this\n * node is part of\n * @return {number | null} Returns the index, or null if this is the root node\n */\nNode.prototype.getIndex = function () {\n  if (this.parent) {\n    var index = this.parent.childs.indexOf(this);\n    return index !== -1 ? index : null;\n  }\n  else {\n    return -1;\n  }\n};\n\n/**\n * Set parent node\n * @param {Node} parent\n */\nNode.prototype.setParent = function(parent) {\n  this.parent = parent;\n};\n\n/**\n * Set field\n * @param {String}  field\n * @param {boolean} [fieldEditable]\n */\nNode.prototype.setField = function(field, fieldEditable) {\n  this.field = field;\n  this.previousField = field;\n  this.fieldEditable = (fieldEditable === true);\n};\n\n/**\n * Get field\n * @return {String}\n */\nNode.prototype.getField = function() {\n  if (this.field === undefined) {\n    this._getDomField();\n  }\n\n  return this.field;\n};\n\n/**\n * Set value. Value is a JSON structure or an element String, Boolean, etc.\n * @param {*} value\n * @param {String} [type]  Specify the type of the value. Can be 'auto',\n *                         'array', 'object', or 'string'\n */\nNode.prototype.setValue = function(value, type) {\n  var childValue, child, visible;\n  var i, j;\n  var notUpdateDom = false;\n  var previousChilds = this.childs;\n\n  this.type = this._getType(value);\n\n  // check if type corresponds with the provided type\n  if (type && type !== this.type) {\n    if (type === 'string' && this.type === 'auto') {\n      this.type = type;\n    }\n    else {\n      throw new Error('Type mismatch: ' +\n          'cannot cast value of type \"' + this.type +\n          ' to the specified type \"' + type + '\"');\n    }\n  }\n\n  if (this.type === 'array') {\n    // array\n    if (!this.childs) {\n      this.childs = [];\n    }\n\n    for (i = 0; i < value.length; i++) {\n      childValue = value[i];\n      if (childValue !== undefined && !(childValue instanceof Function)) {\n        if (i < this.childs.length) {\n          // reuse existing child, keep its state\n          child = this.childs[i];\n\n          child.fieldEditable = false;\n          child.index = i;\n          child.setValue(childValue);\n        }\n        else {\n          // create a new child\n          child = new Node(this.editor, {\n            value: childValue\n          });\n          visible = i < this.getMaxVisibleChilds();\n          this.appendChild(child, visible, notUpdateDom);\n        }\n      }\n    }\n\n    // cleanup redundant childs\n    // we loop backward to prevent issues with shifting index numbers\n    for (j = this.childs.length; j >= value.length; j--) {\n      this.removeChild(this.childs[j], notUpdateDom);\n    }\n  }\n  else if (this.type === 'object') {\n    // object\n    if (!this.childs) {\n      this.childs = [];\n    }\n\n    // cleanup redundant childs\n    // we loop backward to prevent issues with shifting index numbers\n    for (j = this.childs.length - 1; j >= 0; j--) {\n      if (!value.hasOwnProperty(this.childs[j].field)) {\n        this.removeChild(this.childs[j], notUpdateDom);\n      }\n    }\n\n    i = 0;\n    for (var childField in value) {\n      if (value.hasOwnProperty(childField)) {\n        childValue = value[childField];\n        if (childValue !== undefined && !(childValue instanceof Function)) {\n          child = this.findChildByProperty(childField);\n\n          if (child) {\n            // reuse existing child, keep its state\n            child.setField(childField, true);\n            child.setValue(childValue);\n          }\n          else {\n            // create a new child\n            child = new Node(this.editor, {\n              field: childField,\n              value: childValue\n            });\n            visible = i < this.getMaxVisibleChilds();\n            this.appendChild(child, visible, notUpdateDom);\n          }\n        }\n        i++;\n      }\n\n    }\n    this.value = '';\n\n    // sort object keys\n    if (this.editor.options.sortObjectKeys === true) {\n      this.sort([], 'asc');\n    }\n  }\n  else {\n    // value\n    this.hideChilds();\n\n    delete this.append;\n    delete this.showMore;\n    delete this.expanded;\n    delete this.childs;\n\n    this.value = value;\n  }\n\n  // recreate the DOM if switching from an object/array to auto/string or vice versa\n  // needed to recreated the expand button for example\n  if (Array.isArray(previousChilds) !== Array.isArray(this.childs)) {\n    this.recreateDom();\n  }\n\n  this.updateDom({'updateIndexes': true});\n\n  this.previousValue = this.value; // used only to check for changes in DOM vs JS model\n};\n\n/**\n * Set internal value\n * @param {*} internalValue  Internal value structure keeping type,\n *                           order and duplicates in objects\n */\nNode.prototype.setInternalValue = function(internalValue) {\n  var childValue, child, visible;\n  var i, j;\n  var notUpdateDom = false;\n  var previousChilds = this.childs;\n\n  this.type = internalValue.type;\n\n  if (internalValue.type === 'array') {\n    // array\n    if (!this.childs) {\n      this.childs = [];\n    }\n\n    for (i = 0; i < internalValue.childs.length; i++) {\n      childValue = internalValue.childs[i];\n      if (childValue !== undefined && !(childValue instanceof Function)) {\n        if (i < this.childs.length) {\n          // reuse existing child, keep its state\n          child = this.childs[i];\n\n          child.fieldEditable = false;\n          child.index = i;\n          child.setInternalValue(childValue);\n        }\n        else {\n          // create a new child\n          child = new Node(this.editor, {\n            internalValue: childValue\n          });\n          visible = i < this.getMaxVisibleChilds();\n          this.appendChild(child, visible, notUpdateDom);\n        }\n      }\n    }\n\n    // cleanup redundant childs\n    // we loop backward to prevent issues with shifting index numbers\n    for (j = this.childs.length; j >= internalValue.childs.length; j--) {\n      this.removeChild(this.childs[j], notUpdateDom);\n    }\n  }\n  else if (internalValue.type === 'object') {\n    // object\n    if (!this.childs) {\n      this.childs = [];\n    }\n\n    for (i = 0; i < internalValue.childs.length; i++) {\n      childValue = internalValue.childs[i];\n      if (childValue !== undefined && !(childValue instanceof Function)) {\n        if (i < this.childs.length) {\n          // reuse existing child, keep its state\n          child = this.childs[i];\n\n          delete child.index;\n          child.setField(childValue.field, true);\n          child.setInternalValue(childValue.value);\n        }\n        else {\n          // create a new child\n          child = new Node(this.editor, {\n            field: childValue.field,\n            internalValue: childValue.value\n          });\n          visible = i < this.getMaxVisibleChilds();\n          this.appendChild(child, visible, notUpdateDom);\n        }\n      }\n    }\n\n    // cleanup redundant childs\n    // we loop backward to prevent issues with shifting index numbers\n    for (j = this.childs.length; j >= internalValue.childs.length; j--) {\n      this.removeChild(this.childs[j], notUpdateDom);\n    }\n  }\n  else {\n    // value\n    this.hideChilds();\n\n    delete this.append;\n    delete this.showMore;\n    delete this.expanded;\n    delete this.childs;\n\n    this.value = internalValue.value;\n  }\n\n  // recreate the DOM if switching from an object/array to auto/string or vice versa\n  // needed to recreated the expand button for example\n  if (Array.isArray(previousChilds) !== Array.isArray(this.childs)) {\n    this.recreateDom();\n  }\n\n  this.updateDom({'updateIndexes': true});\n\n  this.previousValue = this.value; // used only to check for changes in DOM vs JS model\n};\n\n/**\n * Remove the DOM of this node and it's childs and recreate it again\n */\nNode.prototype.recreateDom = function() {\n  if (this.dom && this.dom.tr && this.dom.tr.parentNode) {\n    var domAnchor = this._detachFromDom();\n\n    this.clearDom();\n\n    this._attachToDom(domAnchor);\n  }\n  else {\n    this.clearDom();\n  }\n};\n\n/**\n * Get value. Value is a JSON structure\n * @return {*} value\n */\nNode.prototype.getValue = function() {\n  if (this.type == 'array') {\n    var arr = [];\n    this.childs.forEach (function (child) {\n      arr.push(child.getValue());\n    });\n    return arr;\n  }\n  else if (this.type == 'object') {\n    var obj = {};\n    this.childs.forEach (function (child) {\n      obj[child.getField()] = child.getValue();\n    });\n    return obj;\n  }\n  else {\n    if (this.value === undefined) {\n      this._getDomValue();\n    }\n\n    return this.value;\n  }\n};\n\n/**\n * Get internal value, a structure which maintains ordering and duplicates in objects\n * @return {*} value\n */\nNode.prototype.getInternalValue = function() {\n  if (this.type === 'array') {\n    return {\n      type: this.type,\n      childs: this.childs.map (function (child) {\n        return child.getInternalValue();\n      })\n    };\n  }\n  else if (this.type === 'object') {\n    return {\n      type: this.type,\n      childs: this.childs.map(function (child) {\n        return {\n          field: child.getField(),\n          value: child.getInternalValue()\n        }\n      })\n    };\n  }\n  else {\n    if (this.value === undefined) {\n      this._getDomValue();\n    }\n\n    return {\n      type: this.type,\n      value: this.value\n    };\n  }\n};\n\n/**\n * Get the nesting level of this node\n * @return {Number} level\n */\nNode.prototype.getLevel = function() {\n  return (this.parent ? this.parent.getLevel() + 1 : 0);\n};\n\n/**\n * Get jsonpath of the current node\n * @return {Node[]} Returns an array with nodes\n */\nNode.prototype.getNodePath = function () {\n  var path = this.parent ? this.parent.getNodePath() : [];\n  path.push(this);\n  return path;\n};\n\n/**\n * Create a clone of a node\n * The complete state of a clone is copied, including whether it is expanded or\n * not. The DOM elements are not cloned.\n * @return {Node} clone\n */\nNode.prototype.clone = function() {\n  var clone = new Node(this.editor);\n  clone.type = this.type;\n  clone.field = this.field;\n  clone.fieldInnerText = this.fieldInnerText;\n  clone.fieldEditable = this.fieldEditable;\n  clone.previousField = this.previousField;\n  clone.value = this.value;\n  clone.valueInnerText = this.valueInnerText;\n  clone.previousValue = this.previousValue;\n  clone.expanded = this.expanded;\n  clone.visibleChilds = this.visibleChilds;\n\n  if (this.childs) {\n    // an object or array\n    var cloneChilds = [];\n    this.childs.forEach(function (child) {\n      var childClone = child.clone();\n      childClone.setParent(clone);\n      cloneChilds.push(childClone);\n    });\n    clone.childs = cloneChilds;\n  }\n  else {\n    // a value\n    clone.childs = undefined;\n  }\n\n  return clone;\n};\n\n/**\n * Expand this node and optionally its childs.\n * @param {boolean} [recurse] Optional recursion, true by default. When\n *                            true, all childs will be expanded recursively\n */\nNode.prototype.expand = function(recurse) {\n  if (!this.childs) {\n    return;\n  }\n\n  // set this node expanded\n  this.expanded = true;\n  if (this.dom.expand) {\n    this.dom.expand.className = 'jsoneditor-button jsoneditor-expanded';\n  }\n\n  this.showChilds();\n\n  if (recurse !== false) {\n    this.childs.forEach(function (child) {\n      child.expand(recurse);\n    });\n  }\n};\n\n/**\n * Collapse this node and optionally its childs.\n * @param {boolean} [recurse] Optional recursion, true by default. When\n *                            true, all childs will be collapsed recursively\n */\nNode.prototype.collapse = function(recurse) {\n  if (!this.childs) {\n    return;\n  }\n\n  this.hideChilds();\n\n  // collapse childs in case of recurse\n  if (recurse !== false) {\n    this.childs.forEach(function (child) {\n      child.collapse(recurse);\n    });\n\n  }\n\n  // make this node collapsed\n  if (this.dom.expand) {\n    this.dom.expand.className = 'jsoneditor-button jsoneditor-collapsed';\n  }\n  this.expanded = false;\n};\n\n/**\n * Recursively show all childs when they are expanded\n */\nNode.prototype.showChilds = function() {\n  var childs = this.childs;\n  if (!childs) {\n    return;\n  }\n  if (!this.expanded) {\n    return;\n  }\n\n  var tr = this.dom.tr;\n  var table = tr ? tr.parentNode : undefined;\n  if (table) {\n    // show row with append button\n    var append = this.getAppendDom();\n    if (!append.parentNode) {\n      var nextTr = tr.nextSibling;\n      if (nextTr) {\n        table.insertBefore(append, nextTr);\n      }\n      else {\n        table.appendChild(append);\n      }\n    }\n\n    // show childs\n    var iMax = Math.min(this.childs.length, this.visibleChilds);\n    var nextTr = this._getNextTr();\n    for (var i = 0; i < iMax; i++) {\n      var child = this.childs[i];\n      if (!child.getDom().parentNode) {\n        table.insertBefore(child.getDom(), nextTr);\n      }\n      child.showChilds();\n    }\n\n    // show \"show more childs\" if limited\n    var showMore = this.getShowMoreDom();\n    var nextTr = this._getNextTr();\n    if (!showMore.parentNode) {\n      table.insertBefore(showMore, nextTr);\n    }\n    this.showMore.updateDom(); // to update the counter\n  }\n};\n\nNode.prototype._getNextTr = function() {\n  if (this.showMore && this.showMore.getDom().parentNode) {\n    return this.showMore.getDom();\n  }\n\n  if (this.append && this.append.getDom().parentNode) {\n    return this.append.getDom();\n  }\n};\n\n/**\n * Hide the node with all its childs\n * @param {{resetVisibleChilds: boolean}} [options]\n */\nNode.prototype.hide = function(options) {\n  var tr = this.dom.tr;\n  var table = tr ? tr.parentNode : undefined;\n  if (table) {\n    table.removeChild(tr);\n  }\n  this.hideChilds(options);\n};\n\n\n/**\n * Recursively hide all childs\n * @param {{resetVisibleChilds: boolean}} [options]\n */\nNode.prototype.hideChilds = function(options) {\n  var childs = this.childs;\n  if (!childs) {\n    return;\n  }\n  if (!this.expanded) {\n    return;\n  }\n\n  // hide append row\n  var append = this.getAppendDom();\n  if (append.parentNode) {\n    append.parentNode.removeChild(append);\n  }\n\n  // hide childs\n  this.childs.forEach(function (child) {\n    child.hide();\n  });\n\n  // hide \"show more\" row\n  var showMore = this.getShowMoreDom();\n  if (showMore.parentNode) {\n    showMore.parentNode.removeChild(showMore);\n  }\n\n  // reset max visible childs\n  if (!options || options.resetVisibleChilds) {\n    this.visibleChilds = this.getMaxVisibleChilds();\n  }\n};\n\n/**\n * set custom css classes on a node\n */\nNode.prototype._updateCssClassName = function () {\n  if(this.dom.field\n    && this.editor\n    && this.editor.options\n    && typeof this.editor.options.onClassName ==='function'\n    && this.dom.tree){\n      util.removeAllClassNames(this.dom.tree);\n      var addClasses = this.editor.options.onClassName({ path: this.getPath(), field: this.field, value: this.value }) || \"\";\n      util.addClassName(this.dom.tree, \"jsoneditor-values \" + addClasses);\n  }\n};\n\nNode.prototype.recursivelyUpdateCssClassesOnNodes = function () {\n  this._updateCssClassName();\n  if (Array.isArray(this.childs)) {\n    for (var i = 0; i < this.childs.length; i++) {\n      this.childs[i].recursivelyUpdateCssClassesOnNodes();\n    }\n  }\n}\n\n/**\n * Goes through the path from the node to the root and ensures that it is expanded\n */\nNode.prototype.expandTo = function() {\n  var currentNode = this.parent;\n  while (currentNode) {\n    if (!currentNode.expanded) {\n      currentNode.expand();\n    }\n    currentNode = currentNode.parent;\n  }\n};\n\n\n/**\n * Add a new child to the node.\n * Only applicable when Node value is of type array or object\n * @param {Node} node\n * @param {boolean} [visible] If true (default), the child will be rendered\n * @param {boolean} [updateDom]  If true (default), the DOM of both parent\n *                               node and appended node will be updated\n *                               (child count, indexes)\n */\nNode.prototype.appendChild = function(node, visible, updateDom) {\n  if (this._hasChilds()) {\n    // adjust the link to the parent\n    node.setParent(this);\n    node.fieldEditable = (this.type == 'object');\n    if (this.type == 'array') {\n      node.index = this.childs.length;\n    }\n    if (this.type === 'object' && node.field == undefined) {\n      // initialize field value if needed\n      node.setField('');\n    }\n    this.childs.push(node);\n\n    if (this.expanded && visible !== false) {\n      // insert into the DOM, before the appendRow\n      var newTr = node.getDom();\n      var nextTr = this._getNextTr();\n      var table = nextTr ? nextTr.parentNode : undefined;\n      if (nextTr && table) {\n        table.insertBefore(newTr, nextTr);\n      }\n\n      node.showChilds();\n\n      this.visibleChilds++;\n    }\n\n    if (updateDom !== false) {\n      this.updateDom({'updateIndexes': true});\n      node.updateDom({'recurse': true});\n    }\n  }\n};\n\n\n/**\n * Move a node from its current parent to this node\n * Only applicable when Node value is of type array or object\n * @param {Node} node\n * @param {Node} beforeNode\n */\nNode.prototype.moveBefore = function(node, beforeNode) {\n  if (this._hasChilds()) {\n    // create a temporary row, to prevent the scroll position from jumping\n    // when removing the node\n    var tbody = (this.dom.tr) ? this.dom.tr.parentNode : undefined;\n    if (tbody) {\n      var trTemp = document.createElement('tr');\n      trTemp.style.height = tbody.clientHeight + 'px';\n      tbody.appendChild(trTemp);\n    }\n\n    if (node.parent) {\n      node.parent.removeChild(node);\n    }\n\n    if (beforeNode instanceof AppendNode || !beforeNode) {\n      // the this.childs.length + 1 is to reckon with the node that we're about to add\n      if (this.childs.length + 1 > this.visibleChilds) {\n        var lastVisibleNode = this.childs[this.visibleChilds - 1];\n        this.insertBefore(node, lastVisibleNode);\n      }\n      else {\n        this.appendChild(node);\n      }\n    }\n    else {\n      this.insertBefore(node, beforeNode);\n    }\n\n    if (tbody) {\n      tbody.removeChild(trTemp);\n    }\n  }\n};\n\n/**\n * Insert a new child before a given node\n * Only applicable when Node value is of type array or object\n * @param {Node} node\n * @param {Node} beforeNode\n */\nNode.prototype.insertBefore = function(node, beforeNode) {\n  if (this._hasChilds()) {\n    this.visibleChilds++;\n\n    // initialize field value if needed\n    if (this.type === 'object' && node.field == undefined) {\n      node.setField('');\n    }\n\n    if (beforeNode === this.append) {\n      // append to the child nodes\n\n      // adjust the link to the parent\n      node.setParent(this);\n      node.fieldEditable = (this.type == 'object');\n      this.childs.push(node);\n    }\n    else {\n      // insert before a child node\n      var index = this.childs.indexOf(beforeNode);\n      if (index == -1) {\n        throw new Error('Node not found');\n      }\n\n      // adjust the link to the parent\n      node.setParent(this);\n      node.fieldEditable = (this.type == 'object');\n      this.childs.splice(index, 0, node);\n    }\n\n    if (this.expanded) {\n      // insert into the DOM\n      var newTr = node.getDom();\n      var nextTr = beforeNode.getDom();\n      var table = nextTr ? nextTr.parentNode : undefined;\n      if (nextTr && table) {\n        table.insertBefore(newTr, nextTr);\n      }\n\n      node.showChilds();\n      this.showChilds();\n    }\n\n    this.updateDom({'updateIndexes': true});\n    node.updateDom({'recurse': true});\n  }\n};\n\n/**\n * Insert a new child before a given node\n * Only applicable when Node value is of type array or object\n * @param {Node} node\n * @param {Node} afterNode\n */\nNode.prototype.insertAfter = function(node, afterNode) {\n  if (this._hasChilds()) {\n    var index = this.childs.indexOf(afterNode);\n    var beforeNode = this.childs[index + 1];\n    if (beforeNode) {\n      this.insertBefore(node, beforeNode);\n    }\n    else {\n      this.appendChild(node);\n    }\n  }\n};\n\n/**\n * Search in this node\n * Searches are case insensitive.\n * @param {String} text\n * @param {Node[]} [results] Array where search results will be added\n *                           used to count and limit the results whilst iterating\n * @return {Node[]} results  Array with nodes containing the search text\n */\nNode.prototype.search = function(text, results) {\n  if (!Array.isArray(results)) {\n    results = [];\n  }\n  var index;\n  var search = text ? text.toLowerCase() : undefined;\n\n  // delete old search data\n  delete this.searchField;\n  delete this.searchValue;\n\n  // search in field\n  if (this.field !== undefined && results.length <= this.MAX_SEARCH_RESULTS) {\n    var field = String(this.field).toLowerCase();\n    index = field.indexOf(search);\n    if (index !== -1) {\n      this.searchField = true;\n      results.push({\n        'node': this,\n        'elem': 'field'\n      });\n    }\n\n    // update dom\n    this._updateDomField();\n  }\n\n  // search in value\n  if (this._hasChilds()) {\n    // array, object\n\n    // search the nodes childs\n    if (this.childs) {\n      this.childs.forEach(function (child) {\n        child.search(text, results);\n      });\n    }\n  }\n  else {\n    // string, auto\n    if (this.value !== undefined  && results.length <= this.MAX_SEARCH_RESULTS) {\n      var value = String(this.value).toLowerCase();\n      index = value.indexOf(search);\n      if (index !== -1) {\n        this.searchValue = true;\n        results.push({\n          'node': this,\n          'elem': 'value'\n        });\n      }\n\n      // update dom\n      this._updateDomValue();\n    }\n  }\n\n  return results;\n};\n\n/**\n * Move the scroll position such that this node is in the visible area.\n * The node will not get the focus\n * @param {function(boolean)} [callback]\n */\nNode.prototype.scrollTo = function(callback) {\n  this.expandPathToNode();\n\n  if (this.dom.tr && this.dom.tr.parentNode) {\n    this.editor.scrollTo(this.dom.tr.offsetTop, callback);\n  }\n};\n\n/**\n * if the node is not visible, expand its parents\n */\nNode.prototype.expandPathToNode = function () {\n  var node = this;\n  var recurse = false;\n  while (node && node.parent) {\n    // expand visible childs of the parent if needed\n    var index = node.parent.type === 'array'\n        ? node.index\n        : node.parent.childs.indexOf(node);\n    while (node.parent.visibleChilds < index + 1) {\n      node.parent.visibleChilds += this.getMaxVisibleChilds();\n    }\n\n    // expand the parent itself\n    node.parent.expand(recurse);\n    node = node.parent;\n  }\n};\n\n\n// stores the element name currently having the focus\nNode.focusElement = undefined;\n\n/**\n * Set focus to this node\n * @param {String} [elementName]  The field name of the element to get the\n *                                focus available values: 'drag', 'menu',\n *                                'expand', 'field', 'value' (default)\n */\nNode.prototype.focus = function(elementName) {\n  Node.focusElement = elementName;\n\n  if (this.dom.tr && this.dom.tr.parentNode) {\n    var dom = this.dom;\n\n    switch (elementName) {\n      case 'drag':\n        if (dom.drag) {\n          dom.drag.focus();\n        }\n        else {\n          dom.menu.focus();\n        }\n        break;\n\n      case 'menu':\n        dom.menu.focus();\n        break;\n\n      case 'expand':\n        if (this._hasChilds()) {\n          dom.expand.focus();\n        }\n        else if (dom.field && this.fieldEditable) {\n          dom.field.focus();\n          util.selectContentEditable(dom.field);\n        }\n        else if (dom.value && !this._hasChilds()) {\n          dom.value.focus();\n          util.selectContentEditable(dom.value);\n        }\n        else {\n          dom.menu.focus();\n        }\n        break;\n\n      case 'field':\n        if (dom.field && this.fieldEditable) {\n          dom.field.focus();\n          util.selectContentEditable(dom.field);\n        }\n        else if (dom.value && !this._hasChilds()) {\n          dom.value.focus();\n          util.selectContentEditable(dom.value);\n        }\n        else if (this._hasChilds()) {\n          dom.expand.focus();\n        }\n        else {\n          dom.menu.focus();\n        }\n        break;\n\n      case 'value':\n      default:\n        if (dom.select) {\n          // enum select box\n          dom.select.focus();\n        }\n        else if (dom.value && !this._hasChilds()) {\n          dom.value.focus();\n          util.selectContentEditable(dom.value);\n        }\n        else if (dom.field && this.fieldEditable) {\n          dom.field.focus();\n          util.selectContentEditable(dom.field);\n        }\n        else if (this._hasChilds()) {\n          dom.expand.focus();\n        }\n        else {\n          dom.menu.focus();\n        }\n        break;\n    }\n  }\n};\n\n/**\n * Select all text in an editable div after a delay of 0 ms\n * @param {Element} editableDiv\n */\nNode.select = function(editableDiv) {\n  setTimeout(function () {\n    util.selectContentEditable(editableDiv);\n  }, 0);\n};\n\n/**\n * Check if given node is a child. The method will check recursively to find\n * this node.\n * @param {Node} node\n * @return {boolean} containsNode\n */\nNode.prototype.containsNode = function(node) {\n  if (this == node) {\n    return true;\n  }\n\n  var childs = this.childs;\n  if (childs) {\n    // TODO: use the js5 Array.some() here?\n    for (var i = 0, iMax = childs.length; i < iMax; i++) {\n      if (childs[i].containsNode(node)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n\n/**\n * Remove a child from the node.\n * Only applicable when Node value is of type array or object\n * @param {Node} node   The child node to be removed;\n * @param {boolean} [updateDom]  If true (default), the DOM of the parent\n *                               node will be updated (like child count)\n * @return {Node | undefined} node  The removed node on success,\n *                                             else undefined\n */\nNode.prototype.removeChild = function(node, updateDom) {\n  if (this.childs) {\n    var index = this.childs.indexOf(node);\n\n    if (index !== -1) {\n      if (index < this.visibleChilds && this.expanded) {\n        this.visibleChilds--;\n      }\n\n      node.hide();\n\n      // delete old search results\n      delete node.searchField;\n      delete node.searchValue;\n\n      var removedNode = this.childs.splice(index, 1)[0];\n      removedNode.parent = null;\n\n      if (updateDom !== false) {\n        this.updateDom({'updateIndexes': true});\n      }\n\n      return removedNode;\n    }\n  }\n\n  return undefined;\n};\n\n/**\n * Remove a child node node from this node\n * This method is equal to Node.removeChild, except that _remove fire an\n * onChange event.\n * @param {Node} node\n * @private\n */\nNode.prototype._remove = function (node) {\n  this.removeChild(node);\n};\n\n/**\n * Change the type of the value of this Node\n * @param {String} newType\n */\nNode.prototype.changeType = function (newType) {\n  var oldType = this.type;\n\n  if (oldType == newType) {\n    // type is not changed\n    return;\n  }\n\n  if ((newType == 'string' || newType == 'auto') &&\n      (oldType == 'string' || oldType == 'auto')) {\n    // this is an easy change\n    this.type = newType;\n  }\n  else {\n    // change from array to object, or from string/auto to object/array\n    var domAnchor = this._detachFromDom();\n\n    // delete the old DOM\n    this.clearDom();\n\n    // adjust the field and the value\n    this.type = newType;\n\n    // adjust childs\n    if (newType == 'object') {\n      if (!this.childs) {\n        this.childs = [];\n      }\n\n      this.childs.forEach(function (child) {\n        child.clearDom();\n        delete child.index;\n        child.fieldEditable = true;\n        if (child.field == undefined) {\n          child.field = '';\n        }\n      });\n\n      if (oldType == 'string' || oldType == 'auto') {\n        this.expanded = true;\n      }\n    }\n    else if (newType == 'array') {\n      if (!this.childs) {\n        this.childs = [];\n      }\n\n      this.childs.forEach(function (child, index) {\n        child.clearDom();\n        child.fieldEditable = false;\n        child.index = index;\n      });\n\n      if (oldType == 'string' || oldType == 'auto') {\n        this.expanded = true;\n      }\n    }\n    else {\n      this.expanded = false;\n    }\n\n    this._attachToDom(domAnchor);\n  }\n\n  if (newType == 'auto' || newType == 'string') {\n    // cast value to the correct type\n    if (newType == 'string') {\n      this.value = String(this.value);\n    }\n    else {\n      this.value = util.parseString(String(this.value));\n    }\n\n    this.focus();\n  }\n\n  this.updateDom({'updateIndexes': true});\n};\n\n/**\n * Test whether the JSON contents of this node are deep equal to provided JSON object.\n * @param {*} json\n */\nNode.prototype.deepEqual = function (json) {\n  var i;\n\n  if (this.type === 'array') {\n    if (!Array.isArray(json)) {\n      return false;\n    }\n\n    if (this.childs.length !== json.length) {\n      return false;\n    }\n\n    for (i = 0; i < this.childs.length; i++) {\n      if (!this.childs[i].deepEqual(json[i])) {\n        return false;\n      }\n    }\n  }\n  else if (this.type === 'object') {\n    if (typeof json !== 'object' || !json) {\n      return false;\n    }\n\n    // TODO: for better efficiency, we could create a property `isDuplicate` on all of the childs\n    // and keep that up to date. This should make deepEqual about 20% faster.\n    var props = {};\n    var propCount = 0;\n    for (i = 0; i < this.childs.length; i++) {\n      var child = this.childs[i];\n      if (!props[child.field]) {\n        // We can have childs with duplicate field names.\n        // We take the first, and ignore the others.\n        props[child.field] = true;\n        propCount++;\n\n        if (!(child.field in json)) {\n          return false;\n        }\n\n        if (!child.deepEqual(json[child.field])) {\n          return false;\n        }\n      }\n    }\n\n    if (propCount !== Object.keys(json).length) {\n      return false;\n    }\n  }\n  else {\n    if (this.value !== json) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * Retrieve value from DOM\n * @private\n */\nNode.prototype._getDomValue = function() {\n  this._clearValueError();\n\n  if (this.dom.value && this.type != 'array' && this.type != 'object') {\n    this.valueInnerText = util.getInnerText(this.dom.value);\n  }\n\n  if (this.valueInnerText != undefined) {\n    try {\n      // retrieve the value\n      var value;\n      if (this.type == 'string') {\n        value = this._unescapeHTML(this.valueInnerText);\n      }\n      else {\n        var str = this._unescapeHTML(this.valueInnerText);\n        value = util.parseString(str);\n      }\n      if (value !== this.value) {\n        this.value = value;\n        this._debouncedOnChangeValue();\n      }\n    }\n    catch (err) {\n      // keep the previous value\n      this._setValueError(translate('cannotParseValueError'));\n    }\n  }\n};\n\n/**\n * Show a local error in case of invalid value\n * @param {string} message\n * @private\n */\nNode.prototype._setValueError = function (message) {\n  this.valueError = {\n    message: message\n  };\n  this.updateError();\n}\n\nNode.prototype._clearValueError = function () {\n  if (this.valueError) {\n    this.valueError = null;\n    this.updateError();\n  }\n}\n\n/**\n * Show a local error in case of invalid or duplicate field\n * @param {string} message\n * @private\n */\nNode.prototype._setFieldError = function (message) {\n  this.fieldError = {\n    message: message\n  };\n  this.updateError();\n}\n\nNode.prototype._clearFieldError = function () {\n  if (this.fieldError) {\n    this.fieldError = null;\n    this.updateError();\n  }\n}\n\n/**\n * Handle a changed value\n * @private\n */\nNode.prototype._onChangeValue = function () {\n  // get current selection, then override the range such that we can select\n  // the added/removed text on undo/redo\n  var oldSelection = this.editor.getDomSelection();\n  if (oldSelection.range) {\n    var undoDiff = util.textDiff(String(this.value), String(this.previousValue));\n    oldSelection.range.startOffset = undoDiff.start;\n    oldSelection.range.endOffset = undoDiff.end;\n  }\n  var newSelection = this.editor.getDomSelection();\n  if (newSelection.range) {\n    var redoDiff = util.textDiff(String(this.previousValue), String(this.value));\n    newSelection.range.startOffset = redoDiff.start;\n    newSelection.range.endOffset = redoDiff.end;\n  }\n\n  this.editor._onAction('editValue', {\n    path: this.getInternalPath(),\n    oldValue: this.previousValue,\n    newValue: this.value,\n    oldSelection: oldSelection,\n    newSelection: newSelection\n  });\n\n  this.previousValue = this.value;\n};\n\n/**\n * Handle a changed field\n * @private\n */\nNode.prototype._onChangeField = function () {\n  // get current selection, then override the range such that we can select\n  // the added/removed text on undo/redo\n  var oldSelection = this.editor.getDomSelection();\n  var previous = this.previousField || '';\n  if (oldSelection.range) {\n    var undoDiff = util.textDiff(this.field, previous);\n    oldSelection.range.startOffset = undoDiff.start;\n    oldSelection.range.endOffset = undoDiff.end;\n  }\n  var newSelection = this.editor.getDomSelection();\n  if (newSelection.range) {\n    var redoDiff = util.textDiff(previous, this.field);\n    newSelection.range.startOffset = redoDiff.start;\n    newSelection.range.endOffset = redoDiff.end;\n  }\n\n  this.editor._onAction('editField', {\n    parentPath: this.parent.getInternalPath(),\n    index: this.getIndex(),\n    oldValue: this.previousField,\n    newValue: this.field,\n    oldSelection: oldSelection,\n    newSelection: newSelection\n  });\n\n  this.previousField = this.field;\n};\n\n/**\n * Update dom value:\n * - the text color of the value, depending on the type of the value\n * - the height of the field, depending on the width\n * - background color in case it is empty\n * @private\n */\nNode.prototype._updateDomValue = function () {\n  var domValue = this.dom.value;\n  if (domValue) {\n    var classNames = ['jsoneditor-value'];\n\n    // set text color depending on value type\n    var value = this.value;\n    var type = (this.type == 'auto') ? util.type(value) : this.type;\n    var isUrl = type == 'string' && util.isUrl(value);\n    classNames.push('jsoneditor-' + type);\n    if (isUrl) {\n      classNames.push('jsoneditor-url');\n    }\n\n    // visual styling when empty\n    var isEmpty = (String(this.value) == '' && this.type != 'array' && this.type != 'object');\n    if (isEmpty) {\n      classNames.push('jsoneditor-empty');\n    }\n\n    // highlight when there is a search result\n    if (this.searchValueActive) {\n      classNames.push('jsoneditor-highlight-active');\n    }\n    if (this.searchValue) {\n      classNames.push('jsoneditor-highlight');\n    }\n\n    domValue.className = classNames.join(' ');\n\n    // update title\n    if (type == 'array' || type == 'object') {\n      var count = this.childs ? this.childs.length : 0;\n      domValue.title = this.type + ' containing ' + count + ' items';\n    }\n    else if (isUrl && this.editable.value) {\n      domValue.title = translate('openUrl');\n    }\n    else {\n      domValue.title = '';\n    }\n\n    // show checkbox when the value is a boolean\n    if (type === 'boolean' && this.editable.value) {\n      if (!this.dom.checkbox) {\n        this.dom.checkbox = document.createElement('input');\n        this.dom.checkbox.type = 'checkbox';\n        this.dom.tdCheckbox = document.createElement('td');\n        this.dom.tdCheckbox.className = 'jsoneditor-tree';\n        this.dom.tdCheckbox.appendChild(this.dom.checkbox);\n\n        this.dom.tdValue.parentNode.insertBefore(this.dom.tdCheckbox, this.dom.tdValue);\n      }\n\n      this.dom.checkbox.checked = this.value;\n    }\n    else {\n      // cleanup checkbox when displayed\n      if (this.dom.tdCheckbox) {\n        this.dom.tdCheckbox.parentNode.removeChild(this.dom.tdCheckbox);\n        delete this.dom.tdCheckbox;\n        delete this.dom.checkbox;\n      }\n    }\n\n    // create select box when this node has an enum object\n    if (this.enum && this.editable.value) {\n      if (!this.dom.select) {\n        this.dom.select = document.createElement('select');\n        this.id = this.field + \"_\" + new Date().getUTCMilliseconds();\n        this.dom.select.id = this.id;\n        this.dom.select.name = this.dom.select.id;\n\n        //Create the default empty option\n        this.dom.select.option = document.createElement('option');\n        this.dom.select.option.value = '';\n        this.dom.select.option.innerHTML = '--';\n        this.dom.select.appendChild(this.dom.select.option);\n\n        //Iterate all enum values and add them as options\n        for(var i = 0; i < this.enum.length; i++) {\n          this.dom.select.option = document.createElement('option');\n          this.dom.select.option.value = this.enum[i];\n          this.dom.select.option.innerHTML = this.enum[i];\n          if(this.dom.select.option.value == this.value){\n            this.dom.select.option.selected = true;\n          }\n          this.dom.select.appendChild(this.dom.select.option);\n        }\n\n        this.dom.tdSelect = document.createElement('td');\n        this.dom.tdSelect.className = 'jsoneditor-tree';\n        this.dom.tdSelect.appendChild(this.dom.select);\n        this.dom.tdValue.parentNode.insertBefore(this.dom.tdSelect, this.dom.tdValue);\n      }\n\n      // If the enum is inside a composite type display\n      // both the simple input and the dropdown field\n      if(this.schema && (\n          !this.schema.hasOwnProperty(\"oneOf\") &&\n          !this.schema.hasOwnProperty(\"anyOf\") &&\n          !this.schema.hasOwnProperty(\"allOf\"))\n      ) {\n        this.valueFieldHTML = this.dom.tdValue.innerHTML;\n        this.dom.tdValue.style.visibility = 'hidden';\n        this.dom.tdValue.innerHTML = '';\n      } else {\n        delete this.valueFieldHTML;\n      }\n    }\n    else {\n      // cleanup select box when displayed\n      if (this.dom.tdSelect) {\n        this.dom.tdSelect.parentNode.removeChild(this.dom.tdSelect);\n        delete this.dom.tdSelect;\n        delete this.dom.select;\n        this.dom.tdValue.innerHTML = this.valueFieldHTML;\n        this.dom.tdValue.style.visibility = '';\n        delete this.valueFieldHTML;\n      }\n    }\n\n    // show color picker when value is a color\n    if (this.editable.value &&\n        this.editor.options.colorPicker &&\n        typeof value === 'string' &&\n        util.isValidColor(value)) {\n\n      if (!this.dom.color) {\n        this.dom.color = document.createElement('div');\n        this.dom.color.className = 'jsoneditor-color';\n\n        this.dom.tdColor = document.createElement('td');\n        this.dom.tdColor.className = 'jsoneditor-tree';\n        this.dom.tdColor.appendChild(this.dom.color);\n\n        this.dom.tdValue.parentNode.insertBefore(this.dom.tdColor, this.dom.tdValue);\n\n        // this is a bit hacky, overriding the text color like this. find a nicer solution\n        this.dom.value.style.color = '#1A1A1A';\n      }\n\n      // update the color background\n      this.dom.color.style.backgroundColor = value;\n    }\n    else {\n      // cleanup color picker when displayed\n      this._deleteDomColor();\n    }\n\n    // show date tag when value is a timestamp in milliseconds\n    if (this.editor.options.timestampTag &&\n        typeof value === 'number' &&\n        value > YEAR_2000 &&\n        !isNaN(new Date(value).valueOf())) {\n\n      if (!this.dom.date) {\n        this.dom.date = document.createElement('div');\n        this.dom.date.className = 'jsoneditor-date'\n        this.dom.value.parentNode.appendChild(this.dom.date);\n      }\n\n      this.dom.date.innerHTML = new Date(value).toISOString();\n      this.dom.date.title = new Date(value).toString();\n    }\n    else {\n      // cleanup date tag\n      if (this.dom.date) {\n        this.dom.date.parentNode.removeChild(this.dom.date);\n        delete this.dom.date;\n      }\n    }\n\n    // strip formatting from the contents of the editable div\n    util.stripFormatting(domValue);\n\n    this._updateDomDefault();\n  }\n};\n\nNode.prototype._deleteDomColor = function () {\n  if (this.dom.color) {\n    this.dom.tdColor.parentNode.removeChild(this.dom.tdColor);\n    delete this.dom.tdColor;\n    delete this.dom.color;\n\n    this.dom.value.style.color = '';\n  }\n}\n\n/**\n * Update dom field:\n * - the text color of the field, depending on the text\n * - the height of the field, depending on the width\n * - background color in case it is empty\n * @private\n */\nNode.prototype._updateDomField = function () {\n  var domField = this.dom.field;\n  if (domField) {\n    var tooltip = util.makeFieldTooltip(this.schema, this.editor.options.language);\n    if (tooltip) {\n      domField.title = tooltip;\n    }\n\n    // make backgound color lightgray when empty\n    var isEmpty = (String(this.field) == '' && this.parent.type != 'array');\n    if (isEmpty) {\n      util.addClassName(domField, 'jsoneditor-empty');\n    }\n    else {\n      util.removeClassName(domField, 'jsoneditor-empty');\n    }\n\n    // highlight when there is a search result\n    if (this.searchFieldActive) {\n      util.addClassName(domField, 'jsoneditor-highlight-active');\n    }\n    else {\n      util.removeClassName(domField, 'jsoneditor-highlight-active');\n    }\n    if (this.searchField) {\n      util.addClassName(domField, 'jsoneditor-highlight');\n    }\n    else {\n      util.removeClassName(domField, 'jsoneditor-highlight');\n    }\n\n    // strip formatting from the contents of the editable div\n    util.stripFormatting(domField);\n  }\n};\n\n/**\n * Retrieve field from DOM\n * @param {boolean} [forceUnique]  If true, the field name will be changed\n *                                 into a unique name in case it is a duplicate.\n * @private\n */\nNode.prototype._getDomField = function(forceUnique) {\n  this._clearFieldError();\n\n  if (this.dom.field && this.fieldEditable) {\n    this.fieldInnerText = util.getInnerText(this.dom.field);\n  }\n\n  if (this.fieldInnerText !== undefined) {\n    try {\n      var field = this._unescapeHTML(this.fieldInnerText);\n\n      var existingFieldNames = this.parent.getFieldNames(this);\n      var isDuplicate = existingFieldNames.indexOf(field) !== -1;\n\n      if (!isDuplicate) {\n        if (field !== this.field) {\n          this.field = field;\n          this._debouncedOnChangeField();\n        }\n      }\n      else {\n        if (forceUnique) {\n          // fix duplicate field: change it into a unique name\n          field = util.findUniqueName(field, existingFieldNames);\n          if (field !== this.field) {\n            this.field = field;\n\n            // TODO: don't debounce but resolve right away, and cancel current debounce\n            this._debouncedOnChangeField();\n          }\n        }\n        else {\n          this._setFieldError(translate('duplicateFieldError'));\n        }\n      }\n    }\n    catch (err) {\n      // keep the previous field value\n      this._setFieldError(translate('cannotParseFieldError'));\n    }\n  }\n};\n\n/**\n * Update the value of the schema default element in the DOM.\n * @private\n * @returns {undefined}\n */\nNode.prototype._updateDomDefault = function () {\n  // Short-circuit if schema is missing, has no default, or if Node has children\n  if (!this.schema || this.schema.default === undefined || this._hasChilds()) {\n    return;\n  }\n\n  // select either enum dropdown (select) or input value\n  var inputElement = this.dom.select\n      ? this.dom.select\n      : this.dom.value;\n\n  if (!inputElement) {\n    return;\n  }\n\n  if (this.value === this.schema.default) {\n    inputElement.title = translate('default');\n    util.addClassName(inputElement, 'jsoneditor-is-default');\n    util.removeClassName(inputElement, 'jsoneditor-is-not-default');\n  } else {\n    inputElement.removeAttribute('title');\n    util.removeClassName(inputElement, 'jsoneditor-is-default');\n    util.addClassName(inputElement, 'jsoneditor-is-not-default');\n  }\n};\n\n/**\n * Clear the dom of the node\n */\nNode.prototype.clearDom = function() {\n  // TODO: hide the node first?\n  //this.hide();\n  // TODO: recursively clear dom?\n\n  this.dom = {};\n};\n\n/**\n * Get the HTML DOM TR element of the node.\n * The dom will be generated when not yet created\n * @return {Element} tr    HTML DOM TR Element\n */\nNode.prototype.getDom = function() {\n  var dom = this.dom;\n  if (dom.tr) {\n    return dom.tr;\n  }\n\n  this._updateEditability();\n\n  // create row\n  dom.tr = document.createElement('tr');\n  dom.tr.node = this;\n\n  if (this.editor.options.mode === 'tree') { // note: we take here the global setting\n    var tdDrag = document.createElement('td');\n    if (this.editable.field) {\n      // create draggable area\n      if (this.parent) {\n        var domDrag = document.createElement('button');\n        domDrag.type = 'button';\n        dom.drag = domDrag;\n        domDrag.className = 'jsoneditor-button jsoneditor-dragarea';\n        domDrag.title = translate('drag');\n        tdDrag.appendChild(domDrag);\n      }\n    }\n    dom.tr.appendChild(tdDrag);\n\n    // create context menu\n    var tdMenu = document.createElement('td');\n    var menu = document.createElement('button');\n    menu.type = 'button';\n    dom.menu = menu;\n    menu.className = 'jsoneditor-button jsoneditor-contextmenu';\n    menu.title = translate('actionsMenu');\n    tdMenu.appendChild(dom.menu);\n    dom.tr.appendChild(tdMenu);\n  }\n\n  // create tree and field\n  var tdField = document.createElement('td');\n  dom.tr.appendChild(tdField);\n  dom.tree = this._createDomTree();\n  tdField.appendChild(dom.tree);\n\n  this.updateDom({'updateIndexes': true});\n\n  return dom.tr;\n};\n\n/**\n * Test whether a Node is rendered and visible\n * @returns {boolean}\n */\nNode.prototype.isVisible = function () {\n  return this.dom && this.dom.tr && this.dom.tr.parentNode || false\n};\n\n/**\n * DragStart event, fired on mousedown on the dragarea at the left side of a Node\n * @param {Node[] | Node} nodes\n * @param {Event} event\n */\nNode.onDragStart = function (nodes, event) {\n  if (!Array.isArray(nodes)) {\n    return Node.onDragStart([nodes], event);\n  }\n  if (nodes.length === 0) {\n    return;\n  }\n\n  var firstNode = nodes[0];\n  var lastNode = nodes[nodes.length - 1];\n  var parent = firstNode.parent;\n  var draggedNode = Node.getNodeFromTarget(event.target);\n  var editor = firstNode.editor;\n\n  // in case of multiple selected nodes, offsetY prevents the selection from\n  // jumping when you start dragging one of the lower down nodes in the selection\n  var offsetY = util.getAbsoluteTop(draggedNode.dom.tr) - util.getAbsoluteTop(firstNode.dom.tr);\n\n  if (!editor.mousemove) {\n    editor.mousemove = util.addEventListener(window, 'mousemove', function (event) {\n      Node.onDrag(nodes, event);\n    });\n  }\n\n  if (!editor.mouseup) {\n    editor.mouseup = util.addEventListener(window, 'mouseup',function (event ) {\n      Node.onDragEnd(nodes, event);\n    });\n  }\n\n  editor.highlighter.lock();\n  editor.drag = {\n    oldCursor: document.body.style.cursor,\n    oldSelection: editor.getDomSelection(),\n    oldPaths: nodes.map(getInternalPath),\n    oldParent: parent,\n    oldNextNode: parent.childs[lastNode.getIndex() + 1] || parent.append,\n    oldParentPathRedo: parent.getInternalPath(),\n    oldIndexRedo: firstNode.getIndex(),\n    mouseX: event.pageX,\n    offsetY: offsetY,\n    level: firstNode.getLevel()\n  };\n  document.body.style.cursor = 'move';\n\n  event.preventDefault();\n};\n\n/**\n * Drag event, fired when moving the mouse while dragging a Node\n * @param {Node[] | Node} nodes\n * @param {Event} event\n */\nNode.onDrag = function (nodes, event) {\n  if (!Array.isArray(nodes)) {\n    return Node.onDrag([nodes], event);\n  }\n  if (nodes.length === 0) {\n    return;\n  }\n\n  // TODO: this method has grown too large. Split it in a number of methods\n  var editor = nodes[0].editor;\n  var mouseY = event.pageY - editor.drag.offsetY;\n  var mouseX = event.pageX;\n  var trThis, trPrev, trNext, trFirst, trLast, trRoot;\n  var nodePrev, nodeNext;\n  var topThis, topPrev, topFirst, heightThis, bottomNext, heightNext;\n  var moved = false;\n\n  // TODO: add an ESC option, which resets to the original position\n\n  // move up/down\n  var firstNode = nodes[0];\n  trThis = firstNode.dom.tr;\n  topThis = util.getAbsoluteTop(trThis);\n  heightThis = trThis.offsetHeight;\n  if (mouseY < topThis) {\n    // move up\n    trPrev = trThis;\n    do {\n      trPrev = trPrev.previousSibling;\n      nodePrev = Node.getNodeFromTarget(trPrev);\n      topPrev = trPrev ? util.getAbsoluteTop(trPrev) : 0;\n    }\n    while (trPrev && mouseY < topPrev);\n\n    if (nodePrev && !nodePrev.parent) {\n      nodePrev = undefined;\n    }\n\n    if (!nodePrev) {\n      // move to the first node\n      trRoot = trThis.parentNode.firstChild;\n      trPrev = trRoot ? trRoot.nextSibling : undefined;\n      nodePrev = Node.getNodeFromTarget(trPrev);\n      if (nodePrev == firstNode) {\n        nodePrev = undefined;\n      }\n    }\n\n    if (nodePrev && nodePrev.isVisible()) {\n      // check if mouseY is really inside the found node\n      trPrev = nodePrev.dom.tr;\n      topPrev = trPrev ? util.getAbsoluteTop(trPrev) : 0;\n      if (mouseY > topPrev + heightThis) {\n        nodePrev = undefined;\n      }\n    }\n\n    if (nodePrev) {\n      nodes.forEach(function (node) {\n        nodePrev.parent.moveBefore(node, nodePrev);\n      });\n      moved = true;\n    }\n  }\n  else {\n    // move down\n    var lastNode = nodes[nodes.length - 1];\n    trLast = (lastNode.expanded && lastNode.append) ? lastNode.append.getDom() : lastNode.dom.tr;\n    trFirst = trLast ? trLast.nextSibling : undefined;\n    if (trFirst) {\n      topFirst = util.getAbsoluteTop(trFirst);\n      trNext = trFirst;\n      do {\n        nodeNext = Node.getNodeFromTarget(trNext);\n        if (trNext) {\n          bottomNext = trNext.nextSibling ?\n              util.getAbsoluteTop(trNext.nextSibling) : 0;\n          heightNext = trNext ? (bottomNext - topFirst) : 0;\n\n          if (nodeNext &&\n              nodeNext.parent.childs.length == nodes.length &&\n              nodeNext.parent.childs[nodes.length - 1] == lastNode) {\n            // We are about to remove the last child of this parent,\n            // which will make the parents appendNode visible.\n            topThis += 27;\n            // TODO: dangerous to suppose the height of the appendNode a constant of 27 px.\n          }\n\n          trNext = trNext.nextSibling;\n        }\n      }\n      while (trNext && mouseY > topThis + heightNext);\n\n      if (nodeNext && nodeNext.parent) {\n        // calculate the desired level\n        var diffX = (mouseX - editor.drag.mouseX);\n        var diffLevel = Math.round(diffX / 24 / 2);\n        var level = editor.drag.level + diffLevel; // desired level\n        var levelNext = nodeNext.getLevel();     // level to be\n\n        // find the best fitting level (move upwards over the append nodes)\n        trPrev = nodeNext.dom.tr && nodeNext.dom.tr.previousSibling;\n        while (levelNext < level && trPrev) {\n          nodePrev = Node.getNodeFromTarget(trPrev);\n\n          var isDraggedNode = nodes.some(function (node) {\n            return node === nodePrev || nodePrev.isDescendantOf(node);\n          });\n\n          if (isDraggedNode) {\n            // neglect the dragged nodes themselves and their childs\n          }\n          else if (nodePrev instanceof AppendNode) {\n            var childs = nodePrev.parent.childs;\n            if (childs.length != nodes.length || childs[nodes.length - 1] != lastNode) {\n              // non-visible append node of a list of childs\n              // consisting of not only this node (else the\n              // append node will change into a visible \"empty\"\n              // text when removing this node).\n              nodeNext = Node.getNodeFromTarget(trPrev);\n              levelNext = nodeNext.getLevel();\n            }\n            else {\n              break;\n            }\n          }\n          else {\n            break;\n          }\n\n          trPrev = trPrev.previousSibling;\n        }\n\n        if (nodeNext instanceof AppendNode && !nodeNext.isVisible() &&\n            nodeNext.parent.showMore.isVisible()) {\n          nodeNext = nodeNext._nextNode();\n        }\n\n        // move the node when its position is changed\n        if (nodeNext && nodeNext.dom.tr && trLast.nextSibling != nodeNext.dom.tr) {\n          nodes.forEach(function (node) {\n            nodeNext.parent.moveBefore(node, nodeNext);\n          });\n          moved = true;\n        }\n      }\n    }\n  }\n\n  if (moved) {\n    // update the dragging parameters when moved\n    editor.drag.mouseX = mouseX;\n    editor.drag.level = firstNode.getLevel();\n  }\n\n  // auto scroll when hovering around the top of the editor\n  editor.startAutoScroll(mouseY);\n\n  event.preventDefault();\n};\n\n/**\n * Drag event, fired on mouseup after having dragged a node\n * @param {Node[] | Node} nodes\n * @param {Event} event\n */\nNode.onDragEnd = function (nodes, event) {\n  if (!Array.isArray(nodes)) {\n    return Node.onDrag([nodes], event);\n  }\n  if (nodes.length === 0) {\n    return;\n  }\n\n  var firstNode = nodes[0];\n  var editor = firstNode.editor;\n\n  // set focus to the context menu button of the first node\n  if (nodes[0]) {\n    nodes[0].dom.menu.focus();\n  }\n\n  var oldParentPath = editor.drag.oldParent.getInternalPath();\n  var newParentPath = firstNode.parent.getInternalPath();\n  var sameParent = editor.drag.oldParent === firstNode.parent;\n  var oldIndex = editor.drag.oldNextNode.getIndex();\n  var newIndex = firstNode.getIndex();\n  var oldParentPathRedo = editor.drag.oldParentPathRedo;\n\n  var oldIndexRedo = editor.drag.oldIndexRedo;\n  var newIndexRedo = (sameParent && oldIndexRedo < newIndex)\n      ? (newIndex + nodes.length)\n      : newIndex;\n\n  if (!sameParent || oldIndexRedo !== newIndex) {\n    // only register this action if the node is actually moved to another place\n    editor._onAction('moveNodes', {\n      count: nodes.length,\n      fieldNames: nodes.map(getField),\n\n      oldParentPath: oldParentPath,\n      newParentPath: newParentPath,\n      oldIndex: oldIndex,\n      newIndex: newIndex,\n\n      oldIndexRedo: oldIndexRedo,\n      newIndexRedo: newIndexRedo,\n      oldParentPathRedo: oldParentPathRedo,\n      newParentPathRedo: null, // This is a hack, value will be filled in during undo\n\n      oldSelection: editor.drag.oldSelection,\n      newSelection: editor.getDomSelection()\n    });\n  }\n\n  document.body.style.cursor = editor.drag.oldCursor;\n  editor.highlighter.unlock();\n  nodes.forEach(function (node) {\n    node.updateDom();\n\n    if (event.target !== node.dom.drag && event.target !== node.dom.menu) {\n      editor.highlighter.unhighlight();\n    }\n  });\n  delete editor.drag;\n\n  if (editor.mousemove) {\n    util.removeEventListener(window, 'mousemove', editor.mousemove);\n    delete editor.mousemove;\n  }\n  if (editor.mouseup) {\n    util.removeEventListener(window, 'mouseup', editor.mouseup);\n    delete editor.mouseup;\n  }\n\n  // Stop any running auto scroll\n  editor.stopAutoScroll();\n\n  event.preventDefault();\n};\n\n/**\n * Test if this node is a sescendant of an other node\n * @param {Node} node\n * @return {boolean} isDescendant\n * @private\n */\nNode.prototype.isDescendantOf = function (node) {\n  var n = this.parent;\n  while (n) {\n    if (n == node) {\n      return true;\n    }\n    n = n.parent;\n  }\n\n  return false;\n};\n\n/**\n * Create an editable field\n * @return {Element} domField\n * @private\n */\nNode.prototype._createDomField = function () {\n  return document.createElement('div');\n};\n\n/**\n * Set highlighting for this node and all its childs.\n * Only applied to the currently visible (expanded childs)\n * @param {boolean} highlight\n */\nNode.prototype.setHighlight = function (highlight) {\n  if (this.dom.tr) {\n    if (highlight) {\n      util.addClassName(this.dom.tr, 'jsoneditor-highlight');\n    }\n    else {\n      util.removeClassName(this.dom.tr, 'jsoneditor-highlight');\n    }\n\n    if (this.append) {\n      this.append.setHighlight(highlight);\n    }\n\n    if (this.childs) {\n      this.childs.forEach(function (child) {\n        child.setHighlight(highlight);\n      });\n    }\n  }\n};\n\n/**\n * Select or deselect a node\n * @param {boolean} selected\n * @param {boolean} [isFirst]\n */\nNode.prototype.setSelected = function (selected, isFirst) {\n  this.selected = selected;\n\n  if (this.dom.tr) {\n    if (selected) {\n      util.addClassName(this.dom.tr, 'jsoneditor-selected');\n    }\n    else {\n      util.removeClassName(this.dom.tr, 'jsoneditor-selected');\n    }\n\n    if (isFirst) {\n      util.addClassName(this.dom.tr, 'jsoneditor-first');\n    }\n    else {\n      util.removeClassName(this.dom.tr, 'jsoneditor-first');\n    }\n\n    if (this.append) {\n      this.append.setSelected(selected);\n    }\n\n    if (this.showMore) {\n      this.showMore.setSelected(selected);\n    }\n\n    if (this.childs) {\n      this.childs.forEach(function (child) {\n        child.setSelected(selected);\n      });\n    }\n  }\n};\n\n/**\n * Update the value of the node. Only primitive types are allowed, no Object\n * or Array is allowed.\n * @param {String | Number | Boolean | null} value\n */\nNode.prototype.updateValue = function (value) {\n  this.value = value;\n  this.previousValue = value;\n  this.valueError = undefined;\n  this.updateDom();\n};\n\n/**\n * Update the field of the node.\n * @param {String} field\n */\nNode.prototype.updateField = function (field) {\n  this.field = field;\n  this.previousField = field;\n  this.fieldError = undefined;\n  this.updateDom();\n};\n\n/**\n * Update the HTML DOM, optionally recursing through the childs\n * @param {Object} [options] Available parameters:\n *                          {boolean} [recurse]         If true, the\n *                          DOM of the childs will be updated recursively.\n *                          False by default.\n *                          {boolean} [updateIndexes]   If true, the childs\n *                          indexes of the node will be updated too. False by\n *                          default.\n */\nNode.prototype.updateDom = function(options) {\n  // update level indentation\n  var domTree = this.dom.tree;\n  if (domTree) {\n    domTree.style.marginLeft = this.getLevel() * 24 + 'px';\n  }\n\n  // apply field to DOM\n  var domField = this.dom.field;\n  if (domField) {\n    if (this.fieldEditable) {\n      // parent is an object\n      domField.contentEditable = this.editable.field;\n      domField.spellcheck = false;\n      domField.className = 'jsoneditor-field';\n    }\n    else {\n      // parent is an array this is the root node\n      domField.contentEditable = false;\n      domField.className = 'jsoneditor-readonly';\n    }\n\n    var fieldText;\n    if (this.index != undefined) {\n      fieldText = this.index;\n    }\n    else if (this.field != undefined) {\n      fieldText = this.field;\n    }\n    else {\n      var schema = this.editor.options.schema\n        ? Node._findSchema(this.editor.options.schema,this.editor.options.schemaRefs || {}, this.getPath())\n        : undefined;\n\n      if (schema && schema.title) {\n        fieldText = schema.title;\n      }\n      else if (this._hasChilds()) {\n        fieldText = this.type;\n      }\n      else {\n        fieldText = '';\n      }\n    }\n    domField.innerHTML = this._escapeHTML(fieldText);\n\n    this._updateSchema();\n  }\n\n  // apply value to DOM\n  var domValue = this.dom.value;\n  if (domValue) {\n    if (this.type == 'array') {\n      this.updateNodeName();\n      util.addClassName(this.dom.tr, 'jsoneditor-expandable');\n    }\n    else if (this.type == 'object') {\n      this.updateNodeName();\n      util.addClassName(this.dom.tr, 'jsoneditor-expandable');\n    }\n    else {\n      domValue.innerHTML = this._escapeHTML(this.value);\n      util.removeClassName(this.dom.tr, 'jsoneditor-expandable');\n    }\n  }\n\n  // update field and value\n  this._updateDomField();\n  this._updateDomValue();\n\n  this._updateCssClassName();\n\n  // update childs indexes\n  if (options && options.updateIndexes === true) {\n    // updateIndexes is true or undefined\n    this._updateDomIndexes();\n  }\n\n  // update childs recursively\n  if (options && options.recurse === true) {\n    if (this.childs) {\n      this.childs.forEach(function (child) {\n        child.updateDom(options);\n      });\n    }\n  }\n\n  // update rendering of error\n  if (this.error) {\n    this.updateError()\n  }\n\n  // update row with append button\n  if (this.append) {\n    this.append.updateDom();\n  }\n\n  // update \"show more\" text at the bottom of large arrays\n  if (this.showMore) {\n    this.showMore.updateDom();\n  }\n};\n\n/**\n * Locate the JSON schema of the node and check for any enum type\n * @private\n */\nNode.prototype._updateSchema = function () {\n  //Locating the schema of the node and checking for any enum type\n  if(this.editor && this.editor.options) {\n    // find the part of the json schema matching this nodes path\n    this.schema = this.editor.options.schema\n        // fix childSchema with $ref, and not display the select element on the child schema because of not found enum\n        ? Node._findSchema(this.editor.options.schema, this.editor.options.schemaRefs || {}, this.getPath())\n        : null;\n    if (this.schema) {\n      this.enum = Node._findEnum(this.schema);\n    }\n    else {\n      delete this.enum;\n    }\n  }\n};\n\n/**\n * find an enum definition in a JSON schema, as property `enum` or inside\n * one of the schemas composites (`oneOf`, `anyOf`, `allOf`)\n * @param  {Object} schema\n * @return {Array | null} Returns the enum when found, null otherwise.\n * @private\n */\nNode._findEnum = function (schema) {\n  if (schema.enum) {\n    return schema.enum;\n  }\n\n  var composite = schema.oneOf || schema.anyOf || schema.allOf;\n  if (composite) {\n    var match = composite.filter(function (entry) {return entry.enum});\n    if (match.length > 0) {\n      return match[0].enum;\n    }\n  }\n\n  return null\n};\n\n/**\n * Return the part of a JSON schema matching given path.\n * @param {Object} schema\n * @param {Object} schemaRefs\n * @param {Array.<string | number>} path\n * @return {Object | null}\n * @private\n */\nNode._findSchema = function (schema, schemaRefs, path) {\n  var childSchema = schema;\n  var foundSchema = childSchema;\n\n  var allSchemas = schema.oneOf || schema.anyOf || schema.allOf;\n  if (!allSchemas) {\n    allSchemas = [schema];\n  }\n\n  for (var j = 0; j < allSchemas.length; j++) {\n    childSchema = allSchemas[j];\n\n    if ('$ref' in childSchema && typeof childSchema['$ref'] === 'string') {\n      childSchema = schemaRefs[childSchema['$ref']];\n      if (childSchema) {\n        foundSchema = Node._findSchema(childSchema, schemaRefs, path);\n      }\n    }\n\n    for (var i = 0; i < path.length && childSchema; i++) {\n      var nextPath = path.slice(i + 1, path.length);\n      var key = path[i];\n\n      if (typeof key === 'string' && childSchema.patternProperties && !(childSchema.properties && key in childSchema.properties)) {\n        for (var prop in childSchema.patternProperties) {\n          if (key.match(prop)) {\n            foundSchema = Node._findSchema(childSchema.patternProperties[prop], schemaRefs, nextPath);\n          }\n        }\n      }\n      else if (typeof key === 'string' && childSchema.properties) {\n        if (!(key in childSchema.properties)) {\n          foundSchema = null;\n        } else {\n          childSchema = childSchema.properties[key];\n          if (childSchema) {\n            foundSchema = Node._findSchema(childSchema, schemaRefs, nextPath);\n          }\n        }\n      }\n      else if (typeof key === 'number' && childSchema.items) {\n        childSchema = childSchema.items;\n        if (childSchema) {\n          foundSchema = Node._findSchema(childSchema, schemaRefs, nextPath);\n        }\n      }\n    }\n\n  }\n\n  // If the found schema is the input schema, the schema does not have the given path\n  if (foundSchema === schema && path.length > 0) {\n    return null;\n  }\n\n  return foundSchema\n};\n\n/**\n * Update the DOM of the childs of a node: update indexes and undefined field\n * names.\n * Only applicable when structure is an array or object\n * @private\n */\nNode.prototype._updateDomIndexes = function () {\n  var domValue = this.dom.value;\n  var childs = this.childs;\n  if (domValue && childs) {\n    if (this.type == 'array') {\n      childs.forEach(function (child, index) {\n        child.index = index;\n        var childField = child.dom.field;\n        if (childField) {\n          childField.innerHTML = index;\n        }\n      });\n    }\n    else if (this.type == 'object') {\n      childs.forEach(function (child) {\n        if (child.index != undefined) {\n          delete child.index;\n\n          if (child.field == undefined) {\n            child.field = '';\n          }\n        }\n      });\n    }\n  }\n};\n\n/**\n * Create an editable value\n * @private\n */\nNode.prototype._createDomValue = function () {\n  var domValue;\n\n  if (this.type == 'array') {\n    domValue = document.createElement('div');\n    domValue.innerHTML = '[...]';\n  }\n  else if (this.type == 'object') {\n    domValue = document.createElement('div');\n    domValue.innerHTML = '{...}';\n  }\n  else {\n    if (!this.editable.value && util.isUrl(this.value)) {\n      // create a link in case of read-only editor and value containing an url\n      domValue = document.createElement('a');\n      domValue.href = this.value;\n      domValue.innerHTML = this._escapeHTML(this.value);\n    }\n    else {\n      // create an editable or read-only div\n      domValue = document.createElement('div');\n      domValue.contentEditable = this.editable.value;\n      domValue.spellcheck = false;\n      domValue.innerHTML = this._escapeHTML(this.value);\n    }\n  }\n\n  return domValue;\n};\n\n/**\n * Create an expand/collapse button\n * @return {Element} expand\n * @private\n */\nNode.prototype._createDomExpandButton = function () {\n  // create expand button\n  var expand = document.createElement('button');\n  expand.type = 'button';\n  if (this._hasChilds()) {\n    expand.className = this.expanded\n        ? 'jsoneditor-button jsoneditor-expanded'\n        : 'jsoneditor-button jsoneditor-collapsed';\n    expand.title = translate('expandTitle');\n  }\n  else {\n    expand.className = 'jsoneditor-button jsoneditor-invisible';\n    expand.title = '';\n  }\n\n  return expand;\n};\n\n\n/**\n * Create a DOM tree element, containing the expand/collapse button\n * @return {Element} domTree\n * @private\n */\nNode.prototype._createDomTree = function () {\n  var dom = this.dom;\n  var domTree = document.createElement('table');\n  var tbody = document.createElement('tbody');\n  domTree.style.borderCollapse = 'collapse'; // TODO: put in css\n  domTree.className = 'jsoneditor-values';\n  domTree.appendChild(tbody);\n  var tr = document.createElement('tr');\n  tbody.appendChild(tr);\n\n  // create expand button\n  var tdExpand = document.createElement('td');\n  tdExpand.className = 'jsoneditor-tree';\n  tr.appendChild(tdExpand);\n  dom.expand = this._createDomExpandButton();\n  tdExpand.appendChild(dom.expand);\n  dom.tdExpand = tdExpand;\n\n  // create the field\n  var tdField = document.createElement('td');\n  tdField.className = 'jsoneditor-tree';\n  tr.appendChild(tdField);\n  dom.field = this._createDomField();\n  tdField.appendChild(dom.field);\n  dom.tdField = tdField;\n\n  // create a separator\n  var tdSeparator = document.createElement('td');\n  tdSeparator.className = 'jsoneditor-tree';\n  tr.appendChild(tdSeparator);\n  if (this.type != 'object' && this.type != 'array') {\n    tdSeparator.appendChild(document.createTextNode(':'));\n    tdSeparator.className = 'jsoneditor-separator';\n  }\n  dom.tdSeparator = tdSeparator;\n\n  // create the value\n  var tdValue = document.createElement('td');\n  tdValue.className = 'jsoneditor-tree';\n  tr.appendChild(tdValue);\n  dom.value = this._createDomValue();\n  tdValue.appendChild(dom.value);\n  dom.tdValue = tdValue;\n\n  return domTree;\n};\n\n/**\n * Handle an event. The event is caught centrally by the editor\n * @param {Event} event\n */\nNode.prototype.onEvent = function (event) {\n  var type = event.type,\n      target = event.target || event.srcElement,\n      dom = this.dom,\n      node = this,\n      expandable = this._hasChilds();\n\n\n  if (typeof this.editor.options.onEvent === 'function') {\n    this._onEvent(event);\n  }\n\n  // check if mouse is on menu or on dragarea.\n  // If so, highlight current row and its childs\n  if (target == dom.drag || target == dom.menu) {\n    if (type == 'mouseover') {\n      this.editor.highlighter.highlight(this);\n    }\n    else if (type == 'mouseout') {\n      this.editor.highlighter.unhighlight();\n    }\n  }\n\n  // context menu events\n  if (type == 'click' && target == dom.menu) {\n    var highlighter = node.editor.highlighter;\n    highlighter.highlight(node);\n    highlighter.lock();\n    util.addClassName(dom.menu, 'jsoneditor-selected');\n    this.showContextMenu(dom.menu, function () {\n      util.removeClassName(dom.menu, 'jsoneditor-selected');\n      highlighter.unlock();\n      highlighter.unhighlight();\n    });\n  }\n\n  // expand events\n  if (type == 'click') {\n    if (target == dom.expand ||\n        ((node.editor.options.mode === 'view' || node.editor.options.mode === 'form') && target.nodeName === 'DIV')) {\n      if (expandable) {\n        var recurse = event.ctrlKey; // with ctrl-key, expand/collapse all\n        this._onExpand(recurse);\n      }\n    }\n  }\n\n  if (type === 'click' && (event.target === node.dom.tdColor || event.target === node.dom.color)) {\n    this._showColorPicker();\n  }\n\n  // swap the value of a boolean when the checkbox displayed left is clicked\n  if (type == 'change' && target == dom.checkbox) {\n    this.dom.value.innerHTML = !this.value;\n    this._getDomValue();\n    this._updateDomDefault();\n  }\n\n  // update the value of the node based on the selected option\n  if (type == 'change' && target == dom.select) {\n    this.dom.value.innerHTML = dom.select.value;\n    this._getDomValue();\n    this._updateDomValue();\n  }\n\n  // value events\n  var domValue = dom.value;\n  if (target == domValue) {\n    //noinspection FallthroughInSwitchStatementJS\n    switch (type) {\n      case 'blur':\n      case 'change':\n        this._getDomValue();\n        this._clearValueError();\n        this._updateDomValue();\n        if (this.value) {\n          domValue.innerHTML = this._escapeHTML(this.value);\n        }\n        break;\n\n      case 'input':\n        //this._debouncedGetDomValue(true); // TODO\n        this._getDomValue();\n        this._updateDomValue();\n        break;\n\n      case 'keydown':\n      case 'mousedown':\n          // TODO: cleanup\n        this.editor.selection = this.editor.getDomSelection();\n        break;\n\n      case 'click':\n        if (event.ctrlKey && this.editable.value) {\n          // if read-only, we use the regular click behavior of an anchor\n          if (util.isUrl(this.value)) {\n            event.preventDefault();\n            window.open(this.value, '_blank');\n          }\n        }\n        break;\n\n      case 'keyup':\n        //this._debouncedGetDomValue(true); // TODO\n        this._getDomValue();\n        this._updateDomValue();\n        break;\n\n      case 'cut':\n      case 'paste':\n        setTimeout(function () {\n          node._getDomValue();\n          node._updateDomValue();\n        }, 1);\n        break;\n    }\n  }\n\n  // field events\n  var domField = dom.field;\n  if (target == domField) {\n    switch (type) {\n      case 'blur':\n        this._getDomField(true);\n        this._updateDomField();\n        if (this.field) {\n          domField.innerHTML = this._escapeHTML(this.field);\n        }\n        break;\n\n      case 'input':\n        this._getDomField();\n        this._updateSchema();\n        this._updateDomField();\n        this._updateDomValue();\n        break;\n\n      case 'keydown':\n      case 'mousedown':\n        this.editor.selection = this.editor.getDomSelection();\n        break;\n\n      case 'keyup':\n        this._getDomField();\n        this._updateDomField();\n        break;\n\n      case 'cut':\n      case 'paste':\n        setTimeout(function () {\n          node._getDomField();\n          node._updateDomField();\n        }, 1);\n        break;\n    }\n  }\n\n  // focus\n  // when clicked in whitespace left or right from the field or value, set focus\n  var domTree = dom.tree;\n  if (domTree && target == domTree.parentNode && type == 'click' && !event.hasMoved) {\n    var left = (event.offsetX != undefined) ?\n        (event.offsetX < (this.getLevel() + 1) * 24) :\n        (event.pageX < util.getAbsoluteLeft(dom.tdSeparator));// for FF\n    if (left || expandable) {\n      // node is expandable when it is an object or array\n      if (domField) {\n        util.setEndOfContentEditable(domField);\n        domField.focus();\n      }\n    }\n    else {\n      if (domValue && !this.enum) {\n        util.setEndOfContentEditable(domValue);\n        domValue.focus();\n      }\n    }\n  }\n  if (((target == dom.tdExpand && !expandable) || target == dom.tdField || target == dom.tdSeparator) &&\n      (type == 'click' && !event.hasMoved)) {\n    if (domField) {\n      util.setEndOfContentEditable(domField);\n      domField.focus();\n    }\n  }\n\n  if (type == 'keydown') {\n    this.onKeyDown(event);\n  }\n};\n\n/**\n * Trigger external onEvent provided in options if node is a JSON field or\n * value.\n * Information provided depends on the element, value is only included if\n * event occurs in a JSON value:\n * {field: string, path: {string|number}[] [, value: string]}\n * @param {Event} event\n * @private\n */\nNode.prototype._onEvent = function (event) {\n  var element = event.target;\n  if (element === this.dom.field || element === this.dom.value) {\n    var info = {\n      field: this.getField(),\n      path: this.getPath()\n    };\n    // For leaf values, include value\n    if (!this._hasChilds() &&element === this.dom.value) {\n      info.value = this.getValue();\n    }\n    this.editor.options.onEvent(info, event);\n  }\n};\n\n/**\n * Key down event handler\n * @param {Event} event\n */\nNode.prototype.onKeyDown = function (event) {\n  var keynum = event.which || event.keyCode;\n  var target = event.target || event.srcElement;\n  var ctrlKey = event.ctrlKey;\n  var shiftKey = event.shiftKey;\n  var altKey = event.altKey;\n  var handled = false;\n  var prevNode, nextNode, nextDom, nextDom2;\n  var editable = this.editor.options.mode === 'tree';\n  var oldSelection;\n  var oldNextNode;\n  var oldParent;\n  var oldIndexRedo;\n  var newIndexRedo;\n  var oldParentPathRedo;\n  var newParentPathRedo;\n  var nodes;\n  var multiselection;\n  var selectedNodes = this.editor.multiselection.nodes.length > 0\n      ? this.editor.multiselection.nodes\n      : [this];\n  var firstNode = selectedNodes[0];\n  var lastNode = selectedNodes[selectedNodes.length - 1];\n\n  // console.log(ctrlKey, keynum, event.charCode); // TODO: cleanup\n  if (keynum == 13) { // Enter\n    if (target == this.dom.value) {\n      if (!this.editable.value || event.ctrlKey) {\n        if (util.isUrl(this.value)) {\n          window.open(this.value, '_blank');\n          handled = true;\n        }\n      }\n    }\n    else if (target == this.dom.expand) {\n      var expandable = this._hasChilds();\n      if (expandable) {\n        var recurse = event.ctrlKey; // with ctrl-key, expand/collapse all\n        this._onExpand(recurse);\n        target.focus();\n        handled = true;\n      }\n    }\n  }\n  else if (keynum == 68) {  // D\n    if (ctrlKey && editable) {   // Ctrl+D\n      Node.onDuplicate(selectedNodes);\n      handled = true;\n    }\n  }\n  else if (keynum == 69) { // E\n    if (ctrlKey) {       // Ctrl+E and Ctrl+Shift+E\n      this._onExpand(shiftKey);  // recurse = shiftKey\n      target.focus(); // TODO: should restore focus in case of recursing expand (which takes DOM offline)\n      handled = true;\n    }\n  }\n  else if (keynum == 77 && editable) { // M\n    if (ctrlKey) { // Ctrl+M\n      this.showContextMenu(target);\n      handled = true;\n    }\n  }\n  else if (keynum == 46 && editable) { // Del\n    if (ctrlKey) {       // Ctrl+Del\n      Node.onRemove(selectedNodes);\n      handled = true;\n    }\n  }\n  else if (keynum == 45 && editable) { // Ins\n    if (ctrlKey && !shiftKey) {       // Ctrl+Ins\n      this._onInsertBefore();\n      handled = true;\n    }\n    else if (ctrlKey && shiftKey) {   // Ctrl+Shift+Ins\n      this._onInsertAfter();\n      handled = true;\n    }\n  }\n  else if (keynum == 35) { // End\n    if (altKey) { // Alt+End\n      // find the last node\n      var endNode = this._lastNode();\n      if (endNode) {\n        endNode.focus(Node.focusElement || this._getElementName(target));\n      }\n      handled = true;\n    }\n  }\n  else if (keynum == 36) { // Home\n    if (altKey) { // Alt+Home\n      // find the first node\n      var homeNode = this._firstNode();\n      if (homeNode) {\n        homeNode.focus(Node.focusElement || this._getElementName(target));\n      }\n      handled = true;\n    }\n  }\n  else if (keynum == 37) {        // Arrow Left\n    if (altKey && !shiftKey) {  // Alt + Arrow Left\n      // move to left element\n      var prevElement = this._previousElement(target);\n      if (prevElement) {\n        this.focus(this._getElementName(prevElement));\n      }\n      handled = true;\n    }\n    else if (altKey && shiftKey && editable) { // Alt + Shift + Arrow left\n      if (lastNode.expanded) {\n        var appendDom = lastNode.getAppendDom();\n        nextDom = appendDom ? appendDom.nextSibling : undefined;\n      }\n      else {\n        var dom = lastNode.getDom();\n        nextDom = dom.nextSibling;\n      }\n      if (nextDom) {\n        nextNode = Node.getNodeFromTarget(nextDom);\n        nextDom2 = nextDom.nextSibling;\n        nextNode2 = Node.getNodeFromTarget(nextDom2);\n        if (nextNode && nextNode instanceof AppendNode &&\n            !(lastNode.parent.childs.length == 1) &&\n            nextNode2 && nextNode2.parent) {\n          oldSelection = this.editor.getDomSelection();\n          oldParent = firstNode.parent;\n          oldNextNode = oldParent.childs[lastNode.getIndex() + 1] || oldParent.append;\n          oldIndexRedo = firstNode.getIndex();\n          newIndexRedo = nextNode2.getIndex();\n          oldParentPathRedo = oldParent.getInternalPath();\n          newParentPathRedo = nextNode2.parent.getInternalPath();\n\n          selectedNodes.forEach(function (node) {\n            nextNode2.parent.moveBefore(node, nextNode2);\n          });\n          this.focus(Node.focusElement || this._getElementName(target));\n\n\n          this.editor._onAction('moveNodes', {\n            count: selectedNodes.length,\n            fieldNames: selectedNodes.map(getField),\n\n            oldParentPath: oldParent.getInternalPath(),\n            newParentPath: firstNode.parent.getInternalPath(),\n            oldIndex: oldNextNode.getIndex(),\n            newIndex: firstNode.getIndex(),\n\n            oldIndexRedo: oldIndexRedo,\n            newIndexRedo: newIndexRedo,\n            oldParentPathRedo: oldParentPathRedo,\n            newParentPathRedo: newParentPathRedo,\n\n            oldSelection: oldSelection,\n            newSelection: this.editor.getDomSelection()\n          });\n        }\n      }\n    }\n  }\n  else if (keynum == 38) {        // Arrow Up\n    if (altKey && !shiftKey) {  // Alt + Arrow Up\n      // find the previous node\n      prevNode = this._previousNode();\n      if (prevNode) {\n        this.editor.deselect(true);\n        prevNode.focus(Node.focusElement || this._getElementName(target));\n      }\n      handled = true;\n    }\n    else if (!altKey && ctrlKey && shiftKey && editable) { // Ctrl + Shift + Arrow Up\n      // select multiple nodes\n      prevNode = this._previousNode();\n      if (prevNode) {\n        multiselection = this.editor.multiselection;\n        multiselection.start = multiselection.start || this;\n        multiselection.end = prevNode;\n        nodes = this.editor._findTopLevelNodes(multiselection.start, multiselection.end);\n\n        this.editor.select(nodes);\n        prevNode.focus('field'); // select field as we know this always exists\n      }\n      handled = true;\n    }\n    else if (altKey && shiftKey && editable) { // Alt + Shift + Arrow Up\n      // find the previous node\n      prevNode = firstNode._previousNode();\n      if (prevNode && prevNode.parent) {\n        oldSelection = this.editor.getDomSelection();\n        oldParent = firstNode.parent;\n        oldNextNode = oldParent.childs[lastNode.getIndex() + 1] || oldParent.append;\n        oldIndexRedo = firstNode.getIndex();\n        newIndexRedo = prevNode.getIndex();\n        oldParentPathRedo = oldParent.getInternalPath();\n        newParentPathRedo = prevNode.parent.getInternalPath();\n\n        selectedNodes.forEach(function (node) {\n          prevNode.parent.moveBefore(node, prevNode);\n        });\n        this.focus(Node.focusElement || this._getElementName(target));\n\n        this.editor._onAction('moveNodes', {\n          count: selectedNodes.length,\n          fieldNames: selectedNodes.map(getField),\n\n          oldParentPath: oldParent.getInternalPath(),\n          newParentPath: firstNode.parent.getInternalPath(),\n          oldIndex: oldNextNode.getIndex(),\n          newIndex: firstNode.getIndex(),\n\n          oldIndexRedo: oldIndexRedo,\n          newIndexRedo: newIndexRedo,\n          oldParentPathRedo: oldParentPathRedo,\n          newParentPathRedo: newParentPathRedo,\n\n          oldSelection: oldSelection,\n          newSelection: this.editor.getDomSelection()\n        });\n      }\n      handled = true;\n    }\n  }\n  else if (keynum == 39) {        // Arrow Right\n    if (altKey && !shiftKey) {  // Alt + Arrow Right\n      // move to right element\n      var nextElement = this._nextElement(target);\n      if (nextElement) {\n        this.focus(this._getElementName(nextElement));\n      }\n      handled = true;\n    }\n    else if (altKey && shiftKey && editable) { // Alt + Shift + Arrow Right\n      dom = firstNode.getDom();\n      var prevDom = dom.previousSibling;\n      if (prevDom) {\n        prevNode = Node.getNodeFromTarget(prevDom);\n        if (prevNode && prevNode.parent && !prevNode.isVisible()) {\n          oldSelection = this.editor.getDomSelection();\n          oldParent = firstNode.parent;\n          oldNextNode = oldParent.childs[lastNode.getIndex() + 1] || oldParent.append;\n          oldIndexRedo = firstNode.getIndex();\n          newIndexRedo = prevNode.getIndex();\n          oldParentPathRedo = oldParent.getInternalPath();\n          newParentPathRedo = prevNode.parent.getInternalPath();\n\n          selectedNodes.forEach(function (node) {\n            prevNode.parent.moveBefore(node, prevNode);\n          });\n          this.focus(Node.focusElement || this._getElementName(target));\n\n          this.editor._onAction('moveNodes', {\n            count: selectedNodes.length,\n            fieldNames: selectedNodes.map(getField),\n\n            oldParentPath: oldParent.getInternalPath(),\n            newParentPath: firstNode.parent.getInternalPath(),\n            oldIndex: oldNextNode.getIndex(),\n            newIndex: firstNode.getIndex(),\n\n            oldIndexRedo: oldIndexRedo,\n            newIndexRedo: newIndexRedo,\n            oldParentPathRedo: oldParentPathRedo,\n            newParentPathRedo: newParentPathRedo,\n\n            oldSelection: oldSelection,\n            newSelection: this.editor.getDomSelection()\n          });\n        }\n      }\n    }\n  }\n  else if (keynum == 40) {        // Arrow Down\n    if (altKey && !shiftKey) {  // Alt + Arrow Down\n      // find the next node\n      nextNode = this._nextNode();\n      if (nextNode) {\n        this.editor.deselect(true);\n        nextNode.focus(Node.focusElement || this._getElementName(target));\n      }\n      handled = true;\n    }\n    else if (!altKey && ctrlKey && shiftKey && editable) { // Ctrl + Shift + Arrow Down\n      // select multiple nodes\n      nextNode = this._nextNode();\n      if (nextNode) {\n        multiselection = this.editor.multiselection;\n        multiselection.start = multiselection.start || this;\n        multiselection.end = nextNode;\n        nodes = this.editor._findTopLevelNodes(multiselection.start, multiselection.end);\n\n        this.editor.select(nodes);\n        nextNode.focus('field'); // select field as we know this always exists\n      }\n      handled = true;\n    }\n    else if (altKey && shiftKey && editable) { // Alt + Shift + Arrow Down\n      // find the 2nd next node and move before that one\n      if (lastNode.expanded) {\n        nextNode = lastNode.append ? lastNode.append._nextNode() : undefined;\n      }\n      else {\n        nextNode = lastNode._nextNode();\n      }\n\n      // when the next node is not visible, we've reached the \"showMore\" buttons\n      if (nextNode && !nextNode.isVisible()) {\n        nextNode = nextNode.parent.showMore;\n      }\n\n      if (nextNode && nextNode instanceof AppendNode) {\n        nextNode = lastNode;\n      }\n\n      var nextNode2 = nextNode && (nextNode._nextNode() || nextNode.parent.append);\n      if (nextNode2 && nextNode2.parent) {\n        oldSelection = this.editor.getDomSelection();\n        oldParent = firstNode.parent;\n        oldNextNode = oldParent.childs[lastNode.getIndex() + 1] || oldParent.append;\n        oldIndexRedo = firstNode.getIndex();\n        newIndexRedo = nextNode2.getIndex();\n        oldParentPathRedo = oldParent.getInternalPath();\n        newParentPathRedo = nextNode2.parent.getInternalPath();\n\n        selectedNodes.forEach(function (node) {\n          nextNode2.parent.moveBefore(node, nextNode2);\n        });\n        this.focus(Node.focusElement || this._getElementName(target));\n\n        this.editor._onAction('moveNodes', {\n          count: selectedNodes.length,\n          fieldNames: selectedNodes.map(getField),\n          oldParentPath: oldParent.getInternalPath(),\n          newParentPath: firstNode.parent.getInternalPath(),\n          oldParentPathRedo: oldParentPathRedo,\n          newParentPathRedo: newParentPathRedo,\n          oldIndexRedo: oldIndexRedo,\n          newIndexRedo: newIndexRedo,\n          oldIndex: oldNextNode.getIndex(),\n          newIndex: firstNode.getIndex(),\n          oldSelection: oldSelection,\n          newSelection: this.editor.getDomSelection()\n        });\n      }\n      handled = true;\n    }\n  }\n\n  if (handled) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n};\n\n/**\n * Handle the expand event, when clicked on the expand button\n * @param {boolean} recurse   If true, child nodes will be expanded too\n * @private\n */\nNode.prototype._onExpand = function (recurse) {\n  if (recurse) {\n    // Take the table offline\n    var table = this.dom.tr.parentNode; // TODO: not nice to access the main table like this\n    var frame = table.parentNode;\n    var scrollTop = frame.scrollTop;\n    frame.removeChild(table);\n  }\n\n  if (this.expanded) {\n    this.collapse(recurse);\n  }\n  else {\n    this.expand(recurse);\n  }\n\n  if (recurse) {\n    // Put the table online again\n    frame.appendChild(table);\n    frame.scrollTop = scrollTop;\n  }\n};\n\n/**\n * Open a color picker to select a new color\n * @private\n */\nNode.prototype._showColorPicker = function () {\n  if (typeof this.editor.options.onColorPicker === 'function' && this.dom.color) {\n    var node = this;\n\n    // force deleting current color picker (if any)\n    node._deleteDomColor();\n    node.updateDom();\n\n    var colorAnchor = createAbsoluteAnchor(this.dom.color, this.editor.frame);\n\n    this.editor.options.onColorPicker(colorAnchor, this.value, function onChange(value) {\n      if (typeof value === 'string' && value !== node.value) {\n        // force recreating the color block, to cleanup any attached color picker\n        node._deleteDomColor();\n\n        node.value = value;\n        node.updateDom();\n        node._debouncedOnChangeValue();\n      }\n    });\n  }\n};\n\n/**\n * Get all field names of an object\n * @param {Node} [excludeNode] Optional node to be excluded from the returned field names\n * @return {string[]}\n */\nNode.prototype.getFieldNames = function (excludeNode) {\n  if (this.type === 'object') {\n    return this.childs\n        .filter(function (child) {\n          return child !== excludeNode;\n        })\n        .map(function (child) {\n          return child.field;\n        });\n  }\n\n  return [];\n}\n\n/**\n * Remove nodes\n * @param {Node[] | Node} nodes\n */\nNode.onRemove = function(nodes) {\n  if (!Array.isArray(nodes)) {\n    return Node.onRemove([nodes]);\n  }\n\n  if (nodes && nodes.length > 0) {\n    var firstNode = nodes[0];\n    var parent = firstNode.parent;\n    var editor = firstNode.editor;\n    var firstIndex = firstNode.getIndex();\n    editor.highlighter.unhighlight();\n\n    // adjust the focus\n    var oldSelection = editor.getDomSelection();\n    Node.blurNodes(nodes);\n    var newSelection = editor.getDomSelection();\n\n    // store the paths before removing them (needed for history)\n    var paths = nodes.map(getInternalPath);\n\n    // remove the nodes\n    nodes.forEach(function (node) {\n      node.parent._remove(node);\n    });\n\n    // store history action\n    editor._onAction('removeNodes', {\n      nodes: nodes,\n      paths: paths,\n      parentPath: parent.getInternalPath(),\n      index: firstIndex,\n      oldSelection: oldSelection,\n      newSelection: newSelection\n    });\n  }\n};\n\n\n/**\n * Duplicate nodes\n * duplicated nodes will be added right after the original nodes\n * @param {Node[] | Node} nodes\n */\nNode.onDuplicate = function(nodes) {\n  if (!Array.isArray(nodes)) {\n    return Node.onDuplicate([nodes]);\n  }\n\n  if (nodes && nodes.length > 0) {\n    var lastNode = nodes[nodes.length - 1];\n    var parent = lastNode.parent;\n    var editor = lastNode.editor;\n\n    editor.deselect(editor.multiselection.nodes);\n\n    // duplicate the nodes\n    var oldSelection = editor.getDomSelection();\n    var afterNode = lastNode;\n    var clones = nodes.map(function (node) {\n      var clone = node.clone();\n      if (node.parent.type === 'object') {\n        var existingFieldNames = node.parent.getFieldNames();\n        clone.field = util.findUniqueName(node.field, existingFieldNames);\n      }\n      parent.insertAfter(clone, afterNode);\n      afterNode = clone;\n      return clone;\n    });\n\n    // set selection to the duplicated nodes\n    if (nodes.length === 1) {\n      clones[0].focus();\n    }\n    else {\n      editor.select(clones);\n    }\n    var newSelection = editor.getDomSelection();\n\n    editor._onAction('duplicateNodes', {\n      paths: nodes.map(getInternalPath),\n      clonePaths: clones.map(getInternalPath),\n      afterPath: lastNode.getInternalPath(),\n      parentPath: parent.getInternalPath(),\n      oldSelection: oldSelection,\n      newSelection: newSelection\n    });\n  }\n};\n\n/**\n * Handle insert before event\n * @param {String} [field]\n * @param {*} [value]\n * @param {String} [type]   Can be 'auto', 'array', 'object', or 'string'\n * @private\n */\nNode.prototype._onInsertBefore = function (field, value, type) {\n  var oldSelection = this.editor.getDomSelection();\n\n  var newNode = new Node(this.editor, {\n    field: (field != undefined) ? field : '',\n    value: (value != undefined) ? value : '',\n    type: type\n  });\n  newNode.expand(true);\n\n  var beforePath = this.getInternalPath();\n\n  this.parent.insertBefore(newNode, this);\n  this.editor.highlighter.unhighlight();\n  newNode.focus('field');\n  var newSelection = this.editor.getDomSelection();\n\n  this.editor._onAction('insertBeforeNodes', {\n    nodes: [newNode],\n    paths: [newNode.getInternalPath()],\n    beforePath: beforePath,\n    parentPath: this.parent.getInternalPath(),\n    oldSelection: oldSelection,\n    newSelection: newSelection\n  });\n};\n\n/**\n * Handle insert after event\n * @param {String} [field]\n * @param {*} [value]\n * @param {String} [type]   Can be 'auto', 'array', 'object', or 'string'\n * @private\n */\nNode.prototype._onInsertAfter = function (field, value, type) {\n  var oldSelection = this.editor.getDomSelection();\n\n  var newNode = new Node(this.editor, {\n    field: (field != undefined) ? field : '',\n    value: (value != undefined) ? value : '',\n    type: type\n  });\n  newNode.expand(true);\n  this.parent.insertAfter(newNode, this);\n  this.editor.highlighter.unhighlight();\n  newNode.focus('field');\n  var newSelection = this.editor.getDomSelection();\n\n  this.editor._onAction('insertAfterNodes', {\n    nodes: [newNode],\n    paths: [newNode.getInternalPath()],\n    afterPath: this.getInternalPath(),\n    parentPath: this.parent.getInternalPath(),\n    oldSelection: oldSelection,\n    newSelection: newSelection\n  });\n};\n\n/**\n * Handle append event\n * @param {String} [field]\n * @param {*} [value]\n * @param {String} [type]   Can be 'auto', 'array', 'object', or 'string'\n * @private\n */\nNode.prototype._onAppend = function (field, value, type) {\n  var oldSelection = this.editor.getDomSelection();\n\n  var newNode = new Node(this.editor, {\n    field: (field != undefined) ? field : '',\n    value: (value != undefined) ? value : '',\n    type: type\n  });\n  newNode.expand(true);\n  this.parent.appendChild(newNode);\n  this.editor.highlighter.unhighlight();\n  newNode.focus('field');\n  var newSelection = this.editor.getDomSelection();\n\n  this.editor._onAction('appendNodes', {\n    nodes: [newNode],\n    paths: [newNode.getInternalPath()],\n    parentPath: this.parent.getInternalPath(),\n    oldSelection: oldSelection,\n    newSelection: newSelection\n  });\n};\n\n/**\n * Change the type of the node's value\n * @param {String} newType\n * @private\n */\nNode.prototype._onChangeType = function (newType) {\n  var oldType = this.type;\n  if (newType != oldType) {\n    var oldSelection = this.editor.getDomSelection();\n    this.changeType(newType);\n    var newSelection = this.editor.getDomSelection();\n\n    this.editor._onAction('changeType', {\n      path: this.getInternalPath(),\n      oldType: oldType,\n      newType: newType,\n      oldSelection: oldSelection,\n      newSelection: newSelection\n    });\n  }\n};\n\n/**\n * Sort the child's of the node. Only applicable when the node has type 'object'\n * or 'array'.\n * @param {String[] | string} path  Path of the child value to be compared\n * @param {String} direction        Sorting direction. Available values: \"asc\", \"desc\"\n * @private\n */\nNode.prototype.sort = function (path, direction) {\n  if (typeof path === 'string') {\n    path = util.parsePath(path);\n  }\n\n  if (!this._hasChilds()) {\n    return;\n  }\n\n  this.hideChilds(); // sorting is faster when the childs are not attached to the dom\n\n  // copy the childs array (the old one will be kept for an undo action\n  var oldChilds = this.childs;\n  this.childs = this.childs.concat();\n\n  // sort the childs array\n  var order = (direction === 'desc') ? -1 : 1;\n\n  if (this.type === 'object') {\n    this.childs.sort(function (a, b) {\n      return order * naturalSort(a.field, b.field);\n    });\n  }\n  else { // this.type === 'array'\n    this.childs.sort(function (a, b) {\n      var nodeA = a.getNestedChild(path);\n      var nodeB = b.getNestedChild(path);\n\n      if (!nodeA) {\n        return order;\n      }\n      if (!nodeB) {\n        return -order;\n      }\n\n      var valueA = nodeA.value;\n      var valueB = nodeB.value;\n\n      if (typeof valueA !== 'string' && typeof valueB !== 'string') {\n        // both values are a number, boolean, or null -> use simple, fast sorting\n        return valueA > valueB ? order : valueA < valueB ? -order : 0;\n      }\n\n      return order * naturalSort(valueA, valueB);\n    });\n  }\n\n  // update the index numbering\n  this._updateDomIndexes();\n\n  this.editor._onAction('sort', {\n    path: this.getInternalPath(),\n    oldChilds: oldChilds,\n    newChilds: this.childs\n  });\n\n  this.showChilds();\n};\n\n/**\n * Replace the value of the node, keep it's state\n * @param {*} newValue\n */\nNode.prototype.update = function (newValue) {\n  var oldValue = this.getInternalValue();\n\n  this.setValue(newValue);\n\n  this.editor._onAction('transform', {\n    path: this.getInternalPath(),\n    oldValue: oldValue,\n    newValue: this.getInternalValue()\n  });\n};\n\n/**\n * Remove this node from the DOM\n * @returns {{table: Element, nextTr?: Element}}\n *            Returns the DOM elements that which be used to attach the node\n *            to the DOM again, see _attachToDom.\n * @private\n */\nNode.prototype._detachFromDom = function () {\n  var table = this.dom.tr ? this.dom.tr.parentNode : undefined;\n  var lastTr;\n  if (this.expanded) {\n    lastTr = this.getAppendDom();\n  }\n  else {\n    lastTr = this.getDom();\n  }\n  var nextTr = (lastTr && lastTr.parentNode) ? lastTr.nextSibling : undefined;\n\n  this.hide({ resetVisibleChilds: false });\n\n  return {\n    table: table,\n    nextTr: nextTr\n  }\n};\n\n/**\n * Attach this node to the DOM again\n * @param {{table: Element, nextTr?: Element}} domAnchor\n *            The DOM elements returned by _detachFromDom.\n * @private\n */\nNode.prototype._attachToDom = function (domAnchor) {\n  if (domAnchor.table) {\n    if (domAnchor.nextTr) {\n      domAnchor.table.insertBefore(this.getDom(), domAnchor.nextTr);\n    }\n    else {\n      domAnchor.table.appendChild(this.getDom());\n    }\n  }\n\n  if (this.expanded) {\n    this.showChilds();\n  }\n};\n\n/**\n * Transform the node given a JMESPath query.\n * @param {String} query    JMESPath query to apply\n * @private\n */\nNode.prototype.transform = function (query) {\n  if (!this._hasChilds()) {\n    return;\n  }\n\n  this.hideChilds(); // sorting is faster when the childs are not attached to the dom\n\n  try {\n    var oldInternalValue = this.getInternalValue();\n\n    // apply the JMESPath query\n    var oldValue = this.getValue();\n    var newValue = jmespath.search(oldValue, query);\n    this.setValue(newValue);\n\n    var newInternalValue = this.getInternalValue();\n\n    this.editor._onAction('transform', {\n      path: this.getInternalPath(),\n      oldValue: oldInternalValue,\n      newValue: newInternalValue\n    });\n\n    this.showChilds();\n  }\n  catch (err) {\n    this.showChilds();\n\n    this.editor._onError(err);\n  }\n};\n\n/**\n * Make this object the root object of the ditor\n */\nNode.prototype.extract = function () {\n  this.editor.node.hideChilds();\n  this.hideChilds();\n\n  try {\n    var oldInternalValue = this.editor.node.getInternalValue();\n    this.editor._setRoot(this);\n    var newInternalValue = this.editor.node.getInternalValue();\n\n    this.editor._onAction('transform', {\n      path: this.editor.node.getInternalPath(),\n      oldValue: oldInternalValue,\n      newValue: newInternalValue\n    });\n  }\n  catch (err) {\n    this.editor._onError(err);\n  }\n  finally {\n    this.updateDom({ recurse: true });\n    this.showChilds();\n  }\n}\n\n/**\n * Get a nested child given a path with properties\n * @param {String[]} path\n * @returns {Node}\n */\nNode.prototype.getNestedChild = function (path) {\n  var i = 0;\n  var child = this;\n\n  while (child && i < path.length) {\n    child = child.findChildByProperty(path[i]);\n    i++;\n  }\n\n  return child;\n};\n\n/**\n * Find a child by property name\n * @param {string} prop\n * @return {Node | undefined} Returns the child node when found, or undefined otherwise\n */\nNode.prototype.findChildByProperty = function(prop) {\n  if (this.type !== 'object') {\n    return undefined;\n  }\n\n  return this.childs.find(function (child) {\n    return child.field === prop;\n  });\n};\n\n/**\n * Create a table row with an append button.\n * @return {HTMLElement | undefined} tr with the AppendNode contents\n */\nNode.prototype.getAppendDom = function () {\n  if (!this.append) {\n    this.append = new AppendNode(this.editor);\n    this.append.setParent(this);\n  }\n  return this.append.getDom();\n};\n\n/**\n * Create a table row with an showMore button and text\n * @return {HTMLElement | undefined} tr with the AppendNode contents\n */\nNode.prototype.getShowMoreDom = function () {\n  if (!this.showMore) {\n    this.showMore = new ShowMoreNode(this.editor, this);\n  }\n  return this.showMore.getDom();\n};\n\n/**\n * Find the node from an event target\n * @param {HTMLElement} target\n * @return {Node | undefined} node  or undefined when not found\n * @static\n */\nNode.getNodeFromTarget = function (target) {\n  while (target) {\n    if (target.node) {\n      return target.node;\n    }\n    target = target.parentNode;\n  }\n\n  return undefined;\n};\n\n/**\n * Test whether target is a child of the color DOM of a node\n * @param {HTMLElement} target\n * @returns {boolean}\n */\nNode.targetIsColorPicker = function (target) {\n  var node = Node.getNodeFromTarget(target);\n\n  if (node) {\n    var parent = target && target.parentNode;\n    while (parent) {\n      if (parent === node.dom.color) {\n        return true;\n      }\n      parent = parent.parentNode;\n    }\n  }\n\n  return false;\n};\n\n/**\n * Remove the focus of given nodes, and move the focus to the (a) node before,\n * (b) the node after, or (c) the parent node.\n * @param {Array.<Node> | Node} nodes\n */\nNode.blurNodes = function (nodes) {\n  if (!Array.isArray(nodes)) {\n    Node.blurNodes([nodes]);\n    return;\n  }\n\n  var firstNode = nodes[0];\n  var parent = firstNode.parent;\n  var firstIndex = firstNode.getIndex();\n\n  if (parent.childs[firstIndex + nodes.length]) {\n    parent.childs[firstIndex + nodes.length].focus();\n  }\n  else if (parent.childs[firstIndex - 1]) {\n    parent.childs[firstIndex - 1].focus();\n  }\n  else {\n    parent.focus();\n  }\n};\n\n/**\n * Get the next sibling of current node\n * @return {Node} nextSibling\n */\nNode.prototype.nextSibling = function () {\n  var index = this.parent.childs.indexOf(this);\n  return this.parent.childs[index + 1] || this.parent.append;\n};\n\n/**\n * Get the previously rendered node\n * @return {Node | null} previousNode\n */\nNode.prototype._previousNode = function () {\n  var prevNode = null;\n  var dom = this.getDom();\n  if (dom && dom.parentNode) {\n    // find the previous field\n    var prevDom = dom;\n    do {\n      prevDom = prevDom.previousSibling;\n      prevNode = Node.getNodeFromTarget(prevDom);\n    }\n    while (prevDom && prevNode && (prevNode instanceof AppendNode && !prevNode.isVisible()));\n  }\n  return prevNode;\n};\n\n/**\n * Get the next rendered node\n * @return {Node | null} nextNode\n * @private\n */\nNode.prototype._nextNode = function () {\n  var nextNode = null;\n  var dom = this.getDom();\n  if (dom && dom.parentNode) {\n    // find the previous field\n    var nextDom = dom;\n    do {\n      nextDom = nextDom.nextSibling;\n      nextNode = Node.getNodeFromTarget(nextDom);\n    }\n    while (nextDom && nextNode && (nextNode instanceof AppendNode && !nextNode.isVisible()));\n  }\n\n  return nextNode;\n};\n\n/**\n * Get the first rendered node\n * @return {Node | null} firstNode\n * @private\n */\nNode.prototype._firstNode = function () {\n  var firstNode = null;\n  var dom = this.getDom();\n  if (dom && dom.parentNode) {\n    var firstDom = dom.parentNode.firstChild;\n    firstNode = Node.getNodeFromTarget(firstDom);\n  }\n\n  return firstNode;\n};\n\n/**\n * Get the last rendered node\n * @return {Node | null} lastNode\n * @private\n */\nNode.prototype._lastNode = function () {\n  var lastNode = null;\n  var dom = this.getDom();\n  if (dom && dom.parentNode) {\n    var lastDom = dom.parentNode.lastChild;\n    lastNode =  Node.getNodeFromTarget(lastDom);\n    while (lastDom && lastNode && !lastNode.isVisible()) {\n      lastDom = lastDom.previousSibling;\n      lastNode =  Node.getNodeFromTarget(lastDom);\n    }\n  }\n  return lastNode;\n};\n\n/**\n * Get the next element which can have focus.\n * @param {Element} elem\n * @return {Element | null} nextElem\n * @private\n */\nNode.prototype._previousElement = function (elem) {\n  var dom = this.dom;\n  // noinspection FallthroughInSwitchStatementJS\n  switch (elem) {\n    case dom.value:\n      if (this.fieldEditable) {\n        return dom.field;\n      }\n    // intentional fall through\n    case dom.field:\n      if (this._hasChilds()) {\n        return dom.expand;\n      }\n    // intentional fall through\n    case dom.expand:\n      return dom.menu;\n    case dom.menu:\n      if (dom.drag) {\n        return dom.drag;\n      }\n    // intentional fall through\n    default:\n      return null;\n  }\n};\n\n/**\n * Get the next element which can have focus.\n * @param {Element} elem\n * @return {Element | null} nextElem\n * @private\n */\nNode.prototype._nextElement = function (elem) {\n  var dom = this.dom;\n  // noinspection FallthroughInSwitchStatementJS\n  switch (elem) {\n    case dom.drag:\n      return dom.menu;\n    case dom.menu:\n      if (this._hasChilds()) {\n        return dom.expand;\n      }\n    // intentional fall through\n    case dom.expand:\n      if (this.fieldEditable) {\n        return dom.field;\n      }\n    // intentional fall through\n    case dom.field:\n      if (!this._hasChilds()) {\n        return dom.value;\n      }\n    default:\n      return null;\n  }\n};\n\n/**\n * Get the dom name of given element. returns null if not found.\n * For example when element == dom.field, \"field\" is returned.\n * @param {Element} element\n * @return {String | null} elementName  Available elements with name: 'drag',\n *                                      'menu', 'expand', 'field', 'value'\n * @private\n */\nNode.prototype._getElementName = function (element) {\n  var dom = this.dom;\n  for (var name in dom) {\n    if (dom.hasOwnProperty(name)) {\n      if (dom[name] == element) {\n        return name;\n      }\n    }\n  }\n  return null;\n};\n\n/**\n * Test if this node has childs. This is the case when the node is an object\n * or array.\n * @return {boolean} hasChilds\n * @private\n */\nNode.prototype._hasChilds = function () {\n  return this.type == 'array' || this.type == 'object';\n};\n\n// titles with explanation for the different types\nNode.TYPE_TITLES = {\n  'auto': translate('autoType'),\n  'object': translate('objectType'),\n  'array': translate('arrayType'),\n  'string': translate('stringType')\n};\n\nNode.prototype.addTemplates = function (menu, append) {\n    var node = this;\n    var templates = node.editor.options.templates;\n    if (templates == null) return;\n    if (templates.length) {\n        // create a separator\n        menu.push({\n            'type': 'separator'\n        });\n    }\n    var appendData = function (name, data) {\n        node._onAppend(name, data);\n    };\n    var insertData = function (name, data) {\n        node._onInsertBefore(name, data);\n    };\n    templates.forEach(function (template) {\n        menu.push({\n            text: template.text,\n            className: (template.className || 'jsoneditor-type-object'),\n            title: template.title,\n            click: (append ? appendData.bind(this, template.field, template.value) : insertData.bind(this, template.field, template.value))\n        });\n    });\n};\n\n/**\n * Show a contextmenu for this node\n * @param {HTMLElement} anchor   Anchor element to attach the context menu to\n *                               as sibling.\n * @param {function} [onClose]   Callback method called when the context menu\n *                               is being closed.\n */\nNode.prototype.showContextMenu = function (anchor, onClose) {\n  var node = this;\n  var titles = Node.TYPE_TITLES;\n  var items = [];\n\n  if (this.editable.value) {\n    items.push({\n      text: translate('type'),\n      title: translate('typeTitle'),\n      className: 'jsoneditor-type-' + this.type,\n      submenu: [\n        {\n          text: translate('auto'),\n          className: 'jsoneditor-type-auto' +\n              (this.type == 'auto' ? ' jsoneditor-selected' : ''),\n          title: titles.auto,\n          click: function () {\n            node._onChangeType('auto');\n          }\n        },\n        {\n          text: translate('array'),\n          className: 'jsoneditor-type-array' +\n              (this.type == 'array' ? ' jsoneditor-selected' : ''),\n          title: titles.array,\n          click: function () {\n            node._onChangeType('array');\n          }\n        },\n        {\n          text: translate('object'),\n          className: 'jsoneditor-type-object' +\n              (this.type == 'object' ? ' jsoneditor-selected' : ''),\n          title: titles.object,\n          click: function () {\n            node._onChangeType('object');\n          }\n        },\n        {\n          text: translate('string'),\n          className: 'jsoneditor-type-string' +\n              (this.type == 'string' ? ' jsoneditor-selected' : ''),\n          title: titles.string,\n          click: function () {\n            node._onChangeType('string');\n          }\n        }\n      ]\n    });\n  }\n\n  if (this._hasChilds()) {\n    if (this.editor.options.enableSort) {\n      items.push({\n        text: translate('sort'),\n        title: translate('sortTitle', {type: this.type}),\n        className: 'jsoneditor-sort-asc',\n        click: function () {\n          node.showSortModal()\n        }\n      });\n    }\n\n    if (this.editor.options.enableTransform) {\n      items.push({\n        text: translate('transform'),\n        title: translate('transformTitle', {type: this.type}),\n        className: 'jsoneditor-transform',\n        click: function () {\n          node.showTransformModal();\n        }\n      });\n    }\n\n    if (this.parent) {\n      items.push({\n        text: translate('extract'),\n        title: translate('extractTitle', {type: this.type}),\n        className: 'jsoneditor-extract',\n        click: function () {\n          node.extract();\n        }\n      });\n    }\n  }\n\n  if (this.parent && this.parent._hasChilds()) {\n    if (items.length) {\n      // create a separator\n      items.push({\n        'type': 'separator'\n      });\n    }\n\n    // create append button (for last child node only)\n    var childs = node.parent.childs;\n    if (node === childs[childs.length - 1]) {\n        var appendSubmenu = [\n            {\n                text: translate('auto'),\n                className: 'jsoneditor-type-auto',\n                title: titles.auto,\n                click: function () {\n                    node._onAppend('', '', 'auto');\n                }\n            },\n            {\n                text: translate('array'),\n                className: 'jsoneditor-type-array',\n                title: titles.array,\n                click: function () {\n                    node._onAppend('', []);\n                }\n            },\n            {\n                text: translate('object'),\n                className: 'jsoneditor-type-object',\n                title: titles.object,\n                click: function () {\n                    node._onAppend('', {});\n                }\n            },\n            {\n                text: translate('string'),\n                className: 'jsoneditor-type-string',\n                title: titles.string,\n                click: function () {\n                    node._onAppend('', '', 'string');\n                }\n            }\n        ];\n        node.addTemplates(appendSubmenu, true);\n        items.push({\n            text: translate('appendText'),\n            title: translate('appendTitle'),\n            submenuTitle: translate('appendSubmenuTitle'),\n            className: 'jsoneditor-append',\n            click: function () {\n                node._onAppend('', '', 'auto');\n            },\n            submenu: appendSubmenu\n        });\n    }\n\n    // create insert button\n    var insertSubmenu = [\n        {\n            text: translate('auto'),\n            className: 'jsoneditor-type-auto',\n            title: titles.auto,\n            click: function () {\n                node._onInsertBefore('', '', 'auto');\n            }\n        },\n        {\n            text: translate('array'),\n            className: 'jsoneditor-type-array',\n            title: titles.array,\n            click: function () {\n                node._onInsertBefore('', []);\n            }\n        },\n        {\n            text: translate('object'),\n            className: 'jsoneditor-type-object',\n            title: titles.object,\n            click: function () {\n                node._onInsertBefore('', {});\n            }\n        },\n        {\n            text: translate('string'),\n            className: 'jsoneditor-type-string',\n            title: titles.string,\n            click: function () {\n                node._onInsertBefore('', '', 'string');\n            }\n        }\n    ];\n    node.addTemplates(insertSubmenu, false);\n    items.push({\n      text: translate('insert'),\n      title: translate('insertTitle'),\n      submenuTitle: translate('insertSub'),\n      className: 'jsoneditor-insert',\n      click: function () {\n        node._onInsertBefore('', '', 'auto');\n      },\n      submenu: insertSubmenu\n    });\n\n    if (this.editable.field) {\n      // create duplicate button\n      items.push({\n        text: translate('duplicateText'),\n        title: translate('duplicateField'),\n        className: 'jsoneditor-duplicate',\n        click: function () {\n          Node.onDuplicate(node);\n        }\n      });\n\n      // create remove button\n      items.push({\n        text: translate('removeText'),\n        title: translate('removeField'),\n        className: 'jsoneditor-remove',\n        click: function () {\n          Node.onRemove(node);\n        }\n      });\n    }\n  }\n\n  if (this.editor.options.onCreateMenu) {\n    var path = node.getPath();\n\n\t\titems = this.editor.options.onCreateMenu(items, {\n      type: 'single',\n      path: path,\n      paths: [path]\n\t\t});\n\t}\n  \n  var menu = new ContextMenu(items, {close: onClose});\n  menu.show(anchor, this.editor.frame);\n};\n\n\n/**\n * Show sorting modal\n */\nNode.prototype.showSortModal = function () {\n  var node = this;\n  var container = this.editor.options.modalAnchor || DEFAULT_MODAL_ANCHOR;\n  var json = this.getValue();\n\n  function onSort (sortedBy) {\n    var path = sortedBy.path;\n    var pathArray = util.parsePath(path);\n\n    node.sortedBy = sortedBy\n    node.sort(pathArray, sortedBy.direction)\n  }\n\n  showSortModal(container, json, onSort, node.sortedBy)\n}\n\n/**\n * Show transform modal\n */\nNode.prototype.showTransformModal = function () {\n  var node = this;\n\n  var anchor = this.editor.options.modalAnchor || DEFAULT_MODAL_ANCHOR;\n  var json = node.getValue();\n  showTransformModal(anchor, json, function (query) {\n    node.transform(query);\n  });\n}\n\n/**\n * get the type of a value\n * @param {*} value\n * @return {String} type   Can be 'object', 'array', 'string', 'auto'\n * @private\n */\nNode.prototype._getType = function(value) {\n  if (value instanceof Array) {\n    return 'array';\n  }\n  if (value instanceof Object) {\n    return 'object';\n  }\n  if (typeof(value) == 'string' && typeof(util.parseString(value)) != 'string') {\n    return 'string';\n  }\n\n  return 'auto';\n};\n\n/**\n * escape a text, such that it can be displayed safely in an HTML element\n * @param {String} text\n * @return {String} escapedText\n * @private\n */\nNode.prototype._escapeHTML = function (text) {\n  if (typeof text !== 'string') {\n    return String(text);\n  }\n  else {\n    var htmlEscaped = String(text)\n        .replace(/&/g, '&amp;')    // must be replaced first!\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/  /g, ' &nbsp;') // replace double space with an nbsp and space\n        .replace(/^ /, '&nbsp;')   // space at start\n        .replace(/ $/, '&nbsp;');  // space at end\n\n    var json = JSON.stringify(htmlEscaped);\n    var html = json.substring(1, json.length - 1);\n    if (this.editor.options.escapeUnicode === true) {\n      html = util.escapeUnicodeChars(html);\n    }\n    return html;\n  }\n};\n\n/**\n * unescape a string.\n * @param {String} escapedText\n * @return {String} text\n * @private\n */\nNode.prototype._unescapeHTML = function (escapedText) {\n  var json = '\"' + this._escapeJSON(escapedText) + '\"';\n  var htmlEscaped = util.parse(json);\n\n  return htmlEscaped\n      .replace(/&lt;/g, '<')\n      .replace(/&gt;/g, '>')\n      .replace(/&nbsp;|\\u00A0/g, ' ')\n      .replace(/&amp;/g, '&');   // must be replaced last\n};\n\n/**\n * escape a text to make it a valid JSON string. The method will:\n *   - replace unescaped double quotes with '\\\"'\n *   - replace unescaped backslash with '\\\\'\n *   - replace returns with '\\n'\n * @param {String} text\n * @return {String} escapedText\n * @private\n */\nNode.prototype._escapeJSON = function (text) {\n  // TODO: replace with some smart regex (only when a new solution is faster!)\n  var escaped = '';\n  var i = 0;\n  while (i < text.length) {\n    var c = text.charAt(i);\n    if (c == '\\n') {\n      escaped += '\\\\n';\n    }\n    else if (c == '\\\\') {\n      escaped += c;\n      i++;\n\n      c = text.charAt(i);\n      if (c === '' || '\"\\\\/bfnrtu'.indexOf(c) == -1) {\n        escaped += '\\\\';  // no valid escape character\n      }\n      escaped += c;\n    }\n    else if (c == '\"') {\n      escaped += '\\\\\"';\n    }\n    else {\n      escaped += c;\n    }\n    i++;\n  }\n\n  return escaped;\n};\n\n/**\n * update the object name according to the callback onNodeName\n * @private\n */\nNode.prototype.updateNodeName = function () {\n  var count = this.childs ? this.childs.length : 0;\n  var nodeName;\n  if (this.type === 'object' || this.type === 'array') {\n    if (this.editor.options.onNodeName) {\n      try {\n        nodeName = this.editor.options.onNodeName({\n          path: this.getPath(),\n          size: count,\n          type: this.type\n        });\n      }\n      catch (err) {\n        console.error('Error in onNodeName callback: ', err);\n      }\n    }\n\n    this.dom.value.innerHTML = (this.type === 'object')\n      ? ('{' + (nodeName || count) + '}')\n      : ('[' + (nodeName || count) + ']');\n  }\n}\n\n/**\n * update recursively the object's and its children's name.\n * @private\n */\nNode.prototype.recursivelyUpdateNodeName = function () {\n  if (this.expanded) {\n    this.updateNodeName();\n    if (this.childs !== 'undefined') {\n      var i;\n      for (i in this.childs) {\n        this.childs[i].recursivelyUpdateNodeName();\n      }\n    }\n  }\n}\n\n// helper function to get the internal path of a node\nfunction getInternalPath (node) {\n  return node.getInternalPath();\n}\n\n// helper function to get the field of a node\nfunction getField (node) {\n  return node.getField();\n}\n\n// TODO: find a nicer solution to resolve this circular dependency between Node and AppendNode\n//       idea: introduce properties .isAppendNode and .isNode and use that instead of instanceof AppendNode checks\nvar AppendNode = appendNodeFactory(Node);\nvar ShowMoreNode = showMoreNodeFactory(Node);\n\nmodule.exports = Node;\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar util = __webpack_require__(0);\nvar ContextMenu = __webpack_require__(3);\nvar translate = __webpack_require__(1).translate;\n\n/**\n * A factory function to create an AppendNode, which depends on a Node\n * @param {Node} Node\n */\nfunction appendNodeFactory(Node) {\n  /**\n   * @constructor AppendNode\n   * @extends Node\n   * @param {TreeEditor} editor\n   * Create a new AppendNode. This is a special node which is created at the\n   * end of the list with childs for an object or array\n   */\n  function AppendNode (editor) {\n    /** @type {TreeEditor} */\n    this.editor = editor;\n    this.dom = {};\n  }\n\n  AppendNode.prototype = new Node();\n\n  /**\n   * Return a table row with an append button.\n   * @return {Element} dom   TR element\n   */\n  AppendNode.prototype.getDom = function () {\n    // TODO: implement a new solution for the append node\n    var dom = this.dom;\n\n    if (dom.tr) {\n      return dom.tr;\n    }\n\n    this._updateEditability();\n\n    // a row for the append button\n    var trAppend = document.createElement('tr');\n    trAppend.className = 'jsoneditor-append';\n    trAppend.node = this;\n    dom.tr = trAppend;\n\n    // TODO: consistent naming\n\n    if (this.editor.options.mode === 'tree') {\n      // a cell for the dragarea column\n      dom.tdDrag = document.createElement('td');\n\n      // create context menu\n      var tdMenu = document.createElement('td');\n      dom.tdMenu = tdMenu;\n      var menu = document.createElement('button');\n      menu.type = 'button';\n      menu.className = 'jsoneditor-button jsoneditor-contextmenu';\n      menu.title = 'Click to open the actions menu (Ctrl+M)';\n      dom.menu = menu;\n      tdMenu.appendChild(dom.menu);\n    }\n\n    // a cell for the contents (showing text 'empty')\n    var tdAppend = document.createElement('td');\n    var domText = document.createElement('div');\n    domText.innerHTML = '(' + translate('empty') + ')';\n    domText.className = 'jsoneditor-readonly';\n    tdAppend.appendChild(domText);\n    dom.td = tdAppend;\n    dom.text = domText;\n\n    this.updateDom();\n\n    return trAppend;\n  };\n\n  /**\n   * Append node doesn't have a path\n   * @returns {null}\n   */\n  AppendNode.prototype.getPath = function() {\n    return null;\n  };\n\n  /**\n   * Append node doesn't have an index\n   * @returns {null}\n   */\n  AppendNode.prototype.getIndex = function() {\n    return null;\n  };\n\n  /**\n   * Update the HTML dom of the Node\n   */\n  AppendNode.prototype.updateDom = function(options) {\n    var dom = this.dom;\n    var tdAppend = dom.td;\n    if (tdAppend) {\n      tdAppend.style.paddingLeft = (this.getLevel() * 24 + 26) + 'px';\n      // TODO: not so nice hard coded offset\n    }\n\n    var domText = dom.text;\n    if (domText) {\n      domText.innerHTML = '(' + translate('empty') + ' ' + this.parent.type + ')';\n    }\n\n    // attach or detach the contents of the append node:\n    // hide when the parent has childs, show when the parent has no childs\n    var trAppend = dom.tr;\n    if (!this.isVisible()) {\n      if (dom.tr.firstChild) {\n        if (dom.tdDrag) {\n          trAppend.removeChild(dom.tdDrag);\n        }\n        if (dom.tdMenu) {\n          trAppend.removeChild(dom.tdMenu);\n        }\n        trAppend.removeChild(tdAppend);\n      }\n    }\n    else {\n      if (!dom.tr.firstChild) {\n        if (dom.tdDrag) {\n          trAppend.appendChild(dom.tdDrag);\n        }\n        if (dom.tdMenu) {\n          trAppend.appendChild(dom.tdMenu);\n        }\n        trAppend.appendChild(tdAppend);\n      }\n    }\n  };\n\n  /**\n   * Check whether the AppendNode is currently visible.\n   * the AppendNode is visible when its parent has no childs (i.e. is empty).\n   * @return {boolean} isVisible\n   */\n  AppendNode.prototype.isVisible = function () {\n    return (this.parent.childs.length == 0);\n  };\n\n  /**\n   * Show a contextmenu for this node\n   * @param {HTMLElement} anchor   The element to attach the menu to.\n   * @param {function} [onClose]   Callback method called when the context menu\n   *                               is being closed.\n   */\n  AppendNode.prototype.showContextMenu = function (anchor, onClose) {\n    var node = this;\n    var titles = Node.TYPE_TITLES;\n    var appendSubmenu = [\n        {\n            text: translate('auto'),\n            className: 'jsoneditor-type-auto',\n            title: titles.auto,\n            click: function () {\n                node._onAppend('', '', 'auto');\n            }\n        },\n        {\n            text: translate('array'),\n            className: 'jsoneditor-type-array',\n            title: titles.array,\n            click: function () {\n                node._onAppend('', []);\n            }\n        },\n        {\n            text: translate('object'),\n            className: 'jsoneditor-type-object',\n            title: titles.object,\n            click: function () {\n                node._onAppend('', {});\n            }\n        },\n        {\n            text: translate('string'),\n            className: 'jsoneditor-type-string',\n            title: titles.string,\n            click: function () {\n                node._onAppend('', '', 'string');\n            }\n        }\n    ];\n    node.addTemplates(appendSubmenu, true);\n    var items = [\n      // create append button\n      {\n        'text': translate('appendText'),\n        'title': translate('appendTitleAuto'),\n        'submenuTitle': translate('appendSubmenuTitle'),\n        'className': 'jsoneditor-insert',\n        'click': function () {\n          node._onAppend('', '', 'auto');\n        },\n        'submenu': appendSubmenu\n      }\n    ];\n    \n    if (this.editor.options.onCreateMenu) {\n      var path = node.parent.getPath();\n\n      items = this.editor.options.onCreateMenu(items, {\n        type: 'append',\n        path: path,\n        paths: [path]\n      });\n    }\n\n    var menu = new ContextMenu(items, {close: onClose});\n    menu.show(anchor, this.editor.frame);\n  };\n\n  /**\n   * Handle an event. The event is caught centrally by the editor\n   * @param {Event} event\n   */\n  AppendNode.prototype.onEvent = function (event) {\n    var type = event.type;\n    var target = event.target || event.srcElement;\n    var dom = this.dom;\n\n    // highlight the append nodes parent\n    var menu = dom.menu;\n    if (target == menu) {\n      if (type == 'mouseover') {\n        this.editor.highlighter.highlight(this.parent);\n      }\n      else if (type == 'mouseout') {\n        this.editor.highlighter.unhighlight();\n      }\n    }\n\n    // context menu events\n    if (type == 'click' && target == dom.menu) {\n      var highlighter = this.editor.highlighter;\n      highlighter.highlight(this.parent);\n      highlighter.lock();\n      util.addClassName(dom.menu, 'jsoneditor-selected');\n      this.showContextMenu(dom.menu, function () {\n        util.removeClassName(dom.menu, 'jsoneditor-selected');\n        highlighter.unlock();\n        highlighter.unhighlight();\n      });\n    }\n\n    if (type == 'keydown') {\n      this.onKeyDown(event);\n    }\n  };\n\n  return AppendNode;\n}\n\nmodule.exports = appendNodeFactory;\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar translate = __webpack_require__(1).translate;\n\n/**\n * A factory function to create an ShowMoreNode, which depends on a Node\n * @param {function} Node\n */\nfunction showMoreNodeFactory(Node) {\n  /**\n   * @constructor ShowMoreNode\n   * @extends Node\n   * @param {TreeEditor} editor\n   * @param {Node} parent\n   * Create a new ShowMoreNode. This is a special node which is created\n   * for arrays or objects having more than 100 items\n   */\n  function ShowMoreNode (editor, parent) {\n    /** @type {TreeEditor} */\n    this.editor = editor;\n    this.parent = parent;\n    this.dom = {};\n  }\n\n  ShowMoreNode.prototype = new Node();\n\n  /**\n   * Return a table row with an append button.\n   * @return {Element} dom   TR element\n   */\n  ShowMoreNode.prototype.getDom = function () {\n    if (this.dom.tr) {\n      return this.dom.tr;\n    }\n\n    this._updateEditability();\n\n    // display \"show more\"\n    if (!this.dom.tr) {\n      var me = this;\n      var parent = this.parent;\n      var showMoreButton = document.createElement('a');\n      showMoreButton.appendChild(document.createTextNode(translate('showMore')));\n      showMoreButton.href = '#';\n      showMoreButton.onclick = function (event) {\n        // TODO: use callback instead of accessing a method of the parent\n        parent.visibleChilds = Math.floor(parent.visibleChilds / parent.getMaxVisibleChilds() + 1) *\n            parent.getMaxVisibleChilds();\n        me.updateDom();\n        parent.showChilds();\n\n        event.preventDefault();\n        return false;\n      };\n\n      var showAllButton = document.createElement('a');\n      showAllButton.appendChild(document.createTextNode(translate('showAll')));\n      showAllButton.href = '#';\n      showAllButton.onclick = function (event) {\n        // TODO: use callback instead of accessing a method of the parent\n        parent.visibleChilds = Infinity;\n        me.updateDom();\n        parent.showChilds();\n\n        event.preventDefault();\n        return false;\n      };\n\n      var moreContents = document.createElement('div');\n      var moreText = document.createTextNode(this._getShowMoreText());\n      moreContents.className = 'jsoneditor-show-more';\n      moreContents.appendChild(moreText);\n      moreContents.appendChild(showMoreButton);\n      moreContents.appendChild(document.createTextNode('. '));\n      moreContents.appendChild(showAllButton);\n      moreContents.appendChild(document.createTextNode('. '));\n\n      var tdContents = document.createElement('td');\n      tdContents.appendChild(moreContents);\n\n      var moreTr = document.createElement('tr');\n      if (this.editor.options.mode === 'tree') {\n        moreTr.appendChild(document.createElement('td'));\n        moreTr.appendChild(document.createElement('td'));\n      }\n      moreTr.appendChild(tdContents);\n      moreTr.className = 'jsoneditor-show-more';\n      this.dom.tr = moreTr;\n      this.dom.moreContents = moreContents;\n      this.dom.moreText = moreText;\n    }\n\n    this.updateDom();\n\n    return this.dom.tr;\n  };\n\n  /**\n   * Update the HTML dom of the Node\n   */\n  ShowMoreNode.prototype.updateDom = function(options) {\n    if (this.isVisible()) {\n      // attach to the right child node (the first non-visible child)\n      this.dom.tr.node = this.parent.childs[this.parent.visibleChilds];\n\n      if (!this.dom.tr.parentNode) {\n        var nextTr = this.parent._getNextTr();\n        if (nextTr) {\n          nextTr.parentNode.insertBefore(this.dom.tr, nextTr);\n        }\n      }\n\n      // update the counts in the text\n      this.dom.moreText.nodeValue = this._getShowMoreText();\n\n      // update left margin\n      this.dom.moreContents.style.marginLeft = (this.getLevel() + 1) * 24 + 'px';\n    }\n    else {\n      if (this.dom.tr && this.dom.tr.parentNode) {\n        this.dom.tr.parentNode.removeChild(this.dom.tr);\n      }\n    }\n  };\n\n  ShowMoreNode.prototype._getShowMoreText = function() {\n    return translate('showMoreStatus', {\n      visibleChilds: this.parent.visibleChilds,\n      totalChilds: this.parent.childs.length\n    }) + ' ';\n  };\n\n  /**\n   * Check whether the ShowMoreNode is currently visible.\n   * the ShowMoreNode is visible when it's parent has more childs than\n   * the current visibleChilds\n   * @return {boolean} isVisible\n   */\n  ShowMoreNode.prototype.isVisible = function () {\n    return this.parent.expanded && this.parent.childs.length > this.parent.visibleChilds;\n  };\n\n  /**\n   * Handle an event. The event is caught centrally by the editor\n   * @param {Event} event\n   */\n  ShowMoreNode.prototype.onEvent = function (event) {\n    var type = event.type;\n    if (type === 'keydown') {\n      this.onKeyDown(event);\n    }\n  };\n\n  return ShowMoreNode;\n}\n\nmodule.exports = showMoreNodeFactory;\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*!\n * Selectr 2.4.0\n * https://github.com/Mobius1/Selectr\n *\n * Released under the MIT license\n */\n\n\n\n/**\n * Default configuration options\n * @type {Object}\n */\nvar defaultConfig = {\n  /**\n   * Emulates browser behaviour by selecting the first option by default\n   * @type {Boolean}\n   */\n  defaultSelected: true,\n\n  /**\n   * Sets the width of the container\n   * @type {String}\n   */\n  width: \"auto\",\n\n  /**\n   * Enables/ disables the container\n   * @type {Boolean}\n   */\n  disabled: false,\n\n  /**\n   * Enables / disables the search function\n   * @type {Boolean}\n   */\n  searchable: true,\n\n  /**\n   * Enable disable the clear button\n   * @type {Boolean}\n   */\n  clearable: false,\n\n  /**\n   * Sort the tags / multiselect options\n   * @type {Boolean}\n   */\n  sortSelected: false,\n\n  /**\n   * Allow deselecting of select-one options\n   * @type {Boolean}\n   */\n  allowDeselect: false,\n\n  /**\n   * Close the dropdown when scrolling (@AlexanderReiswich, #11)\n   * @type {Boolean}\n   */\n  closeOnScroll: false,\n\n  /**\n   * Allow the use of the native dropdown (@jonnyscholes, #14)\n   * @type {Boolean}\n   */\n  nativeDropdown: false,\n\n  /**\n   * Set the main placeholder\n   * @type {String}\n   */\n  placeholder: \"Select an option...\",\n\n  /**\n   * Allow the tagging feature\n   * @type {Boolean}\n   */\n  taggable: false,\n\n  /**\n   * Set the tag input placeholder (@labikmartin, #21, #22)\n   * @type {String}\n   */\n  tagPlaceholder: \"Enter a tag...\"\n};\n\n/**\n * Event Emitter\n */\nvar Events = function() {};\n\n/**\n * Event Prototype\n * @type {Object}\n */\nEvents.prototype = {\n  /**\n   * Add custom event listener\n   * @param  {String} event Event type\n   * @param  {Function} func   Callback\n   * @return {Void}\n   */\n  on: function(event, func) {\n    this._events = this._events || {};\n    this._events[event] = this._events[event] || [];\n    this._events[event].push(func);\n  },\n\n  /**\n   * Remove custom event listener\n   * @param  {String} event Event type\n   * @param  {Function} func   Callback\n   * @return {Void}\n   */\n  off: function(event, func) {\n    this._events = this._events || {};\n    if (event in this._events === false) return;\n    this._events[event].splice(this._events[event].indexOf(func), 1);\n  },\n\n  /**\n   * Fire a custom event\n   * @param  {String} event Event type\n   * @return {Void}\n   */\n  emit: function(event /* , args... */ ) {\n    this._events = this._events || {};\n    if (event in this._events === false) return;\n    for (var i = 0; i < this._events[event].length; i++) {\n      this._events[event][i].apply(this, Array.prototype.slice.call(arguments, 1));\n    }\n  }\n};\n\n/**\n * Event mixin\n * @param  {Object} obj\n * @return {Object}\n */\nEvents.mixin = function(obj) {\n  var props = ['on', 'off', 'emit'];\n  for (var i = 0; i < props.length; i++) {\n    if (typeof obj === 'function') {\n      obj.prototype[props[i]] = Events.prototype[props[i]];\n    } else {\n      obj[props[i]] = Events.prototype[props[i]];\n    }\n  }\n  return obj;\n};\n\n/**\n * Helpers\n * @type {Object}\n */\nvar util = {\n  extend: function(src, props) {\n    props = props || {};\n    var p;\n    for (p in src) {\n      if (src.hasOwnProperty(p)) {\n        if (!props.hasOwnProperty(p)) {\n          props[p] = src[p];\n        }\n      }\n    }\n    return props;\n  },\n  each: function(a, b, c) {\n    if (\"[object Object]\" === Object.prototype.toString.call(a)) {\n      for (var d in a) {\n        if (Object.prototype.hasOwnProperty.call(a, d)) {\n          b.call(c, d, a[d], a);\n        }\n      }\n    } else {\n      for (var e = 0, f = a.length; e < f; e++) {\n        b.call(c, e, a[e], a);\n      }\n    }\n  },\n  createElement: function(e, a) {\n    var d = document,\n        el = d.createElement(e);\n    if (a && \"[object Object]\" === Object.prototype.toString.call(a)) {\n      var i;\n      for (i in a)\n        if (i in el) el[i] = a[i];\n        else if (\"html\" === i) el.innerHTML = a[i];\n        else if (\"text\" === i) {\n          var t = d.createTextNode(a[i]);\n          el.appendChild(t);\n        } else el.setAttribute(i, a[i]);\n    }\n    return el;\n  },\n  hasClass: function(a, b) {\n    if (a)\n      return a.classList ? a.classList.contains(b) : !!a.className && !!a.className.match(new RegExp(\"(\\\\s|^)\" + b + \"(\\\\s|$)\"));\n  },\n  addClass: function(a, b) {\n    if (!util.hasClass(a, b)) {\n      if (a.classList) {\n        a.classList.add(b);\n      } else {\n        a.className = a.className.trim() + \" \" + b;\n      }\n    }\n  },\n  removeClass: function(a, b) {\n    if (util.hasClass(a, b)) {\n      if (a.classList) {\n        a.classList.remove(b);\n      } else {\n        a.className = a.className.replace(new RegExp(\"(^|\\\\s)\" + b.split(\" \").join(\"|\") + \"(\\\\s|$)\", \"gi\"), \" \");\n      }\n    }\n  },\n  closest: function(el, fn) {\n    return el && el !== document.body && (fn(el) ? el : util.closest(el.parentNode, fn));\n  },\n  isInt: function(val) {\n    return typeof val === 'number' && isFinite(val) && Math.floor(val) === val;\n  },\n  debounce: function(a, b, c) {\n    var d;\n    return function() {\n      var e = this,\n          f = arguments,\n          g = function() {\n            d = null;\n            if (!c) a.apply(e, f);\n          },\n          h = c && !d;\n      clearTimeout(d);\n      d = setTimeout(g, b);\n      if (h) {\n        a.apply(e, f);\n      }\n    };\n  },\n  rect: function(el, abs) {\n    var w = window;\n    var r = el.getBoundingClientRect();\n    var x = abs ? w.pageXOffset : 0;\n    var y = abs ? w.pageYOffset : 0;\n\n    return {\n      bottom: r.bottom + y,\n      height: r.height,\n      left: r.left + x,\n      right: r.right + x,\n      top: r.top + y,\n      width: r.width\n    };\n  },\n  includes: function(a, b) {\n    return a.indexOf(b) > -1;\n  },\n  truncate: function(el) {\n    while (el.firstChild) {\n      el.removeChild(el.firstChild);\n    }\n  }\n};\n\n\nfunction isset(obj, prop) {\n  return obj.hasOwnProperty(prop) && (obj[prop] === true || obj[prop].length);\n}\n\n/**\n * Append an item to the list\n * @param  {Object} item\n * @param  {Object} custom\n * @return {Void}\n */\nfunction appendItem(item, parent, custom) {\n  if (item.parentNode) {\n    if (!item.parentNode.parentNode) {\n      parent.appendChild(item.parentNode);\n    }\n  } else {\n    parent.appendChild(item);\n  }\n\n  util.removeClass(item, \"excluded\");\n  if (!custom) {\n    item.innerHTML = item.textContent;\n  }\n}\n\n/**\n * Render the item list\n * @return {Void}\n */\nvar render = function() {\n  if (this.items.length) {\n    var f = document.createDocumentFragment();\n\n    if (this.config.pagination) {\n      var pages = this.pages.slice(0, this.pageIndex);\n\n      util.each(pages, function(i, items) {\n        util.each(items, function(j, item) {\n          appendItem(item, f, this.customOption);\n        }, this);\n      }, this);\n    } else {\n      util.each(this.items, function(i, item) {\n        appendItem(item, f, this.customOption);\n      }, this);\n    }\n\n    if (f.childElementCount) {\n      util.removeClass(this.items[this.navIndex], \"active\");\n      this.navIndex = f.querySelector(\".selectr-option\").idx;\n      util.addClass(this.items[this.navIndex], \"active\");\n    }\n\n    this.tree.appendChild(f);\n  }\n};\n\n/**\n * Dismiss / close the dropdown\n * @param  {obj} e\n * @return {void}\n */\nvar dismiss = function(e) {\n  var target = e.target;\n  if (!this.container.contains(target) && (this.opened || util.hasClass(this.container, \"notice\"))) {\n    this.close();\n  }\n};\n\n/**\n * Build a list item from the HTMLOptionElement\n * @param  {int} i      HTMLOptionElement index\n * @param  {HTMLOptionElement} option\n * @param  {bool} group  Has parent optgroup\n * @return {void}\n */\nvar createItem = function(option, data) {\n  data = data || option;\n  var content = this.customOption ? this.config.renderOption(data) : option.textContent;\n  var opt = util.createElement(\"li\", {\n    class: \"selectr-option\",\n    html: content,\n    role: \"treeitem\",\n    \"aria-selected\": false\n  });\n\n  opt.idx = option.idx;\n\n  this.items.push(opt);\n\n  if (option.defaultSelected) {\n    this.defaultSelected.push(option.idx);\n  }\n\n  if (option.disabled) {\n    opt.disabled = true;\n    util.addClass(opt, \"disabled\");\n  }\n\n  return opt;\n};\n\n/**\n * Build the container\n * @return {Void}\n */\nvar build = function() {\n\n  this.requiresPagination = this.config.pagination && this.config.pagination > 0;\n\n  // Set width\n  if (isset(this.config, \"width\")) {\n    if (util.isInt(this.config.width)) {\n      this.width = this.config.width + \"px\";\n    } else {\n      if (this.config.width === \"auto\") {\n        this.width = \"100%\";\n      } else if (util.includes(this.config.width, \"%\")) {\n        this.width = this.config.width;\n      }\n    }\n  }\n\n  this.container = util.createElement(\"div\", {\n    class: \"selectr-container\"\n  });\n\n  // Custom className\n  if (this.config.customClass) {\n    util.addClass(this.container, this.config.customClass);\n  }\n\n  // Mobile device\n  if (this.mobileDevice) {\n    util.addClass(this.container, \"selectr-mobile\");\n  } else {\n    util.addClass(this.container, \"selectr-desktop\");\n  }\n\n  // Hide the HTMLSelectElement and prevent focus\n  this.el.tabIndex = -1;\n\n  // Native dropdown\n  if (this.config.nativeDropdown || this.mobileDevice) {\n    util.addClass(this.el, \"selectr-visible\");\n  } else {\n    util.addClass(this.el, \"selectr-hidden\");\n  }\n\n  this.selected = util.createElement(\"div\", {\n    class: \"selectr-selected\",\n    disabled: this.disabled,\n    tabIndex: 1, // enable tabIndex (#9)\n    \"aria-expanded\": false\n  });\n\n  this.label = util.createElement(this.el.multiple ? \"ul\" : \"span\", {\n    class: \"selectr-label\"\n  });\n\n  var dropdown = util.createElement(\"div\", {\n    class: \"selectr-options-container\"\n  });\n\n  this.tree = util.createElement(\"ul\", {\n    class: \"selectr-options\",\n    role: \"tree\",\n    \"aria-hidden\": true,\n    \"aria-expanded\": false\n  });\n\n  this.notice = util.createElement(\"div\", {\n    class: \"selectr-notice\"\n  });\n\n  this.el.setAttribute(\"aria-hidden\", true);\n\n  if (this.disabled) {\n    this.el.disabled = true;\n  }\n\n  if (this.el.multiple) {\n    util.addClass(this.label, \"selectr-tags\");\n    util.addClass(this.container, \"multiple\");\n\n    // Collection of tags\n    this.tags = [];\n\n    // Collection of selected values\n    this.selectedValues = this.getSelectedProperties('value');\n\n    // Collection of selected indexes\n    this.selectedIndexes = this.getSelectedProperties('idx');\n  }\n\n  this.selected.appendChild(this.label);\n\n  if (this.config.clearable) {\n    this.selectClear = util.createElement(\"button\", {\n      class: \"selectr-clear\",\n      type: \"button\"\n    });\n\n    this.container.appendChild(this.selectClear);\n\n    util.addClass(this.container, \"clearable\");\n  }\n\n  if (this.config.taggable) {\n    var li = util.createElement('li', {\n      class: 'input-tag'\n    });\n    this.input = util.createElement(\"input\", {\n      class: \"selectr-tag-input\",\n      placeholder: this.config.tagPlaceholder,\n      tagIndex: 0,\n      autocomplete: \"off\",\n      autocorrect: \"off\",\n      autocapitalize: \"off\",\n      spellcheck: \"false\",\n      role: \"textbox\",\n      type: \"search\"\n    });\n\n    li.appendChild(this.input);\n    this.label.appendChild(li);\n    util.addClass(this.container, \"taggable\");\n\n    this.tagSeperators = [\",\"];\n    if (this.config.tagSeperators) {\n      this.tagSeperators = this.tagSeperators.concat(this.config.tagSeperators);\n    }\n  }\n\n  if (this.config.searchable) {\n    this.input = util.createElement(\"input\", {\n      class: \"selectr-input\",\n      tagIndex: -1,\n      autocomplete: \"off\",\n      autocorrect: \"off\",\n      autocapitalize: \"off\",\n      spellcheck: \"false\",\n      role: \"textbox\",\n      type: \"search\"\n    });\n    this.inputClear = util.createElement(\"button\", {\n      class: \"selectr-input-clear\",\n      type: \"button\"\n    });\n    this.inputContainer = util.createElement(\"div\", {\n      class: \"selectr-input-container\"\n    });\n\n    this.inputContainer.appendChild(this.input);\n    this.inputContainer.appendChild(this.inputClear);\n    dropdown.appendChild(this.inputContainer);\n  }\n\n  dropdown.appendChild(this.notice);\n  dropdown.appendChild(this.tree);\n\n  // List of items for the dropdown\n  this.items = [];\n\n  // Establish options\n  this.options = [];\n\n  // Check for options in the element\n  if (this.el.options.length) {\n    this.options = [].slice.call(this.el.options);\n  }\n\n  // Element may have optgroups so\n  // iterate element.children instead of element.options\n  var group = false,\n      j = 0;\n  if (this.el.children.length) {\n    util.each(this.el.children, function(i, element) {\n      if (element.nodeName === \"OPTGROUP\") {\n\n        group = util.createElement(\"ul\", {\n          class: \"selectr-optgroup\",\n          role: \"group\",\n          html: \"<li class='selectr-optgroup--label'>\" + element.label + \"</li>\"\n        });\n\n        util.each(element.children, function(x, el) {\n          el.idx = j;\n          group.appendChild(createItem.call(this, el, group));\n          j++;\n        }, this);\n      } else {\n        element.idx = j;\n        createItem.call(this, element);\n        j++;\n      }\n    }, this);\n  }\n\n  // Options defined by the data option\n  if (this.config.data && Array.isArray(this.config.data)) {\n    this.data = [];\n    var optgroup = false,\n        option;\n\n    group = false;\n    j = 0;\n\n    util.each(this.config.data, function(i, opt) {\n      // Check for group options\n      if (isset(opt, \"children\")) {\n        optgroup = util.createElement(\"optgroup\", {\n          label: opt.text\n        });\n\n        group = util.createElement(\"ul\", {\n          class: \"selectr-optgroup\",\n          role: \"group\",\n          html: \"<li class='selectr-optgroup--label'>\" + opt.text + \"</li>\"\n        });\n\n        util.each(opt.children, function(x, data) {\n          option = new Option(data.text, data.value, false, data.hasOwnProperty(\"selected\") && data.selected === true);\n\n          option.disabled = isset(data, \"disabled\");\n\n          this.options.push(option);\n\n          optgroup.appendChild(option);\n\n          option.idx = j;\n\n          group.appendChild(createItem.call(this, option, data));\n\n          this.data[j] = data;\n\n          j++;\n        }, this);\n      } else {\n        option = new Option(opt.text, opt.value, false, opt.hasOwnProperty(\"selected\") && opt.selected === true);\n\n        option.disabled = isset(opt, \"disabled\");\n\n        this.options.push(option);\n\n        option.idx = j;\n\n        createItem.call(this, option, opt);\n\n        this.data[j] = opt;\n\n        j++;\n      }\n    }, this);\n  }\n\n  this.setSelected(true);\n\n  var first;\n  this.navIndex = 0;\n  for (var i = 0; i < this.items.length; i++) {\n    first = this.items[i];\n\n    if (!util.hasClass(first, \"disabled\")) {\n\n      util.addClass(first, \"active\");\n      this.navIndex = i;\n      break;\n    }\n  }\n\n  // Check for pagination / infinite scroll\n  if (this.requiresPagination) {\n    this.pageIndex = 1;\n\n    // Create the pages\n    this.paginate();\n  }\n\n  this.container.appendChild(this.selected);\n  this.container.appendChild(dropdown);\n\n  this.placeEl = util.createElement(\"div\", {\n    class: \"selectr-placeholder\"\n  });\n\n  // Set the placeholder\n  this.setPlaceholder();\n\n  this.selected.appendChild(this.placeEl);\n\n  // Disable if required\n  if (this.disabled) {\n    this.disable();\n  }\n\n  this.el.parentNode.insertBefore(this.container, this.el);\n  this.container.appendChild(this.el);\n};\n\n/**\n * Navigate through the dropdown\n * @param  {obj} e\n * @return {void}\n */\nvar navigate = function(e) {\n  e = e || window.event;\n\n  // Filter out the keys we don\"t want\n  if (!this.items.length || !this.opened || !util.includes([13, 38, 40], e.which)) {\n    this.navigating = false;\n    return;\n  }\n\n  e.preventDefault();\n\n  if (e.which === 13) {\n\n    if (this.config.taggable && this.input.value.length > 0) {\n      return false;\n    }\n\n    return this.change(this.navIndex);\n  }\n\n  var direction, prevEl = this.items[this.navIndex];\n\n  switch (e.which) {\n    case 38:\n      direction = 0;\n      if (this.navIndex > 0) {\n        this.navIndex--;\n      }\n      break;\n    case 40:\n      direction = 1;\n      if (this.navIndex < this.items.length - 1) {\n        this.navIndex++;\n      }\n  }\n\n  this.navigating = true;\n\n\n  // Instead of wasting memory holding a copy of this.items\n  // with disabled / excluded options omitted, skip them instead\n  while (util.hasClass(this.items[this.navIndex], \"disabled\") || util.hasClass(this.items[this.navIndex], \"excluded\")) {\n    if (direction) {\n      this.navIndex++;\n    } else {\n      this.navIndex--;\n    }\n\n    if (this.searching) {\n      if (this.navIndex > this.tree.lastElementChild.idx) {\n        this.navIndex = this.tree.lastElementChild.idx;\n        break;\n      } else if (this.navIndex < this.tree.firstElementChild.idx) {\n        this.navIndex = this.tree.firstElementChild.idx;\n        break;\n      }\n    }\n  }\n\n  // Autoscroll the dropdown during navigation\n  var r = util.rect(this.items[this.navIndex]);\n\n  if (!direction) {\n    if (this.navIndex === 0) {\n      this.tree.scrollTop = 0;\n    } else if (r.top - this.optsRect.top < 0) {\n      this.tree.scrollTop = this.tree.scrollTop + (r.top - this.optsRect.top);\n    }\n  } else {\n    if (this.navIndex === 0) {\n      this.tree.scrollTop = 0;\n    } else if ((r.top + r.height) > (this.optsRect.top + this.optsRect.height)) {\n      this.tree.scrollTop = this.tree.scrollTop + ((r.top + r.height) - (this.optsRect.top + this.optsRect.height));\n    }\n\n    // Load another page if needed\n    if (this.navIndex === this.tree.childElementCount - 1 && this.requiresPagination) {\n      load.call(this);\n    }\n  }\n\n  if (prevEl) {\n    util.removeClass(prevEl, \"active\");\n  }\n\n  util.addClass(this.items[this.navIndex], \"active\");\n};\n\n/**\n * Add a tag\n * @param  {HTMLElement} item\n */\nvar addTag = function(item) {\n  var that = this,\n      r;\n\n  var docFrag = document.createDocumentFragment();\n  var option = this.options[item.idx];\n  var data = this.data ? this.data[item.idx] : option;\n  var content = this.customSelected ? this.config.renderSelection(data) : option.textContent;\n\n  var tag = util.createElement(\"li\", {\n    class: \"selectr-tag\",\n    html: content\n  });\n  var btn = util.createElement(\"button\", {\n    class: \"selectr-tag-remove\",\n    type: \"button\"\n  });\n\n  tag.appendChild(btn);\n\n  // Set property to check against later\n  tag.idx = item.idx;\n  tag.tag = option.value;\n\n  this.tags.push(tag);\n\n  if (this.config.sortSelected) {\n\n    var tags = this.tags.slice();\n\n    // Deal with values that contain numbers\n    r = function(val, arr) {\n      val.replace(/(\\d+)|(\\D+)/g, function(that, $1, $2) {\n        arr.push([$1 || Infinity, $2 || \"\"]);\n      });\n    };\n\n    tags.sort(function(a, b) {\n      var x = [],\n          y = [],\n          ac, bc;\n      if (that.config.sortSelected === true) {\n        ac = a.tag;\n        bc = b.tag;\n      } else if (that.config.sortSelected === 'text') {\n        ac = a.textContent;\n        bc = b.textContent;\n      }\n\n      r(ac, x);\n      r(bc, y);\n\n      while (x.length && y.length) {\n        var ax = x.shift();\n        var by = y.shift();\n        var nn = (ax[0] - by[0]) || ax[1].localeCompare(by[1]);\n        if (nn) return nn;\n      }\n\n      return x.length - y.length;\n    });\n\n    util.each(tags, function(i, tg) {\n      docFrag.appendChild(tg);\n    });\n\n    this.label.innerHTML = \"\";\n\n  } else {\n    docFrag.appendChild(tag);\n  }\n\n  if (this.config.taggable) {\n    this.label.insertBefore(docFrag, this.input.parentNode);\n  } else {\n    this.label.appendChild(docFrag);\n  }\n};\n\n/**\n * Remove a tag\n * @param  {HTMLElement} item\n * @return {void}\n */\nvar removeTag = function(item) {\n  var tag = false;\n\n  util.each(this.tags, function(i, t) {\n    if (t.idx === item.idx) {\n      tag = t;\n    }\n  }, this);\n\n  if (tag) {\n    this.label.removeChild(tag);\n    this.tags.splice(this.tags.indexOf(tag), 1);\n  }\n};\n\n/**\n * Load the next page of items\n * @return {void}\n */\nvar load = function() {\n  var tree = this.tree;\n  var scrollTop = tree.scrollTop;\n  var scrollHeight = tree.scrollHeight;\n  var offsetHeight = tree.offsetHeight;\n  var atBottom = scrollTop >= (scrollHeight - offsetHeight);\n\n  if ((atBottom && this.pageIndex < this.pages.length)) {\n    var f = document.createDocumentFragment();\n\n    util.each(this.pages[this.pageIndex], function(i, item) {\n      appendItem(item, f, this.customOption);\n    }, this);\n\n    tree.appendChild(f);\n\n    this.pageIndex++;\n\n    this.emit(\"selectr.paginate\", {\n      items: this.items.length,\n      total: this.data.length,\n      page: this.pageIndex,\n      pages: this.pages.length\n    });\n  }\n};\n\n/**\n * Clear a search\n * @return {void}\n */\nvar clearSearch = function() {\n  if (this.config.searchable || this.config.taggable) {\n    this.input.value = null;\n    this.searching = false;\n    if (this.config.searchable) {\n      util.removeClass(this.inputContainer, \"active\");\n    }\n\n    if (util.hasClass(this.container, \"notice\")) {\n      util.removeClass(this.container, \"notice\");\n      util.addClass(this.container, \"open\");\n      this.input.focus();\n    }\n\n    util.each(this.items, function(i, item) {\n      // Items that didn't match need the class\n      // removing to make them visible again\n      util.removeClass(item, \"excluded\");\n      // Remove the span element for underlining matched items\n      if (!this.customOption) {\n        item.innerHTML = item.textContent;\n      }\n    }, this);\n  }\n};\n\n/**\n * Query matching for searches\n * @param  {string} query\n * @param  {HTMLOptionElement} option\n * @return {bool}\n */\nvar match = function(query, option) {\n  var result = new RegExp(query, \"i\").exec(option.textContent);\n  if (result) {\n    return option.textContent.replace(result[0], \"<span class='selectr-match'>\" + result[0] + \"</span>\");\n  }\n  return false;\n};\n\n// Main Lib\nvar Selectr = function(el, config) {\n\n  config = config || {};\n\n  if (!el) {\n    throw new Error(\"You must supply either a HTMLSelectElement or a CSS3 selector string.\");\n  }\n\n  this.el = el;\n\n  // CSS3 selector string\n  if (typeof el === \"string\") {\n    this.el = document.querySelector(el);\n  }\n\n  if (this.el === null) {\n    throw new Error(\"The element you passed to Selectr can not be found.\");\n  }\n\n  if (this.el.nodeName.toLowerCase() !== \"select\") {\n    throw new Error(\"The element you passed to Selectr is not a HTMLSelectElement.\");\n  }\n\n  this.render(config);\n};\n\n/**\n * Render the instance\n * @param  {object} config\n * @return {void}\n */\nSelectr.prototype.render = function(config) {\n\n  if (this.rendered) return;\n\n  // Merge defaults with user set config\n  this.config = util.extend(defaultConfig, config);\n\n  // Store type\n  this.originalType = this.el.type;\n\n  // Store tabIndex\n  this.originalIndex = this.el.tabIndex;\n\n  // Store defaultSelected options for form reset\n  this.defaultSelected = [];\n\n  // Store the original option count\n  this.originalOptionCount = this.el.options.length;\n\n  if (this.config.multiple || this.config.taggable) {\n    this.el.multiple = true;\n  }\n\n  // Disabled?\n  this.disabled = isset(this.config, \"disabled\");\n\n  this.opened = false;\n\n  if (this.config.taggable) {\n    this.config.searchable = false;\n  }\n\n  this.navigating = false;\n\n  this.mobileDevice = false;\n  if (/Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile/i.test(navigator.userAgent)) {\n    this.mobileDevice = true;\n  }\n\n  this.customOption = this.config.hasOwnProperty(\"renderOption\") && typeof this.config.renderOption === \"function\";\n  this.customSelected = this.config.hasOwnProperty(\"renderSelection\") && typeof this.config.renderSelection === \"function\";\n\n  // Enable event emitter\n  Events.mixin(this);\n\n  build.call(this);\n\n  this.bindEvents();\n\n  this.update();\n\n  this.optsRect = util.rect(this.tree);\n\n  this.rendered = true;\n\n  // Fixes macOS Safari bug #28\n  if (!this.el.multiple) {\n    this.el.selectedIndex = this.selectedIndex;\n  }\n\n  var that = this;\n  setTimeout(function() {\n    that.emit(\"selectr.init\");\n  }, 20);\n};\n\nSelectr.prototype.getSelected = function () {\n  var selected = this.el.querySelectorAll('option:checked');\n  return selected;\n};\n\nSelectr.prototype.getSelectedProperties = function (prop) {\n  var selected = this.getSelected();\n  var values = [].slice.call(selected)\n      .map(function(option) { return option[prop]; })\n      .filter(function(i) { return i!==null && i!==undefined; });\n  return values;\n};\n\n/**\n * Attach the required event listeners\n */\nSelectr.prototype.bindEvents = function() {\n\n  var that = this;\n\n  this.events = {};\n\n  this.events.dismiss = dismiss.bind(this);\n  this.events.navigate = navigate.bind(this);\n  this.events.reset = this.reset.bind(this);\n\n  if (this.config.nativeDropdown || this.mobileDevice) {\n\n    this.container.addEventListener(\"touchstart\", function(e) {\n      if (e.changedTouches[0].target === that.el) {\n        that.toggle();\n      }\n    });\n\n    if (this.config.nativeDropdown || this.mobileDevice) {\n      this.container.addEventListener(\"click\", function(e) {\n        e.preventDefault();  // Jos: Added to prevent emitting clear directly after select\n        e.stopPropagation(); // Jos: Added to prevent emitting clear directly after select\n\n        if (e.target === that.el) {\n          that.toggle();\n        }\n      });\n    }\n\n    var getChangedOptions = function(last, current) {\n      var added=[], removed=last.slice(0);\n      var idx;\n      for (var i=0; i<current.length; i++) {\n        idx = removed.indexOf(current[i]);\n        if (idx > -1)\n          removed.splice(idx, 1);\n        else\n          added.push(current[i]);\n      }\n      return [added, removed];\n    };\n\n    // Listen for the change on the native select\n    // and update accordingly\n    this.el.addEventListener(\"change\", function(e) {\n      if (that.el.multiple) {\n        var indexes = that.getSelectedProperties('idx');\n        var changes = getChangedOptions(that.selectedIndexes, indexes);\n\n        util.each(changes[0], function(i, idx) {\n          that.select(idx);\n        }, that);\n\n        util.each(changes[1], function(i, idx) {\n          that.deselect(idx);\n        }, that);\n\n      } else {\n        if (that.el.selectedIndex > -1) {\n          that.select(that.el.selectedIndex);\n        }\n      }\n    });\n\n  }\n\n  // Open the dropdown with Enter key if focused\n  if (this.config.nativeDropdown) {\n    this.container.addEventListener(\"keydown\", function(e) {\n      if (e.key === \"Enter\" && that.selected === document.activeElement) {\n        // Show the native\n        that.toggle();\n\n        // Focus on the native multiselect\n        setTimeout(function() {\n          that.el.focus();\n        }, 200);\n      }\n    });\n  }\n\n  // Non-native dropdown\n  this.selected.addEventListener(\"click\", function(e) {\n\n    if (!that.disabled) {\n      that.toggle();\n    }\n\n    e.preventDefault();\n    e.stopPropagation(); // Jos: Added to prevent emitting clear directly after select\n  });\n\n  // Remove tag\n  this.label.addEventListener(\"click\", function(e) {\n    if (util.hasClass(e.target, \"selectr-tag-remove\")) {\n      that.deselect(e.target.parentNode.idx);\n    }\n  });\n\n  // Clear input\n  if (this.selectClear) {\n    this.selectClear.addEventListener(\"click\", this.clear.bind(this));\n  }\n\n  // Prevent text selection\n  this.tree.addEventListener(\"mousedown\", function(e) {\n    e.preventDefault();\n  });\n\n  // Select / deselect items\n  this.tree.addEventListener(\"click\", function(e) {\n    e.preventDefault();  // Jos: Added to prevent emitting clear directly after select\n    e.stopPropagation(); // Jos: Added to prevent emitting clear directly after select\n\n    var item = util.closest(e.target, function(el) {\n      return el && util.hasClass(el, \"selectr-option\");\n    });\n\n    if (item) {\n      if (!util.hasClass(item, \"disabled\")) {\n        if (util.hasClass(item, \"selected\")) {\n          if (that.el.multiple || !that.el.multiple && that.config.allowDeselect) {\n            that.deselect(item.idx);\n          }\n        } else {\n          that.select(item.idx);\n        }\n\n        if (that.opened && !that.el.multiple) {\n          that.close();\n        }\n      }\n    }\n  });\n\n  // Mouseover list items\n  this.tree.addEventListener(\"mouseover\", function(e) {\n    if (util.hasClass(e.target, \"selectr-option\")) {\n      if (!util.hasClass(e.target, \"disabled\")) {\n        util.removeClass(that.items[that.navIndex], \"active\");\n\n        util.addClass(e.target, \"active\");\n\n        that.navIndex = [].slice.call(that.items).indexOf(e.target);\n      }\n    }\n  });\n\n  // Searchable\n  if (this.config.searchable) {\n    // Show / hide the search input clear button\n\n    this.input.addEventListener(\"focus\", function(e) {\n      that.searching = true;\n    });\n\n    this.input.addEventListener(\"blur\", function(e) {\n      that.searching = false;\n    });\n\n    this.input.addEventListener(\"keyup\", function(e) {\n      that.search();\n\n      if (!that.config.taggable) {\n        // Show / hide the search input clear button\n        if (this.value.length) {\n          util.addClass(this.parentNode, \"active\");\n        } else {\n          util.removeClass(this.parentNode, \"active\");\n        }\n      }\n    });\n\n    // Clear the search input\n    this.inputClear.addEventListener(\"click\", function(e) {\n      that.input.value = null;\n      clearSearch.call(that);\n\n      if (!that.tree.childElementCount) {\n        render.call(that);\n      }\n    });\n  }\n\n  if (this.config.taggable) {\n    this.input.addEventListener(\"keyup\", function(e) {\n\n      that.search();\n\n      if (that.config.taggable && this.value.length) {\n        var val = this.value.trim();\n\n        if (e.which === 13 || util.includes(that.tagSeperators, e.key)) {\n\n          util.each(that.tagSeperators, function(i, k) {\n            val = val.replace(k, '');\n          });\n\n          var option = that.add({\n            value: val,\n            text: val,\n            selected: true\n          }, true);\n\n          if (!option) {\n            this.value = '';\n            that.setMessage('That tag is already in use.');\n          } else {\n            that.close();\n            clearSearch.call(that);\n          }\n        }\n      }\n    });\n  }\n\n  this.update = util.debounce(function() {\n    // Optionally close dropdown on scroll / resize (#11)\n    if (that.opened && that.config.closeOnScroll) {\n      that.close();\n    }\n    if (that.width) {\n      that.container.style.width = that.width;\n    }\n    that.invert();\n  }, 50);\n\n  if (this.requiresPagination) {\n    this.paginateItems = util.debounce(function() {\n      load.call(this);\n    }, 50);\n\n    this.tree.addEventListener(\"scroll\", this.paginateItems.bind(this));\n  }\n\n  // Dismiss when clicking outside the container\n  document.addEventListener(\"click\", this.events.dismiss);\n  window.addEventListener(\"keydown\", this.events.navigate);\n\n  window.addEventListener(\"resize\", this.update);\n  window.addEventListener(\"scroll\", this.update);\n\n  // Listen for form.reset() (@ambrooks, #13)\n  if (this.el.form) {\n    this.el.form.addEventListener(\"reset\", this.events.reset);\n  }\n};\n\n/**\n * Check for selected options\n * @param {bool} reset\n */\nSelectr.prototype.setSelected = function(reset) {\n\n  // Select first option as with a native select-one element - #21, #24\n  if (!this.config.data && !this.el.multiple && this.el.options.length) {\n    // Browser has selected the first option by default\n    if (this.el.selectedIndex === 0) {\n      if (!this.el.options[0].defaultSelected && !this.config.defaultSelected) {\n        this.el.selectedIndex = -1;\n      }\n    }\n\n    this.selectedIndex = this.el.selectedIndex;\n\n    if (this.selectedIndex > -1) {\n      this.select(this.selectedIndex);\n    }\n  }\n\n  // If we're changing a select-one to select-multiple via the config\n  // and there are no selected options, the first option will be selected by the browser\n  // Let's prevent that here.\n  if (this.config.multiple && this.originalType === \"select-one\" && !this.config.data) {\n    if (this.el.options[0].selected && !this.el.options[0].defaultSelected) {\n      this.el.options[0].selected = false;\n    }\n  }\n\n  util.each(this.options, function(i, option) {\n    if (option.selected && option.defaultSelected) {\n      this.select(option.idx);\n    }\n  }, this);\n\n  if (this.config.selectedValue) {\n    this.setValue(this.config.selectedValue);\n  }\n\n  if (this.config.data) {\n\n\n    if (!this.el.multiple && this.config.defaultSelected && this.el.selectedIndex < 0) {\n      this.select(0);\n    }\n\n    var j = 0;\n    util.each(this.config.data, function(i, opt) {\n      // Check for group options\n      if (isset(opt, \"children\")) {\n        util.each(opt.children, function(x, item) {\n          if (item.hasOwnProperty(\"selected\") && item.selected === true) {\n            this.select(j);\n          }\n          j++;\n        }, this);\n      } else {\n        if (opt.hasOwnProperty(\"selected\") && opt.selected === true) {\n          this.select(j);\n        }\n        j++;\n      }\n    }, this);\n  }\n};\n\n/**\n * Destroy the instance\n * @return {void}\n */\nSelectr.prototype.destroy = function() {\n\n  if (!this.rendered) return;\n\n  this.emit(\"selectr.destroy\");\n\n  // Revert to select-single if programtically set to multiple\n  if (this.originalType === 'select-one') {\n    this.el.multiple = false;\n  }\n\n  if (this.config.data) {\n    this.el.innerHTML = \"\";\n  }\n\n  // Remove the className from select element\n  util.removeClass(this.el, 'selectr-hidden');\n\n  // Remove reset listener from parent form\n  if (this.el.form) {\n    util.off(this.el.form, \"reset\", this.events.reset);\n  }\n\n  // Remove event listeners attached to doc and win\n  util.off(document, \"click\", this.events.dismiss);\n  util.off(document, \"keydown\", this.events.navigate);\n  util.off(window, \"resize\", this.update);\n  util.off(window, \"scroll\", this.update);\n\n  // Replace the container with the original select element\n  this.container.parentNode.replaceChild(this.el, this.container);\n\n  this.rendered = false;\n};\n\n/**\n * Change an options state\n * @param  {Number} index\n * @return {void}\n */\nSelectr.prototype.change = function(index) {\n  var item = this.items[index],\n      option = this.options[index];\n\n  if (option.disabled) {\n    return;\n  }\n\n  if (option.selected && util.hasClass(item, \"selected\")) {\n    this.deselect(index);\n  } else {\n    this.select(index);\n  }\n\n  if (this.opened && !this.el.multiple) {\n    this.close();\n  }\n};\n\n/**\n * Select an option\n * @param  {Number} index\n * @return {void}\n */\nSelectr.prototype.select = function(index) {\n\n  var item = this.items[index],\n      options = [].slice.call(this.el.options),\n      option = this.options[index];\n\n  if (this.el.multiple) {\n    if (util.includes(this.selectedIndexes, index)) {\n      return false;\n    }\n\n    if (this.config.maxSelections && this.tags.length === this.config.maxSelections) {\n      this.setMessage(\"A maximum of \" + this.config.maxSelections + \" items can be selected.\", true);\n      return false;\n    }\n\n    this.selectedValues.push(option.value);\n    this.selectedIndexes.push(index);\n\n    addTag.call(this, item);\n  } else {\n    var data = this.data ? this.data[index] : option;\n    this.label.innerHTML = this.customSelected ? this.config.renderSelection(data) : option.textContent;\n\n    this.selectedValue = option.value;\n    this.selectedIndex = index;\n\n    util.each(this.options, function(i, o) {\n      var opt = this.items[i];\n\n      if (i !== index) {\n        if (opt) {\n          util.removeClass(opt, \"selected\");\n        }\n        o.selected = false;\n        o.removeAttribute(\"selected\");\n      }\n    }, this);\n  }\n\n  if (!util.includes(options, option)) {\n    this.el.add(option);\n  }\n\n  item.setAttribute(\"aria-selected\", true);\n\n  util.addClass(item, \"selected\");\n  util.addClass(this.container, \"has-selected\");\n\n  option.selected = true;\n  option.setAttribute(\"selected\", \"\");\n\n  this.emit(\"selectr.change\", option);\n\n  this.emit(\"selectr.select\", option);\n};\n\n/**\n * Deselect an option\n * @param  {Number} index\n * @return {void}\n */\nSelectr.prototype.deselect = function(index, force) {\n  var item = this.items[index],\n      option = this.options[index];\n\n  if (this.el.multiple) {\n    var selIndex = this.selectedIndexes.indexOf(index);\n    this.selectedIndexes.splice(selIndex, 1);\n\n    var valIndex = this.selectedValues.indexOf(option.value);\n    this.selectedValues.splice(valIndex, 1);\n\n    removeTag.call(this, item);\n\n    if (!this.tags.length) {\n      util.removeClass(this.container, \"has-selected\");\n    }\n  } else {\n\n    if (!force && !this.config.clearable && !this.config.allowDeselect) {\n      return false;\n    }\n\n    this.label.innerHTML = \"\";\n    this.selectedValue = null;\n\n    this.el.selectedIndex = this.selectedIndex = -1;\n\n    util.removeClass(this.container, \"has-selected\");\n  }\n\n\n  this.items[index].setAttribute(\"aria-selected\", false);\n\n  util.removeClass(this.items[index], \"selected\");\n\n  option.selected = false;\n\n  option.removeAttribute(\"selected\");\n\n  this.emit(\"selectr.change\", null);\n\n  this.emit(\"selectr.deselect\", option);\n};\n\n/**\n * Programmatically set selected values\n * @param {String|Array} value - A string or an array of strings\n */\nSelectr.prototype.setValue = function(value) {\n  var isArray = Array.isArray(value);\n\n  if (!isArray) {\n    value = value.toString().trim();\n  }\n\n  // Can't pass array to select-one\n  if (!this.el.multiple && isArray) {\n    return false;\n  }\n\n  util.each(this.options, function(i, option) {\n    if (isArray && util.includes(value.toString(), option.value) || option.value === value) {\n      this.change(option.idx);\n    }\n  }, this);\n};\n\n/**\n * Set the selected value(s)\n * @param  {bool} toObject Return only the raw values or an object\n * @param  {bool} toJson   Return the object as a JSON string\n * @return {mixed}         Array or String\n */\nSelectr.prototype.getValue = function(toObject, toJson) {\n  var value;\n\n  if (this.el.multiple) {\n    if (toObject) {\n      if (this.selectedIndexes.length) {\n        value = {};\n        value.values = [];\n        util.each(this.selectedIndexes, function(i, index) {\n          var option = this.options[index];\n          value.values[i] = {\n            value: option.value,\n            text: option.textContent\n          };\n        }, this);\n      }\n    } else {\n      value = this.selectedValues.slice();\n    }\n  } else {\n    if (toObject) {\n      var option = this.options[this.selectedIndex];\n      value = {\n        value: option.value,\n        text: option.textContent\n      };\n    } else {\n      value = this.selectedValue;\n    }\n  }\n\n  if (toObject && toJson) {\n    value = JSON.stringify(value);\n  }\n\n  return value;\n};\n\n/**\n * Add a new option or options\n * @param {object} data\n */\nSelectr.prototype.add = function(data, checkDuplicate) {\n  if (data) {\n\n    this.data = this.data || [];\n    this.items = this.items || [];\n    this.options = this.options || [];\n\n    if (Array.isArray(data)) {\n      // We have an array on items\n      util.each(data, function(i, obj) {\n        this.add(obj, checkDuplicate);\n      }, this);\n    }\n    // User passed a single object to the method\n    // or Selectr passed an object from an array\n    else if (\"[object Object]\" === Object.prototype.toString.call(data)) {\n\n      if (checkDuplicate) {\n        var dupe = false;\n\n        util.each(this.options, function(i, option) {\n          if (option.value.toLowerCase() === data.value.toLowerCase()) {\n            dupe = true;\n          }\n        });\n\n        if (dupe) {\n          return false;\n        }\n      }\n\n      var option = util.createElement('option', data);\n\n      this.data.push(data);\n\n      // Add the new option to the list\n      this.options.push(option);\n\n      // Add the index for later use\n      option.idx = this.options.length > 0 ? this.options.length - 1 : 0;\n\n      // Create a new item\n      createItem.call(this, option);\n\n      // Select the item if required\n      if (data.selected) {\n        this.select(option.idx);\n      }\n\n      return option;\n    }\n\n    // We may have had an empty select so update\n    // the placeholder to reflect the changes.\n    this.setPlaceholder();\n\n    // Recount the pages\n    if (this.config.pagination) {\n      this.paginate();\n    }\n\n    return true;\n  }\n};\n\n/**\n * Remove an option or options\n * @param  {Mixed} o Array, integer (index) or string (value)\n * @return {Void}\n */\nSelectr.prototype.remove = function(o) {\n  var options = [];\n  if (Array.isArray(o)) {\n    util.each(o, function(i, opt) {\n      if (util.isInt(opt)) {\n        options.push(this.getOptionByIndex(opt));\n      } else if (typeof o === \"string\") {\n        options.push(this.getOptionByValue(opt));\n      }\n    }, this);\n\n  } else if (util.isInt(o)) {\n    options.push(this.getOptionByIndex(o));\n  } else if (typeof o === \"string\") {\n    options.push(this.getOptionByValue(o));\n  }\n\n  if (options.length) {\n    var index;\n    util.each(options, function(i, option) {\n      index = option.idx;\n\n      // Remove the HTMLOptionElement\n      this.el.remove(option);\n\n      // Remove the reference from the option array\n      this.options.splice(index, 1);\n\n      // If the item has a parentNode (group element) it needs to be removed\n      // otherwise the render function will still append it to the dropdown\n      var parentNode = this.items[index].parentNode;\n\n      if (parentNode) {\n        parentNode.removeChild(this.items[index]);\n      }\n\n      // Remove reference from the items array\n      this.items.splice(index, 1);\n\n      // Reset the indexes\n      util.each(this.options, function(i, opt) {\n        opt.idx = i;\n        this.items[i].idx = i;\n      }, this);\n    }, this);\n\n    // We may have had an empty select now so update\n    // the placeholder to reflect the changes.\n    this.setPlaceholder();\n\n    // Recount the pages\n    if (this.config.pagination) {\n      this.paginate();\n    }\n  }\n};\n\n/**\n * Remove all options\n */\nSelectr.prototype.removeAll = function() {\n\n  // Clear any selected options\n  this.clear(true);\n\n  // Remove the HTMLOptionElements\n  util.each(this.el.options, function(i, option) {\n    this.el.remove(option);\n  }, this);\n\n  // Empty the dropdown\n  util.truncate(this.tree);\n\n  // Reset variables\n  this.items = [];\n  this.options = [];\n  this.data = [];\n\n  this.navIndex = 0;\n\n  if (this.requiresPagination) {\n    this.requiresPagination = false;\n\n    this.pageIndex = 1;\n    this.pages = [];\n  }\n\n  // Update the placeholder\n  this.setPlaceholder();\n};\n\n/**\n * Perform a search\n * @param  {string} query The query string\n */\nSelectr.prototype.search = function(string) {\n\n  if (this.navigating) return;\n\n  string = string || this.input.value;\n\n  var f = document.createDocumentFragment();\n\n  // Remove message\n  this.removeMessage();\n\n  // Clear the dropdown\n  util.truncate(this.tree);\n\n  if (string.length > 1) {\n    // Check the options for the matching string\n    util.each(this.options, function(i, option) {\n      var item = this.items[option.idx];\n      var includes = util.includes(option.textContent.toLowerCase(), string.toLowerCase());\n\n      if (includes && !option.disabled) {\n\n        appendItem(item, f, this.customOption);\n\n        util.removeClass(item, \"excluded\");\n\n        // Underline the matching results\n        if (!this.customOption) {\n          item.innerHTML = match(string, option);\n        }\n      } else {\n        util.addClass(item, \"excluded\");\n      }\n    }, this);\n\n\n    if (!f.childElementCount) {\n      if (!this.config.taggable) {\n        this.setMessage(\"no results.\");\n      }\n    } else {\n      // Highlight top result (@binary-koan #26)\n      var prevEl = this.items[this.navIndex];\n      var firstEl = f.firstElementChild;\n\n      util.removeClass(prevEl, \"active\");\n\n      this.navIndex = firstEl.idx;\n\n      util.addClass(firstEl, \"active\");\n    }\n\n  } else {\n    render.call(this);\n  }\n\n  this.tree.appendChild(f);\n};\n\n/**\n * Toggle the dropdown\n * @return {void}\n */\nSelectr.prototype.toggle = function() {\n  if (!this.disabled) {\n    if (this.opened) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n};\n\n/**\n * Open the dropdown\n * @return {void}\n */\nSelectr.prototype.open = function() {\n\n  var that = this;\n\n  if (!this.options.length) {\n    return false;\n  }\n\n  if (!this.opened) {\n    this.emit(\"selectr.open\");\n  }\n\n  this.opened = true;\n\n  if (this.mobileDevice || this.config.nativeDropdown) {\n    util.addClass(this.container, \"native-open\");\n\n    if (this.config.data) {\n      // Dump the options into the select\n      // otherwise the native dropdown will be empty\n      util.each(this.options, function(i, option) {\n        this.el.add(option);\n      }, this);\n    }\n\n    return;\n  }\n\n  util.addClass(this.container, \"open\");\n\n  render.call(this);\n\n  this.invert();\n\n  this.tree.scrollTop = 0;\n\n  util.removeClass(this.container, \"notice\");\n\n  this.selected.setAttribute(\"aria-expanded\", true);\n\n  this.tree.setAttribute(\"aria-hidden\", false);\n  this.tree.setAttribute(\"aria-expanded\", true);\n\n  if (this.config.searchable && !this.config.taggable) {\n    setTimeout(function() {\n      that.input.focus();\n      // Allow tab focus\n      that.input.tabIndex = 0;\n    }, 10);\n  }\n};\n\n/**\n * Close the dropdown\n * @return {void}\n */\nSelectr.prototype.close = function() {\n\n  if (this.opened) {\n    this.emit(\"selectr.close\");\n  }\n\n  this.opened = false;\n\n  if (this.mobileDevice || this.config.nativeDropdown) {\n    util.removeClass(this.container, \"native-open\");\n    return;\n  }\n\n  var notice = util.hasClass(this.container, \"notice\");\n\n  if (this.config.searchable && !notice) {\n    this.input.blur();\n    // Disable tab focus\n    this.input.tabIndex = -1;\n    this.searching = false;\n  }\n\n  if (notice) {\n    util.removeClass(this.container, \"notice\");\n    this.notice.textContent = \"\";\n  }\n\n  util.removeClass(this.container, \"open\");\n  util.removeClass(this.container, \"native-open\");\n\n  this.selected.setAttribute(\"aria-expanded\", false);\n\n  this.tree.setAttribute(\"aria-hidden\", true);\n  this.tree.setAttribute(\"aria-expanded\", false);\n\n  util.truncate(this.tree);\n  clearSearch.call(this);\n};\n\n\n/**\n * Enable the element\n * @return {void}\n */\nSelectr.prototype.enable = function() {\n  this.disabled = false;\n  this.el.disabled = false;\n\n  this.selected.tabIndex = this.originalIndex;\n\n  if (this.el.multiple) {\n    util.each(this.tags, function(i, t) {\n      t.lastElementChild.tabIndex = 0;\n    });\n  }\n\n  util.removeClass(this.container, \"selectr-disabled\");\n};\n\n/**\n * Disable the element\n * @param  {boolean} container Disable the container only (allow value submit with form)\n * @return {void}\n */\nSelectr.prototype.disable = function(container) {\n  if (!container) {\n    this.el.disabled = true;\n  }\n\n  this.selected.tabIndex = -1;\n\n  if (this.el.multiple) {\n    util.each(this.tags, function(i, t) {\n      t.lastElementChild.tabIndex = -1;\n    });\n  }\n\n  this.disabled = true;\n  util.addClass(this.container, \"selectr-disabled\");\n};\n\n\n/**\n * Reset to initial state\n * @return {void}\n */\nSelectr.prototype.reset = function() {\n  if (!this.disabled) {\n    this.clear();\n\n    this.setSelected(true);\n\n    util.each(this.defaultSelected, function(i, idx) {\n      this.select(idx);\n    }, this);\n\n    this.emit(\"selectr.reset\");\n  }\n};\n\n/**\n * Clear all selections\n * @return {void}\n */\nSelectr.prototype.clear = function(force) {\n\n  if (this.el.multiple) {\n    // Loop over the selectedIndexes so we don't have to loop over all the options\n    // which can be costly if there are a lot of them\n\n    if (this.selectedIndexes.length) {\n      // Copy the array or we'll get an error\n      var indexes = this.selectedIndexes.slice();\n\n      util.each(indexes, function(i, idx) {\n        this.deselect(idx);\n      }, this);\n    }\n  } else {\n    if (this.selectedIndex > -1) {\n      this.deselect(this.selectedIndex, force);\n    }\n  }\n\n  this.emit(\"selectr.clear\");\n};\n\n/**\n * Return serialised data\n * @param  {boolean} toJson\n * @return {mixed} Returns either an object or JSON string\n */\nSelectr.prototype.serialise = function(toJson) {\n  var data = [];\n  util.each(this.options, function(i, option) {\n    var obj = {\n      value: option.value,\n      text: option.textContent\n    };\n\n    if (option.selected) {\n      obj.selected = true;\n    }\n    if (option.disabled) {\n      obj.disabled = true;\n    }\n    data[i] = obj;\n  });\n\n  return toJson ? JSON.stringify(data) : data;\n};\n\n/**\n * Localised version of serialise() method\n */\nSelectr.prototype.serialize = function(toJson) {\n  return this.serialise(toJson);\n};\n\n/**\n * Sets the placeholder\n * @param {String} placeholder\n */\nSelectr.prototype.setPlaceholder = function(placeholder) {\n  // Set the placeholder\n  placeholder = placeholder || this.config.placeholder || this.el.getAttribute(\"placeholder\");\n\n  if (!this.options.length) {\n    placeholder = \"No options available\";\n  }\n\n  this.placeEl.innerHTML = placeholder;\n};\n\n/**\n * Paginate the option list\n * @return {Array}\n */\nSelectr.prototype.paginate = function() {\n  if (this.items.length) {\n    var that = this;\n\n    this.pages = this.items.map(function(v, i) {\n      return i % that.config.pagination === 0 ? that.items.slice(i, i + that.config.pagination) : null;\n    }).filter(function(pages) {\n      return pages;\n    });\n\n    return this.pages;\n  }\n};\n\n/**\n * Display a message\n * @param  {String} message The message\n */\nSelectr.prototype.setMessage = function(message, close) {\n  if (close) {\n    this.close();\n  }\n  util.addClass(this.container, \"notice\");\n  this.notice.textContent = message;\n};\n\n/**\n * Dismiss the current message\n */\nSelectr.prototype.removeMessage = function() {\n  util.removeClass(this.container, \"notice\");\n  this.notice.innerHTML = \"\";\n};\n\n/**\n * Keep the dropdown within the window\n * @return {void}\n */\nSelectr.prototype.invert = function() {\n  var rt = util.rect(this.selected),\n      oh = this.tree.parentNode.offsetHeight,\n      wh = window.innerHeight,\n      doInvert = rt.top + rt.height + oh > wh;\n\n  if (doInvert) {\n    util.addClass(this.container, \"inverted\");\n    this.isInverted = true;\n  } else {\n    util.removeClass(this.container, \"inverted\");\n    this.isInverted = false;\n  }\n\n  this.optsRect = util.rect(this.tree);\n};\n\n/**\n * Get an option via it's index\n * @param  {Integer} index The index of the HTMLOptionElement required\n * @return {HTMLOptionElement}\n */\nSelectr.prototype.getOptionByIndex = function(index) {\n  return this.options[index];\n};\n\n/**\n * Get an option via it's value\n * @param  {String} value The value of the HTMLOptionElement required\n * @return {HTMLOptionElement}\n */\nSelectr.prototype.getOptionByValue = function(value) {\n  var option = false;\n\n  for (var i = 0, l = this.options.length; i < l; i++) {\n    if (this.options[i].value.trim() === value.toString().trim()) {\n      option = this.options[i];\n      break;\n    }\n  }\n\n  return option;\n};\n\nmodule.exports = Selectr;\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Convert part of a JSON object to a JSON string.\n * Use case is to stringify a small part of a large JSON object so you can see\n * a preview.\n *\n * @param {*} value\n * The value to convert to a JSON string.\n *\n * @param {number | string | null} [space]\n * A String or Number object that's used to insert white space into the output\n * JSON string for readability purposes. If this is a Number, it indicates the\n * number of space characters to use as white space; this number is capped at 10\n * if it's larger than that. Values less than 1 indicate that no space should be\n * used. If this is a String, the string (or the first 10 characters of the string,\n * if it's longer than that) is used as white space. If this parameter is not\n * provided (or is null), no white space is used.\n *\n * @param {number} [limit] Maximum size of the string output.\n *\n * @returns {string | undefined} Returns the string representation of the JSON object.\n */\nfunction stringifyPartial(value, space, limit) {\n  var _space; // undefined by default\n  if (typeof space === 'number') {\n    if (space > 10) {\n      _space = repeat(' ', 10);\n    }\n    else if (space >= 1) {\n      _space = repeat(' ', space);\n    }\n    // else ignore\n  }\n  else if (typeof space === 'string' && space !== '') {\n    _space = space;\n  }\n\n  var output = stringifyValue(value, _space, '', limit);\n\n  return output.length > limit\n      ? (slice(output, limit) + '...')\n      : output;\n}\n\n/**\n * Stringify a value\n * @param {*} value\n * @param {string} space\n * @param {string} indent\n * @param {number} limit\n * @return {string | undefined}\n */\nfunction stringifyValue(value, space, indent, limit) {\n  // boolean, null, number, string, or date\n  if (typeof value === 'boolean' || value instanceof Boolean ||\n      value === null ||\n      typeof value === 'number' || value instanceof Number ||\n      typeof value === 'string' || value instanceof String ||\n      value instanceof Date) {\n    return JSON.stringify(value);\n  }\n\n  // array\n  if (Array.isArray(value)) {\n    return stringifyArray(value, space, indent, limit);\n  }\n\n  // object (test lastly!)\n  if (value && typeof value === 'object') {\n    return stringifyObject(value, space, indent, limit);\n  }\n\n  return undefined;\n}\n\n/**\n * Stringify an array\n * @param {Array} array\n * @param {string} space\n * @param {string} indent\n * @param {number} limit\n * @return {string}\n */\nfunction stringifyArray(array, space, indent, limit) {\n  var childIndent = space ? (indent + space) : undefined;\n  var str = space ? '[\\n' : '[';\n\n  for (var i = 0; i < array.length; i++) {\n    var item = array[i];\n\n    if (space) {\n      str += childIndent;\n    }\n\n    if (typeof item !== 'undefined' && typeof item !== 'function') {\n      str += stringifyValue(item, space, childIndent, limit);\n    }\n    else {\n      str += 'null'\n    }\n\n    if (i < array.length - 1) {\n      str += space ? ',\\n' : ',';\n    }\n\n    // stop as soon as we're exceeding the limit\n    if (str.length > limit) {\n      return str + '...';\n    }\n  }\n\n  str += space ? ('\\n' + indent + ']') : ']';\n  return str;\n}\n\n/**\n * Stringify an object\n * @param {Object} object\n * @param {string} space\n * @param {string} indent\n * @param {number} limit\n * @return {string}\n */\nfunction stringifyObject(object, space, indent, limit) {\n  var childIndent = space ? (indent + space) : undefined;\n  var first = true;\n  var str = space ? '{\\n' : '{';\n\n  if (typeof object.toJSON === 'function') {\n    return stringifyValue(object.toJSON(), space, indent, limit);\n  }\n\n  for (var key in object) {\n    if (object.hasOwnProperty(key)) {\n      var value = object[key];\n\n      if (first) {\n        first = false;\n      }\n      else {\n        str += space ? ',\\n' : ',';\n      }\n\n      str += space\n          ? (childIndent + '\"' + key + '\": ')\n          : ('\"' + key + '\":');\n\n      str += stringifyValue(value, space, childIndent, limit);\n\n      // stop as soon as we're exceeding the limit\n      if (str.length > limit) {\n        return str + '...';\n      }\n    }\n  }\n\n  str += space ? ('\\n' + indent + '}') : '}';\n  return str;\n}\n\n/**\n * Repeat a string a number of times.\n * Simple linear solution, we only need up to 10 iterations in practice\n * @param {string} text\n * @param {number} times\n * @return {string}\n */\nfunction repeat (text, times) {\n  var res = '';\n  while (times-- > 0) {\n    res += text;\n  }\n  return res;\n}\n\n/**\n * Limit the length of text\n * @param {string} text\n * @param {number} [limit]\n * @return {string}\n */\nfunction slice(text, limit) {\n  return typeof limit === 'number'\n      ? text.slice(0, limit)\n      : text;\n}\n\n/**\n * Test whether some text contains a JSON array, i.e. the first\n * non-white space character is a [\n * @param {string} jsonText\n * @return {boolean}\n */\nfunction containsArray (jsonText) {\n  return /^\\s*\\[/.test(jsonText)\n}\n\nexports.stringifyPartial = stringifyPartial;\nexports.containsArray = containsArray;\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar defaultFilterFunction = {\n  start: function (token, match, config) {\n    return match.indexOf(token) === 0;\n  },\n  contain: function (token, match, config) {\n    return match.indexOf(token) > -1;\n  }\n};\n\nfunction completely(config) {\n    config = config || {};\n    config.filter = config.filter || 'start';\n    config.trigger = config.trigger || 'keydown';\n    config.confirmKeys = config.confirmKeys || [39, 35, 9] // right, end, tab\n    config.caseSensitive = config.caseSensitive || false    // autocomplete case sensitive\n\n    var fontSize = '';\n    var fontFamily = '';    \n\n    var wrapper = document.createElement('div');\n    wrapper.style.position = 'relative';\n    wrapper.style.outline = '0';\n    wrapper.style.border = '0';\n    wrapper.style.margin = '0';\n    wrapper.style.padding = '0';\n\n    var dropDown = document.createElement('div');\n    dropDown.className = 'autocomplete dropdown';\n    dropDown.style.position = 'absolute';\n    dropDown.style.visibility = 'hidden';\n\n    var spacer;\n    var leftSide; // <-- it will contain the leftSide part of the textfield (the bit that was already autocompleted)\n    var createDropDownController = function (elem, rs) {\n        var rows = [];\n        var ix = 0;\n        var oldIndex = -1;\n\n        var onMouseOver = function () { this.style.outline = '1px solid #ddd'; }\n        var onMouseOut = function () { this.style.outline = '0'; }\n        var onMouseDown = function () { p.hide(); p.onmouseselection(this.__hint, p.rs); }\n\n        var p = {\n            rs: rs,\n            hide: function () {\n                elem.style.visibility = 'hidden';\n                //rs.hideDropDown();\n            },\n            refresh: function (token, array) {\n                elem.style.visibility = 'hidden';\n                ix = 0;\n                elem.innerHTML = '';\n                var vph = (window.innerHeight || document.documentElement.clientHeight);\n                var rect = elem.parentNode.getBoundingClientRect();\n                var distanceToTop = rect.top - 6;                        // heuristic give 6px \n                var distanceToBottom = vph - rect.bottom - 6;  // distance from the browser border.\n\n                rows = [];\n                var filterFn = typeof config.filter === 'function' ? config.filter : defaultFilterFunction[config.filter];\n\n                var filtered = !filterFn ? [] : array.filter(function (match) {\n                  return filterFn(config.caseSensitive ? token : token.toLowerCase(), config.caseSensitive ? match : match.toLowerCase(), config);\n                });\n\n                rows = filtered.map(function (row) {\n                  var divRow = document.createElement('div');\n                  divRow.className = 'item';\n                  //divRow.style.color = config.color;\n                  divRow.onmouseover = onMouseOver;\n                  divRow.onmouseout = onMouseOut;\n                  divRow.onmousedown = onMouseDown;\n                  divRow.__hint = row;\n                  divRow.innerHTML = row.substring(0, token.length) + '<b>' + row.substring(token.length) + '</b>';\n                  elem.appendChild(divRow);\n                  return divRow;\n                });\n\n                if (rows.length === 0) {\n                    return; // nothing to show.\n                }\n                if (rows.length === 1 && (   (token.toLowerCase() === rows[0].__hint.toLowerCase() && !config.caseSensitive) \n                                           ||(token === rows[0].__hint && config.caseSensitive))){\n                    return; // do not show the dropDown if it has only one element which matches what we have just displayed.\n                }\n\n                if (rows.length < 2) return;\n                p.highlight(0);\n\n                if (distanceToTop > distanceToBottom * 3) {        // Heuristic (only when the distance to the to top is 4 times more than distance to the bottom\n                    elem.style.maxHeight = distanceToTop + 'px';  // we display the dropDown on the top of the input text\n                    elem.style.top = '';\n                    elem.style.bottom = '100%';\n                } else {\n                    elem.style.top = '100%';\n                    elem.style.bottom = '';\n                    elem.style.maxHeight = distanceToBottom + 'px';\n                }\n                elem.style.visibility = 'visible';\n            },\n            highlight: function (index) {\n                if (oldIndex != -1 && rows[oldIndex]) {\n                    rows[oldIndex].className = \"item\";\n                }\n                rows[index].className = \"item hover\"; \n                oldIndex = index;\n            },\n            move: function (step) { // moves the selection either up or down (unless it's not possible) step is either +1 or -1.\n                if (elem.style.visibility === 'hidden') return ''; // nothing to move if there is no dropDown. (this happens if the user hits escape and then down or up)\n                if (ix + step === -1 || ix + step === rows.length) return rows[ix].__hint; // NO CIRCULAR SCROLLING. \n                ix += step;\n                p.highlight(ix);\n                return rows[ix].__hint;//txtShadow.value = uRows[uIndex].__hint ;\n            },\n            onmouseselection: function () { } // it will be overwritten. \n        };\n        return p;\n    }\n\n    function setEndOfContenteditable(contentEditableElement) {\n        var range, selection;\n        if (document.createRange)//Firefox, Chrome, Opera, Safari, IE 9+\n        {\n            range = document.createRange();//Create a range (a range is a like the selection but invisible)\n            range.selectNodeContents(contentEditableElement);//Select the entire contents of the element with the range\n            range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start\n            selection = window.getSelection();//get the selection object (allows you to change selection)\n            selection.removeAllRanges();//remove any selections already made\n            selection.addRange(range);//make the range you have just created the visible selection\n        }\n        else if (document.selection)//IE 8 and lower\n        {\n            range = document.body.createTextRange();//Create a range (a range is a like the selection but invisible)\n            range.moveToElementText(contentEditableElement);//Select the entire contents of the element with the range\n            range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start\n            range.select();//Select the range (make it the visible selection\n        }\n    }\n\n    function calculateWidthForText(text) {\n        if (spacer === undefined) { // on first call only.\n            spacer = document.createElement('span');\n            spacer.style.visibility = 'hidden';\n            spacer.style.position = 'fixed';\n            spacer.style.outline = '0';\n            spacer.style.margin = '0';\n            spacer.style.padding = '0';\n            spacer.style.border = '0';\n            spacer.style.left = '0';\n            spacer.style.whiteSpace = 'pre';\n            spacer.style.fontSize = fontSize;\n            spacer.style.fontFamily = fontFamily;\n            spacer.style.fontWeight = 'normal';\n            document.body.appendChild(spacer);\n        }\n\n        // Used to encode an HTML string into a plain text.\n        // taken from http://stackoverflow.com/questions/1219860/javascript-jquery-html-encoding\n        spacer.innerHTML = String(text).replace(/&/g, '&amp;')\n            .replace(/\"/g, '&quot;')\n            .replace(/'/g, '&#39;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;');\n        return spacer.getBoundingClientRect().right;\n    }\n\n    var rs = {\n        onArrowDown: function () { }, // defaults to no action.\n        onArrowUp: function () { },   // defaults to no action.\n        onEnter: function () { },     // defaults to no action.\n        onTab: function () { },       // defaults to no action.\n        startFrom: 0,\n        options: [],\n        element: null,\n        elementHint: null,\n        elementStyle: null,\n        wrapper: wrapper,      // Only to allow  easy access to the HTML elements to the final user (possibly for minor customizations)\n        show: function (element, startPos, options) {\n            this.startFrom = startPos;\n            this.wrapper.remove();\n            if (this.elementHint) {\n                this.elementHint.remove();\n                this.elementHint = null;\n            }\n            \n            if (fontSize == '') {\n                fontSize = window.getComputedStyle(element).getPropertyValue('font-size');\n            }\n            if (fontFamily == '') {\n                fontFamily = window.getComputedStyle(element).getPropertyValue('font-family');\n            }\n            \n            var w = element.getBoundingClientRect().right - element.getBoundingClientRect().left;\n            dropDown.style.marginLeft = '0';\n            dropDown.style.marginTop = element.getBoundingClientRect().height + 'px';\n            this.options = options;\n\n            if (this.element != element) {\n                this.element = element;\n                this.elementStyle = {\n                    zIndex: this.element.style.zIndex,\n                    position: this.element.style.position,\n                    backgroundColor: this.element.style.backgroundColor,\n                    borderColor: this.element.style.borderColor\n                }\n            }\n\n            this.element.style.zIndex = 3;\n            this.element.style.position = 'relative';\n            this.element.style.backgroundColor = 'transparent';\n            this.element.style.borderColor = 'transparent';\n\n            this.elementHint = element.cloneNode();\n            this.elementHint.className = 'autocomplete hint';\n            this.elementHint.style.zIndex = 2;\n            this.elementHint.style.position = 'absolute';\n            this.elementHint.onfocus = function () { this.element.focus(); }.bind(this);\n\n\n\n            if (this.element.addEventListener) {\n                this.element.removeEventListener(\"keydown\", keyDownHandler);\n                this.element.addEventListener(\"keydown\", keyDownHandler, false);\n                this.element.removeEventListener(\"blur\", onBlurHandler);\n                this.element.addEventListener(\"blur\", onBlurHandler, false);                \n            } \n\n            wrapper.appendChild(this.elementHint);\n            wrapper.appendChild(dropDown);\n            element.parentElement.appendChild(wrapper);\n\n\n            this.repaint(element);\n        },\n        setText: function (text) {\n            this.element.innerText = text;\n        },\n        getText: function () {\n            return this.element.innerText;\n        },\n        hideDropDown: function () {\n            this.wrapper.remove();\n            if (this.elementHint) {\n                this.elementHint.remove();\n                this.elementHint = null;\n                dropDownController.hide();\n                this.element.style.zIndex = this.elementStyle.zIndex;\n                this.element.style.position = this.elementStyle.position;\n                this.element.style.backgroundColor = this.elementStyle.backgroundColor;\n                this.element.style.borderColor = this.elementStyle.borderColor;\n            }\n            \n        },\n        repaint: function (element) {\n            var text = element.innerText;\n            text = text.replace('\\n', '');\n\n            var startFrom = this.startFrom;\n            var options = this.options;\n            var optionsLength = this.options.length;\n\n            // breaking text in leftSide and token.\n            \n            var token = text.substring(this.startFrom);\n            leftSide = text.substring(0, this.startFrom);\n            \n            for (var i = 0; i < optionsLength; i++) {\n                var opt = this.options[i];\n                if (   (!config.caseSensitive && opt.toLowerCase().indexOf(token.toLowerCase()) === 0)\n                    || (config.caseSensitive && opt.indexOf(token) === 0)) {   // <-- how about upperCase vs. lowercase\n                    this.elementHint.innerText = leftSide + token + opt.substring(token.length);\n                    this.elementHint.realInnerText = leftSide + opt;\n                    break;\n                }\n            }\n            // moving the dropDown and refreshing it.\n            dropDown.style.left = calculateWidthForText(leftSide) + 'px';\n            dropDownController.refresh(token, this.options);\n            this.elementHint.style.width = calculateWidthForText(this.elementHint.innerText) + 10 + 'px'\n            var wasDropDownHidden = (dropDown.style.visibility == 'hidden');\n            if (!wasDropDownHidden)\n                this.elementHint.style.width = calculateWidthForText(this.elementHint.innerText) + dropDown.clientWidth + 'px';\n        }\n    };\n\n    var dropDownController = createDropDownController(dropDown, rs);\n\n    var keyDownHandler = function (e) {\n        //console.log(\"Keydown:\" + e.keyCode);\n        e = e || window.event;\n        var keyCode = e.keyCode;\n\n        if (this.elementHint == null) return;\n\n        if (keyCode == 33) { return; } // page up (do nothing)\n        if (keyCode == 34) { return; } // page down (do nothing);\n\n        if (keyCode == 27) { //escape\n            rs.hideDropDown();\n            rs.element.focus();\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n        }\n\n        var text = this.element.innerText;\n        text = text.replace('\\n', '');\n        var startFrom = this.startFrom;\n\n        if (config.confirmKeys.indexOf(keyCode) >= 0) { //  (autocomplete triggered)\n            if (keyCode == 9) {                 \n                if (this.elementHint.innerText.length == 0) {\n                    rs.onTab(); \n                }\n            }\n            if (this.elementHint.innerText.length > 0) { // if there is a hint               \n                if (this.element.innerText != this.elementHint.realInnerText) {\n                    this.element.innerText = this.elementHint.realInnerText;\n                    rs.hideDropDown();\n                    setEndOfContenteditable(this.element);\n                    if (keyCode == 9) {                \n                        rs.element.focus();\n                        e.preventDefault();\n                        e.stopPropagation();\n                    }\n                }                \n            }\n            return;\n        }\n\n        if (keyCode == 13) {       // enter  (autocomplete triggered)\n            if (this.elementHint.innerText.length == 0) { // if there is a hint\n                rs.onEnter();\n            } else {\n                var wasDropDownHidden = (dropDown.style.visibility == 'hidden');\n                dropDownController.hide();\n\n                if (wasDropDownHidden) {\n                    rs.hideDropDown();\n                    rs.element.focus();\n                    rs.onEnter();\n                    return;\n                }\n\n                this.element.innerText = this.elementHint.realInnerText;\n                rs.hideDropDown();\n                setEndOfContenteditable(this.element);\n                e.preventDefault();\n                e.stopPropagation();\n            }\n            return;\n        }\n\n        if (keyCode == 40) {     // down\n            var token = text.substring(this.startFrom);\n            var m = dropDownController.move(+1);\n            if (m == '') { rs.onArrowDown(); }\n            this.elementHint.innerText = leftSide + token + m.substring(token.length);\n            this.elementHint.realInnerText = leftSide + m;\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n        }\n\n        if (keyCode == 38) {    // up\n            var token = text.substring(this.startFrom);\n            var m = dropDownController.move(-1);\n            if (m == '') { rs.onArrowUp(); }\n            this.elementHint.innerText = leftSide + token + m.substring(token.length);\n            this.elementHint.realInnerText = leftSide + m;\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n        }\n\n    }.bind(rs);\n\n    var onBlurHandler = function (e) {\n        rs.hideDropDown();\n        //console.log(\"Lost focus.\");\n    }.bind(rs);\n\n    dropDownController.onmouseselection = function (text, rs) {\n        rs.element.innerText = rs.elementHint.innerText = leftSide + text;        \n        rs.hideDropDown();   \n        window.setTimeout(function () {\n            rs.element.focus();\n            setEndOfContenteditable(rs.element);  \n        }, 1);              \n    };\n\n    return rs;\n}\n\nmodule.exports = completely;\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isPromise = __webpack_require__(0).isPromise;\nvar isValidValidationError = __webpack_require__(0).isValidValidationError;\nvar stringifyPath = __webpack_require__(0).stringifyPath;\n\n/**\n * Execute custom validation if configured.\n *\n * Returns a promise resolving with the custom errors (or an empty array).\n */\nfunction validateCustom (json, onValidate) {\n  if (!onValidate) {\n    return Promise.resolve([]);\n  }\n\n  try {\n    var customValidateResults = onValidate(json);\n\n    var resultPromise = isPromise(customValidateResults)\n        ? customValidateResults\n        : Promise.resolve(customValidateResults);\n\n    return resultPromise.then(function (customValidationPathErrors) {\n      if (Array.isArray(customValidationPathErrors)) {\n        return customValidationPathErrors\n            .filter(function (error) {\n              var valid = isValidValidationError(error);\n\n              if (!valid) {\n                console.warn('Ignoring a custom validation error with invalid structure. ' +\n                    'Expected structure: {path: [...], message: \"...\"}. ' +\n                    'Actual error:', error);\n              }\n\n              return valid;\n            })\n            .map(function (error) {\n              // change data structure into the structure matching the JSON schema errors\n              return {\n                dataPath: stringifyPath(error.path),\n                message: error.message\n              }\n            });\n      }\n      else {\n        return [];\n      }\n    });\n  }\n  catch (err) {\n    return Promise.reject(err);\n  }\n}\n\nexports.validateCustom = validateCustom;\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports) {\n\n/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\nace.define('ace/theme/jsoneditor', ['require', 'exports', 'module', 'ace/lib/dom'], function(acequire, exports, module) {\n\nexports.isDark = false;\nexports.cssClass = \"ace-jsoneditor\";\nexports.cssText = \".ace-jsoneditor .ace_gutter {\\\nbackground: #ebebeb;\\\ncolor: #333\\\n}\\\n\\\n.ace-jsoneditor.ace_editor {\\\nfont-family: \\\"dejavu sans mono\\\", \\\"droid sans mono\\\", consolas, monaco, \\\"lucida console\\\", \\\"courier new\\\", courier, monospace, sans-serif;\\\nline-height: 1.3;\\\nbackground-color: #fff;\\\n}\\\n.ace-jsoneditor .ace_print-margin {\\\nwidth: 1px;\\\nbackground: #e8e8e8\\\n}\\\n.ace-jsoneditor .ace_scroller {\\\nbackground-color: #FFFFFF\\\n}\\\n.ace-jsoneditor .ace_text-layer {\\\ncolor: gray\\\n}\\\n.ace-jsoneditor .ace_variable {\\\ncolor: #1a1a1a\\\n}\\\n.ace-jsoneditor .ace_cursor {\\\nborder-left: 2px solid #000000\\\n}\\\n.ace-jsoneditor .ace_overwrite-cursors .ace_cursor {\\\nborder-left: 0px;\\\nborder-bottom: 1px solid #000000\\\n}\\\n.ace-jsoneditor .ace_marker-layer .ace_selection {\\\nbackground: lightgray\\\n}\\\n.ace-jsoneditor.ace_multiselect .ace_selection.ace_start {\\\nbox-shadow: 0 0 3px 0px #FFFFFF;\\\nborder-radius: 2px\\\n}\\\n.ace-jsoneditor .ace_marker-layer .ace_step {\\\nbackground: rgb(255, 255, 0)\\\n}\\\n.ace-jsoneditor .ace_marker-layer .ace_bracket {\\\nmargin: -1px 0 0 -1px;\\\nborder: 1px solid #BFBFBF\\\n}\\\n.ace-jsoneditor .ace_marker-layer .ace_active-line {\\\nbackground: #FFFBD1\\\n}\\\n.ace-jsoneditor .ace_gutter-active-line {\\\nbackground-color : #dcdcdc\\\n}\\\n.ace-jsoneditor .ace_marker-layer .ace_selected-word {\\\nborder: 1px solid lightgray\\\n}\\\n.ace-jsoneditor .ace_invisible {\\\ncolor: #BFBFBF\\\n}\\\n.ace-jsoneditor .ace_keyword,\\\n.ace-jsoneditor .ace_meta,\\\n.ace-jsoneditor .ace_support.ace_constant.ace_property-value {\\\ncolor: #AF956F\\\n}\\\n.ace-jsoneditor .ace_keyword.ace_operator {\\\ncolor: #484848\\\n}\\\n.ace-jsoneditor .ace_keyword.ace_other.ace_unit {\\\ncolor: #96DC5F\\\n}\\\n.ace-jsoneditor .ace_constant.ace_language {\\\ncolor: darkorange\\\n}\\\n.ace-jsoneditor .ace_constant.ace_numeric {\\\ncolor: red\\\n}\\\n.ace-jsoneditor .ace_constant.ace_character.ace_entity {\\\ncolor: #BF78CC\\\n}\\\n.ace-jsoneditor .ace_invalid {\\\ncolor: #FFFFFF;\\\nbackground-color: #FF002A;\\\n}\\\n.ace-jsoneditor .ace_fold {\\\nbackground-color: #AF956F;\\\nborder-color: #000000\\\n}\\\n.ace-jsoneditor .ace_storage,\\\n.ace-jsoneditor .ace_support.ace_class,\\\n.ace-jsoneditor .ace_support.ace_function,\\\n.ace-jsoneditor .ace_support.ace_other,\\\n.ace-jsoneditor .ace_support.ace_type {\\\ncolor: #C52727\\\n}\\\n.ace-jsoneditor .ace_string {\\\ncolor: green\\\n}\\\n.ace-jsoneditor .ace_comment {\\\ncolor: #BCC8BA\\\n}\\\n.ace-jsoneditor .ace_entity.ace_name.ace_tag,\\\n.ace-jsoneditor .ace_entity.ace_other.ace_attribute-name {\\\ncolor: #606060\\\n}\\\n.ace-jsoneditor .ace_markup.ace_underline {\\\ntext-decoration: underline\\\n}\\\n.ace-jsoneditor .ace_indent-guide {\\\nbackground: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\\\") right repeat-y\\\n}\";\n\nvar dom = acequire(\"../lib/dom\");\ndom.importCssString(exports.cssText, exports.cssClass);\n});\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar jmespath = __webpack_require__(4);\nvar translate = __webpack_require__(1).translate;\nvar ModeSwitcher = __webpack_require__(7);\nvar ErrorTable = __webpack_require__(15);\nvar textmode = __webpack_require__(14)[0].mixin;\nvar showSortModal = __webpack_require__(5);\nvar showTransformModal = __webpack_require__(6);\nvar MAX_PREVIEW_CHARACTERS = __webpack_require__(2).MAX_PREVIEW_CHARACTERS;\nvar DEFAULT_MODAL_ANCHOR = __webpack_require__(2).DEFAULT_MODAL_ANCHOR;\nvar SIZE_LARGE = __webpack_require__(2).SIZE_LARGE;\nvar PREVIEW_HISTORY_LIMIT = __webpack_require__(2).PREVIEW_HISTORY_LIMIT;\nvar util = __webpack_require__(0);\nvar History = __webpack_require__(36);\n\n// create a mixin with the functions for text mode\nvar previewmode = {};\n\n/**\n * Create a JSON document preview, suitable for processing of large documents\n * @param {Element} container\n * @param {Object} [options]   Object with options. See docs for details.\n * @private\n */\npreviewmode.create = function (container, options) {\n  // read options\n  options = options || {};\n  \n  if (typeof options.statusBar === 'undefined') {\n    options.statusBar = true;\n  }\n\n  // setting default for previewmode\n  options.mainMenuBar = options.mainMenuBar !== false;\n  options.enableSort = options.enableSort !== false;\n  options.enableTransform = options.enableTransform !== false;\n\n  this.options = options;\n\n  // indentation\n  if (options.indentation) {\n    this.indentation = Number(options.indentation);\n  }\n  else {\n    this.indentation = 2; // number of spaces\n  }\n\n  // determine mode\n  this.mode = 'preview';\n\n  var me = this;\n  this.container = container;\n  this.dom = {};\n\n  this.json = undefined;\n  this.text = '';\n\n  // TODO: JSON Schema support\n\n  // create a debounced validate function\n  this._debouncedValidate = util.debounce(this.validate.bind(this), this.DEBOUNCE_INTERVAL);\n\n  this.width = container.clientWidth;\n  this.height = container.clientHeight;\n\n  this.frame = document.createElement('div');\n  this.frame.className = 'jsoneditor jsoneditor-mode-preview';\n  this.frame.onclick = function (event) {\n    // prevent default submit action when the editor is located inside a form\n    event.preventDefault();\n  };\n\n  this.content = document.createElement('div');\n  this.content.className = 'jsoneditor-outer';\n\n  this.dom.busy = document.createElement('div')\n  this.dom.busy.className = 'jsoneditor-busy';\n  this.dom.busyContent = document.createElement('span');\n  this.dom.busyContent.innerHTML = 'busy...';\n  this.dom.busy.appendChild(this.dom.busyContent);\n  this.content.appendChild(this.dom.busy);\n\n  this.dom.previewContent = document.createElement('pre');\n  this.dom.previewContent.className = 'jsoneditor-preview';\n  this.dom.previewText = document.createTextNode('');\n  this.dom.previewContent.appendChild(this.dom.previewText);\n  this.content.appendChild(this.dom.previewContent);\n\n  if (this.options.mainMenuBar) {\n    util.addClassName(this.content, 'has-main-menu-bar');\n\n    // create menu\n    this.menu = document.createElement('div');\n    this.menu.className = 'jsoneditor-menu';\n    this.frame.appendChild(this.menu);\n\n    // create format button\n    var buttonFormat = document.createElement('button');\n    buttonFormat.type = 'button';\n    buttonFormat.className = 'jsoneditor-format';\n    buttonFormat.title = 'Format JSON data, with proper indentation and line feeds (Ctrl+\\\\)';\n    this.menu.appendChild(buttonFormat);\n    buttonFormat.onclick = function handleFormat() {\n      me.executeWithBusyMessage(function () {\n        try {\n          me.format();\n        }\n        catch (err) {\n          me._onError(err);\n        }\n      }, 'formatting...');\n    };\n\n    // create compact button\n    var buttonCompact = document.createElement('button');\n    buttonCompact.type = 'button';\n    buttonCompact.className = 'jsoneditor-compact';\n    buttonCompact.title = 'Compact JSON data, remove all whitespaces (Ctrl+Shift+\\\\)';\n    this.menu.appendChild(buttonCompact);\n    buttonCompact.onclick = function handleCompact() {\n      me.executeWithBusyMessage(function () {\n        try {\n          me.compact();\n        }\n        catch (err) {\n          me._onError(err);\n        }\n      }, 'compacting...');\n    };\n\n    // create sort button\n    if (this.options.enableSort) {\n      var sort = document.createElement('button');\n      sort.type = 'button';\n      sort.className = 'jsoneditor-sort';\n      sort.title = translate('sortTitleShort');\n      sort.onclick = function () {\n        me._showSortModal();\n      };\n      this.menu.appendChild(sort);\n    }\n\n    // create transform button\n    if (this.options.enableTransform) {\n      var transform = document.createElement('button');\n      transform.type = 'button';\n      transform.title = translate('transformTitleShort');\n      transform.className = 'jsoneditor-transform';\n      transform.onclick = function () {\n        me._showTransformModal();\n      };\n      this.dom.transform = transform;\n      this.menu.appendChild(transform);\n    }\n\n    // create repair button\n    var buttonRepair = document.createElement('button');\n    buttonRepair.type = 'button';\n    buttonRepair.className = 'jsoneditor-repair';\n    buttonRepair.title = 'Repair JSON: fix quotes and escape characters, remove comments and JSONP notation, turn JavaScript objects into JSON.';\n    this.menu.appendChild(buttonRepair);\n    buttonRepair.onclick = function () {\n      if (me.json === undefined) { // only repair if we don't have valid JSON\n        me.executeWithBusyMessage(function () {\n          try {\n            me.repair();\n          }\n          catch (err) {\n            me._onError(err);\n          }\n        }, 'repairing...');\n      }\n    };\n\n    // create history and undo/redo buttons\n    if (this.options.history !== false) { // default option value is true\n      var onHistoryChange = function () {\n        me.dom.undo.disabled = !me.history.canUndo();\n        me.dom.redo.disabled = !me.history.canRedo();\n      };\n\n      var calculateItemSize = function (item) {\n        return item.text.length * 2; // times two to account for the json object\n      }\n\n      this.history = new History(onHistoryChange, calculateItemSize, PREVIEW_HISTORY_LIMIT);\n\n      // create undo button\n      var undo = document.createElement('button');\n      undo.type = 'button';\n      undo.className = 'jsoneditor-undo jsoneditor-separator';\n      undo.title = translate('undo');\n      undo.onclick = function () {\n        var action = me.history.undo();\n        if (action) {\n          me._applyHistory(action);\n        }\n      };\n      this.menu.appendChild(undo);\n      this.dom.undo = undo;\n\n      // create redo button\n      var redo = document.createElement('button');\n      redo.type = 'button';\n      redo.className = 'jsoneditor-redo';\n      redo.title = translate('redo');\n      redo.onclick = function () {\n        var action = me.history.redo();\n        if (action) {\n          me._applyHistory(action);\n        }\n      };\n      this.menu.appendChild(redo);\n      this.dom.redo = redo;\n\n      // force enabling/disabling the undo/redo button\n      this.history.onChange();\n    }\n\n    // create mode box\n    if (this.options && this.options.modes && this.options.modes.length) {\n      this.modeSwitcher = new ModeSwitcher(this.menu, this.options.modes, this.options.mode, function onSwitch(mode) {\n        // switch mode and restore focus\n        me.setMode(mode);\n        me.modeSwitcher.focus();\n      });\n    }\n  }\n\n  this.errorTable = new ErrorTable({\n    errorTableVisible: true,\n    onToggleVisibility: function () {\n      me.validate();\n    },\n    onFocusLine: null,\n    onChangeHeight: function (height) {\n      // TODO: change CSS to using flex box, remove setting height using JavaScript\n      var totalHeight = height + me.dom.statusBar.clientHeight + 1;\n      me.content.style.marginBottom = (-totalHeight) + 'px';\n      me.content.style.paddingBottom = totalHeight + 'px';\n    }\n  });\n\n  this.frame.appendChild(this.content);\n  this.frame.appendChild(this.errorTable.getErrorTable());\n  this.container.appendChild(this.frame);\n\n  if (options.statusBar) {\n    util.addClassName(this.content, 'has-status-bar');\n\n    var statusBar = document.createElement('div');\n    this.dom.statusBar = statusBar;\n    statusBar.className = 'jsoneditor-statusbar';\n    this.frame.appendChild(statusBar);\n\n    this.dom.fileSizeInfo = document.createElement('span');\n    this.dom.fileSizeInfo.className = 'jsoneditor-size-info';\n    this.dom.fileSizeInfo.innerText = '';\n    statusBar.appendChild(this.dom.fileSizeInfo);\n\n    this.dom.arrayInfo = document.createElement('span');\n    this.dom.arrayInfo.className = 'jsoneditor-size-info';\n    this.dom.arrayInfo.innerText = '';\n    statusBar.appendChild(this.dom.arrayInfo);\n\n    statusBar.appendChild(this.errorTable.getErrorCounter());\n    statusBar.appendChild(this.errorTable.getWarningIcon());\n    statusBar.appendChild(this.errorTable.getErrorIcon());\n  }\n\n  this._renderPreview();\n\n  this.setSchema(this.options.schema, this.options.schemaRefs);  \n};\n\npreviewmode._renderPreview = function () {\n  var text = this.getText();\n\n  this.dom.previewText.nodeValue = util.limitCharacters(text, MAX_PREVIEW_CHARACTERS);\n\n  if (this.dom.fileSizeInfo) {\n    this.dom.fileSizeInfo.innerText = 'Size: ' + util.formatSize(text.length);\n  }\n\n  if (this.dom.arrayInfo) {\n    if (Array.isArray(this.json)) {\n      this.dom.arrayInfo.innerText = ('Array: ' + this.json.length + ' items');\n    }\n    else {\n      this.dom.arrayInfo.innerText = '';\n    }\n  }\n};\n\n/**\n * Handle a change:\n * - Validate JSON schema\n * - Send a callback to the onChange listener if provided\n * @private\n */\npreviewmode._onChange = function () {\n  // validate JSON schema (if configured)\n  this._debouncedValidate();\n\n  // trigger the onChange callback\n  if (this.options.onChange) {\n    try {\n      this.options.onChange();\n    }\n    catch (err) {\n      console.error('Error in onChange callback: ', err);\n    }\n  }\n\n  // trigger the onChangeJSON callback\n  if (this.options.onChangeJSON) {\n    try {\n      this.options.onChangeJSON(this.get());\n    }\n    catch (err) {\n      console.error('Error in onChangeJSON callback: ', err);\n    }\n  }\n\n  // trigger the onChangeText callback\n  if (this.options.onChangeText) {\n    try {\n      this.options.onChangeText(this.getText());\n    }\n    catch (err) {\n      console.error('Error in onChangeText callback: ', err);\n    }\n  }\n};\n\n/**\n * Open a sort modal\n * @private\n */\npreviewmode._showSortModal = function () {\n  var me = this;\n\n  function onSort (json, sortedBy) {\n    if (Array.isArray(json)) {\n      var sortedArray = util.sort(json, sortedBy.path, sortedBy.direction);\n\n      me.sortedBy = sortedBy\n      me._setAndFireOnChange(sortedArray);\n    }\n\n    if (util.isObject(json)) {\n      var sortedObject = util.sortObjectKeys(json, sortedBy.direction);\n\n      me.sortedBy = sortedBy;\n      me._setAndFireOnChange(sortedObject);\n    }\n  }\n\n  this.executeWithBusyMessage(function () {\n    var container = me.options.modalAnchor || DEFAULT_MODAL_ANCHOR;\n    var json = me.get();\n    me._renderPreview(); // update array count\n\n    showSortModal(container, json, function (sortedBy) {\n      me.executeWithBusyMessage(function () {\n        onSort(json, sortedBy);\n      }, 'sorting...');\n    }, me.sortedBy)\n  }, 'parsing...');\n}\n\n/**\n * Open a transform modal\n * @private\n */\npreviewmode._showTransformModal = function () {\n  var me = this;\n\n  this.executeWithBusyMessage(function () {\n    var anchor = me.options.modalAnchor || DEFAULT_MODAL_ANCHOR;\n    var json = me.get();\n    me._renderPreview(); // update array count\n\n    showTransformModal(anchor, json, function (query) {\n      me.executeWithBusyMessage(function () {\n        var updatedJson = jmespath.search(json, query);\n        me._setAndFireOnChange(updatedJson);\n      }, 'transforming...')\n    })\n  }, 'parsing...')\n}\n\n/**\n * Destroy the editor. Clean up DOM, event listeners, and web workers.\n */\npreviewmode.destroy = function () {\n  if (this.frame && this.container && this.frame.parentNode === this.container) {\n    this.container.removeChild(this.frame);\n  }\n\n  if (this.modeSwitcher) {\n    this.modeSwitcher.destroy();\n    this.modeSwitcher = null;\n  }\n\n  this._debouncedValidate = null;\n\n  this.history.clear();\n  this.history = null;\n};\n\n/**\n * Compact the code in the text editor\n */\npreviewmode.compact = function () {\n  var json = this.get();\n  var text = JSON.stringify(json);\n\n  // we know that in this case the json is still the same, so we pass json too\n  this._setTextAndFireOnChange(text, json);\n};\n\n/**\n * Format the code in the text editor\n */\npreviewmode.format = function () {\n  var json = this.get();\n  var text = JSON.stringify(json, null, this.indentation);\n\n  // we know that in this case the json is still the same, so we pass json too\n  this._setTextAndFireOnChange(text, json);\n};\n\n/**\n * Repair the code in the text editor\n */\npreviewmode.repair = function () {\n  var text = this.getText();\n  var repairedText = util.repair(text);\n\n  this._setTextAndFireOnChange(repairedText);\n};\n\n/**\n * Set focus to the editor\n */\npreviewmode.focus = function () {\n  // we don't really have a place to focus,\n  // let's focus on the transform button\n  this.dom.transform.focus();\n};\n\n/**\n * Set json data in the editor\n * @param {*} json\n */\npreviewmode.set = function(json) {\n  if (this.history) {\n    this.history.clear();\n  }\n\n  this._set(json);\n};\n\n/**\n * Update data. Same as calling `set` in text/code mode.\n * @param {*} json\n */\npreviewmode.update = function(json) {\n  this._set(json);\n};\n\n/**\n * Set json data\n * @param {*} json\n */\npreviewmode._set = function(json) {\n  this.text = undefined;\n  this.json = json;\n\n  this._renderPreview();\n\n  this._pushHistory();\n\n  // validate JSON schema\n  this._debouncedValidate();\n};\n\npreviewmode._setAndFireOnChange = function (json) {\n  this._set(json);\n  this._onChange();\n}\n\n/**\n * Get json data\n * @return {*} json\n */\npreviewmode.get = function() {\n  if (this.json === undefined) {\n    var text = this.getText();\n\n    this.json = util.parse(text); // this can throw an error\n  }\n\n  return this.json;\n};\n\n/**\n * Get the text contents of the editor\n * @return {String} jsonText\n */\npreviewmode.getText = function() {\n  if (this.text === undefined) {\n    this.text = JSON.stringify(this.json, null, this.indentation);\n\n    if (this.options.escapeUnicode === true) {\n      this.text = util.escapeUnicodeChars(this.text);\n    }\n  }\n\n  return this.text;\n};\n\n/**\n * Set the text contents of the editor\n * @param {String} jsonText\n */\npreviewmode.setText = function(jsonText) {\n  if (this.history) {\n    this.history.clear();\n  }\n\n  this._setText(jsonText);\n};\n\n/**\n * Update the text contents\n * @param {string} jsonText\n */\npreviewmode.updateText = function(jsonText) {\n  // don't update if there are no changes\n  if (this.getText() === jsonText) {\n    return;\n  }\n\n  this._setText(jsonText);\n};\n\n/**\n * Set the text contents of the editor\n * @param {string} jsonText\n * @param {*} [json] Optional JSON instance of the text\n * @private\n */\npreviewmode._setText = function(jsonText, json) {\n  if (this.options.escapeUnicode === true) {\n    this.text = util.escapeUnicodeChars(jsonText);\n  }\n  else {\n    this.text = jsonText;\n  }\n  this.json = json;\n\n  this._renderPreview();\n\n  if (this.json === undefined) {\n    var me = this;\n    this.executeWithBusyMessage(function () {\n      try {\n        // force parsing the json now, else it will be done in validate without feedback\n        me.json = me.get();\n        me._renderPreview();\n        me._pushHistory();\n      }\n      catch (err) {\n        // no need to throw an error, validation will show an error\n      }\n    }, 'parsing...');\n  }\n  else {\n    this._pushHistory();\n  }\n\n  this._debouncedValidate();\n};\n\n/**\n * Set text and fire onChange callback\n * @param {string} jsonText\n * @param {*} [json] Optional JSON instance of the text\n * @private\n */\npreviewmode._setTextAndFireOnChange = function (jsonText, json) {\n  this._setText(jsonText, json);\n  this._onChange();\n}\n\n/**\n * Apply history to the current state\n * @param {{json?: JSON, text?: string}} action\n * @private\n */\npreviewmode._applyHistory = function (action) {\n  this.json = action.json;\n  this.text = action.text;\n\n  this._renderPreview();\n\n  this._debouncedValidate();\n};\n\n/**\n * Push the current state to history\n * @private\n */\npreviewmode._pushHistory = function () {\n  if (!this.history) {\n    return;\n  }\n\n  var action = {\n    text: this.text,\n    json: this.json\n  };\n\n  this.history.add(action);\n}\n\n/**\n * Execute a heavy, blocking action.\n * Before starting the action, show a message on screen like \"parsing...\"\n * @param {function} fn\n * @param {string} message\n */\npreviewmode.executeWithBusyMessage = function (fn, message) {\n  var size = this.getText().length;\n\n  if (size > SIZE_LARGE) {\n    var me = this;\n    util.addClassName(me.frame, 'busy');\n    me.dom.busyContent.innerText = message;\n\n    setTimeout(function () {\n      fn();\n      util.removeClassName(me.frame, 'busy');\n      me.dom.busyContent.innerText = '';\n    }, 100);\n  }\n  else {\n    fn();\n  }\n};\n\n// TODO: refactor into composable functions instead of this shaky mixin-like structure\npreviewmode.validate = textmode.validate\npreviewmode._renderErrors = textmode._renderErrors\n\n// define modes\nmodule.exports = [\n  {\n    mode: 'preview',\n    mixin: previewmode,\n    data: 'json'\n  }\n];\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports) {\n\n\n/**\n * Keep track on any history, be able\n * @param {function} onChange\n * @param {function} calculateItemSize\n * @param {number} limit    Maximum size of all items in history\n * @constructor\n */\nfunction History (onChange, calculateItemSize, limit) {\n  this.onChange = onChange;\n  this.calculateItemSize = calculateItemSize || function () {\n    return 1;\n  };\n  this.limit = limit;\n\n  this.items = [];\n  this.index = -1;\n}\n\nHistory.prototype.add = function (item) {\n  // limit number of items in history so that the total size doesn't\n  // always keep at least one item in memory\n  while (this._calculateHistorySize() > this.limit && this.items.length > 1) {\n    this.items.shift();\n    this.index--;\n  }\n\n  // cleanup any redo action that are not valid anymore\n  this.items = this.items.slice(0, this.index + 1);\n\n  this.items.push(item);\n  this.index++;\n\n  this.onChange();\n};\n\nHistory.prototype._calculateHistorySize = function () {\n  var calculateItemSize = this.calculateItemSize;\n  var totalSize = 0;\n\n  this.items.forEach(function (item) {\n    totalSize += calculateItemSize(item);\n  });\n\n  return totalSize;\n}\n\nHistory.prototype.undo = function () {\n  if (!this.canUndo()) {\n    return;\n  }\n\n  this.index--;\n\n  this.onChange();\n\n  return this.items[this.index];\n};\n\nHistory.prototype.redo = function () {\n  if (!this.canRedo()) {\n    return;\n  }\n\n  this.index++;\n\n  this.onChange();\n\n  return this.items[this.index];\n};\n\nHistory.prototype.canUndo = function () {\n  return this.index > 0;\n};\n\nHistory.prototype.canRedo = function () {\n  return this.index < this.items.length - 1;\n};\n\nHistory.prototype.clear = function () {\n  this.items = [];\n  this.index = -1;\n\n  this.onChange();\n};\n\n\nmodule.exports = History;\n\n\n/***/ })\n/******/ ]);\n});","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport JSONEditor from 'jsoneditor/dist/jsoneditor-minimalist';\nimport 'jsoneditor/dist/jsoneditor.css';\nimport './fixAce.css';\n\n/**\n * @typedef {{\n * tree: string,\n * view: string,\n * form: string,\n * code: string,\n * text: string,\n * allValues: Array<string>\n * }} TJsonEditorModes\n */\nconst modes = {\n    tree: 'tree',\n    view: 'view',\n    form: 'form',\n    code: 'code',\n    text: 'text'\n};\n\nconst values = Object.values(modes);\n\nmodes.allValues = values;\n\n/**\n * @type {object}\n * @property {object} [value]\n * @property {string} [mode='tree'] - Set the editor mode.\n * @property {string} [name=undefined] - Initial field name for the root node\n * @property {object} [schema] - Validate the JSON object against a JSON schema.\n * @property {object} [schemaRefs] - Schemas that are referenced using\n * the $ref property\n * @property {Function} [onChange] - Set a callback function\n * triggered when the contents of the JSONEditor change.\n * Called without parameters. Will only be triggered on changes made by the user.\n * Return new json.\n * @property {Function} [onError] - Set a callback function triggered when an error occurs.\n * Invoked with the error as first argument.\n * The callback is only invoked for errors triggered by a users action,\n * like switching from code mode to tree mode or clicking\n * the Format button whilst the editor doesn't contain valid JSON.\n * @property {Function} [onModeChange] - Set a callback function\n * triggered right after the mode is changed by the user.\n * @property {object} [ace] - Provide a version of the Ace editor.\n * Only applicable when mode is code\n * @property {object} [ajv] - Provide a instance of ajv,\n * the library used for JSON schema validation.\n * @property {string} [theme] - Set the Ace editor theme,\n * uses included 'ace/theme/jsoneditor' by default.\n * @property {boolean} [history=false] - Enables history,\n * adds a button Undo and Redo to the menu of the JSONEditor. Only applicable when\n * mode is 'tree' or 'form'\n * @property {boolean} [navigationBar=true] - Adds navigation bar to the menu\n * the navigation bar visualize the current position on the\n * tree structure as well as allows breadcrumbs navigation.\n * @property {boolean} [statusBar=true] - Adds status bar to the buttom of the editor\n * the status bar shows the cursor position and a count of the selected characters.\n * Only applicable when mode is 'code' or 'text'.\n * @property {boolean} [search=true] - Enables a search box in\n * the upper right corner of the JSONEditor.\n * @property {Array<string>} [allowedModes] - Create a box in the editor menu where\n * the user can switch between the specified modes.\n * @property {string} [tag='div'] - Html element to render\n * @property {object} [htmlElementProps] - html element custom props\n * @property {Function} [innerRef] - callback to get html element reference\n */\nexport default class Editor extends Component {\n    static propTypes = {\n        //  jsoneditor props\n        value: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n        mode: PropTypes.oneOf(values),\n        name: PropTypes.string,\n        schema: PropTypes.object,\n        schemaRefs: PropTypes.object,\n\n        onChange: PropTypes.func,\n        onError: PropTypes.func,\n        onModeChange: PropTypes.func,\n\n        ace: PropTypes.object,\n        ajv: PropTypes.object,\n        theme: PropTypes.string,\n        history: PropTypes.bool,\n        navigationBar: PropTypes.bool,\n        statusBar: PropTypes.bool,\n        search: PropTypes.bool,\n        allowedModes: PropTypes.arrayOf(PropTypes.oneOf(values)),\n\n        //  custom props\n        tag: PropTypes.string,\n        htmlElementProps: PropTypes.object,\n        innerRef: PropTypes.func,\n    };\n\n    static defaultProps = {\n        tag: 'div',\n        mode: modes.tree,\n        history: false,\n        search: true,\n        navigationBar: true,\n        statusBar: true,\n    };\n\n    /**\n     * @type TJsonEditorModes\n     */\n    static modes = modes;\n\n    constructor(props) {\n        super(props);\n\n        this.htmlElementRef = null;\n        this.jsonEditor = null;\n\n        this.handleChange = this.handleChange.bind(this);\n        this.setRef = this.setRef.bind(this);\n        this.collapseAll = this.collapseAll.bind(this);\n        this.expandAll = this.expandAll.bind(this);\n        this.focus = this.focus.bind(this);\n    }\n\n    componentDidMount() {\n        const {\n            allowedModes,\n            innerRef,\n            htmlElementProps,\n            tag,\n            onChange,\n            ...rest\n        } = this.props;\n\n        this.createEditor({\n            ...rest,\n            modes: allowedModes\n        });\n    }\n\n    componentWillReceiveProps({\n        allowedModes,\n        schema,\n        name,\n        theme,\n        schemaRefs,\n        innerRef,\n        htmlElementProps,\n        tag,\n        onChange,\n        ...rest\n    }) {\n        if (this.jsonEditor) {\n            if (theme !== this.props.theme) {\n                this.createEditor({\n                    ...rest,\n                    theme,\n                    modes: allowedModes\n                });\n            } else {\n                if (schema !== this.props.schema\n                    || schemaRefs !== this.props.schemaRefs\n                ) {\n                    this.jsonEditor.setSchema(schema, schemaRefs);\n                }\n\n                if (name !== this.jsonEditor.getName()) {\n                    this.jsonEditor.setName(name);\n                }\n            }\n        }\n    }\n\n    shouldComponentUpdate({ htmlElementProps }) {\n        return htmlElementProps !== this.props.htmlElementProps;\n    }\n\n    componentWillUnmount() {\n        if (this.jsonEditor) {\n            this.jsonEditor.destroy();\n            this.jsonEditor = null;\n        }\n    }\n\n    setRef(element) {\n        this.htmlElementRef = element;\n        if (this.props.innerRef) {\n            this.props.innerRef(element);\n        }\n    }\n\n    createEditor({ value, ...rest }) {\n        if (this.jsonEditor) {\n            this.jsonEditor.destroy();\n        }\n\n        this.jsonEditor = new JSONEditor(this.htmlElementRef, {\n            onChange: this.handleChange,\n            ...rest\n        });\n\n        this.jsonEditor.set(value);\n    }\n\n    handleChange() {\n        if (this.props.onChange) {\n            try {\n                const text = this.jsonEditor.getText();\n                if (text === '') {\n                    this.props.onChange(null);\n                }\n\n                const currentJson = this.jsonEditor.get();\n                if (this.props.value !== currentJson) {\n                    this.props.onChange(currentJson);\n                }\n            } catch (err) {\n                this.err = err;\n            }\n        }\n    }\n\n    collapseAll() {\n        if (this.jsonEditor) {\n            this.jsonEditor.collapseAll();\n        }\n    }\n\n    expandAll() {\n        if (this.jsonEditor) {\n            this.jsonEditor.expandAll();\n        }\n    }\n\n    focus() {\n        if (this.jsonEditor) {\n            this.jsonEditor.focus();\n        }\n    }\n\n    render() {\n        const {\n            htmlElementProps,\n            tag\n        } = this.props;\n\n        return React.createElement(\n            tag,\n            {\n                ...htmlElementProps,\n                ref: this.setRef\n            }\n        );\n    }\n}\n"],"names":["window","module","installedModules","__webpack_require__","m","modules","exports","naturalSort","jsonlint","jsonMap","translate","parse","jsonString","JSON","err","validate","repair","jsString","chars","i","match","c","controlChars","\b","\f","\n","\r","\t","curr","next","isWhiteSpace","lastNonWhitespace","p","length","pp","nextNonWhiteSpace","iNext","skipBlockComment","skipComment","parseString","endQuote","string","hasOwnProperty","parseKey","key","regexp","test","indexOf","parseMongoDataType","value","dataType","push","join","escapeUnicodeChars","text","replace","charCodeAt","toString","slice","extend","a","b","prop","clear","type","object","undefined","Number","String","Boolean","RegExp","isArray","isUrlRegex","isUrl","obj","Object","prototype","call","getAbsoluteLeft","elem","getBoundingClientRect","left","pageXOffset","document","scrollLeft","getAbsoluteTop","top","pageYOffset","scrollTop","addClassName","className","classes","split","removeAllClassNames","removeClassName","index","splice","stripFormatting","divElement","childs","childNodes","iMax","child","style","removeAttribute","attributes","j","attribute","specified","name","setEndOfContentEditable","contentEditableElement","range","selection","createRange","selectNodeContents","collapse","getSelection","removeAllRanges","addRange","selectContentEditable","sel","nodeName","getRangeAt","rangeCount","setSelection","getSelectionOffset","startContainer","endContainer","startOffset","endOffset","container","parentNode","setSelectionOffset","params","firstChild","appendChild","createTextNode","setStart","setEnd","getInnerText","element","buffer","flush","this","set","nodeValue","hasChildNodes","innerText","prevChild","prevName","getInternetExplorerVersion","hasParentNode","parent","e","_ieVersion","rv","navigator","appName","ua","userAgent","exec","parseFloat","$1","isFirefox","addEventListener","action","listener","useCapture","attachEvent","f","event","removeEventListener","detachEvent","isChildOf","parsePath","jsonPath","path","parseProperty","Error","parseIndex","end","trim","stringifyPath","map","improveSchemaError","error","keyword","Array","schema","enums","stringify","more","message","additionalProperty","isPromise","then","catch","isValidValidationError","validationError","insideRect","margin","_margin","right","bottom","debounce","func","wait","immediate","timeout","context","args","arguments","callNow","clearTimeout","setTimeout","apply","textDiff","oldText","newText","len","start","oldEnd","newEnd","getInputSelection","el","normalizedValue","textInputRange","endRange","startIndex","endIndex","selectionStart","selectionEnd","parentElement","createTextRange","moveToBookmark","getBookmark","compareEndPoints","moveStart","moveEnd","_positionForIndex","textTillIndex","substring","row","column","lastIndexOf","getIndexForPosition","rows","Math","min","columnCount","getPositionForPath","paths","jsmap","me","result","forEach","pathArr","pointerName","pointer","pointers","line","getColorCSS","color","ele","createElement","toLowerCase","isValidColor","makeFieldTooltip","locale","tooltip","title","description","default","examples","example","get","findUniqueName","existingPropNames","strippedName","validName","getChildPaths","json","includeObjects","pathsMap","getObjectChildPaths","rootPath","isObject","keys","field","max","sort","array","direction","parsedPath","sign","sortedArray","aValue","bValue","sortObjectKeys","sortedFields","sortedObject","str","lower","num","numFloat","isNaN","formatSize","size","toFixed","KiB","MiB","GiB","limitCharacters","maxCharacterCount","contains","item","_lang","_locales","_defs","en","auto","appendText","appendTitle","appendSubmenuTitle","appendTitleAuto","ascending","ascendingTitle","actionsMenu","collapseAll","descending","descendingTitle","drag","duplicateKey","duplicateText","duplicateTitle","duplicateField","duplicateFieldError","cannotParseFieldError","cannotParseValueError","empty","expandAll","expandTitle","insert","insertTitle","insertSub","ok","redo","removeText","removeTitle","removeField","selectNode","showAll","showMore","showMoreStatus","sortTitle","sortTitleShort","sortFieldLabel","sortDirectionLabel","sortFieldTitle","sortAscending","sortAscendingTitle","sortDescending","sortDescendingTitle","transform","transformTitle","transformTitleShort","extract","extractTitle","transformQueryTitle","transformWizardLabel","transformWizardFilter","transformWizardSortBy","transformWizardSelectFields","transformQueryLabel","transformPreviewLabel","typeTitle","openUrl","undo","validationCannotMove","autoType","objectType","arrayType","stringType","modeCodeText","modeCodeTitle","modeFormText","modeFormTitle","modeTextText","modeTextTitle","modeTreeText","modeTreeTitle","modeViewText","modeViewTitle","modePreviewText","modePreviewTitle","zh-CN","pt-BR","tr","userLang","language","userLanguage","find","l","setLanguage","lang","langFound","console","setLanguages","languages","assign","data","DEFAULT_MODAL_ANCHOR","body","SIZE_LARGE","MAX_PREVIEW_CHARACTERS","PREVIEW_HISTORY_LIMIT","createAbsoluteAnchor","util","ContextMenu","items","options","dom","anchor","eventListeners","onClose","close","root","menu","list","focusButton","li","overflow","height","createMenuItems","domItems","separator","domItem","button","click","onclick","preventDefault","hide","submenu","divIcon","buttonSubmenu","divText","buttonExpand","innerHTML","submenuTitle","divExpand","_onExpandItem","focus","domSubItems","subItems","ul","maxHeight","_getVisibleButtons","buttons","expandedItem","subItem","visibleMenu","show","frame","ignoreParent","showBelow","anchorRect","parentRect","frameRect","absoluteAnchor","topGap","anchorHeight","offsetHeight","destroy","removeChild","alreadyVisible","padding","display","childsHeight","clientHeight","_onKeyDown","targetIndex","prevButton","nextButton","target","keynum","which","handled","shiftKey","stopPropagation","strictDeepEqual","first","second","keysSeen","key2","isFalse","trimLeft","TYPE_NUMBER","TYPE_ANY","TYPE_STRING","TYPE_ARRAY","TYPE_OBJECT","TYPE_EXPREF","TYPE_ARRAY_NUMBER","TYPE_ARRAY_STRING","TOK_UNQUOTEDIDENTIFIER","TOK_QUOTEDIDENTIFIER","TOK_RBRACKET","TOK_RPAREN","TOK_COMMA","TOK_COLON","TOK_RBRACE","TOK_NUMBER","TOK_CURRENT","TOK_EXPREF","TOK_PIPE","TOK_GTE","TOK_LTE","TOK_FLATTEN","TOK_STAR","TOK_FILTER","TOK_DOT","TOK_LBRACE","TOK_LBRACKET","TOK_LPAREN","TOK_LITERAL","basicTokens",".","*",",",":","{","}","]","(",")","@","operatorStartToken","<",">","=","!","skipChars"," ","isNum","ch","Lexer","tokenize","stream","identifier","token","tokens","_current","_consumeUnquotedIdentifier","_consumeNumber","_consumeLBracket","_consumeQuotedIdentifier","_consumeRawStringLiteral","literal","_consumeLiteral","_consumeOperator","maxLength","current","parseInt","startingChar","literalString","_looksLikeJSON","ex","bindingPower","Parser","TreeInterpreter","runtime","Runtime","interpreter","_interpreter","functionTable","abs","_func","_functionAbs","_signature","types","avg","_functionAvg","ceil","_functionCeil","_functionContains","ends_with","_functionEndsWith","floor","_functionFloor","_functionLength","_functionMap","_functionMax","merge","_functionMerge","variadic","max_by","_functionMaxBy","sum","_functionSum","starts_with","_functionStartsWith","_functionMin","min_by","_functionMinBy","_functionType","_functionKeys","values","_functionValues","_functionSort","sort_by","_functionSortBy","_functionJoin","reverse","_functionReverse","to_array","_functionToArray","to_string","_functionToString","to_number","_functionToNumber","not_null","_functionNotNull","expression","_loadTokens","ast","_lookahead","t","_lookaheadToken","rbp","leftToken","_advance","nud","currentToken","led","number","node","children","Not","_parseProjectionRHS","Star","_parseMultiselectHash","Flatten","_parseIndexExpression","_projectIfSlice","_parseMultiselectList","Expref","_match","_errorToken","tokenName","Dot","_parseDotRHS","Pipe","Or","And","condition","Filter","_parseComparator","tokenType","_parseSliceExpression","indexExpr","parts","comparator","lookahead","expressions","keyToken","keyName","pairs","identifierTypes","search","visit","matched","collected","sliceParams","computed","computeSliceParams","stop","step","base","objValues","filtered","finalResults","original","merged","resolvedArgs","callFunction","refNode","jmespathType","arrayLength","stepValueNegative","capSliceRange","actualValue","functionEntry","_validateArgs","signature","currentSpec","actualType","typeMatched","_getTypeName","_typeMatches","actual","expected","argValue","subtype","searchStr","suffix","originalStr","reversedStr","reversedArray","inputArray","mapped","exprefNode","elements","maxElement","localeCompare","minElement","listToSum","convertedValue","typeName","requiredType","that","decorated","exprA","exprB","maxRecord","resolvedArray","keyFunction","createKeyFunction","maxNumber","Infinity","minRecord","minNumber","allowedTypes","x","msg","compile","parser","picoModal","onSort","selectedPath","selectedDirection","content","overlayClass","modalClass","afterCreate","modal","form","modalElem","querySelector","setDirection","option","preprocessPath","getAttribute","onsubmit","afterClose","jmespath","Selectr","stringifyPartial","onTransform","wizard","filterField","filterRelation","filterValue","sortField","sortOrder","selectFields","query","preview","fontStyle","formattedPath","filterOption","sortOption","selectablePaths","filter","selectFieldsPart","selectrFilterField","defaultSelected","clearable","allowDeselect","placeholder","selectrFilterRelation","selectrSortField","selectrSortOrder","selectrSelectFields","multiple","generateQueryFromWizard","field1","examplePath","concat","value1","field2","selected","debouncedUpdatePreview","on","oninput","transformed","disabled","select","ModeSwitcher","modes","onSwitch","availableModes","code","tree","view","mode","currentMode","currentTitle","box","position","ace","VanillaPicker","Picker","polyfill","defineProperty","configurable","enumerable","writable","Element","CharacterData","DocumentType","startsWith","searchString","substr","callback","s","insensitive","oFxNcL","oFyNcL","re","sre","dre","hre","ore","y","xN","yN","xD","Date","yD","cLoc","numS","onDestroy","getRootNode","fn","width","boxSizing","destroyIfOutside","mousedown","mousewheel","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","isNode","Node","nodeType","observable","callbacks","watch","bind","trigger","detail","unprevented","isHidden","getComputedStyle","Elem","make","tag","stylize","styles","opacity","clazz","html","onClick","attr","setAttribute","anyAncestor","predicate","isVisible","autoinc","buildElemAccessor","builder","escapeKey","tabKey","documentElement","keycode","keyCode","isString","afterCreateEvent","beforeShowEvent","afterShowEvent","beforeCloseEvent","afterCloseEvent","getOption","opt","defaultValue","iface","built","build","shadowElem","closeElem","forceClose","returnIface","id","zIndex","-ms-transform","-moz-transform","-webkit-transform","-o-transform","backgroundColor","borderRadius","buildModal","overlay","background","buildOverlay","border","cursor","fontSize","textAlign","lineHeight","buildClose","isEnabled","matches","selector","msMatchesSelector","webkitMatchesSelector","canFocus","hasAttribute","firstFocusable","getElementsByTagName","focused","beforeShow","activeElement","afterShow","focusable","last","lastFocusable","manageFocus","overlayElem","buildDom","opts","beforeClose","origOverflow","manageBodyOverflow","ErrorTable","validateCustom","showSortModal","showTransformModal","textmode","DEFAULT_THEME","load","format","create","statusBar","mainMenuBar","enableSort","enableTransform","indentation","_ace","warn","theme","onTextSelectionChange","aceEditor","textarea","validateSchema","annotations","_debouncedValidate","DEBOUNCE_INTERVAL","clientWidth","onkeydown","buttonFormat","_onChange","_onError","buttonCompact","compact","_showSortModal","_showTransformModal","buttonRepair","modeSwitcher","setMode","poweredBy","href","open","isReadOnly","onEditable","editorDom","edit","aceSession","getSession","$blockScrolling","setTheme","setOptions","readOnly","setShowPrintMargin","setFontSize","setTabSize","setUseSoftTabs","setUseWrapMode","originalSetAnnotations","setAnnotations","commands","bindKey","_onSelect","spellcheck","onchange","onselect","onmousedown","_onMouseDown","onblur","_onBlur","errorTable","errorTableVisible","onToggleVisibility","onFocusLine","isFocused","setTextSelection","onChangeHeight","totalHeight","marginBottom","paddingBottom","getErrorTable","curserInfoElements","lnLabel","lnVal","colLabel","colVal","countLabel","countVal","getErrorCounter","getWarningIcon","getErrorIcon","setSchema","schemaRefs","onChangeDisabled","onChange","onChangeText","getText","modalAnchor","sortedBy","sortedJson","updatedJson","_updateCursorInfo","_emitSelectionChange","ctrlKey","col","count","selectionRange","cursorInfo","updateDisplay","curserPos","getCursorPosition","selectedText","getSelectedText","_selectionChangedHandler","currentSelection","getTextSelection","_refreshAnnotations","session","errEnnotations","getAnnotations","annotation","_setText","repairedText","resize","setText","update","updateText","getValue","jsonText","clearHistory","escapeUnicode","setValue","getUndoManager","reset","schemaErrors","parseErrors","errors","validationSequence","seq","onValidate","customValidationErrors","_renderErrors","errorPaths","reduce","acc","dataPath","errorLocations","errLoc","validationErrors","source","setErrors","aceSelection","getRange","lead","getSelectionLead","startPos","endPos","setSelectionRange","selectionScrollPos","scrollHeight","setRange","scrollToLine","mixin","config","validationErrorsContainer","additionalErrorsIndication","validationErrorIcon","validationErrorCount","parseErrorIndication","toggleTableVisibility","tbody","loc","trEl","onscroll","validationErrorsCount","some","Ajv","treemode","previewmode","JSONEditor","ieVersion","onError","change","editable","onChangeJSON","VALID_OPTIONS","_create","Promise","setName","getName","oldMode","asText","onModeChange","getMode","ajv","allErrors","verbose","schemaId","$data","addMetaSchema","ref","removeSchema","addSchema","refresh","registerMode","reserved","define","acequire","JsonHighlightRules","$rules","regex","defaultToken","comment","oop","TextHighlightRules","inherits","MatchingBraceOutdent","Range","checkOutdent","input","autoOutdent","doc","getLine","openBracePos","findMatchingBracket","indent","$getIndent","BaseFoldMode","FoldMode","commentRegex","foldingStartMarker","foldingStopMarker","singleLineBlockCommentRe","tripleStarBlockCommentRe","startRegionRe","_getFoldWidgetBase","getFoldWidget","foldStyle","fw","getFoldWidgetRange","forceMultiline","getCommentRegionBlock","openingBracketBlock","getCommentFoldRange","isMultiLine","getSectionRange","closingBracketBlock","startIndent","startRow","startColumn","endRow","maxRow","getLength","subRange","depth","Mode","HighlightRules","$outdent","$behaviour","CstyleBehaviour","foldingRules","CStyleFoldMode","TextMode","WorkerClient","getNextLineIndent","state","tab","createWorker","worker","attachToDocument","getDocument","clearAnnotations","$id","src","HashHandler","keyUtil","importCssString","SearchBox","editor","showReplaceForm","div","setSession","$init","setEditor","searchBox","renderer","scroller","searchRange","$syncOptions","$initElements","sb","replaceBox","searchOption","replaceOption","regExpOption","caseSensitiveOption","wholeWordOption","searchInput","replaceInput","searchCounter","_this","addListener","activeInput","srcElement","$searchBarKb","addCommandKeyListener","hashId","keyString","keyCodeToString","command","findKeyCommand","stopEvent","$onChange","delayedCall","schedule","highlight","$closeSearchBarKb","bindKeys","Ctrl-f|Command-f","isReplace","checked","Ctrl-H|Command-Option-F","Ctrl-G|Command-G","findNext","Ctrl-Shift-G|Command-Shift-G","findPrev","esc","Return","Shift-Return","Alt-Return","replaceAll","findAll","Tab","addCommands","win","mac","setSearchRange","getSelectionRange","searchRangeMarker","addMarker","removeMarker","preventScroll","setCssClass","textContent","$search","$options","updateBackMarkers","skipCurrent","backwards","noMatch","wrap","regExp","caseSensitive","wholeWord","_emit","updateCounter","all","before","getTextRange","offset","positionToIndex","lastIndex","MAX_COUNT","getReadOnly","replaceAndFindNext","active","off","keyBinding","removeKeyboardHandler","addKeyboardHandler","Search","Highlighter","NodeHistory","TreePath","autocomplete","highlighter","multiselection","nodes","errorNodes","focusTarget","_setOptions","history","_createFrame","_createTable","navigationBar","onSelectionChange","colorPicker","onColorPicker","popup","onDone","hex","rgba","timestampTag","onEvent","Function","table","_setRoot","expand","deepEqual","isEmpty","forceSearch","startNode","findNodeByPath","endNode","repairedJsonText","repairJsonText","updateField","scrollableContent","treePath","setParent","setField","getDom","results","_onAction","add","getDomSelection","selectedNode","findNodeByInternalPath","_updateTreePath","getNodePath","onClassName","recursivelyUpdateCssClassesOnNodes","onNodeName","recursivelyUpdateNodeName","findNode","entry","_validateCustom","_renderValidationErrors","setError","parentPairs","findParents","pair","customValidateResults","resolve","customValidationPathErrors","valid","reject","updateDom","recurse","startAutoScroll","mouseY","autoScrollStep","autoScrollTimer","setInterval","stopAutoScroll","setDomSelection","domName","getNodeFromTarget","getInternalPath","scrollTo","animateTimeout","animateCallback","finalScrollTop","animate","diff","contentOuter","_onEvent","onkeyup","oncut","onpaste","onmouseup","onmouseover","onmouseout","onfocusin","onfocusout","_onUndo","_onRedo","canUndo","canRedo","navBar","onSectionSelected","_onTreePathSectionSelected","onContextMenuItemSelected","_onTreePathMenuItemSelected","targetIsColorPicker","_showAutoComplete","_startDragDistance","_updateDragDistance","showContextMenu","hasMoved","deselect","onDragStart","_onMultiSelectStart","pathNodes","pathObjs","pathObj","childNode","setPath","expandTo","selectionObj","dragDistanceEvent","initialTarget","initialPageX","pageX","initialPageY","pageY","dragDistance","diffX","diffY","sqrt","mousemove","_onMultiSelect","mouseup","_onMultiSelectEnd","_findTopLevelNodes","firstNode","isDescendantOf","clearStartAndEnd","selectionChanged","setSelected","expandPathToNode","startPath","endPath","startChild","endChild","jsonElementType","self","getOptions","getPath","hideDropDown","startFrom","altKey","metaKey","previous","colgroupContent","selectedNodes","onDuplicate","onRemove","onCreateMenu","selection1","selection2","serialize","_getNodeInstancesByRange","getIndex","nextSibling","getNodesByRange","serializableNodes","locked","setHighlight","_cancelUnhighlight","unhighlight","unhighlightTimer","lock","unlock","actions","editField","parentPath","oldValue","newValue","editValue","updateValue","changeType","oldType","newType","appendNodes","insertBeforeNodes","beforeNode","beforePath","insertBefore","insertAfterNodes","afterNode","afterPath","insertAfter","removeNodes","append","duplicateNodes","clonePaths","clone","existingFieldNames","getFieldNames","moveNodes","oldParentNode","oldParentPath","newParentNode","newParentPath","oldBeforeNode","oldIndex","newIndex","fieldNames","moveBefore","newParentPathRedo","oldParentPathRedo","newBeforeNode","newIndexRedo","oldIndexRedo","hideChilds","oldChilds","updateIndexes","showChilds","newChilds","setInternalValue","timestamp","oldSelection","newSelection","trace","yy","symbols_","JSONString","STRING","JSONNumber","NUMBER","JSONNullLiteral","NULL","JSONBooleanLiteral","TRUE","FALSE","JSONText","JSONValue","EOF","JSONObject","JSONArray","JSONMemberList","JSONMember","[","JSONElementList","$accept","$end","terminals_","2","4","6","8","10","11","14","17","18","21","22","23","24","productions_","performAction","yytext","yyleng","yylineno","yystate","$$","_$","$0","$","3","5","7","9","12","13","15","16","1","19","20","25","defaultActions","parseError","hash","stack","vstack","lstack","recovering","lexer","setInput","yylloc","yyloc","lex","symbol","preErrorSymbol","r","n","yyval","errStr","showPosition","first_line","last_line","first_column","last_column","_input","_more","_less","done","conditionStack","unput","less","pastInput","past","upcomingInput","pre","tempMatch","lines","rules","_currentRules","flex","begin","popState","pop","conditions","topState","pushState","yy_","$avoiding_name_collisions","YY_START","INITIAL","inclusive","escapedChars","\"","/","\\","pos","_parse","ptr","topLevel","whitespace","char","getChar","read","arr","backChar","wasUnexpectedToken","parseArray","getLoc","propPtr","escapeJsonPointer","mapLoc","parseObject","numStr","getDigits","parseNumber","unexpectedToken","loop","getCharCode","checkUnexpectedEnd","fromCharCode","digits","SyntaxError","_","validType","wsPos","wsColumn","wsLine","repeat","_stringify","_data","lvl","out","quoted","toJSON","stringifyArray","stringifyObject","itemLvl","itemPtr","propLvl","VALID_TYPES","ESC_QUOTE","ESC_B","ESC_F","ESC_N","ESC_R","ESC_T","ESC_0","ESC_1","delay","lastText","td","divInput","tableInput","tbodySearch","refreshSearch","_onDelayedSearch","_onSearch","_onKeyUp","searchNext","searchPrevious","resultIndex","_setActiveResult","activeResult","prevNode","searchFieldActive","searchValueActive","_clearDelay","MAX_SEARCH_RESULTS","activeResultIndex","resultCount","idx","sepEl","pathEl","selectionCallback","contentMenuClicked","contextMenuCallback","leftRectPos","offsetWidth","showAllBtn","appendNodeFactory","showMoreNodeFactory","expanded","fieldEditable","internalValue","_debouncedOnChangeValue","_onChangeValue","_debouncedOnChangeField","_onChangeField","visibleChilds","getMaxVisibleChilds","getField","maxVisibleChilds","_updateEditability","unshift","internalPath","shift","parents","errorChild","updateError","fieldError","valueError","tdError","tdValue","popover","onfocus","directions","contentRect","popoverRect","previousField","_getDomField","childValue","visible","previousChilds","_getType","childField","findChildByProperty","recreateDom","previousValue","domAnchor","_detachFromDom","clearDom","_attachToDom","_getDomValue","getInternalValue","getLevel","fieldInnerText","valueInnerText","cloneChilds","childClone","getAppendDom","nextTr","_getNextTr","getShowMoreDom","resetVisibleChilds","_updateCssClassName","addClasses","currentNode","_hasChilds","newTr","trTemp","AppendNode","searchField","searchValue","_updateDomField","_updateDomValue","offsetTop","focusElement","elementName","editableDiv","containsNode","removedNode","_remove","props","propCount","_clearValueError","_unescapeHTML","_setValueError","_setFieldError","_clearFieldError","undoDiff","redoDiff","domValue","classNames","checkbox","tdCheckbox","enum","getUTCMilliseconds","tdSelect","valueFieldHTML","visibility","tdColor","_deleteDomColor","valueOf","date","toISOString","_updateDomDefault","domField","forceUnique","inputElement","tdDrag","domDrag","tdMenu","tdField","_createDomTree","lastNode","draggedNode","offsetY","onDrag","onDragEnd","oldCursor","oldPaths","oldParent","oldNextNode","mouseX","level","trThis","trPrev","trNext","trFirst","trLast","trRoot","nodePrev","nodeNext","topThis","topPrev","topFirst","heightThis","bottomNext","heightNext","moved","previousSibling","round","levelNext","_nextNode","sameParent","_createDomField","isFirst","domTree","marginLeft","fieldText","contentEditable","_findSchema","_escapeHTML","_updateSchema","updateNodeName","_updateDomIndexes","_findEnum","composite","oneOf","anyOf","allOf","childSchema","foundSchema","allSchemas","nextPath","patternProperties","properties","_createDomValue","_createDomExpandButton","borderCollapse","tdExpand","tdSeparator","expandable","_onExpand","_showColorPicker","offsetX","onKeyDown","info","nextNode","nextDom","_onInsertBefore","_onInsertAfter","_lastNode","_getElementName","homeNode","_firstNode","prevElement","_previousElement","appendDom","nextNode2","_previousNode","nextElement","_nextElement","prevDom","colorAnchor","excludeNode","firstIndex","blurNodes","clones","newNode","_onAppend","_onChangeType","order","nodeA","getNestedChild","nodeB","valueA","valueB","lastTr","oldInternalValue","newInternalValue","ShowMoreNode","lastDom","lastChild","TYPE_TITLES","addTemplates","templates","template","titles","appendSubmenu","insertSubmenu","pathArray","htmlEscaped","escapedText","_escapeJSON","escaped","trAppend","tdAppend","domText","paddingLeft","showMoreButton","showAllButton","moreContents","moreText","_getShowMoreText","tdContents","moreTr","totalChilds","Events","defaultConfig","searchable","sortSelected","closeOnScroll","nativeDropdown","taggable","tagPlaceholder","_events","emit","each","d","hasClass","classList","addClass","removeClass","remove","closest","isInt","val","isFinite","h","rect","w","includes","truncate","isset","appendItem","custom","render","createDocumentFragment","pagination","pages","pageIndex","customOption","childElementCount","navIndex","createItem","renderOption","class","role","aria-selected","clearSearch","searching","inputContainer","total","page","rendered","originalType","originalIndex","tabIndex","originalOptionCount","opened","navigating","mobileDevice","customSelected","renderSelection","requiresPagination","customClass","aria-expanded","label","dropdown","aria-hidden","notice","tags","selectedValues","getSelectedProperties","selectedIndexes","selectClear","tagIndex","autocorrect","autocapitalize","tagSeperators","inputClear","group","optgroup","Option","paginate","placeEl","setPlaceholder","disable","bindEvents","optsRect","selectedIndex","getSelected","querySelectorAll","events","dismiss","navigate","prevEl","lastElementChild","firstElementChild","changedTouches","toggle","indexes","changes","added","removed","getChangedOptions","k","setMessage","invert","paginateItems","selectedValue","replaceChild","maxSelections","docFrag","btn","$2","ac","bc","ax","by","nn","tg","o","force","selIndex","valIndex","toObject","toJson","checkDuplicate","dupe","getOptionByIndex","getOptionByValue","removeAll","removeMessage","firstEl","blur","enable","serialise","v","rt","wh","innerHeight","isInverted","stringifyValue","space","limit","childIndent","times","res","_space","output","containsArray","defaultFilterFunction","contain","confirmKeys","fontFamily","wrapper","outline","spacer","leftSide","dropDown","setEndOfContenteditable","moveToElementText","calculateWidthForText","whiteSpace","fontWeight","ix","rs","onArrowDown","onArrowUp","onEnter","onTab","elementHint","elementStyle","getPropertyValue","marginTop","borderColor","cloneNode","keyDownHandler","onBlurHandler","repaint","dropDownController","optionsLength","realInnerText","vph","distanceToTop","distanceToBottom","filterFn","divRow","onMouseOver","onMouseOut","onMouseDown","__hint","move","onmouseselection","wasDropDownHidden","isDark","cssClass","cssText","History","busy","busyContent","previewContent","previewText","executeWithBusyMessage","_applyHistory","fileSizeInfo","arrayInfo","_renderPreview","_setAndFireOnChange","_setTextAndFireOnChange","_set","_pushHistory","calculateItemSize","_calculateHistorySize","totalSize","getter","Symbol","toStringTag","__esModule","ns","property","moduleId","factory","allValues","Editor","Component","componentDidMount","allowedModes","rest","createEditor","componentWillReceiveProps","jsonEditor","shouldComponentUpdate","htmlElementProps","componentWillUnmount","setRef","htmlElementRef","innerRef","handleChange","currentJson","React","_Component","propTypes","PropTypes","oneOfType","bool","arrayOf","defaultProps"],"mappings":"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"}